if (typeof jQuery === "undefined") {
    throw new Error("Bootstrap's JavaScript requires jQuery")
} + function (e) {
    "use strict";

    function t() {
        var e = document.createElement("bootstrap");
        var t = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (var i in t) {
            if (e.style[i] !== undefined) {
                return {
                    end: t[i]
                }
            }
        }
        return false
    }
    e.fn.emulateTransitionEnd = function (t) {
        var i = false,
            n = this;
        e(this).one(e.support.transition.end, function () {
            i = true
        });
        var r = function () {
            if (!i) e(n).trigger(e.support.transition.end)
        };
        setTimeout(r, t);
        return this
    };
    e(function () {
        e.support.transition = t()
    })
}(jQuery); + function (e) {
    "use strict";
    var t = '[data-dismiss="alert"]';
    var i = function (i) {
        e(i).on("click", t, this.close)
    };
    i.prototype.close = function (t) {
        var i = e(this);
        var n = i.attr("data-target");
        if (!n) {
            n = i.attr("href");
            n = n && n.replace(/.*(?=#[^\s]*$)/, "")
        }
        var r = e(n);
        if (t) t.preventDefault();
        if (!r.length) {
            r = i.hasClass("alert") ? i : i.parent()
        }
        r.trigger(t = e.Event("close.bs.alert"));
        if (t.isDefaultPrevented()) return;
        r.removeClass("in");

        function s() {
            r.trigger("closed.bs.alert").remove()
        }
        e.support.transition && r.hasClass("fade") ? r.one(e.support.transition.end, s).emulateTransitionEnd(150) : s()
    };
    var n = e.fn.alert;
    e.fn.alert = function (t) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.alert");
            if (!r) n.data("bs.alert", r = new i(this));
            if (typeof t == "string") r[t].call(n)
        })
    };
    e.fn.alert.Constructor = i;
    e.fn.alert.noConflict = function () {
        e.fn.alert = n;
        return this
    };
    e(document).on("click.bs.alert.data-api", t, i.prototype.close)
}(jQuery); + function (e) {
    "use strict";
    var t = function (i, n) {
        this.$element = e(i);
        this.options = e.extend({}, t.DEFAULTS, n);
        this.isLoading = false
    };
    t.DEFAULTS = {
        loadingText: "loading..."
    };
    t.prototype.setState = function (t) {
        var i = "disabled";
        var n = this.$element;
        var r = n.is("input") ? "val" : "html";
        var s = n.data();
        t = t + "Text";
        if (!s.resetText) n.data("resetText", n[r]());
        n[r](s[t] || this.options[t]);
        setTimeout(e.proxy(function () {
            if (t == "loadingText") {
                this.isLoading = true;
                n.addClass(i).attr(i, i)
            }
            else if (this.isLoading) {
                this.isLoading = false;
                n.removeClass(i).removeAttr(i)
            }
        }, this), 0)
    };
    t.prototype.toggle = function () {
        var e = true;
        var t = this.$element.closest('[data-toggle="buttons"]');
        if (t.length) {
            var i = this.$element.find("input");
            if (i.prop("type") == "radio") {
                if (i.prop("checked") && this.$element.hasClass("active")) e = false;
                else t.find(".active").removeClass("active")
            }
            if (e) i.prop("checked", !this.$element.hasClass("active")).trigger("change")
        }
        if (e) this.$element.toggleClass("active")
    };
    var i = e.fn.button;
    e.fn.button = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.button");
            var s = typeof i == "object" && i;
            if (!r) n.data("bs.button", r = new t(this, s));
            if (i == "toggle") r.toggle();
            else if (i) r.setState(i)
        })
    };
    e.fn.button.Constructor = t;
    e.fn.button.noConflict = function () {
        e.fn.button = i;
        return this
    };
    e(document).on("click.bs.button.data-api", "[data-toggle^=button]", function (t) {
        var i = e(t.target);
        if (!i.hasClass("btn")) i = i.closest(".btn");
        i.button("toggle");
        t.preventDefault()
    })
}(jQuery); + function (e) {
    "use strict";
    var t = function (t, i) {
        this.$element = e(t);
        this.$indicators = this.$element.find(".carousel-indicators");
        this.options = i;
        this.paused = this.sliding = this.interval = this.$active = this.$items = null;
        this.options.pause == "hover" && this.$element.on("mouseenter", e.proxy(this.pause, this)).on("mouseleave", e.proxy(this.cycle, this))
    };
    t.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: true
    };
    t.prototype.cycle = function (t) {
        t || (this.paused = false);
        this.interval && clearInterval(this.interval);
        this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval));
        return this
    };
    t.prototype.getActiveIndex = function () {
        this.$active = this.$element.find(".item.active");
        this.$items = this.$active.parent().children();
        return this.$items.index(this.$active)
    };
    t.prototype.to = function (t) {
        var i = this;
        var n = this.getActiveIndex();
        if (t > this.$items.length - 1 || t < 0) return;
        if (this.sliding) return this.$element.one("slid.bs.carousel", function () {
            i.to(t)
        });
        if (n == t) return this.pause().cycle();
        return this.slide(t > n ? "next" : "prev", e(this.$items[t]))
    };
    t.prototype.pause = function (t) {
        t || (this.paused = true);
        if (this.$element.find(".next, .prev").length && e.support.transition) {
            this.$element.trigger(e.support.transition.end);
            this.cycle(true)
        }
        this.interval = clearInterval(this.interval);
        return this
    };
    t.prototype.next = function () {
        if (this.sliding) return;
        return this.slide("next")
    };
    t.prototype.prev = function () {
        if (this.sliding) return;
        return this.slide("prev")
    };
    t.prototype.slide = function (t, i) {
        var n = this.$element.find(".item.active");
        var r = i || n[t]();
        var s = this.interval;
        var a = t == "next" ? "left" : "right";
        var o = t == "next" ? "first" : "last";
        var l = this;
        if (!r.length) {
            if (!this.options.wrap) return;
            r = this.$element.find(".item")[o]()
        }
        if (r.hasClass("active")) return this.sliding = false;
        var u = e.Event("slide.bs.carousel", {
            relatedTarget: r[0],
            direction: a
        });
        this.$element.trigger(u);
        if (u.isDefaultPrevented()) return;
        this.sliding = true;
        s && this.pause();
        if (this.$indicators.length) {
            this.$indicators.find(".active").removeClass("active");
            this.$element.one("slid.bs.carousel", function () {
                var t = e(l.$indicators.children()[l.getActiveIndex()]);
                t && t.addClass("active")
            })
        }
        if (e.support.transition && this.$element.hasClass("slide")) {
            r.addClass(t);
            r[0].offsetWidth;
            n.addClass(a);
            r.addClass(a);
            n.one(e.support.transition.end, function () {
                r.removeClass([t, a].join(" ")).addClass("active");
                n.removeClass(["active", a].join(" "));
                l.sliding = false;
                setTimeout(function () {
                    l.$element.trigger("slid.bs.carousel")
                }, 0)
            }).emulateTransitionEnd(n.css("transition-duration").slice(0, -1) * 1e3)
        }
        else {
            n.removeClass("active");
            r.addClass("active");
            this.sliding = false;
            this.$element.trigger("slid.bs.carousel")
        }
        s && this.cycle();
        return this
    };
    var i = e.fn.carousel;
    e.fn.carousel = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.carousel");
            var s = e.extend({}, t.DEFAULTS, n.data(), typeof i == "object" && i);
            var a = typeof i == "string" ? i : s.slide;
            if (!r) n.data("bs.carousel", r = new t(this, s));
            if (typeof i == "number") r.to(i);
            else if (a) r[a]();
            else if (s.interval) r.pause().cycle()
        })
    };
    e.fn.carousel.Constructor = t;
    e.fn.carousel.noConflict = function () {
        e.fn.carousel = i;
        return this
    };
    e(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function (t) {
        var i = e(this),
            n;
        var r = e(i.attr("data-target") || (n = i.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, ""));
        var s = e.extend({}, r.data(), i.data());
        var a = i.attr("data-slide-to");
        if (a) s.interval = false;
        r.carousel(s);
        if (a = i.attr("data-slide-to")) {
            r.data("bs.carousel").to(a)
        }
        t.preventDefault()
    });
    e(window).on("load", function () {
        e('[data-ride="carousel"]').each(function () {
            var t = e(this);
            t.carousel(t.data())
        })
    })
}(jQuery); + function (e) {
    "use strict";
    var t = function (i, n) {
        this.$element = e(i);
        this.options = e.extend({}, t.DEFAULTS, n);
        this.transitioning = null;
        if (this.options.parent) this.$parent = e(this.options.parent);
        if (this.options.toggle) this.toggle()
    };
    t.DEFAULTS = {
        toggle: true
    };
    t.prototype.dimension = function () {
        var e = this.$element.hasClass("width");
        return e ? "width" : "height"
    };
    t.prototype.show = function () {
        if (this.transitioning || this.$element.hasClass("in")) return;
        var t = e.Event("show.bs.collapse");
        this.$element.trigger(t);
        if (t.isDefaultPrevented()) return;
        var i = this.$parent && this.$parent.find("> .panel > .in");
        if (i && i.length) {
            var n = i.data("bs.collapse");
            if (n && n.transitioning) return;
            i.collapse("hide");
            n || i.data("bs.collapse", null)
        }
        var r = this.dimension();
        this.$element.removeClass("collapse").addClass("collapsing")[r](0);
        this.transitioning = 1;
        var s = function () {
            this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto");
            this.transitioning = 0;
            this.$element.trigger("shown.bs.collapse")
        };
        if (!e.support.transition) return s.call(this);
        var a = e.camelCase(["scroll", r].join("-"));
        this.$element.one(e.support.transition.end, e.proxy(s, this)).emulateTransitionEnd(350)[r](this.$element[0][a])
    };
    t.prototype.hide = function () {
        if (this.transitioning || !this.$element.hasClass("in")) return;
        var t = e.Event("hide.bs.collapse");
        this.$element.trigger(t);
        if (t.isDefaultPrevented()) return;
        var i = this.dimension();
        this.$element[i](this.$element[i]())[0].offsetHeight;
        this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");
        this.transitioning = 1;
        var n = function () {
            this.transitioning = 0;
            this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
        };
        if (!e.support.transition) return n.call(this);
        this.$element[i](0).one(e.support.transition.end, e.proxy(n, this)).emulateTransitionEnd(350)
    };
    t.prototype.toggle = function () {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    };
    var i = e.fn.collapse;
    e.fn.collapse = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.collapse");
            var s = e.extend({}, t.DEFAULTS, n.data(), typeof i == "object" && i);
            if (!r && s.toggle && i == "show") i = !i;
            if (!r) n.data("bs.collapse", r = new t(this, s));
            if (typeof i == "string") r[i]()
        })
    };
    e.fn.collapse.Constructor = t;
    e.fn.collapse.noConflict = function () {
        e.fn.collapse = i;
        return this
    };
    e(document).on("click.bs.collapse.data-api", "[data-toggle=collapse]", function (t) {
        var i = e(this),
            n;
        var r = i.attr("data-target") || t.preventDefault() || (n = i.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "");
        var s = e(r);
        var a = s.data("bs.collapse");
        var o = a ? "toggle" : i.data();
        var l = i.attr("data-parent");
        var u = l && e(l);
        if (!a || !a.transitioning) {
            if (u) u.find('[data-toggle=collapse][data-parent="' + l + '"]').not(i).addClass("collapsed");
            i[s.hasClass("in") ? "addClass" : "removeClass"]("collapsed")
        }
        s.collapse(o)
    })
}(jQuery); + function (e) {
    "use strict";
    var t = ".dropdown-backdrop";
    var i = "[data-toggle=dropdown]";
    var n = function (t) {
        e(t).on("click.bs.dropdown", this.toggle)
    };
    n.prototype.toggle = function (t) {
        var i = e(this);
        if (i.is(".disabled, :disabled")) return;
        var n = s(i);
        var a = n.hasClass("open");
        r();
        if (!a) {
            if ("ontouchstart" in document.documentElement && !n.closest(".navbar-nav").length) {
                e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click", r)
            }
            var o = {
                relatedTarget: this
            };
            n.trigger(t = e.Event("show.bs.dropdown", o));
            if (t.isDefaultPrevented()) return;
            n.toggleClass("open").trigger("shown.bs.dropdown", o);
            i.focus()
        }
        return false
    };
    n.prototype.keydown = function (t) {
        if (!/(38|40|27)/.test(t.keyCode)) return;
        var n = e(this);
        t.preventDefault();
        t.stopPropagation();
        if (n.is(".disabled, :disabled")) return;
        var r = s(n);
        var a = r.hasClass("open");
        if (!a || a && t.keyCode == 27) {
            if (t.which == 27) r.find(i).focus();
            return n.click()
        }
        var o = " li:not(.divider):visible a";
        var l = r.find("[role=menu]" + o + ", [role=listbox]" + o);
        if (!l.length) return;
        var u = l.index(l.filter(":focus"));
        if (t.keyCode == 38 && u > 0) u--;
        if (t.keyCode == 40 && u < l.length - 1) u++;
        if (!~u) u = 0;
        l.eq(u).focus()
    };

    function r(n) {
        e(t).remove();
        e(i).each(function () {
            var t = s(e(this));
            var i = {
                relatedTarget: this
            };
            if (!t.hasClass("open")) return;
            t.trigger(n = e.Event("hide.bs.dropdown", i));
            if (n.isDefaultPrevented()) return;
            t.removeClass("open").trigger("hidden.bs.dropdown", i)
        })
    }

    function s(t) {
        var i = t.attr("data-target");
        if (!i) {
            i = t.attr("href");
            i = i && /#[A-Za-z]/.test(i) && i.replace(/.*(?=#[^\s]*$)/, "")
        }
        var n = i && e(i);
        return n && n.length ? n : t.parent()
    }
    var a = e.fn.dropdown;
    e.fn.dropdown = function (t) {
        return this.each(function () {
            var i = e(this);
            var r = i.data("bs.dropdown");
            if (!r) i.data("bs.dropdown", r = new n(this));
            if (typeof t == "string") r[t].call(i)
        })
    };
    e.fn.dropdown.Constructor = n;
    e.fn.dropdown.noConflict = function () {
        e.fn.dropdown = a;
        return this
    };
    e(document).on("click.bs.dropdown.data-api", r).on("click.bs.dropdown.data-api", ".dropdown form", function (e) {
        e.stopPropagation()
    }).on("click.bs.dropdown.data-api", i, n.prototype.toggle).on("keydown.bs.dropdown.data-api", i + ", [role=menu], [role=listbox]", n.prototype.keydown)
}(jQuery); + function (e) {
    "use strict";
    var t = function (t, i) {
        this.options = i;
        this.$element = e(t);
        this.$backdrop = this.isShown = null;
        if (this.options.remote) {
            this.$element.find(".modal-content").load(this.options.remote, e.proxy(function () {
                this.$element.trigger("loaded.bs.modal")
            }, this))
        }
    };
    t.DEFAULTS = {
        backdrop: true,
        keyboard: true,
        show: true
    };
    t.prototype.toggle = function (e) {
        return this[!this.isShown ? "show" : "hide"](e)
    };
    t.prototype.show = function (t) {
        var i = this;
        var n = e.Event("show.bs.modal", {
            relatedTarget: t
        });
        this.$element.trigger(n);
        if (this.isShown || n.isDefaultPrevented()) return;
        this.isShown = true;
        this.escape();
        this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', e.proxy(this.hide, this));
        this.backdrop(function () {
            var n = e.support.transition && i.$element.hasClass("fade");
            if (!i.$element.parent().length) {
                i.$element.appendTo(document.body)
            }
            i.$element.show().scrollTop(0);
            if (n) {
                i.$element[0].offsetWidth
            }
            i.$element.addClass("in").attr("aria-hidden", false);
            i.enforceFocus();
            var r = e.Event("shown.bs.modal", {
                relatedTarget: t
            });
            n ? i.$element.find(".modal-dialog").one(e.support.transition.end, function () {
                i.$element.focus().trigger(r)
            }).emulateTransitionEnd(300) : i.$element.focus().trigger(r)
        })
    };
    t.prototype.hide = function (t) {
        if (t) t.preventDefault();
        t = e.Event("hide.bs.modal");
        this.$element.trigger(t);
        if (!this.isShown || t.isDefaultPrevented()) return;
        this.isShown = false;
        this.escape();
        e(document).off("focusin.bs.modal");
        this.$element.removeClass("in").attr("aria-hidden", true).off("click.dismiss.bs.modal");
        e.support.transition && this.$element.hasClass("fade") ? this.$element.one(e.support.transition.end, e.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal()
    };
    t.prototype.enforceFocus = function () {
        e(document).off("focusin.bs.modal").on("focusin.bs.modal", e.proxy(function (e) {
            if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {
                this.$element.focus()
            }
        }, this))
    };
    t.prototype.escape = function () {
        if (this.isShown && this.options.keyboard) {
            this.$element.on("keyup.dismiss.bs.modal", e.proxy(function (e) {
                e.which == 27 && this.hide()
            }, this))
        }
        else if (!this.isShown) {
            this.$element.off("keyup.dismiss.bs.modal")
        }
    };
    t.prototype.hideModal = function () {
        var e = this;
        this.$element.hide();
        this.backdrop(function () {
            e.removeBackdrop();
            e.$element.trigger("hidden.bs.modal")
        })
    };
    t.prototype.removeBackdrop = function () {
        this.$backdrop && this.$backdrop.remove();
        this.$backdrop = null
    };
    t.prototype.backdrop = function (t) {
        var i = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var n = e.support.transition && i;
            this.$backdrop = e('<div class="modal-backdrop ' + i + '" />').appendTo(document.body);
            this.$element.on("click.dismiss.bs.modal", e.proxy(function (e) {
                if (e.target !== e.currentTarget) return;
                this.options.backdrop == "static" ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this)
            }, this));
            if (n) this.$backdrop[0].offsetWidth;
            this.$backdrop.addClass("in");
            if (!t) return;
            n ? this.$backdrop.one(e.support.transition.end, t).emulateTransitionEnd(150) : t()
        }
        else if (!this.isShown && this.$backdrop) {
            this.$backdrop.removeClass("in");
            e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one(e.support.transition.end, t).emulateTransitionEnd(150) : t()
        }
        else if (t) {
            t()
        }
    };
    var i = e.fn.modal;
    e.fn.modal = function (i, n) {
        return this.each(function () {
            var r = e(this);
            var s = r.data("bs.modal");
            var a = e.extend({}, t.DEFAULTS, r.data(), typeof i == "object" && i);
            if (!s) r.data("bs.modal", s = new t(this, a));
            if (typeof i == "string") s[i](n);
            else if (a.show) s.show(n)
        })
    };
    e.fn.modal.Constructor = t;
    e.fn.modal.noConflict = function () {
        e.fn.modal = i;
        return this
    };
    e(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function (t) {
        var i = e(this);
        var n = i.attr("href");
        var r = e(i.attr("data-target") || n && n.replace(/.*(?=#[^\s]+$)/, ""));
        var s = r.data("bs.modal") ? "toggle" : e.extend({
            remote: !/#/.test(n) && n
        }, r.data(), i.data());
        if (i.is("a")) t.preventDefault();
        r.modal(s, this).one("hide", function () {
            i.is(":visible") && i.focus()
        })
    });
    e(document).on("show.bs.modal", ".modal", function () {
        e(document.body).addClass("modal-open")
    }).on("hidden.bs.modal", ".modal", function () {
        e(document.body).removeClass("modal-open")
    })
}(jQuery); + function (e) {
    "use strict";
    var t = function (e, t) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null;
        this.init("tooltip", e, t)
    };
    t.DEFAULTS = {
        animation: true,
        placement: "top",
        selector: false,
        template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: false,
        container: false
    };
    t.prototype.init = function (t, i, n) {
        this.enabled = true;
        this.type = t;
        this.$element = e(i);
        this.options = this.getOptions(n);
        var r = this.options.trigger.split(" ");
        for (var s = r.length; s--;) {
            var a = r[s];
            if (a == "click") {
                this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this))
            }
            else if (a != "manual") {
                var o = a == "hover" ? "mouseenter" : "focusin";
                var l = a == "hover" ? "mouseleave" : "focusout";
                this.$element.on(o + "." + this.type, this.options.selector, e.proxy(this.enter, this));
                this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = e.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    };
    t.prototype.getDefaults = function () {
        return t.DEFAULTS
    };
    t.prototype.getOptions = function (t) {
        t = e.extend({}, this.getDefaults(), this.$element.data(), t);
        if (t.delay && typeof t.delay == "number") {
            t.delay = {
                show: t.delay,
                hide: t.delay
            }
        }
        return t
    };
    t.prototype.getDelegateOptions = function () {
        var t = {};
        var i = this.getDefaults();
        this._options && e.each(this._options, function (e, n) {
            if (i[e] != n) t[e] = n
        });
        return t
    };
    t.prototype.enter = function (t) {
        var i = t instanceof this.constructor ? t : e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        clearTimeout(i.timeout);
        i.hoverState = "in";
        if (!i.options.delay || !i.options.delay.show) return i.show();
        i.timeout = setTimeout(function () {
            if (i.hoverState == "in") i.show()
        }, i.options.delay.show)
    };
    t.prototype.leave = function (t) {
        var i = t instanceof this.constructor ? t : e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        clearTimeout(i.timeout);
        i.hoverState = "out";
        if (!i.options.delay || !i.options.delay.hide) return i.hide();
        i.timeout = setTimeout(function () {
            if (i.hoverState == "out") i.hide()
        }, i.options.delay.hide)
    };
    t.prototype.show = function () {
        var t = e.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(t);
            if (t.isDefaultPrevented()) return;
            var i = this;
            var n = this.tip();
            this.setContent();
            if (this.options.animation) n.addClass("fade");
            var r = typeof this.options.placement == "function" ? this.options.placement.call(this, n[0], this.$element[0]) : this.options.placement;
            var s = /\s?auto?\s?/i;
            var a = s.test(r);
            if (a) r = r.replace(s, "") || "top";
            n.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(r);
            this.options.container ? n.appendTo(this.options.container) : n.insertAfter(this.$element);
            var o = this.getPosition();
            var l = n[0].offsetWidth;
            var u = n[0].offsetHeight;
            if (a) {
                var c = this.$element.parent();
                var f = r;
                var h = document.documentElement.scrollTop || document.body.scrollTop;
                var d = this.options.container == "body" ? window.innerWidth : c.outerWidth();
                var p = this.options.container == "body" ? window.innerHeight : c.outerHeight();
                var g = this.options.container == "body" ? 0 : c.offset().left;
                r = r == "bottom" && o.top + o.height + u - h > p ? "top" : r == "top" && o.top - h - u < 0 ? "bottom" : r == "right" && o.right + l > d ? "left" : r == "left" && o.left - l < g ? "right" : r;
                n.removeClass(f).addClass(r)
            }
            var m = this.getCalculatedOffset(r, o, l, u);
            this.applyPlacement(m, r);
            this.hoverState = null;
            var v = function () {
                i.$element.trigger("shown.bs." + i.type)
            };
            e.support.transition && this.$tip.hasClass("fade") ? n.one(e.support.transition.end, v).emulateTransitionEnd(150) : v()
        }
    };
    t.prototype.applyPlacement = function (t, i) {
        var n;
        var r = this.tip();
        var s = r[0].offsetWidth;
        var a = r[0].offsetHeight;
        var o = parseInt(r.css("margin-top"), 10);
        var l = parseInt(r.css("margin-left"), 10);
        if (isNaN(o)) o = 0;
        if (isNaN(l)) l = 0;
        t.top = t.top + o;
        t.left = t.left + l;
        e.offset.setOffset(r[0], e.extend({
            using: function (e) {
                r.css({
                    top: Math.round(e.top),
                    left: Math.round(e.left)
                })
            }
        }, t), 0);
        r.addClass("in");
        var u = r[0].offsetWidth;
        var c = r[0].offsetHeight;
        if (i == "top" && c != a) {
            n = true;
            t.top = t.top + a - c
        }
        if (/bottom|top/.test(i)) {
            var f = 0;
            if (t.left < 0) {
                f = t.left * -2;
                t.left = 0;
                r.offset(t);
                u = r[0].offsetWidth;
                c = r[0].offsetHeight
            }
            this.replaceArrow(f - s + u, u, "left")
        }
        else {
            this.replaceArrow(c - a, c, "top")
        }
        if (n) r.offset(t)
    };
    t.prototype.replaceArrow = function (e, t, i) {
        this.arrow().css(i, e ? 50 * (1 - e / t) + "%" : "")
    };
    t.prototype.setContent = function () {
        var e = this.tip();
        var t = this.getTitle();
        e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t);
        e.removeClass("fade in top bottom left right")
    };
    t.prototype.hide = function () {
        var t = this;
        var i = this.tip();
        var n = e.Event("hide.bs." + this.type);

        function r() {
            if (t.hoverState != "in") i.detach();
            t.$element.trigger("hidden.bs." + t.type)
        }
        this.$element.trigger(n);
        if (n.isDefaultPrevented()) return;
        i.removeClass("in");
        e.support.transition && this.$tip.hasClass("fade") ? i.one(e.support.transition.end, r).emulateTransitionEnd(150) : r();
        this.hoverState = null;
        return this
    };
    t.prototype.fixTitle = function () {
        var e = this.$element;
        if (e.attr("title") || typeof e.attr("data-original-title") != "string") {
            e.attr("data-original-title", e.attr("title") || "").attr("title", "")
        }
    };
    t.prototype.hasContent = function () {
        return this.getTitle()
    };
    t.prototype.getPosition = function () {
        var t = this.$element[0];
        return e.extend({}, typeof t.getBoundingClientRect == "function" ? t.getBoundingClientRect() : {
            width: t.offsetWidth,
            height: t.offsetHeight
        }, this.$element.offset())
    };
    t.prototype.getCalculatedOffset = function (e, t, i, n) {
        return e == "bottom" ? {
            top: t.top + t.height,
            left: t.left + t.width / 2 - i / 2
        } : e == "top" ? {
            top: t.top - n,
            left: t.left + t.width / 2 - i / 2
        } : e == "left" ? {
            top: t.top + t.height / 2 - n / 2,
            left: t.left - i
        } : {
            top: t.top + t.height / 2 - n / 2,
            left: t.left + t.width
        }
    };
    t.prototype.getTitle = function () {
        var e;
        var t = this.$element;
        var i = this.options;
        e = t.attr("data-original-title") || (typeof i.title == "function" ? i.title.call(t[0]) : i.title);
        return e
    };
    t.prototype.tip = function () {
        return this.$tip = this.$tip || e(this.options.template)
    };
    t.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    };
    t.prototype.validate = function () {
        if (!this.$element[0].parentNode) {
            this.hide();
            this.$element = null;
            this.options = null
        }
    };
    t.prototype.enable = function () {
        this.enabled = true
    };
    t.prototype.disable = function () {
        this.enabled = false
    };
    t.prototype.toggleEnabled = function () {
        this.enabled = !this.enabled
    };
    t.prototype.toggle = function (t) {
        var i = t ? e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type) : this;
        i.tip().hasClass("in") ? i.leave(i) : i.enter(i)
    };
    t.prototype.destroy = function () {
        clearTimeout(this.timeout);
        this.hide().$element.off("." + this.type).removeData("bs." + this.type)
    };
    var i = e.fn.tooltip;
    e.fn.tooltip = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.tooltip");
            var s = typeof i == "object" && i;
            if (!r && i == "destroy") return;
            if (!r) n.data("bs.tooltip", r = new t(this, s));
            if (typeof i == "string") r[i]()
        })
    };
    e.fn.tooltip.Constructor = t;
    e.fn.tooltip.noConflict = function () {
        e.fn.tooltip = i;
        return this
    }
}(jQuery); + function (e) {
    "use strict";
    var t = function (e, t) {
        this.init("popover", e, t)
    };
    if (!e.fn.tooltip) throw new Error("Popover requires tooltip.js");
    t.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    });
    t.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype);
    t.prototype.constructor = t;
    t.prototype.getDefaults = function () {
        return t.DEFAULTS
    };
    t.prototype.setContent = function () {
        var e = this.tip();
        var t = this.getTitle();
        var i = this.getContent();
        e.find(".popover-title")[this.options.html ? "html" : "text"](t);
        e.find(".popover-content")[this.options.html ? typeof i == "string" ? "html" : "append" : "text"](i);
        e.removeClass("fade top bottom left right in");
        if (!e.find(".popover-title").html()) e.find(".popover-title").hide()
    };
    t.prototype.hasContent = function () {
        return this.getTitle() || this.getContent()
    };
    t.prototype.getContent = function () {
        var e = this.$element;
        var t = this.options;
        return e.attr("data-content") || (typeof t.content == "function" ? t.content.call(e[0]) : t.content)
    };
    t.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    };
    t.prototype.tip = function () {
        if (!this.$tip) this.$tip = e(this.options.template);
        return this.$tip
    };
    var i = e.fn.popover;
    e.fn.popover = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.popover");
            var s = typeof i == "object" && i;
            if (!r && i == "destroy") return;
            if (!r) n.data("bs.popover", r = new t(this, s));
            if (typeof i == "string") r[i]()
        })
    };
    e.fn.popover.Constructor = t;
    e.fn.popover.noConflict = function () {
        e.fn.popover = i;
        return this
    }
}(jQuery); + function (e) {
    "use strict";

    function t(i, n) {
        var r;
        var s = e.proxy(this.process, this);
        this.$element = e(i).is("body") ? e(window) : e(i);
        this.$body = e("body");
        this.$scrollElement = this.$element.on("scroll.bs.scroll-spy.data-api", s);
        this.options = e.extend({}, t.DEFAULTS, n);
        this.selector = (this.options.target || (r = e(i).attr("href")) && r.replace(/.*(?=#[^\s]+$)/, "") || "") + " .notify-row li > a";
        this.offsets = e([]);
        this.targets = e([]);
        this.activeTarget = null;
        this.refresh();
        this.process()
    }
    t.DEFAULTS = {
        offset: 10
    };
    t.prototype.refresh = function () {
        var t = this.$element[0] == window ? "offset" : "position";
        this.offsets = e([]);
        this.targets = e([]);
        var i = this;
        var n = this.$body.find(this.selector).map(function () {
            var n = e(this);
            var r = n.data("target") || n.attr("href");
            var s = /^#./.test(r) && e(r);
            return s && s.length && s.is(":visible") && [
                [s[t]().top + (!e.isWindow(i.$scrollElement.get(0)) && i.$scrollElement.scrollTop()), r]
            ] || null
        }).sort(function (e, t) {
            return e[0] - t[0]
        }).each(function () {
            i.offsets.push(this[0]);
            i.targets.push(this[1])
        })
    };
    t.prototype.process = function () {
        var e = this.$scrollElement.scrollTop() + this.options.offset;
        var t = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight;
        var i = t - this.$scrollElement.height();
        var n = this.offsets;
        var r = this.targets;
        var s = this.activeTarget;
        var a;
        if (e >= i) {
            return s != (a = r.last()[0]) && this.activate(a)
        }
        if (s && e <= n[0]) {
            return s != (a = r[0]) && this.activate(a)
        }
        for (a = n.length; a--;) {
            s != r[a] && e >= n[a] && (!n[a + 1] || e <= n[a + 1]) && this.activate(r[a])
        }
    };
    t.prototype.activate = function (t) {
        this.activeTarget = t;
        e(this.selector).parentsUntil(this.options.target, ".active").removeClass("active");
        var i = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]';
        var n = e(i).parents("li").addClass("active");
        if (n.parent(".dropdown-menu").length) {
            n = n.closest("li.dropdown").addClass("active")
        }
        n.trigger("activate.bs.scrollspy")
    };
    var i = e.fn.scrollspy;
    e.fn.scrollspy = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.scrollspy");
            var s = typeof i == "object" && i;
            if (!r) n.data("bs.scrollspy", r = new t(this, s));
            if (typeof i == "string") r[i]()
        })
    };
    e.fn.scrollspy.Constructor = t;
    e.fn.scrollspy.noConflict = function () {
        e.fn.scrollspy = i;
        return this
    };
    e(window).on("load", function () {
        e('[data-spy="scroll"]').each(function () {
            var t = e(this);
            t.scrollspy(t.data())
        })
    })
}(jQuery); + function (e) {
    "use strict";
    var t = function (t) {
        this.element = e(t)
    };
    t.prototype.show = function () {
        var t = this.element;
        var i = t.closest("ul:not(.dropdown-menu)");
        var n = t.data("target");
        if (!n) {
            n = t.attr("href");
            n = n && n.replace(/.*(?=#[^\s]*$)/, "")
        }
        if (t.parent("li").hasClass("active")) return;
        var r = i.find(".active:last a")[0];
        var s = e.Event("show.bs.tab", {
            relatedTarget: r
        });
        t.trigger(s);
        if (s.isDefaultPrevented()) return;
        var a = e(n);
        this.activate(t.parent("li"), i);
        this.activate(a, a.parent(), function () {
            t.trigger({
                type: "shown.bs.tab",
                relatedTarget: r
            })
        })
    };
    t.prototype.activate = function (t, i, n) {
        var r = i.find("> .active");
        var s = n && e.support.transition && r.hasClass("fade");

        function a() {
            r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");
            t.addClass("active");
            if (s) {
                t[0].offsetWidth;
                t.addClass("in")
            }
            else {
                t.removeClass("fade")
            }
            if (t.parent(".dropdown-menu")) {
                t.closest("li.dropdown").addClass("active")
            }
            n && n()
        }
        s ? r.one(e.support.transition.end, a).emulateTransitionEnd(150) : a();
        r.removeClass("in")
    };
    var i = e.fn.tab;
    e.fn.tab = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.tab");
            if (!r) n.data("bs.tab", r = new t(this));
            if (typeof i == "string") r[i]()
        })
    };
    e.fn.tab.Constructor = t;
    e.fn.tab.noConflict = function () {
        e.fn.tab = i;
        return this
    };
    e(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function (t) {
        t.preventDefault();
        e(this).tab("show")
    })
}(jQuery); + function (e) {
    "use strict";
    var t = function (i, n) {
        this.options = e.extend({}, t.DEFAULTS, n);
        this.$window = e(window).on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", e.proxy(this.checkPositionWithEventLoop, this));
        this.$element = e(i);
        this.affixed = this.unpin = this.pinnedOffset = null;
        this.checkPosition()
    };
    t.RESET = "affix affix-top affix-bottom";
    t.DEFAULTS = {
        offset: 0
    };
    t.prototype.getPinnedOffset = function () {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(t.RESET).addClass("affix");
        var e = this.$window.scrollTop();
        var i = this.$element.offset();
        return this.pinnedOffset = i.top - e
    };
    t.prototype.checkPositionWithEventLoop = function () {
        setTimeout(e.proxy(this.checkPosition, this), 1)
    };
    t.prototype.checkPosition = function () {
        if (!this.$element.is(":visible")) return;
        var i = e(document).height();
        var n = this.$window.scrollTop();
        var r = this.$element.offset();
        var s = this.options.offset;
        var a = s.top;
        var o = s.bottom;
        if (this.affixed == "top") r.top += n;
        if (typeof s != "object") o = a = s;
        if (typeof a == "function") a = s.top(this.$element);
        if (typeof o == "function") o = s.bottom(this.$element);
        var l = this.unpin != null && n + this.unpin <= r.top ? false : o != null && r.top + this.$element.height() >= i - o ? "bottom" : a != null && n <= a ? "top" : false;
        if (this.affixed === l) return;
        if (this.unpin) this.$element.css("top", "");
        var u = "affix" + (l ? "-" + l : "");
        var c = e.Event(u + ".bs.affix");
        this.$element.trigger(c);
        if (c.isDefaultPrevented()) return;
        this.affixed = l;
        this.unpin = l == "bottom" ? this.getPinnedOffset() : null;
        this.$element.removeClass(t.RESET).addClass(u).trigger(e.Event(u.replace("affix", "affixed")));
        if (l == "bottom") {
            this.$element.offset({
                top: i - o - this.$element.height()
            })
        }
    };
    var i = e.fn.affix;
    e.fn.affix = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.affix");
            var s = typeof i == "object" && i;
            if (!r) n.data("bs.affix", r = new t(this, s));
            if (typeof i == "string") r[i]()
        })
    };
    e.fn.affix.Constructor = t;
    e.fn.affix.noConflict = function () {
        e.fn.affix = i;
        return this
    };
    e(window).on("load", function () {
        e('[data-spy="affix"]').each(function () {
            var t = e(this);
            var i = t.data();
            i.offset = i.offset || {};
            if (i.offsetBottom) i.offset.bottom = i.offsetBottom;
            if (i.offsetTop) i.offset.top = i.offsetTop;
            t.affix(i)
        })
    })
}(jQuery);
(function () {
    var e = this;
    var t = e._;
    var i = {};
    var n = Array.prototype,
        r = Object.prototype,
        s = Function.prototype;
    var a = Date.now || function () {
        return (new Date).getTime()
    };
    var o = n.push,
        l = n.slice,
        u = n.concat,
        c = r.toString,
        f = r.hasOwnProperty;
    var h = n.forEach,
        d = n.map,
        p = n.reduce,
        g = n.reduceRight,
        m = n.filter,
        v = n.every,
        y = n.some,
        b = n.indexOf,
        w = n.lastIndexOf,
        _ = Array.isArray,
        x = Object.keys,
        k = s.bind;
    var C = function (e) {
        if (e instanceof C) return e;
        if (!(this instanceof C)) return new C(e);
        this._wrapped = e
    };
    if (typeof exports !== "undefined") {
        if (typeof module !== "undefined" && module.exports) {
            exports = module.exports = C
        }
        exports._ = C
    }
    else {
        e._ = C
    }
    C.VERSION = "1.5.2";
    var M = C.each = C.forEach = function (e, t, n) {
        if (e == null) return;
        if (h && e.forEach === h) {
            e.forEach(t, n)
        }
        else if (e.length === +e.length) {
            for (var r = 0, s = e.length; r < s; r++) {
                if (t.call(n, e[r], r, e) === i) return
            }
        }
        else {
            var a = C.keys(e);
            for (var r = 0, s = a.length; r < s; r++) {
                if (t.call(n, e[a[r]], a[r], e) === i) return
            }
        }
    };
    C.map = C.collect = function (e, t, i) {
        var n = [];
        if (e == null) return n;
        if (d && e.map === d) return e.map(t, i);
        M(e, function (e, r, s) {
            n.push(t.call(i, e, r, s))
        });
        return n
    };
    var T = "Reduce of empty array with no initial value";
    C.reduce = C.foldl = C.inject = function (e, t, i, n) {
        var r = arguments.length > 2;
        if (e == null) e = [];
        if (p && e.reduce === p) {
            if (n) t = C.bind(t, n);
            return r ? e.reduce(t, i) : e.reduce(t)
        }
        M(e, function (e, s, a) {
            if (!r) {
                i = e;
                r = true
            }
            else {
                i = t.call(n, i, e, s, a)
            }
        });
        if (!r) throw new TypeError(T);
        return i
    };
    C.reduceRight = C.foldr = function (e, t, i, n) {
        var r = arguments.length > 2;
        if (e == null) e = [];
        if (g && e.reduceRight === g) {
            if (n) t = C.bind(t, n);
            return r ? e.reduceRight(t, i) : e.reduceRight(t)
        }
        var s = e.length;
        if (s !== +s) {
            var a = C.keys(e);
            s = a.length
        }
        M(e, function (o, l, u) {
            l = a ? a[--s] : --s;
            if (!r) {
                i = e[l];
                r = true
            }
            else {
                i = t.call(n, i, e[l], l, u)
            }
        });
        if (!r) throw new TypeError(T);
        return i
    };
    C.find = C.detect = function (e, t, i) {
        var n;
        D(e, function (e, r, s) {
            if (t.call(i, e, r, s)) {
                n = e;
                return true
            }
        });
        return n
    };
    C.filter = C.select = function (e, t, i) {
        var n = [];
        if (e == null) return n;
        if (m && e.filter === m) return e.filter(t, i);
        M(e, function (e, r, s) {
            if (t.call(i, e, r, s)) n.push(e)
        });
        return n
    };
    C.reject = function (e, t, i) {
        return C.filter(e, function (e, n, r) {
            return !t.call(i, e, n, r)
        }, i)
    };
    C.every = C.all = function (e, t, n) {
        t || (t = C.identity);
        var r = true;
        if (e == null) return r;
        if (v && e.every === v) return e.every(t, n);
        M(e, function (e, s, a) {
            if (!(r = r && t.call(n, e, s, a))) return i
        });
        return !!r
    };
    var D = C.some = C.any = function (e, t, n) {
        t || (t = C.identity);
        var r = false;
        if (e == null) return r;
        if (y && e.some === y) return e.some(t, n);
        M(e, function (e, s, a) {
            if (r || (r = t.call(n, e, s, a))) return i
        });
        return !!r
    };
    C.contains = C.include = function (e, t) {
        if (e == null) return false;
        if (b && e.indexOf === b) return e.indexOf(t) != -1;
        return D(e, function (e) {
            return e === t
        })
    };
    C.invoke = function (e, t) {
        var i = l.call(arguments, 2);
        var n = C.isFunction(t);
        return C.map(e, function (e) {
            return (n ? t : e[t]).apply(e, i)
        })
    };
    C.pluck = function (e, t) {
        return C.map(e, C.property(t))
    };
    C.where = function (e, t, i) {
        return C[i ? "find" : "filter"](e, function (e) {
            for (var i in t) {
                if (t[i] !== e[i]) return false
            }
            return true
        })
    };
    C.findWhere = function (e, t) {
        return C.where(e, t, true)
    };
    C.max = function (e, t, i) {
        if (!t && C.isArray(e) && e[0] === +e[0] && e.length < 65535) {
            return Math.max.apply(Math, e)
        }
        if (!t && C.isEmpty(e)) return -Infinity;
        var n = {
            computed: -Infinity,
            value: -Infinity
        };
        M(e, function (e, r, s) {
            var a = t ? t.call(i, e, r, s) : e;
            a > n.computed && (n = {
                value: e,
                computed: a
            })
        });
        return n.value
    };
    C.min = function (e, t, i) {
        if (!t && C.isArray(e) && e[0] === +e[0] && e.length < 65535) {
            return Math.min.apply(Math, e)
        }
        if (!t && C.isEmpty(e)) return Infinity;
        var n = {
            computed: Infinity,
            value: Infinity
        };
        M(e, function (e, r, s) {
            var a = t ? t.call(i, e, r, s) : e;
            a < n.computed && (n = {
                value: e,
                computed: a
            })
        });
        return n.value
    };
    C.shuffle = function (e) {
        var t;
        var i = 0;
        var n = [];
        M(e, function (e) {
            t = C.random(i++);
            n[i - 1] = n[t];
            n[t] = e
        });
        return n
    };
    C.sample = function (e, t, i) {
        if (t == null || i) {
            if (e.length !== +e.length) e = C.values(e);
            return e[C.random(e.length - 1)]
        }
        return C.shuffle(e).slice(0, Math.max(0, t))
    };
    var S = function (e) {
        if (e == null) return C.identity;
        if (C.isFunction(e)) return e;
        return C.property(e)
    };
    C.sortBy = function (e, t, i) {
        t = S(t);
        return C.pluck(C.map(e, function (e, n, r) {
            return {
                value: e,
                index: n,
                criteria: t.call(i, e, n, r)
            }
        }).sort(function (e, t) {
            var i = e.criteria;
            var n = t.criteria;
            if (i !== n) {
                if (i > n || i === void 0) return 1;
                if (i < n || n === void 0) return -1
            }
            return e.index - t.index
        }), "value")
    };
    var E = function (e) {
        return function (t, i, n) {
            var r = {};
            i = S(i);
            M(t, function (s, a) {
                var o = i.call(n, s, a, t);
                e(r, o, s)
            });
            return r
        }
    };
    C.groupBy = E(function (e, t, i) {
        C.has(e, t) ? e[t].push(i) : e[t] = [i]
    });
    C.indexBy = E(function (e, t, i) {
        e[t] = i
    });
    C.countBy = E(function (e, t) {
        C.has(e, t) ? e[t]++ : e[t] = 1
    });
    C.sortedIndex = function (e, t, i, n) {
        i = S(i);
        var r = i.call(n, t);
        var s = 0,
            a = e.length;
        while (s < a) {
            var o = s + a >>> 1;
            i.call(n, e[o]) < r ? s = o + 1 : a = o
        }
        return s
    };
    C.toArray = function (e) {
        if (!e) return [];
        if (C.isArray(e)) return l.call(e);
        if (e.length === +e.length) return C.map(e, C.identity);
        return C.values(e)
    };
    C.size = function (e) {
        if (e == null) return 0;
        return e.length === +e.length ? e.length : C.keys(e).length
    };
    C.first = C.head = C.take = function (e, t, i) {
        if (e == null) return void 0;
        if (t == null || i) return e[0];
        if (t < 0) return [];
        return l.call(e, 0, t)
    };
    C.initial = function (e, t, i) {
        return l.call(e, 0, e.length - (t == null || i ? 1 : t))
    };
    C.last = function (e, t, i) {
        if (e == null) return void 0;
        if (t == null || i) return e[e.length - 1];
        return l.call(e, Math.max(e.length - t, 0))
    };
    C.rest = C.tail = C.drop = function (e, t, i) {
        return l.call(e, t == null || i ? 1 : t)
    };
    C.compact = function (e) {
        return C.filter(e, C.identity)
    };
    var A = function (e, t, i) {
        if (t && C.every(e, C.isArray)) {
            return u.apply(i, e)
        }
        M(e, function (e) {
            if (C.isArray(e) || C.isArguments(e)) {
                t ? o.apply(i, e) : A(e, t, i)
            }
            else {
                i.push(e)
            }
        });
        return i
    };
    C.flatten = function (e, t) {
        return A(e, t, [])
    };
    C.without = function (e) {
        return C.difference(e, l.call(arguments, 1))
    };
    C.uniq = C.unique = function (e, t, i, n) {
        if (C.isFunction(t)) {
            n = i;
            i = t;
            t = false
        }
        var r = i ? C.map(e, i, n) : e;
        var s = [];
        var a = [];
        M(r, function (i, n) {
            if (t ? !n || a[a.length - 1] !== i : !C.contains(a, i)) {
                a.push(i);
                s.push(e[n])
            }
        });
        return s
    };
    C.union = function () {
        return C.uniq(C.flatten(arguments, true))
    };
    C.intersection = function (e) {
        var t = l.call(arguments, 1);
        return C.filter(C.uniq(e), function (e) {
            return C.every(t, function (t) {
                return C.indexOf(t, e) >= 0
            })
        })
    };
    C.difference = function (e) {
        var t = u.apply(n, l.call(arguments, 1));
        return C.filter(e, function (e) {
            return !C.contains(t, e)
        })
    };
    C.zip = function () {
        var e = C.max(C.pluck(arguments, "length").concat(0));
        var t = new Array(e);
        for (var i = 0; i < e; i++) {
            t[i] = C.pluck(arguments, "" + i)
        }
        return t
    };
    C.object = function (e, t) {
        if (e == null) return {};
        var i = {};
        for (var n = 0, r = e.length; n < r; n++) {
            if (t) {
                i[e[n]] = t[n]
            }
            else {
                i[e[n][0]] = e[n][1]
            }
        }
        return i
    };
    C.indexOf = function (e, t, i) {
        if (e == null) return -1;
        var n = 0,
            r = e.length;
        if (i) {
            if (typeof i == "number") {
                n = i < 0 ? Math.max(0, r + i) : i
            }
            else {
                n = C.sortedIndex(e, t);
                return e[n] === t ? n : -1
            }
        }
        if (b && e.indexOf === b) return e.indexOf(t, i);
        for (; n < r; n++)
            if (e[n] === t) return n;
        return -1
    };
    C.lastIndexOf = function (e, t, i) {
        if (e == null) return -1;
        var n = i != null;
        if (w && e.lastIndexOf === w) {
            return n ? e.lastIndexOf(t, i) : e.lastIndexOf(t)
        }
        var r = n ? i : e.length;
        while (r--)
            if (e[r] === t) return r;
        return -1
    };
    C.range = function (e, t, i) {
        if (arguments.length <= 1) {
            t = e || 0;
            e = 0
        }
        i = arguments[2] || 1;
        var n = Math.max(Math.ceil((t - e) / i), 0);
        var r = 0;
        var s = new Array(n);
        while (r < n) {
            s[r++] = e;
            e += i
        }
        return s
    };
    var I = function () {};
    C.bind = function (e, t) {
        var i, n;
        if (k && e.bind === k) return k.apply(e, l.call(arguments, 1));
        if (!C.isFunction(e)) throw new TypeError;
        i = l.call(arguments, 2);
        return n = function () {
            if (!(this instanceof n)) return e.apply(t, i.concat(l.call(arguments)));
            I.prototype = e.prototype;
            var r = new I;
            I.prototype = null;
            var s = e.apply(r, i.concat(l.call(arguments)));
            if (Object(s) === s) return s;
            return r
        }
    };
    C.partial = function (e) {
        var t = l.call(arguments, 1);
        return function () {
            var i = l.call(t);
            C.each(arguments, function (e) {
                var t = i.indexOf(C);
                i[t >= 0 ? t : i.length] = e
            });
            return e.apply(this, C.map(i, function (e) {
                return e === C ? void 0 : e
            }))
        }
    };
    C.bindAll = function (e) {
        var t = l.call(arguments, 1);
        if (t.length === 0) throw new Error("bindAll must be passed function names");
        M(t, function (t) {
            e[t] = C.bind(e[t], e)
        });
        return e
    };
    C.memoize = function (e, t) {
        var i = {};
        t || (t = C.identity);
        return function () {
            var n = t.apply(this, arguments);
            return C.has(i, n) ? i[n] : i[n] = e.apply(this, arguments)
        }
    };
    C.delay = function (e, t) {
        var i = l.call(arguments, 2);
        return setTimeout(function () {
            return e.apply(null, i)
        }, t)
    };
    C.defer = function (e) {
        return C.delay.apply(C, [e, 1].concat(l.call(arguments, 1)))
    };
    C.throttle = function (e, t, i) {
        var n, r, s;
        var o = null;
        var l = 0;
        i || (i = {});
        var u = function () {
            l = i.leading === false ? 0 : a();
            o = null;
            s = e.apply(n, r);
            n = r = null
        };
        return function () {
            var c = a();
            if (!l && i.leading === false) l = c;
            var f = t - (c - l);
            n = this;
            r = arguments;
            if (f <= 0) {
                clearTimeout(o);
                o = null;
                l = c;
                s = e.apply(n, r);
                n = r = null
            }
            else if (!o && i.trailing !== false) {
                o = setTimeout(u, f)
            }
            return s
        }
    };
    C.debounce = function (e, t, i) {
        var n, r, s, o, l;
        return function () {
            s = this;
            r = arguments;
            o = a();
            var u = function () {
                var c = a() - o;
                if (c < t) {
                    n = setTimeout(u, t - c)
                }
                else {
                    n = null;
                    if (!i) {
                        l = e.apply(s, r);
                        s = r = null
                    }
                }
            };
            var c = i && !n;
            if (!n) {
                n = setTimeout(u, t)
            }
            if (c) {
                l = e.apply(s, r);
                s = r = null
            }
            return l
        }
    };
    C.once = function (e) {
        var t = false,
            i;
        return function () {
            if (t) return i;
            t = true;
            i = e.apply(this, arguments);
            e = null;
            return i
        }
    };
    C.wrap = function (e, t) {
        return C.partial(t, e)
    };
    C.compose = function () {
        var e = arguments;
        return function () {
            var t = arguments;
            for (var i = e.length - 1; i >= 0; i--) {
                t = [e[i].apply(this, t)]
            }
            return t[0]
        }
    };
    C.after = function (e, t) {
        return function () {
            if (--e < 1) {
                return t.apply(this, arguments)
            }
        }
    };
    C.keys = x || function (e) {
        if (e !== Object(e)) throw new TypeError("Invalid object");
        var t = [];
        for (var i in e)
            if (C.has(e, i)) t.push(i);
        return t
    };
    C.values = function (e) {
        var t = C.keys(e);
        var i = t.length;
        var n = new Array(i);
        for (var r = 0; r < i; r++) {
            n[r] = e[t[r]]
        }
        return n
    };
    C.pairs = function (e) {
        var t = C.keys(e);
        var i = t.length;
        var n = new Array(i);
        for (var r = 0; r < i; r++) {
            n[r] = [t[r], e[t[r]]]
        }
        return n
    };
    C.invert = function (e) {
        var t = {};
        var i = C.keys(e);
        for (var n = 0, r = i.length; n < r; n++) {
            t[e[i[n]]] = i[n]
        }
        return t
    };
    C.functions = C.methods = function (e) {
        var t = [];
        for (var i in e) {
            if (C.isFunction(e[i])) t.push(i)
        }
        return t.sort()
    };
    C.extend = function (e) {
        M(l.call(arguments, 1), function (t) {
            if (t) {
                for (var i in t) {
                    e[i] = t[i]
                }
            }
        });
        return e
    };
    C.pick = function (e) {
        var t = {};
        var i = u.apply(n, l.call(arguments, 1));
        M(i, function (i) {
            if (i in e) t[i] = e[i]
        });
        return t
    };
    C.omit = function (e) {
        var t = {};
        var i = u.apply(n, l.call(arguments, 1));
        for (var r in e) {
            if (!C.contains(i, r)) t[r] = e[r]
        }
        return t
    };
    C.defaults = function (e) {
        M(l.call(arguments, 1), function (t) {
            if (t) {
                for (var i in t) {
                    if (e[i] === void 0) e[i] = t[i]
                }
            }
        });
        return e
    };
    C.clone = function (e) {
        if (!C.isObject(e)) return e;
        return C.isArray(e) ? e.slice() : C.extend({}, e)
    };
    C.tap = function (e, t) {
        t(e);
        return e
    };
    var $ = function (e, t, i, n) {
        if (e === t) return e !== 0 || 1 / e == 1 / t;
        if (e == null || t == null) return e === t;
        if (e instanceof C) e = e._wrapped;
        if (t instanceof C) t = t._wrapped;
        var r = c.call(e);
        if (r != c.call(t)) return false;
        switch (r) {
            case "[object String]":
                return e == String(t);
            case "[object Number]":
                return e != +e ? t != +t : e == 0 ? 1 / e == 1 / t : e == +t;
            case "[object Date]":
            case "[object Boolean]":
                return +e == +t;
            case "[object RegExp]":
                return e.source == t.source && e.global == t.global && e.multiline == t.multiline && e.ignoreCase == t.ignoreCase
        }
        if (typeof e != "object" || typeof t != "object") return false;
        var s = i.length;
        while (s--) {
            if (i[s] == e) return n[s] == t
        }
        var a = e.constructor,
            o = t.constructor;
        if (a !== o && !(C.isFunction(a) && a instanceof a && C.isFunction(o) && o instanceof o) && ("constructor" in e && "constructor" in t)) {
            return false
        }
        i.push(e);
        n.push(t);
        var l = 0,
            u = true;
        if (r == "[object Array]") {
            l = e.length;
            u = l == t.length;
            if (u) {
                while (l--) {
                    if (!(u = $(e[l], t[l], i, n))) break
                }
            }
        }
        else {
            for (var f in e) {
                if (C.has(e, f)) {
                    l++;
                    if (!(u = C.has(t, f) && $(e[f], t[f], i, n))) break
                }
            }
            if (u) {
                for (f in t) {
                    if (C.has(t, f) && !l--) break
                }
                u = !l
            }
        }
        i.pop();
        n.pop();
        return u
    };
    C.isEqual = function (e, t) {
        return $(e, t, [], [])
    };
    C.isEmpty = function (e) {
        if (e == null) return true;
        if (C.isArray(e) || C.isString(e)) return e.length === 0;
        for (var t in e)
            if (C.has(e, t)) return false;
        return true
    };
    C.isElement = function (e) {
        return !!(e && e.nodeType === 1)
    };
    C.isArray = _ || function (e) {
        return c.call(e) == "[object Array]"
    };
    C.isObject = function (e) {
        return e === Object(e)
    };
    M(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function (e) {
        C["is" + e] = function (t) {
            return c.call(t) == "[object " + e + "]"
        }
    });
    if (!C.isArguments(arguments)) {
        C.isArguments = function (e) {
            return !!(e && C.has(e, "callee"))
        }
    }
    if (typeof /./ !== "function") {
        C.isFunction = function (e) {
            return typeof e === "function"
        }
    }
    C.isFinite = function (e) {
        return isFinite(e) && !isNaN(parseFloat(e))
    };
    C.isNaN = function (e) {
        return C.isNumber(e) && e != +e
    };
    C.isBoolean = function (e) {
        return e === true || e === false || c.call(e) == "[object Boolean]"
    };
    C.isNull = function (e) {
        return e === null
    };
    C.isUndefined = function (e) {
        return e === void 0
    };
    C.has = function (e, t) {
        return f.call(e, t)
    };
    C.noConflict = function () {
        e._ = t;
        return this
    };
    C.identity = function (e) {
        return e
    };
    C.constant = function (e) {
        return function () {
            return e
        }
    };
    C.property = function (e) {
        return function (t) {
            return t[e]
        }
    };
    C.times = function (e, t, i) {
        var n = Array(Math.max(0, e));
        for (var r = 0; r < e; r++) n[r] = t.call(i, r);
        return n
    };
    C.random = function (e, t) {
        if (t == null) {
            t = e;
            e = 0
        }
        return e + Math.floor(Math.random() * (t - e + 1))
    };
    var P = {
        escape: {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;"
        }
    };
    P.unescape = C.invert(P.escape);
    var z = {
        escape: new RegExp("[" + C.keys(P.escape).join("") + "]", "g"),
        unescape: new RegExp("(" + C.keys(P.unescape).join("|") + ")", "g")
    };
    C.each(["escape", "unescape"], function (e) {
        C[e] = function (t) {
            if (t == null) return "";
            return ("" + t).replace(z[e], function (t) {
                return P[e][t]
            })
        }
    });
    C.result = function (e, t) {
        if (e == null) return void 0;
        var i = e[t];
        return C.isFunction(i) ? i.call(e) : i
    };
    C.mixin = function (e) {
        M(C.functions(e), function (t) {
            var i = C[t] = e[t];
            C.prototype[t] = function () {
                var e = [this._wrapped];
                o.apply(e, arguments);
                return j.call(this, i.apply(C, e))
            }
        })
    };
    var N = 0;
    C.uniqueId = function (e) {
        var t = ++N + "";
        return e ? e + t : t
    };
    C.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var H = /(.)^/;
    var O = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "	": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    };
    var L = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    C.template = function (e, t, i) {
        var n;
        i = C.defaults({}, i, C.templateSettings);
        var r = new RegExp([(i.escape || H).source, (i.interpolate || H).source, (i.evaluate || H).source].join("|") + "|$", "g");
        var s = 0;
        var a = "__p+='";
        e.replace(r, function (t, i, n, r, o) {
            a += e.slice(s, o).replace(L, function (e) {
                return "\\" + O[e]
            });
            if (i) {
                a += "'+\n((__t=(" + i + "))==null?'':_.escape(__t))+\n'"
            }
            if (n) {
                a += "'+\n((__t=(" + n + "))==null?'':__t)+\n'"
            }
            if (r) {
                a += "';\n" + r + "\n__p+='"
            }
            s = o + t.length;
            return t
        });
        a += "';\n";
        if (!i.variable) a = "with(obj||{}){\n" + a + "}\n";
        a = "var __t,__p='',__j=Array.prototype.join," + "print=function(){__p+=__j.call(arguments,'');};\n" + a + "return __p;\n";
        try {
            n = new Function(i.variable || "obj", "_", a)
        }
        catch (e) {
            e.source = a;
            throw e
        }
        if (t) return n(t, C);
        var o = function (e) {
            return n.call(this, e, C)
        };
        o.source = "function(" + (i.variable || "obj") + "){\n" + a + "}";
        return o
    };
    C.chain = function (e) {
        return C(e).chain()
    };
    var j = function (e) {
        return this._chain ? C(e).chain() : e
    };
    C.mixin(C);
    M(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (e) {
        var t = n[e];
        C.prototype[e] = function () {
            var i = this._wrapped;
            t.apply(i, arguments);
            if ((e == "shift" || e == "splice") && i.length === 0) delete i[0];
            return j.call(this, i)
        }
    });
    M(["concat", "join", "slice"], function (e) {
        var t = n[e];
        C.prototype[e] = function () {
            return j.call(this, t.apply(this._wrapped, arguments))
        }
    });
    C.extend(C.prototype, {
        chain: function () {
            this._chain = true;
            return this
        },
        value: function () {
            return this._wrapped
        }
    });
    if (typeof define === "function" && define.amd) {
        define("underscore", [], function () {
            return C
        })
    }
}).call(this);
(function (e, t) {
    var i = 0,
        n = /^ui-id-\d+$/;
    e.ui = e.ui || {};
    e.extend(e.ui, {
        version: "1.10.4",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    });
    e.fn.extend({
        focus: function (t) {
            return function (i, n) {
                return typeof i === "number" ? this.each(function () {
                    var t = this;
                    setTimeout(function () {
                        e(t).focus();
                        if (n) {
                            n.call(t)
                        }
                    }, i)
                }) : t.apply(this, arguments)
            }
        }(e.fn.focus),
        scrollParent: function () {
            var t;
            if (e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position"))) {
                t = this.parents().filter(function () {
                    return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
                }).eq(0)
            }
            else {
                t = this.parents().filter(function () {
                    return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
                }).eq(0)
            }
            return /fixed/.test(this.css("position")) || !t.length ? e(document) : t
        },
        zIndex: function (i) {
            if (i !== t) {
                return this.css("zIndex", i)
            }
            if (this.length) {
                var n = e(this[0]),
                    r, s;
                while (n.length && n[0] !== document) {
                    r = n.css("position");
                    if (r === "absolute" || r === "relative" || r === "fixed") {
                        s = parseInt(n.css("zIndex"), 10);
                        if (!isNaN(s) && s !== 0) {
                            return s
                        }
                    }
                    n = n.parent()
                }
            }
            return 0
        },
        uniqueId: function () {
            return this.each(function () {
                if (!this.id) {
                    this.id = "ui-id-" + ++i
                }
            })
        },
        removeUniqueId: function () {
            return this.each(function () {
                if (n.test(this.id)) {
                    e(this).removeAttr("id")
                }
            })
        }
    });

    function r(t, i) {
        var n, r, a, o = t.nodeName.toLowerCase();
        if ("area" === o) {
            n = t.parentNode;
            r = n.name;
            if (!t.href || !r || n.nodeName.toLowerCase() !== "map") {
                return false
            }
            a = e("img[usemap=#" + r + "]")[0];
            return !!a && s(a)
        }
        return (/input|select|textarea|button|object/.test(o) ? !t.disabled : "a" === o ? t.href || i : i) && s(t)
    }

    function s(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function () {
            return e.css(this, "visibility") === "hidden"
        }).length
    }
    e.extend(e.expr[":"], {
        data: e.expr.createPseudo ? e.expr.createPseudo(function (t) {
            return function (i) {
                return !!e.data(i, t)
            }
        }) : function (t, i, n) {
            return !!e.data(t, n[3])
        },
        focusable: function (t) {
            return r(t, !isNaN(e.attr(t, "tabindex")))
        },
        tabbable: function (t) {
            var i = e.attr(t, "tabindex"),
                n = isNaN(i);
            return (n || i >= 0) && r(t, !n)
        }
    });
    if (!e("<a>").outerWidth(1).jquery) {
        e.each(["Width", "Height"], function (i, n) {
            var r = n === "Width" ? ["Left", "Right"] : ["Top", "Bottom"],
                s = n.toLowerCase(),
                a = {
                    innerWidth: e.fn.innerWidth,
                    innerHeight: e.fn.innerHeight,
                    outerWidth: e.fn.outerWidth,
                    outerHeight: e.fn.outerHeight
                };

            function o(t, i, n, s) {
                e.each(r, function () {
                    i -= parseFloat(e.css(t, "padding" + this)) || 0;
                    if (n) {
                        i -= parseFloat(e.css(t, "border" + this + "Width")) || 0
                    }
                    if (s) {
                        i -= parseFloat(e.css(t, "margin" + this)) || 0
                    }
                });
                return i
            }
            e.fn["inner" + n] = function (i) {
                if (i === t) {
                    return a["inner" + n].call(this)
                }
                return this.each(function () {
                    e(this).css(s, o(this, i) + "px")
                })
            };
            e.fn["outer" + n] = function (t, i) {
                if (typeof t !== "number") {
                    return a["outer" + n].call(this, t)
                }
                return this.each(function () {
                    e(this).css(s, o(this, t, true, i) + "px")
                })
            }
        })
    }
    if (!e.fn.addBack) {
        e.fn.addBack = function (e) {
            return this.add(e == null ? this.prevObject : this.prevObject.filter(e))
        }
    }
    if (e("<a>").data("a-b", "a").removeData("a-b").data("a-b")) {
        e.fn.removeData = function (t) {
            return function (i) {
                if (arguments.length) {
                    return t.call(this, e.camelCase(i))
                }
                else {
                    return t.call(this)
                }
            }
        }(e.fn.removeData)
    }
    e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
    e.support.selectstart = "onselectstart" in document.createElement("div");
    e.fn.extend({
        disableSelection: function () {
            return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function (e) {
                e.preventDefault()
            })
        },
        enableSelection: function () {
            return this.unbind(".ui-disableSelection")
        }
    });
    e.extend(e.ui, {
        plugin: {
            add: function (t, i, n) {
                var r, s = e.ui[t].prototype;
                for (r in n) {
                    s.plugins[r] = s.plugins[r] || [];
                    s.plugins[r].push([i, n[r]])
                }
            },
            call: function (e, t, i) {
                var n, r = e.plugins[t];
                if (!r || !e.element[0].parentNode || e.element[0].parentNode.nodeType === 11) {
                    return
                }
                for (n = 0; n < r.length; n++) {
                    if (e.options[r[n][0]]) {
                        r[n][1].apply(e.element, i)
                    }
                }
            }
        },
        hasScroll: function (t, i) {
            if (e(t).css("overflow") === "hidden") {
                return false
            }
            var n = i && i === "left" ? "scrollLeft" : "scrollTop",
                r = false;
            if (t[n] > 0) {
                return true
            }
            t[n] = 1;
            r = t[n] > 0;
            t[n] = 0;
            return r
        }
    })
})(jQuery);
(function (e, t) {
    var i = 0,
        n = Array.prototype.slice,
        r = e.cleanData;
    e.cleanData = function (t) {
        for (var i = 0, n;
            (n = t[i]) != null; i++) {
            try {
                e(n).triggerHandler("remove")
            }
            catch (e) {}
        }
        r(t)
    };
    e.widget = function (t, i, n) {
        var r, s, a, o, l = {},
            u = t.split(".")[0];
        t = t.split(".")[1];
        r = u + "-" + t;
        if (!n) {
            n = i;
            i = e.Widget
        }
        e.expr[":"][r.toLowerCase()] = function (t) {
            return !!e.data(t, r)
        };
        e[u] = e[u] || {};
        s = e[u][t];
        a = e[u][t] = function (e, t) {
            if (!this._createWidget) {
                return new a(e, t)
            }
            if (arguments.length) {
                this._createWidget(e, t)
            }
        };
        e.extend(a, s, {
            version: n.version,
            _proto: e.extend({}, n),
            _childConstructors: []
        });
        o = new i;
        o.options = e.widget.extend({}, o.options);
        e.each(n, function (t, n) {
            if (!e.isFunction(n)) {
                l[t] = n;
                return
            }
            l[t] = function () {
                var e = function () {
                        return i.prototype[t].apply(this, arguments)
                    },
                    r = function (e) {
                        return i.prototype[t].apply(this, e)
                    };
                return function () {
                    var t = this._super,
                        i = this._superApply,
                        s;
                    this._super = e;
                    this._superApply = r;
                    s = n.apply(this, arguments);
                    this._super = t;
                    this._superApply = i;
                    return s
                }
            }()
        });
        a.prototype = e.widget.extend(o, {
            widgetEventPrefix: s ? o.widgetEventPrefix || t : t
        }, l, {
            constructor: a,
            namespace: u,
            widgetName: t,
            widgetFullName: r
        });
        if (s) {
            e.each(s._childConstructors, function (t, i) {
                var n = i.prototype;
                e.widget(n.namespace + "." + n.widgetName, a, i._proto)
            });
            delete s._childConstructors
        }
        else {
            i._childConstructors.push(a)
        }
        e.widget.bridge(t, a)
    };
    e.widget.extend = function (i) {
        var r = n.call(arguments, 1),
            s = 0,
            a = r.length,
            o, l;
        for (; s < a; s++) {
            for (o in r[s]) {
                l = r[s][o];
                if (r[s].hasOwnProperty(o) && l !== t) {
                    if (e.isPlainObject(l)) {
                        i[o] = e.isPlainObject(i[o]) ? e.widget.extend({}, i[o], l) : e.widget.extend({}, l)
                    }
                    else {
                        i[o] = l
                    }
                }
            }
        }
        return i
    };
    e.widget.bridge = function (i, r) {
        var s = r.prototype.widgetFullName || i;
        e.fn[i] = function (a) {
            var o = typeof a === "string",
                l = n.call(arguments, 1),
                u = this;
            a = !o && l.length ? e.widget.extend.apply(null, [a].concat(l)) : a;
            if (o) {
                this.each(function () {
                    var n, r = e.data(this, s);
                    if (!r) {
                        return e.error("cannot call methods on " + i + " prior to initialization; " + "attempted to call method '" + a + "'")
                    }
                    if (!e.isFunction(r[a]) || a.charAt(0) === "_") {
                        return e.error("no such method '" + a + "' for " + i + " widget instance")
                    }
                    n = r[a].apply(r, l);
                    if (n !== r && n !== t) {
                        u = n && n.jquery ? u.pushStack(n.get()) : n;
                        return false
                    }
                })
            }
            else {
                this.each(function () {
                    var t = e.data(this, s);
                    if (t) {
                        t.option(a || {})._init()
                    }
                    else {
                        e.data(this, s, new r(a, this))
                    }
                })
            }
            return u
        }
    };
    e.Widget = function () {};
    e.Widget._childConstructors = [];
    e.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: false,
            create: null
        },
        _createWidget: function (t, n) {
            n = e(n || this.defaultElement || this)[0];
            this.element = e(n);
            this.uuid = i++;
            this.eventNamespace = "." + this.widgetName + this.uuid;
            this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t);
            this.bindings = e();
            this.hoverable = e();
            this.focusable = e();
            if (n !== this) {
                e.data(n, this.widgetFullName, this);
                this._on(true, this.element, {
                    remove: function (e) {
                        if (e.target === n) {
                            this.destroy()
                        }
                    }
                });
                this.document = e(n.style ? n.ownerDocument : n.document || n);
                this.window = e(this.document[0].defaultView || this.document[0].parentWindow)
            }
            this._create();
            this._trigger("create", null, this._getCreateEventData());
            this._init()
        },
        _getCreateOptions: e.noop,
        _getCreateEventData: e.noop,
        _create: e.noop,
        _init: e.noop,
        destroy: function () {
            this._destroy();
            this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName));
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled");
            this.bindings.unbind(this.eventNamespace);
            this.hoverable.removeClass("ui-state-hover");
            this.focusable.removeClass("ui-state-focus")
        },
        _destroy: e.noop,
        widget: function () {
            return this.element
        },
        option: function (i, n) {
            var r = i,
                s, a, o;
            if (arguments.length === 0) {
                return e.widget.extend({}, this.options)
            }
            if (typeof i === "string") {
                r = {};
                s = i.split(".");
                i = s.shift();
                if (s.length) {
                    a = r[i] = e.widget.extend({}, this.options[i]);
                    for (o = 0; o < s.length - 1; o++) {
                        a[s[o]] = a[s[o]] || {};
                        a = a[s[o]]
                    }
                    i = s.pop();
                    if (arguments.length === 1) {
                        return a[i] === t ? null : a[i]
                    }
                    a[i] = n
                }
                else {
                    if (arguments.length === 1) {
                        return this.options[i] === t ? null : this.options[i]
                    }
                    r[i] = n
                }
            }
            this._setOptions(r);
            return this
        },
        _setOptions: function (e) {
            var t;
            for (t in e) {
                this._setOption(t, e[t])
            }
            return this
        },
        _setOption: function (e, t) {
            this.options[e] = t;
            if (e === "disabled") {
                this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t);
                this.hoverable.removeClass("ui-state-hover");
                this.focusable.removeClass("ui-state-focus")
            }
            return this
        },
        enable: function () {
            return this._setOption("disabled", false)
        },
        disable: function () {
            return this._setOption("disabled", true)
        },
        _on: function (t, i, n) {
            var r, s = this;
            if (typeof t !== "boolean") {
                n = i;
                i = t;
                t = false
            }
            if (!n) {
                n = i;
                i = this.element;
                r = this.widget()
            }
            else {
                i = r = e(i);
                this.bindings = this.bindings.add(i)
            }
            e.each(n, function (n, a) {
                function o() {
                    if (!t && (s.options.disabled === true || e(this).hasClass("ui-state-disabled"))) {
                        return
                    }
                    return (typeof a === "string" ? s[a] : a).apply(s, arguments)
                }
                if (typeof a !== "string") {
                    o.guid = a.guid = a.guid || o.guid || e.guid++
                }
                var l = n.match(/^(\w+)\s*(.*)$/),
                    u = l[1] + s.eventNamespace,
                    c = l[2];
                if (c) {
                    r.delegate(c, u, o)
                }
                else {
                    i.bind(u, o)
                }
            })
        },
        _off: function (e, t) {
            t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace;
            e.unbind(t).undelegate(t)
        },
        _delay: function (e, t) {
            function i() {
                return (typeof e === "string" ? n[e] : e).apply(n, arguments)
            }
            var n = this;
            return setTimeout(i, t || 0)
        },
        _hoverable: function (t) {
            this.hoverable = this.hoverable.add(t);
            this._on(t, {
                mouseenter: function (t) {
                    e(t.currentTarget).addClass("ui-state-hover")
                },
                mouseleave: function (t) {
                    e(t.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function (t) {
            this.focusable = this.focusable.add(t);
            this._on(t, {
                focusin: function (t) {
                    e(t.currentTarget).addClass("ui-state-focus")
                },
                focusout: function (t) {
                    e(t.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function (t, i, n) {
            var r, s, a = this.options[t];
            n = n || {};
            i = e.Event(i);
            i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase();
            i.target = this.element[0];
            s = i.originalEvent;
            if (s) {
                for (r in s) {
                    if (!(r in i)) {
                        i[r] = s[r]
                    }
                }
            }
            this.element.trigger(i, n);
            return !(e.isFunction(a) && a.apply(this.element[0], [i].concat(n)) === false || i.isDefaultPrevented())
        }
    };
    e.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function (t, i) {
        e.Widget.prototype["_" + t] = function (n, r, s) {
            if (typeof r === "string") {
                r = {
                    effect: r
                }
            }
            var a, o = !r ? t : r === true || typeof r === "number" ? i : r.effect || i;
            r = r || {};
            if (typeof r === "number") {
                r = {
                    duration: r
                }
            }
            a = !e.isEmptyObject(r);
            r.complete = s;
            if (r.delay) {
                n.delay(r.delay)
            }
            if (a && e.effects && e.effects.effect[o]) {
                n[t](r)
            }
            else if (o !== t && n[o]) {
                n[o](r.duration, r.easing, s)
            }
            else {
                n.queue(function (i) {
                    e(this)[t]();
                    if (s) {
                        s.call(n[0])
                    }
                    i()
                })
            }
        }
    })
})(jQuery);
(function (e, t) {
    var i = false;
    e(document).mouseup(function () {
        i = false
    });
    e.widget("ui.mouse", {
        version: "1.10.4",
        options: {
            cancel: "input,textarea,button,select,option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function () {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function (e) {
                return t._mouseDown(e)
            }).bind("click." + this.widgetName, function (i) {
                if (true === e.data(i.target, t.widgetName + ".preventClickEvent")) {
                    e.removeData(i.target, t.widgetName + ".preventClickEvent");
                    i.stopImmediatePropagation();
                    return false
                }
            });
            this.started = false
        },
        _mouseDestroy: function () {
            this.element.unbind("." + this.widgetName);
            if (this._mouseMoveDelegate) {
                e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
            }
        },
        _mouseDown: function (t) {
            if (i) {
                return
            }
            this._mouseStarted && this._mouseUp(t);
            this._mouseDownEvent = t;
            var n = this,
                r = t.which === 1,
                s = typeof this.options.cancel === "string" && t.target.nodeName ? e(t.target).closest(this.options.cancel).length : false;
            if (!r || s || !this._mouseCapture(t)) {
                return true
            }
            this.mouseDelayMet = !this.options.delay;
            if (!this.mouseDelayMet) {
                this._mouseDelayTimer = setTimeout(function () {
                    n.mouseDelayMet = true
                }, this.options.delay)
            }
            if (this._mouseDistanceMet(t) && this._mouseDelayMet(t)) {
                this._mouseStarted = this._mouseStart(t) !== false;
                if (!this._mouseStarted) {
                    t.preventDefault();
                    return true
                }
            }
            if (true === e.data(t.target, this.widgetName + ".preventClickEvent")) {
                e.removeData(t.target, this.widgetName + ".preventClickEvent")
            }
            this._mouseMoveDelegate = function (e) {
                return n._mouseMove(e)
            };
            this._mouseUpDelegate = function (e) {
                return n._mouseUp(e)
            };
            e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate);
            t.preventDefault();
            i = true;
            return true
        },
        _mouseMove: function (t) {
            if (e.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button) {
                return this._mouseUp(t)
            }
            if (this._mouseStarted) {
                this._mouseDrag(t);
                return t.preventDefault()
            }
            if (this._mouseDistanceMet(t) && this._mouseDelayMet(t)) {
                this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== false;
                this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)
            }
            return !this._mouseStarted
        },
        _mouseUp: function (t) {
            e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
            if (this._mouseStarted) {
                this._mouseStarted = false;
                if (t.target === this._mouseDownEvent.target) {
                    e.data(t.target, this.widgetName + ".preventClickEvent", true)
                }
                this._mouseStop(t)
            }
            return false
        },
        _mouseDistanceMet: function (e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function () {
            return this.mouseDelayMet
        },
        _mouseStart: function () {},
        _mouseDrag: function () {},
        _mouseStop: function () {},
        _mouseCapture: function () {
            return true
        }
    })
})(jQuery);
(function (e, t) {
    e.ui = e.ui || {};
    var i, n = Math.max,
        r = Math.abs,
        s = Math.round,
        a = /left|center|right/,
        o = /top|center|bottom/,
        l = /[\+\-]\d+(\.[\d]+)?%?/,
        u = /^\w+/,
        c = /%$/,
        f = e.fn.position;

    function h(e, t, i) {
        return [parseFloat(e[0]) * (c.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (c.test(e[1]) ? i / 100 : 1)]
    }

    function d(t, i) {
        return parseInt(e.css(t, i), 10) || 0
    }

    function p(t) {
        var i = t[0];
        if (i.nodeType === 9) {
            return {
                width: t.width(),
                height: t.height(),
                offset: {
                    top: 0,
                    left: 0
                }
            }
        }
        if (e.isWindow(i)) {
            return {
                width: t.width(),
                height: t.height(),
                offset: {
                    top: t.scrollTop(),
                    left: t.scrollLeft()
                }
            }
        }
        if (i.preventDefault) {
            return {
                width: 0,
                height: 0,
                offset: {
                    top: i.pageY,
                    left: i.pageX
                }
            }
        }
        return {
            width: t.outerWidth(),
            height: t.outerHeight(),
            offset: t.offset()
        }
    }
    e.position = {
        scrollbarWidth: function () {
            if (i !== t) {
                return i
            }
            var n, r, s = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                a = s.children()[0];
            e("body").append(s);
            n = a.offsetWidth;
            s.css("overflow", "scroll");
            r = a.offsetWidth;
            if (n === r) {
                r = s[0].clientWidth
            }
            s.remove();
            return i = n - r
        },
        getScrollInfo: function (t) {
            var i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"),
                n = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"),
                r = i === "scroll" || i === "auto" && t.width < t.element[0].scrollWidth,
                s = n === "scroll" || n === "auto" && t.height < t.element[0].scrollHeight;
            return {
                width: s ? e.position.scrollbarWidth() : 0,
                height: r ? e.position.scrollbarWidth() : 0
            }
        },
        getWithinInfo: function (t) {
            var i = e(t || window),
                n = e.isWindow(i[0]),
                r = !!i[0] && i[0].nodeType === 9;
            return {
                element: i,
                isWindow: n,
                isDocument: r,
                offset: i.offset() || {
                    left: 0,
                    top: 0
                },
                scrollLeft: i.scrollLeft(),
                scrollTop: i.scrollTop(),
                width: n ? i.width() : i.outerWidth(),
                height: n ? i.height() : i.outerHeight()
            }
        }
    };
    e.fn.position = function (t) {
        if (!t || !t.of) {
            return f.apply(this, arguments)
        }
        t = e.extend({}, t);
        var i, c, g, m, v, y, b = e(t.of),
            w = e.position.getWithinInfo(t.within),
            _ = e.position.getScrollInfo(w),
            x = (t.collision || "flip").split(" "),
            k = {};
        y = p(b);
        if (b[0].preventDefault) {
            t.at = "left top"
        }
        c = y.width;
        g = y.height;
        m = y.offset;
        v = e.extend({}, m);
        e.each(["my", "at"], function () {
            var e = (t[this] || "").split(" "),
                i, n;
            if (e.length === 1) {
                e = a.test(e[0]) ? e.concat(["center"]) : o.test(e[0]) ? ["center"].concat(e) : ["center", "center"]
            }
            e[0] = a.test(e[0]) ? e[0] : "center";
            e[1] = o.test(e[1]) ? e[1] : "center";
            i = l.exec(e[0]);
            n = l.exec(e[1]);
            k[this] = [i ? i[0] : 0, n ? n[0] : 0];
            t[this] = [u.exec(e[0])[0], u.exec(e[1])[0]]
        });
        if (x.length === 1) {
            x[1] = x[0]
        }
        if (t.at[0] === "right") {
            v.left += c
        }
        else if (t.at[0] === "center") {
            v.left += c / 2
        }
        if (t.at[1] === "bottom") {
            v.top += g
        }
        else if (t.at[1] === "center") {
            v.top += g / 2
        }
        i = h(k.at, c, g);
        v.left += i[0];
        v.top += i[1];
        return this.each(function () {
            var a, o, l = e(this),
                u = l.outerWidth(),
                f = l.outerHeight(),
                p = d(this, "marginLeft"),
                y = d(this, "marginTop"),
                C = u + p + d(this, "marginRight") + _.width,
                M = f + y + d(this, "marginBottom") + _.height,
                T = e.extend({}, v),
                D = h(k.my, l.outerWidth(), l.outerHeight());
            if (t.my[0] === "right") {
                T.left -= u
            }
            else if (t.my[0] === "center") {
                T.left -= u / 2
            }
            if (t.my[1] === "bottom") {
                T.top -= f
            }
            else if (t.my[1] === "center") {
                T.top -= f / 2
            }
            T.left += D[0];
            T.top += D[1];
            if (!e.support.offsetFractions) {
                T.left = s(T.left);
                T.top = s(T.top)
            }
            a = {
                marginLeft: p,
                marginTop: y
            };
            e.each(["left", "top"], function (n, r) {
                if (e.ui.position[x[n]]) {
                    e.ui.position[x[n]][r](T, {
                        targetWidth: c,
                        targetHeight: g,
                        elemWidth: u,
                        elemHeight: f,
                        collisionPosition: a,
                        collisionWidth: C,
                        collisionHeight: M,
                        offset: [i[0] + D[0], i[1] + D[1]],
                        my: t.my,
                        at: t.at,
                        within: w,
                        elem: l
                    })
                }
            });
            if (t.using) {
                o = function (e) {
                    var i = m.left - T.left,
                        s = i + c - u,
                        a = m.top - T.top,
                        o = a + g - f,
                        h = {
                            target: {
                                element: b,
                                left: m.left,
                                top: m.top,
                                width: c,
                                height: g
                            },
                            element: {
                                element: l,
                                left: T.left,
                                top: T.top,
                                width: u,
                                height: f
                            },
                            horizontal: s < 0 ? "left" : i > 0 ? "right" : "center",
                            vertical: o < 0 ? "top" : a > 0 ? "bottom" : "middle"
                        };
                    if (c < u && r(i + s) < c) {
                        h.horizontal = "center"
                    }
                    if (g < f && r(a + o) < g) {
                        h.vertical = "middle"
                    }
                    if (n(r(i), r(s)) > n(r(a), r(o))) {
                        h.important = "horizontal"
                    }
                    else {
                        h.important = "vertical"
                    }
                    t.using.call(this, e, h)
                }
            }
            l.offset(e.extend(T, {
                using: o
            }))
        })
    };
    e.ui.position = {
        fit: {
            left: function (e, t) {
                var i = t.within,
                    r = i.isWindow ? i.scrollLeft : i.offset.left,
                    s = i.width,
                    a = e.left - t.collisionPosition.marginLeft,
                    o = r - a,
                    l = a + t.collisionWidth - s - r,
                    u;
                if (t.collisionWidth > s) {
                    if (o > 0 && l <= 0) {
                        u = e.left + o + t.collisionWidth - s - r;
                        e.left += o - u
                    }
                    else if (l > 0 && o <= 0) {
                        e.left = r
                    }
                    else {
                        if (o > l) {
                            e.left = r + s - t.collisionWidth
                        }
                        else {
                            e.left = r
                        }
                    }
                }
                else if (o > 0) {
                    e.left += o
                }
                else if (l > 0) {
                    e.left -= l
                }
                else {
                    e.left = n(e.left - a, e.left)
                }
            },
            top: function (e, t) {
                var i = t.within,
                    r = i.isWindow ? i.scrollTop : i.offset.top,
                    s = t.within.height,
                    a = e.top - t.collisionPosition.marginTop,
                    o = r - a,
                    l = a + t.collisionHeight - s - r,
                    u;
                if (t.collisionHeight > s) {
                    if (o > 0 && l <= 0) {
                        u = e.top + o + t.collisionHeight - s - r;
                        e.top += o - u
                    }
                    else if (l > 0 && o <= 0) {
                        e.top = r
                    }
                    else {
                        if (o > l) {
                            e.top = r + s - t.collisionHeight
                        }
                        else {
                            e.top = r
                        }
                    }
                }
                else if (o > 0) {
                    e.top += o
                }
                else if (l > 0) {
                    e.top -= l
                }
                else {
                    e.top = n(e.top - a, e.top)
                }
            }
        },
        flip: {
            left: function (e, t) {
                var i = t.within,
                    n = i.offset.left + i.scrollLeft,
                    s = i.width,
                    a = i.isWindow ? i.scrollLeft : i.offset.left,
                    o = e.left - t.collisionPosition.marginLeft,
                    l = o - a,
                    u = o + t.collisionWidth - s - a,
                    c = t.my[0] === "left" ? -t.elemWidth : t.my[0] === "right" ? t.elemWidth : 0,
                    f = t.at[0] === "left" ? t.targetWidth : t.at[0] === "right" ? -t.targetWidth : 0,
                    h = -2 * t.offset[0],
                    d, p;
                if (l < 0) {
                    d = e.left + c + f + h + t.collisionWidth - s - n;
                    if (d < 0 || d < r(l)) {
                        e.left += c + f + h
                    }
                }
                else if (u > 0) {
                    p = e.left - t.collisionPosition.marginLeft + c + f + h - a;
                    if (p > 0 || r(p) < u) {
                        e.left += c + f + h
                    }
                }
            },
            top: function (e, t) {
                var i = t.within,
                    n = i.offset.top + i.scrollTop,
                    s = i.height,
                    a = i.isWindow ? i.scrollTop : i.offset.top,
                    o = e.top - t.collisionPosition.marginTop,
                    l = o - a,
                    u = o + t.collisionHeight - s - a,
                    c = t.my[1] === "top",
                    f = c ? -t.elemHeight : t.my[1] === "bottom" ? t.elemHeight : 0,
                    h = t.at[1] === "top" ? t.targetHeight : t.at[1] === "bottom" ? -t.targetHeight : 0,
                    d = -2 * t.offset[1],
                    p, g;
                if (l < 0) {
                    g = e.top + f + h + d + t.collisionHeight - s - n;
                    if (e.top + f + h + d > l && (g < 0 || g < r(l))) {
                        e.top += f + h + d
                    }
                }
                else if (u > 0) {
                    p = e.top - t.collisionPosition.marginTop + f + h + d - a;
                    if (e.top + f + h + d > u && (p > 0 || r(p) < u)) {
                        e.top += f + h + d
                    }
                }
            }
        },
        flipfit: {
            left: function () {
                e.ui.position.flip.left.apply(this, arguments);
                e.ui.position.fit.left.apply(this, arguments)
            },
            top: function () {
                e.ui.position.flip.top.apply(this, arguments);
                e.ui.position.fit.top.apply(this, arguments)
            }
        }
    };
    (function () {
        var t, i, n, r, s, a = document.getElementsByTagName("body")[0],
            o = document.createElement("div");
        t = document.createElement(a ? "div" : "body");
        n = {
            visibility: "hidden",
            width: 0,
            height: 0,
            border: 0,
            margin: 0,
            background: "none"
        };
        if (a) {
            e.extend(n, {
                position: "absolute",
                left: "-1000px",
                top: "-1000px"
            })
        }
        for (s in n) {
            t.style[s] = n[s]
        }
        t.appendChild(o);
        i = a || document.documentElement;
        i.insertBefore(t, i.firstChild);
        o.style.cssText = "position: absolute; left: 10.7432222px;";
        r = e(o).offset().left;
        e.support.offsetFractions = r > 10 && r < 11;
        t.innerHTML = "";
        i.removeChild(t)
    })()
})(jQuery);
(function (e, t) {
    e.widget("ui.draggable", e.ui.mouse, {
        version: "1.10.4",
        widgetEventPrefix: "drag",
        options: {
            addClasses: true,
            appendTo: "parent",
            axis: false,
            connectToSortable: false,
            containment: false,
            cursor: "auto",
            cursorAt: false,
            grid: false,
            handle: false,
            helper: "original",
            iframeFix: false,
            opacity: false,
            refreshPositions: false,
            revert: false,
            revertDuration: 500,
            scope: "default",
            scroll: true,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: false,
            snapMode: "both",
            snapTolerance: 20,
            stack: false,
            zIndex: false,
            drag: null,
            start: null,
            stop: null
        },
        _create: function () {
            if (this.options.helper === "original" && !/^(?:r|a|f)/.test(this.element.css("position"))) {
                this.element[0].style.position = "relative"
            }
            if (this.options.addClasses) {
                this.element.addClass("ui-draggable")
            }
            if (this.options.disabled) {
                this.element.addClass("ui-draggable-disabled")
            }
            this._mouseInit()
        },
        _destroy: function () {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");
            this._mouseDestroy()
        },
        _mouseCapture: function (t) {
            var i = this.options;
            if (this.helper || i.disabled || e(t.target).closest(".ui-resizable-handle").length > 0) {
                return false
            }
            this.handle = this._getHandle(t);
            if (!this.handle) {
                return false
            }
            e(i.iframeFix === true ? "iframe" : i.iframeFix).each(function () {
                e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({
                    width: this.offsetWidth + "px",
                    height: this.offsetHeight + "px",
                    position: "absolute",
                    opacity: "0.001",
                    zIndex: 1e3
                }).css(e(this).offset()).appendTo("body")
            });
            return true
        },
        _mouseStart: function (t) {
            var i = this.options;
            this.helper = this._createHelper(t);
            this.helper.addClass("ui-draggable-dragging");
            this._cacheHelperProportions();
            if (e.ui.ddmanager) {
                e.ui.ddmanager.current = this
            }
            this._cacheMargins();
            this.cssPosition = this.helper.css("position");
            this.scrollParent = this.helper.scrollParent();
            this.offsetParent = this.helper.offsetParent();
            this.offsetParentCssPosition = this.offsetParent.css("position");
            this.offset = this.positionAbs = this.element.offset();
            this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            };
            this.offset.scroll = false;
            e.extend(this.offset, {
                click: {
                    left: t.pageX - this.offset.left,
                    top: t.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            });
            this.originalPosition = this.position = this._generatePosition(t);
            this.originalPageX = t.pageX;
            this.originalPageY = t.pageY;
            i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt);
            this._setContainment();
            if (this._trigger("start", t) === false) {
                this._clear();
                return false
            }
            this._cacheHelperProportions();
            if (e.ui.ddmanager && !i.dropBehaviour) {
                e.ui.ddmanager.prepareOffsets(this, t)
            }
            this._mouseDrag(t, true);
            if (e.ui.ddmanager) {
                e.ui.ddmanager.dragStart(this, t)
            }
            return true
        },
        _mouseDrag: function (t, i) {
            if (this.offsetParentCssPosition === "fixed") {
                this.offset.parent = this._getParentOffset()
            }
            this.position = this._generatePosition(t);
            this.positionAbs = this._convertPositionTo("absolute");
            if (!i) {
                var n = this._uiHash();
                if (this._trigger("drag", t, n) === false) {
                    this._mouseUp({});
                    return false
                }
                this.position = n.position
            }
            if (!this.options.axis || this.options.axis !== "y") {
                this.helper[0].style.left = this.position.left + "px"
            }
            if (!this.options.axis || this.options.axis !== "x") {
                this.helper[0].style.top = this.position.top + "px"
            }
            if (e.ui.ddmanager) {
                e.ui.ddmanager.drag(this, t)
            }
            return false
        },
        _mouseStop: function (t) {
            var i = this,
                n = false;
            if (e.ui.ddmanager && !this.options.dropBehaviour) {
                n = e.ui.ddmanager.drop(this, t)
            }
            if (this.dropped) {
                n = this.dropped;
                this.dropped = false
            }
            if (this.options.helper === "original" && !e.contains(this.element[0].ownerDocument, this.element[0])) {
                return false
            }
            if (this.options.revert === "invalid" && !n || this.options.revert === "valid" && n || this.options.revert === true || e.isFunction(this.options.revert) && this.options.revert.call(this.element, n)) {
                e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {
                    if (i._trigger("stop", t) !== false) {
                        i._clear()
                    }
                })
            }
            else {
                if (this._trigger("stop", t) !== false) {
                    this._clear()
                }
            }
            return false
        },
        _mouseUp: function (t) {
            e("div.ui-draggable-iframeFix").each(function () {
                this.parentNode.removeChild(this)
            });
            if (e.ui.ddmanager) {
                e.ui.ddmanager.dragStop(this, t)
            }
            return e.ui.mouse.prototype._mouseUp.call(this, t)
        },
        cancel: function () {
            if (this.helper.is(".ui-draggable-dragging")) {
                this._mouseUp({})
            }
            else {
                this._clear()
            }
            return this
        },
        _getHandle: function (t) {
            return this.options.handle ? !!e(t.target).closest(this.element.find(this.options.handle)).length : true
        },
        _createHelper: function (t) {
            var i = this.options,
                n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [t])) : i.helper === "clone" ? this.element.clone().removeAttr("id") : this.element;
            if (!n.parents("body").length) {
                n.appendTo(i.appendTo === "parent" ? this.element[0].parentNode : i.appendTo)
            }
            if (n[0] !== this.element[0] && !/(fixed|absolute)/.test(n.css("position"))) {
                n.css("position", "absolute")
            }
            return n
        },
        _adjustOffsetFromHelper: function (t) {
            if (typeof t === "string") {
                t = t.split(" ")
            }
            if (e.isArray(t)) {
                t = {
                    left: +t[0],
                    top: +t[1] || 0
                }
            }
            if ("left" in t) {
                this.offset.click.left = t.left + this.margins.left
            }
            if ("right" in t) {
                this.offset.click.left = this.helperProportions.width - t.right + this.margins.left
            }
            if ("top" in t) {
                this.offset.click.top = t.top + this.margins.top
            }
            if ("bottom" in t) {
                this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top
            }
        },
        _getParentOffset: function () {
            var t = this.offsetParent.offset();
            if (this.cssPosition === "absolute" && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0])) {
                t.left += this.scrollParent.scrollLeft();
                t.top += this.scrollParent.scrollTop()
            }
            if (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && e.ui.ie) {
                t = {
                    top: 0,
                    left: 0
                }
            }
            return {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function () {
            if (this.cssPosition === "relative") {
                var e = this.element.position();
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            else {
                return {
                    top: 0,
                    left: 0
                }
            }
        },
        _cacheMargins: function () {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            }
        },
        _cacheHelperProportions: function () {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function () {
            var t, i, n, r = this.options;
            if (!r.containment) {
                this.containment = null;
                return
            }
            if (r.containment === "window") {
                this.containment = [e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                return
            }
            if (r.containment === "document") {
                this.containment = [0, 0, e(document).width() - this.helperProportions.width - this.margins.left, (e(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                return
            }
            if (r.containment.constructor === Array) {
                this.containment = r.containment;
                return
            }
            if (r.containment === "parent") {
                r.containment = this.helper[0].parentNode
            }
            i = e(r.containment);
            n = i[0];
            if (!n) {
                return
            }
            t = i.css("overflow") !== "hidden";
            this.containment = [(parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (t ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom];
            this.relative_container = i
        },
        _convertPositionTo: function (t, i) {
            if (!i) {
                i = this.position
            }
            var n = t === "absolute" ? 1 : -1,
                r = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent;
            if (!this.offset.scroll) {
                this.offset.scroll = {
                    top: r.scrollTop(),
                    left: r.scrollLeft()
                }
            }
            return {
                top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top) * n,
                left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left) * n
            }
        },
        _generatePosition: function (t) {
            var i, n, r, s, a = this.options,
                o = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
                l = t.pageX,
                u = t.pageY;
            if (!this.offset.scroll) {
                this.offset.scroll = {
                    top: o.scrollTop(),
                    left: o.scrollLeft()
                }
            }
            if (this.originalPosition) {
                if (this.containment) {
                    if (this.relative_container) {
                        n = this.relative_container.offset();
                        i = [this.containment[0] + n.left, this.containment[1] + n.top, this.containment[2] + n.left, this.containment[3] + n.top]
                    }
                    else {
                        i = this.containment
                    }
                    if (t.pageX - this.offset.click.left < i[0]) {
                        l = i[0] + this.offset.click.left
                    }
                    if (t.pageY - this.offset.click.top < i[1]) {
                        u = i[1] + this.offset.click.top
                    }
                    if (t.pageX - this.offset.click.left > i[2]) {
                        l = i[2] + this.offset.click.left
                    }
                    if (t.pageY - this.offset.click.top > i[3]) {
                        u = i[3] + this.offset.click.top
                    }
                }
                if (a.grid) {
                    r = a.grid[1] ? this.originalPageY + Math.round((u - this.originalPageY) / a.grid[1]) * a.grid[1] : this.originalPageY;
                    u = i ? r - this.offset.click.top >= i[1] || r - this.offset.click.top > i[3] ? r : r - this.offset.click.top >= i[1] ? r - a.grid[1] : r + a.grid[1] : r;
                    s = a.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / a.grid[0]) * a.grid[0] : this.originalPageX;
                    l = i ? s - this.offset.click.left >= i[0] || s - this.offset.click.left > i[2] ? s : s - this.offset.click.left >= i[0] ? s - a.grid[0] : s + a.grid[0] : s
                }
            }
            return {
                top: u - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top),
                left: l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left)
            }
        },
        _clear: function () {
            this.helper.removeClass("ui-draggable-dragging");
            if (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {
                this.helper.remove()
            }
            this.helper = null;
            this.cancelHelperRemoval = false
        },
        _trigger: function (t, i, n) {
            n = n || this._uiHash();
            e.ui.plugin.call(this, t, [i, n]);
            if (t === "drag") {
                this.positionAbs = this._convertPositionTo("absolute")
            }
            return e.Widget.prototype._trigger.call(this, t, i, n)
        },
        plugins: {},
        _uiHash: function () {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            }
        }
    });
    e.ui.plugin.add("draggable", "connectToSortable", {
        start: function (t, i) {
            var n = e(this).data("ui-draggable"),
                r = n.options,
                s = e.extend({}, i, {
                    item: n.element
                });
            n.sortables = [];
            e(r.connectToSortable).each(function () {
                var i = e.data(this, "ui-sortable");
                if (i && !i.options.disabled) {
                    n.sortables.push({
                        instance: i,
                        shouldRevert: i.options.revert
                    });
                    i.refreshPositions();
                    i._trigger("activate", t, s)
                }
            })
        },
        stop: function (t, i) {
            var n = e(this).data("ui-draggable"),
                r = e.extend({}, i, {
                    item: n.element
                });
            e.each(n.sortables, function () {
                if (this.instance.isOver) {
                    this.instance.isOver = 0;
                    n.cancelHelperRemoval = true;
                    this.instance.cancelHelperRemoval = false;
                    if (this.shouldRevert) {
                        this.instance.options.revert = this.shouldRevert
                    }
                    this.instance._mouseStop(t);
                    this.instance.options.helper = this.instance.options._helper;
                    if (n.options.helper === "original") {
                        this.instance.currentItem.css({
                            top: "auto",
                            left: "auto"
                        })
                    }
                }
                else {
                    this.instance.cancelHelperRemoval = false;
                    this.instance._trigger("deactivate", t, r)
                }
            })
        },
        drag: function (t, i) {
            var n = e(this).data("ui-draggable"),
                r = this;
            e.each(n.sortables, function () {
                var s = false,
                    a = this;
                this.instance.positionAbs = n.positionAbs;
                this.instance.helperProportions = n.helperProportions;
                this.instance.offset.click = n.offset.click;
                if (this.instance._intersectsWith(this.instance.containerCache)) {
                    s = true;
                    e.each(n.sortables, function () {
                        this.instance.positionAbs = n.positionAbs;
                        this.instance.helperProportions = n.helperProportions;
                        this.instance.offset.click = n.offset.click;
                        if (this !== a && this.instance._intersectsWith(this.instance.containerCache) && e.contains(a.instance.element[0], this.instance.element[0])) {
                            s = false
                        }
                        return s
                    })
                }
                if (s) {
                    if (!this.instance.isOver) {
                        this.instance.isOver = 1;
                        this.instance.currentItem = e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", true);
                        this.instance.options._helper = this.instance.options.helper;
                        this.instance.options.helper = function () {
                            return i.helper[0]
                        };
                        t.target = this.instance.currentItem[0];
                        this.instance._mouseCapture(t, true);
                        this.instance._mouseStart(t, true, true);
                        this.instance.offset.click.top = n.offset.click.top;
                        this.instance.offset.click.left = n.offset.click.left;
                        this.instance.offset.parent.left -= n.offset.parent.left - this.instance.offset.parent.left;
                        this.instance.offset.parent.top -= n.offset.parent.top - this.instance.offset.parent.top;
                        n._trigger("toSortable", t);
                        n.dropped = this.instance.element;
                        n.currentItem = n.element;
                        this.instance.fromOutside = n
                    }
                    if (this.instance.currentItem) {
                        this.instance._mouseDrag(t)
                    }
                }
                else {
                    if (this.instance.isOver) {
                        this.instance.isOver = 0;
                        this.instance.cancelHelperRemoval = true;
                        this.instance.options.revert = false;
                        this.instance._trigger("out", t, this.instance._uiHash(this.instance));
                        this.instance._mouseStop(t, true);
                        this.instance.options.helper = this.instance.options._helper;
                        this.instance.currentItem.remove();
                        if (this.instance.placeholder) {
                            this.instance.placeholder.remove()
                        }
                        n._trigger("fromSortable", t);
                        n.dropped = false
                    }
                }
            })
        }
    });
    e.ui.plugin.add("draggable", "cursor", {
        start: function () {
            var t = e("body"),
                i = e(this).data("ui-draggable").options;
            if (t.css("cursor")) {
                i._cursor = t.css("cursor")
            }
            t.css("cursor", i.cursor)
        },
        stop: function () {
            var t = e(this).data("ui-draggable").options;
            if (t._cursor) {
                e("body").css("cursor", t._cursor)
            }
        }
    });
    e.ui.plugin.add("draggable", "opacity", {
        start: function (t, i) {
            var n = e(i.helper),
                r = e(this).data("ui-draggable").options;
            if (n.css("opacity")) {
                r._opacity = n.css("opacity")
            }
            n.css("opacity", r.opacity)
        },
        stop: function (t, i) {
            var n = e(this).data("ui-draggable").options;
            if (n._opacity) {
                e(i.helper).css("opacity", n._opacity)
            }
        }
    });
    e.ui.plugin.add("draggable", "scroll", {
        start: function () {
            var t = e(this).data("ui-draggable");
            if (t.scrollParent[0] !== document && t.scrollParent[0].tagName !== "HTML") {
                t.overflowOffset = t.scrollParent.offset()
            }
        },
        drag: function (t) {
            var i = e(this).data("ui-draggable"),
                n = i.options,
                r = false;
            if (i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {
                if (!n.axis || n.axis !== "x") {
                    if (i.overflowOffset.top + i.scrollParent[0].offsetHeight - t.pageY < n.scrollSensitivity) {
                        i.scrollParent[0].scrollTop = r = i.scrollParent[0].scrollTop + n.scrollSpeed
                    }
                    else if (t.pageY - i.overflowOffset.top < n.scrollSensitivity) {
                        i.scrollParent[0].scrollTop = r = i.scrollParent[0].scrollTop - n.scrollSpeed
                    }
                }
                if (!n.axis || n.axis !== "y") {
                    if (i.overflowOffset.left + i.scrollParent[0].offsetWidth - t.pageX < n.scrollSensitivity) {
                        i.scrollParent[0].scrollLeft = r = i.scrollParent[0].scrollLeft + n.scrollSpeed
                    }
                    else if (t.pageX - i.overflowOffset.left < n.scrollSensitivity) {
                        i.scrollParent[0].scrollLeft = r = i.scrollParent[0].scrollLeft - n.scrollSpeed
                    }
                }
            }
            else {
                if (!n.axis || n.axis !== "x") {
                    if (t.pageY - e(document).scrollTop() < n.scrollSensitivity) {
                        r = e(document).scrollTop(e(document).scrollTop() - n.scrollSpeed)
                    }
                    else if (e(window).height() - (t.pageY - e(document).scrollTop()) < n.scrollSensitivity) {
                        r = e(document).scrollTop(e(document).scrollTop() + n.scrollSpeed)
                    }
                }
                if (!n.axis || n.axis !== "y") {
                    if (t.pageX - e(document).scrollLeft() < n.scrollSensitivity) {
                        r = e(document).scrollLeft(e(document).scrollLeft() - n.scrollSpeed)
                    }
                    else if (e(window).width() - (t.pageX - e(document).scrollLeft()) < n.scrollSensitivity) {
                        r = e(document).scrollLeft(e(document).scrollLeft() + n.scrollSpeed)
                    }
                }
            }
            if (r !== false && e.ui.ddmanager && !n.dropBehaviour) {
                e.ui.ddmanager.prepareOffsets(i, t)
            }
        }
    });
    e.ui.plugin.add("draggable", "snap", {
        start: function () {
            var t = e(this).data("ui-draggable"),
                i = t.options;
            t.snapElements = [];
            e(i.snap.constructor !== String ? i.snap.items || ":data(ui-draggable)" : i.snap).each(function () {
                var i = e(this),
                    n = i.offset();
                if (this !== t.element[0]) {
                    t.snapElements.push({
                        item: this,
                        width: i.outerWidth(),
                        height: i.outerHeight(),
                        top: n.top,
                        left: n.left
                    })
                }
            })
        },
        drag: function (t, i) {
            var n, r, s, a, o, l, u, c, f, h, d = e(this).data("ui-draggable"),
                p = d.options,
                g = p.snapTolerance,
                m = i.offset.left,
                v = m + d.helperProportions.width,
                y = i.offset.top,
                b = y + d.helperProportions.height;
            for (f = d.snapElements.length - 1; f >= 0; f--) {
                o = d.snapElements[f].left;
                l = o + d.snapElements[f].width;
                u = d.snapElements[f].top;
                c = u + d.snapElements[f].height;
                if (v < o - g || m > l + g || b < u - g || y > c + g || !e.contains(d.snapElements[f].item.ownerDocument, d.snapElements[f].item)) {
                    if (d.snapElements[f].snapping) {
                        d.options.snap.release && d.options.snap.release.call(d.element, t, e.extend(d._uiHash(), {
                            snapItem: d.snapElements[f].item
                        }))
                    }
                    d.snapElements[f].snapping = false;
                    continue
                }
                if (p.snapMode !== "inner") {
                    n = Math.abs(u - b) <= g;
                    r = Math.abs(c - y) <= g;
                    s = Math.abs(o - v) <= g;
                    a = Math.abs(l - m) <= g;
                    if (n) {
                        i.position.top = d._convertPositionTo("relative", {
                            top: u - d.helperProportions.height,
                            left: 0
                        }).top - d.margins.top
                    }
                    if (r) {
                        i.position.top = d._convertPositionTo("relative", {
                            top: c,
                            left: 0
                        }).top - d.margins.top
                    }
                    if (s) {
                        i.position.left = d._convertPositionTo("relative", {
                            top: 0,
                            left: o - d.helperProportions.width
                        }).left - d.margins.left
                    }
                    if (a) {
                        i.position.left = d._convertPositionTo("relative", {
                            top: 0,
                            left: l
                        }).left - d.margins.left
                    }
                }
                h = n || r || s || a;
                if (p.snapMode !== "outer") {
                    n = Math.abs(u - y) <= g;
                    r = Math.abs(c - b) <= g;
                    s = Math.abs(o - m) <= g;
                    a = Math.abs(l - v) <= g;
                    if (n) {
                        i.position.top = d._convertPositionTo("relative", {
                            top: u,
                            left: 0
                        }).top - d.margins.top
                    }
                    if (r) {
                        i.position.top = d._convertPositionTo("relative", {
                            top: c - d.helperProportions.height,
                            left: 0
                        }).top - d.margins.top
                    }
                    if (s) {
                        i.position.left = d._convertPositionTo("relative", {
                            top: 0,
                            left: o
                        }).left - d.margins.left
                    }
                    if (a) {
                        i.position.left = d._convertPositionTo("relative", {
                            top: 0,
                            left: l - d.helperProportions.width
                        }).left - d.margins.left
                    }
                }
                if (!d.snapElements[f].snapping && (n || r || s || a || h)) {
                    d.options.snap.snap && d.options.snap.snap.call(d.element, t, e.extend(d._uiHash(), {
                        snapItem: d.snapElements[f].item
                    }))
                }
                d.snapElements[f].snapping = n || r || s || a || h
            }
        }
    });
    e.ui.plugin.add("draggable", "stack", {
        start: function () {
            var t, i = this.data("ui-draggable").options,
                n = e.makeArray(e(i.stack)).sort(function (t, i) {
                    return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(i).css("zIndex"), 10) || 0)
                });
            if (!n.length) {
                return
            }
            t = parseInt(e(n[0]).css("zIndex"), 10) || 0;
            e(n).each(function (i) {
                e(this).css("zIndex", t + i)
            });
            this.css("zIndex", t + n.length)
        }
    });
    e.ui.plugin.add("draggable", "zIndex", {
        start: function (t, i) {
            var n = e(i.helper),
                r = e(this).data("ui-draggable").options;
            if (n.css("zIndex")) {
                r._zIndex = n.css("zIndex")
            }
            n.css("zIndex", r.zIndex)
        },
        stop: function (t, i) {
            var n = e(this).data("ui-draggable").options;
            if (n._zIndex) {
                e(i.helper).css("zIndex", n._zIndex)
            }
        }
    })
})(jQuery);
(function (e, t) {
    function i(e, t, i) {
        return e > t && e < t + i
    }
    e.widget("ui.droppable", {
        version: "1.10.4",
        widgetEventPrefix: "drop",
        options: {
            accept: "*",
            activeClass: false,
            addClasses: true,
            greedy: false,
            hoverClass: false,
            scope: "default",
            tolerance: "intersect",
            activate: null,
            deactivate: null,
            drop: null,
            out: null,
            over: null
        },
        _create: function () {
            var t, i = this.options,
                n = i.accept;
            this.isover = false;
            this.isout = true;
            this.accept = e.isFunction(n) ? n : function (e) {
                return e.is(n)
            };
            this.proportions = function () {
                if (arguments.length) {
                    t = arguments[0]
                }
                else {
                    return t ? t : t = {
                        width: this.element[0].offsetWidth,
                        height: this.element[0].offsetHeight
                    }
                }
            };
            e.ui.ddmanager.droppables[i.scope] = e.ui.ddmanager.droppables[i.scope] || [];
            e.ui.ddmanager.droppables[i.scope].push(this);
            i.addClasses && this.element.addClass("ui-droppable")
        },
        _destroy: function () {
            var t = 0,
                i = e.ui.ddmanager.droppables[this.options.scope];
            for (; t < i.length; t++) {
                if (i[t] === this) {
                    i.splice(t, 1)
                }
            }
            this.element.removeClass("ui-droppable ui-droppable-disabled")
        },
        _setOption: function (t, i) {
            if (t === "accept") {
                this.accept = e.isFunction(i) ? i : function (e) {
                    return e.is(i)
                }
            }
            e.Widget.prototype._setOption.apply(this, arguments)
        },
        _activate: function (t) {
            var i = e.ui.ddmanager.current;
            if (this.options.activeClass) {
                this.element.addClass(this.options.activeClass)
            }
            if (i) {
                this._trigger("activate", t, this.ui(i))
            }
        },
        _deactivate: function (t) {
            var i = e.ui.ddmanager.current;
            if (this.options.activeClass) {
                this.element.removeClass(this.options.activeClass)
            }
            if (i) {
                this._trigger("deactivate", t, this.ui(i))
            }
        },
        _over: function (t) {
            var i = e.ui.ddmanager.current;
            if (!i || (i.currentItem || i.element)[0] === this.element[0]) {
                return
            }
            if (this.accept.call(this.element[0], i.currentItem || i.element)) {
                if (this.options.hoverClass) {
                    this.element.addClass(this.options.hoverClass)
                }
                this._trigger("over", t, this.ui(i))
            }
        },
        _out: function (t) {
            var i = e.ui.ddmanager.current;
            if (!i || (i.currentItem || i.element)[0] === this.element[0]) {
                return
            }
            if (this.accept.call(this.element[0], i.currentItem || i.element)) {
                if (this.options.hoverClass) {
                    this.element.removeClass(this.options.hoverClass)
                }
                this._trigger("out", t, this.ui(i))
            }
        },
        _drop: function (t, i) {
            var n = i || e.ui.ddmanager.current,
                r = false;
            if (!n || (n.currentItem || n.element)[0] === this.element[0]) {
                return false
            }
            this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function () {
                var t = e.data(this, "ui-droppable");
                if (t.options.greedy && !t.options.disabled && t.options.scope === n.options.scope && t.accept.call(t.element[0], n.currentItem || n.element) && e.ui.intersect(n, e.extend(t, {
                        offset: t.element.offset()
                    }), t.options.tolerance)) {
                    r = true;
                    return false
                }
            });
            if (r) {
                return false
            }
            if (this.accept.call(this.element[0], n.currentItem || n.element)) {
                if (this.options.activeClass) {
                    this.element.removeClass(this.options.activeClass)
                }
                if (this.options.hoverClass) {
                    this.element.removeClass(this.options.hoverClass)
                }
                this._trigger("drop", t, this.ui(n));
                return this.element
            }
            return false
        },
        ui: function (e) {
            return {
                draggable: e.currentItem || e.element,
                helper: e.helper,
                position: e.position,
                offset: e.positionAbs
            }
        }
    });
    e.ui.intersect = function (e, t, n) {
        if (!t.offset) {
            return false
        }
        var r, s, a = (e.positionAbs || e.position.absolute).left,
            o = (e.positionAbs || e.position.absolute).top,
            l = a + e.helperProportions.width,
            u = o + e.helperProportions.height,
            c = t.offset.left,
            f = t.offset.top,
            h = c + t.proportions().width,
            d = f + t.proportions().height;
        switch (n) {
            case "fit":
                return c <= a && l <= h && f <= o && u <= d;
            case "intersect":
                return c < a + e.helperProportions.width / 2 && l - e.helperProportions.width / 2 < h && f < o + e.helperProportions.height / 2 && u - e.helperProportions.height / 2 < d;
            case "pointer":
                r = (e.positionAbs || e.position.absolute).left + (e.clickOffset || e.offset.click).left;
                s = (e.positionAbs || e.position.absolute).top + (e.clickOffset || e.offset.click).top;
                return i(s, f, t.proportions().height) && i(r, c, t.proportions().width);
            case "touch":
                return (o >= f && o <= d || u >= f && u <= d || o < f && u > d) && (a >= c && a <= h || l >= c && l <= h || a < c && l > h);
            default:
                return false
        }
    };
    e.ui.ddmanager = {
        current: null,
        droppables: {
            default: []
        },
        prepareOffsets: function (t, i) {
            var n, r, s = e.ui.ddmanager.droppables[t.options.scope] || [],
                a = i ? i.type : null,
                o = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            e: for (n = 0; n < s.length; n++) {
                if (s[n].options.disabled || t && !s[n].accept.call(s[n].element[0], t.currentItem || t.element)) {
                    continue
                }
                for (r = 0; r < o.length; r++) {
                    if (o[r] === s[n].element[0]) {
                        s[n].proportions().height = 0;
                        continue e
                    }
                }
                s[n].visible = s[n].element.css("display") !== "none";
                if (!s[n].visible) {
                    continue
                }
                if (a === "mousedown") {
                    s[n]._activate.call(s[n], i)
                }
                s[n].offset = s[n].element.offset();
                s[n].proportions({
                    width: s[n].element[0].offsetWidth,
                    height: s[n].element[0].offsetHeight
                })
            }
        },
        drop: function (t, i) {
            var n = false;
            e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), function () {
                if (!this.options) {
                    return
                }
                if (!this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance)) {
                    n = this._drop.call(this, i) || n
                }
                if (!this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element)) {
                    this.isout = true;
                    this.isover = false;
                    this._deactivate.call(this, i)
                }
            });
            return n
        },
        dragStart: function (t, i) {
            t.element.parentsUntil("body").bind("scroll.droppable", function () {
                if (!t.options.refreshPositions) {
                    e.ui.ddmanager.prepareOffsets(t, i)
                }
            })
        },
        drag: function (t, i) {
            if (t.options.refreshPositions) {
                e.ui.ddmanager.prepareOffsets(t, i)
            }
            e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function () {
                if (this.options.disabled || this.greedyChild || !this.visible) {
                    return
                }
                var n, r, s, a = e.ui.intersect(t, this, this.options.tolerance),
                    o = !a && this.isover ? "isout" : a && !this.isover ? "isover" : null;
                if (!o) {
                    return
                }
                if (this.options.greedy) {
                    r = this.options.scope;
                    s = this.element.parents(":data(ui-droppable)").filter(function () {
                        return e.data(this, "ui-droppable").options.scope === r
                    });
                    if (s.length) {
                        n = e.data(s[0], "ui-droppable");
                        n.greedyChild = o === "isover"
                    }
                }
                if (n && o === "isover") {
                    n.isover = false;
                    n.isout = true;
                    n._out.call(n, i)
                }
                this[o] = true;
                this[o === "isout" ? "isover" : "isout"] = false;
                this[o === "isover" ? "_over" : "_out"].call(this, i);
                if (n && o === "isout") {
                    n.isout = false;
                    n.isover = true;
                    n._over.call(n, i)
                }
            })
        },
        dragStop: function (t, i) {
            t.element.parentsUntil("body").unbind("scroll.droppable");
            if (!t.options.refreshPositions) {
                e.ui.ddmanager.prepareOffsets(t, i)
            }
        }
    }
})(jQuery);
(function (e, t) {
    function i(e) {
        return parseInt(e, 10) || 0
    }

    function n(e) {
        return !isNaN(parseInt(e, 10))
    }
    e.widget("ui.resizable", e.ui.mouse, {
        version: "1.10.4",
        widgetEventPrefix: "resize",
        options: {
            alsoResize: false,
            animate: false,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: false,
            autoHide: false,
            containment: false,
            ghost: false,
            grid: false,
            handles: "e,s,se",
            helper: false,
            maxHeight: null,
            maxWidth: null,
            minHeight: 10,
            minWidth: 10,
            zIndex: 90,
            resize: null,
            start: null,
            stop: null
        },
        _create: function () {
            var t, i, n, r, s, a = this,
                o = this.options;
            this.element.addClass("ui-resizable");
            e.extend(this, {
                _aspectRatio: !!o.aspectRatio,
                aspectRatio: o.aspectRatio,
                originalElement: this.element,
                _proportionallyResizeElements: [],
                _helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null
            });
            if (this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)) {
                this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                    position: this.element.css("position"),
                    width: this.element.outerWidth(),
                    height: this.element.outerHeight(),
                    top: this.element.css("top"),
                    left: this.element.css("left")
                }));
                this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable"));
                this.elementIsWrapper = true;
                this.element.css({
                    marginLeft: this.originalElement.css("marginLeft"),
                    marginTop: this.originalElement.css("marginTop"),
                    marginRight: this.originalElement.css("marginRight"),
                    marginBottom: this.originalElement.css("marginBottom")
                });
                this.originalElement.css({
                    marginLeft: 0,
                    marginTop: 0,
                    marginRight: 0,
                    marginBottom: 0
                });
                this.originalResizeStyle = this.originalElement.css("resize");
                this.originalElement.css("resize", "none");
                this._proportionallyResizeElements.push(this.originalElement.css({
                    position: "static",
                    zoom: 1,
                    display: "block"
                }));
                this.originalElement.css({
                    margin: this.originalElement.css("margin")
                });
                this._proportionallyResize()
            }
            this.handles = o.handles || (!e(".ui-resizable-handle", this.element).length ? "e,s,se" : {
                n: ".ui-resizable-n",
                e: ".ui-resizable-e",
                s: ".ui-resizable-s",
                w: ".ui-resizable-w",
                se: ".ui-resizable-se",
                sw: ".ui-resizable-sw",
                ne: ".ui-resizable-ne",
                nw: ".ui-resizable-nw"
            });
            if (this.handles.constructor === String) {
                if (this.handles === "all") {
                    this.handles = "n,e,s,w,se,sw,ne,nw"
                }
                t = this.handles.split(",");
                this.handles = {};
                for (i = 0; i < t.length; i++) {
                    n = e.trim(t[i]);
                    s = "ui-resizable-" + n;
                    r = e("<div class='ui-resizable-handle " + s + "'></div>");
                    r.css({
                        zIndex: o.zIndex
                    });
                    if ("se" === n) {
                        r.addClass("ui-icon ui-icon-gripsmall-diagonal-se")
                    }
                    this.handles[n] = ".ui-resizable-" + n;
                    this.element.append(r)
                }
            }
            this._renderAxis = function (t) {
                var i, n, r, s;
                t = t || this.element;
                for (i in this.handles) {
                    if (this.handles[i].constructor === String) {
                        this.handles[i] = e(this.handles[i], this.element).show()
                    }
                    if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {
                        n = e(this.handles[i], this.element);
                        s = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() : n.outerWidth();
                        r = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join("");
                        t.css(r, s);
                        this._proportionallyResize()
                    }
                    if (!e(this.handles[i]).length) {
                        continue
                    }
                }
            };
            this._renderAxis(this.element);
            this._handles = e(".ui-resizable-handle", this.element).disableSelection();
            this._handles.mouseover(function () {
                if (!a.resizing) {
                    if (this.className) {
                        r = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)
                    }
                    a.axis = r && r[1] ? r[1] : "se"
                }
            });
            if (o.autoHide) {
                this._handles.hide();
                e(this.element).addClass("ui-resizable-autohide").mouseenter(function () {
                    if (o.disabled) {
                        return
                    }
                    e(this).removeClass("ui-resizable-autohide");
                    a._handles.show()
                }).mouseleave(function () {
                    if (o.disabled) {
                        return
                    }
                    if (!a.resizing) {
                        e(this).addClass("ui-resizable-autohide");
                        a._handles.hide()
                    }
                })
            }
            this._mouseInit()
        },
        _destroy: function () {
            this._mouseDestroy();
            var t, i = function (t) {
                e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
            };
            if (this.elementIsWrapper) {
                i(this.element);
                t = this.element;
                this.originalElement.css({
                    position: t.css("position"),
                    width: t.outerWidth(),
                    height: t.outerHeight(),
                    top: t.css("top"),
                    left: t.css("left")
                }).insertAfter(t);
                t.remove()
            }
            this.originalElement.css("resize", this.originalResizeStyle);
            i(this.originalElement);
            return this
        },
        _mouseCapture: function (t) {
            var i, n, r = false;
            for (i in this.handles) {
                n = e(this.handles[i])[0];
                if (n === t.target || e.contains(n, t.target)) {
                    r = true
                }
            }
            return !this.options.disabled && r
        },
        _mouseStart: function (t) {
            var n, r, s, a = this.options,
                o = this.element.position(),
                l = this.element;
            this.resizing = true;
            if (/absolute/.test(l.css("position"))) {
                l.css({
                    position: "absolute",
                    top: l.css("top"),
                    left: l.css("left")
                })
            }
            else if (l.is(".ui-draggable")) {
                l.css({
                    position: "absolute",
                    top: o.top,
                    left: o.left
                })
            }
            this._renderProxy();
            n = i(this.helper.css("left"));
            r = i(this.helper.css("top"));
            if (a.containment) {
                n += e(a.containment).scrollLeft() || 0;
                r += e(a.containment).scrollTop() || 0
            }
            this.offset = this.helper.offset();
            this.position = {
                left: n,
                top: r
            };
            this.size = this._helper ? {
                width: this.helper.width(),
                height: this.helper.height()
            } : {
                width: l.width(),
                height: l.height()
            };
            this.originalSize = this._helper ? {
                width: l.outerWidth(),
                height: l.outerHeight()
            } : {
                width: l.width(),
                height: l.height()
            };
            this.originalPosition = {
                left: n,
                top: r
            };
            this.sizeDiff = {
                width: l.outerWidth() - l.width(),
                height: l.outerHeight() - l.height()
            };
            this.originalMousePosition = {
                left: t.pageX,
                top: t.pageY
            };
            this.aspectRatio = typeof a.aspectRatio === "number" ? a.aspectRatio : this.originalSize.width / this.originalSize.height || 1;
            s = e(".ui-resizable-" + this.axis).css("cursor");
            e("body").css("cursor", s === "auto" ? this.axis + "-resize" : s);
            l.addClass("ui-resizable-resizing");
            this._propagate("start", t);
            return true
        },
        _mouseDrag: function (t) {
            var i, n = this.helper,
                r = {},
                s = this.originalMousePosition,
                a = this.axis,
                o = this.position.top,
                l = this.position.left,
                u = this.size.width,
                c = this.size.height,
                f = t.pageX - s.left || 0,
                h = t.pageY - s.top || 0,
                d = this._change[a];
            if (!d) {
                return false
            }
            i = d.apply(this, [t, f, h]);
            this._updateVirtualBoundaries(t.shiftKey);
            if (this._aspectRatio || t.shiftKey) {
                i = this._updateRatio(i, t)
            }
            i = this._respectSize(i, t);
            this._updateCache(i);
            this._propagate("resize", t);
            if (this.position.top !== o) {
                r.top = this.position.top + "px"
            }
            if (this.position.left !== l) {
                r.left = this.position.left + "px"
            }
            if (this.size.width !== u) {
                r.width = this.size.width + "px"
            }
            if (this.size.height !== c) {
                r.height = this.size.height + "px"
            }
            n.css(r);
            if (!this._helper && this._proportionallyResizeElements.length) {
                this._proportionallyResize()
            }
            if (!e.isEmptyObject(r)) {
                this._trigger("resize", t, this.ui())
            }
            return false
        },
        _mouseStop: function (t) {
            this.resizing = false;
            var i, n, r, s, a, o, l, u = this.options,
                c = this;
            if (this._helper) {
                i = this._proportionallyResizeElements;
                n = i.length && /textarea/i.test(i[0].nodeName);
                r = n && e.ui.hasScroll(i[0], "left") ? 0 : c.sizeDiff.height;
                s = n ? 0 : c.sizeDiff.width;
                a = {
                    width: c.helper.width() - s,
                    height: c.helper.height() - r
                };
                o = parseInt(c.element.css("left"), 10) + (c.position.left - c.originalPosition.left) || null;
                l = parseInt(c.element.css("top"), 10) + (c.position.top - c.originalPosition.top) || null;
                if (!u.animate) {
                    this.element.css(e.extend(a, {
                        top: l,
                        left: o
                    }))
                }
                c.helper.height(c.size.height);
                c.helper.width(c.size.width);
                if (this._helper && !u.animate) {
                    this._proportionallyResize()
                }
            }
            e("body").css("cursor", "auto");
            this.element.removeClass("ui-resizable-resizing");
            this._propagate("stop", t);
            if (this._helper) {
                this.helper.remove()
            }
            return false
        },
        _updateVirtualBoundaries: function (e) {
            var t, i, r, s, a, o = this.options;
            a = {
                minWidth: n(o.minWidth) ? o.minWidth : 0,
                maxWidth: n(o.maxWidth) ? o.maxWidth : Infinity,
                minHeight: n(o.minHeight) ? o.minHeight : 0,
                maxHeight: n(o.maxHeight) ? o.maxHeight : Infinity
            };
            if (this._aspectRatio || e) {
                t = a.minHeight * this.aspectRatio;
                r = a.minWidth / this.aspectRatio;
                i = a.maxHeight * this.aspectRatio;
                s = a.maxWidth / this.aspectRatio;
                if (t > a.minWidth) {
                    a.minWidth = t
                }
                if (r > a.minHeight) {
                    a.minHeight = r
                }
                if (i < a.maxWidth) {
                    a.maxWidth = i
                }
                if (s < a.maxHeight) {
                    a.maxHeight = s
                }
            }
            this._vBoundaries = a
        },
        _updateCache: function (e) {
            this.offset = this.helper.offset();
            if (n(e.left)) {
                this.position.left = e.left
            }
            if (n(e.top)) {
                this.position.top = e.top
            }
            if (n(e.height)) {
                this.size.height = e.height
            }
            if (n(e.width)) {
                this.size.width = e.width
            }
        },
        _updateRatio: function (e) {
            var t = this.position,
                i = this.size,
                r = this.axis;
            if (n(e.height)) {
                e.width = e.height * this.aspectRatio
            }
            else if (n(e.width)) {
                e.height = e.width / this.aspectRatio
            }
            if (r === "sw") {
                e.left = t.left + (i.width - e.width);
                e.top = null
            }
            if (r === "nw") {
                e.top = t.top + (i.height - e.height);
                e.left = t.left + (i.width - e.width)
            }
            return e
        },
        _respectSize: function (e) {
            var t = this._vBoundaries,
                i = this.axis,
                r = n(e.width) && t.maxWidth && t.maxWidth < e.width,
                s = n(e.height) && t.maxHeight && t.maxHeight < e.height,
                a = n(e.width) && t.minWidth && t.minWidth > e.width,
                o = n(e.height) && t.minHeight && t.minHeight > e.height,
                l = this.originalPosition.left + this.originalSize.width,
                u = this.position.top + this.size.height,
                c = /sw|nw|w/.test(i),
                f = /nw|ne|n/.test(i);
            if (a) {
                e.width = t.minWidth
            }
            if (o) {
                e.height = t.minHeight
            }
            if (r) {
                e.width = t.maxWidth
            }
            if (s) {
                e.height = t.maxHeight
            }
            if (a && c) {
                e.left = l - t.minWidth
            }
            if (r && c) {
                e.left = l - t.maxWidth
            }
            if (o && f) {
                e.top = u - t.minHeight
            }
            if (s && f) {
                e.top = u - t.maxHeight
            }
            if (!e.width && !e.height && !e.left && e.top) {
                e.top = null
            }
            else if (!e.width && !e.height && !e.top && e.left) {
                e.left = null
            }
            return e
        },
        _proportionallyResize: function () {
            if (!this._proportionallyResizeElements.length) {
                return
            }
            var e, t, i, n, r, s = this.helper || this.element;
            for (e = 0; e < this._proportionallyResizeElements.length; e++) {
                r = this._proportionallyResizeElements[e];
                if (!this.borderDif) {
                    this.borderDif = [];
                    i = [r.css("borderTopWidth"), r.css("borderRightWidth"), r.css("borderBottomWidth"), r.css("borderLeftWidth")];
                    n = [r.css("paddingTop"), r.css("paddingRight"), r.css("paddingBottom"), r.css("paddingLeft")];
                    for (t = 0; t < i.length; t++) {
                        this.borderDif[t] = (parseInt(i[t], 10) || 0) + (parseInt(n[t], 10) || 0)
                    }
                }
                r.css({
                    height: s.height() - this.borderDif[0] - this.borderDif[2] || 0,
                    width: s.width() - this.borderDif[1] - this.borderDif[3] || 0
                })
            }
        },
        _renderProxy: function () {
            var t = this.element,
                i = this.options;
            this.elementOffset = t.offset();
            if (this._helper) {
                this.helper = this.helper || e("<div style='overflow:hidden;'></div>");
                this.helper.addClass(this._helper).css({
                    width: this.element.outerWidth() - 1,
                    height: this.element.outerHeight() - 1,
                    position: "absolute",
                    left: this.elementOffset.left + "px",
                    top: this.elementOffset.top + "px",
                    zIndex: ++i.zIndex
                });
                this.helper.appendTo("body").disableSelection()
            }
            else {
                this.helper = this.element
            }
        },
        _change: {
            e: function (e, t) {
                return {
                    width: this.originalSize.width + t
                }
            },
            w: function (e, t) {
                var i = this.originalSize,
                    n = this.originalPosition;
                return {
                    left: n.left + t,
                    width: i.width - t
                }
            },
            n: function (e, t, i) {
                var n = this.originalSize,
                    r = this.originalPosition;
                return {
                    top: r.top + i,
                    height: n.height - i
                }
            },
            s: function (e, t, i) {
                return {
                    height: this.originalSize.height + i
                }
            },
            se: function (t, i, n) {
                return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, i, n]))
            },
            sw: function (t, i, n) {
                return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, i, n]))
            },
            ne: function (t, i, n) {
                return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, i, n]))
            },
            nw: function (t, i, n) {
                return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, i, n]))
            }
        },
        _propagate: function (t, i) {
            e.ui.plugin.call(this, t, [i, this.ui()]);
            t !== "resize" && this._trigger(t, i, this.ui())
        },
        plugins: {},
        ui: function () {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            }
        }
    });
    e.ui.plugin.add("resizable", "animate", {
        stop: function (t) {
            var i = e(this).data("ui-resizable"),
                n = i.options,
                r = i._proportionallyResizeElements,
                s = r.length && /textarea/i.test(r[0].nodeName),
                a = s && e.ui.hasScroll(r[0], "left") ? 0 : i.sizeDiff.height,
                o = s ? 0 : i.sizeDiff.width,
                l = {
                    width: i.size.width - o,
                    height: i.size.height - a
                },
                u = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null,
                c = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
            i.element.animate(e.extend(l, c && u ? {
                top: c,
                left: u
            } : {}), {
                duration: n.animateDuration,
                easing: n.animateEasing,
                step: function () {
                    var n = {
                        width: parseInt(i.element.css("width"), 10),
                        height: parseInt(i.element.css("height"), 10),
                        top: parseInt(i.element.css("top"), 10),
                        left: parseInt(i.element.css("left"), 10)
                    };
                    if (r && r.length) {
                        e(r[0]).css({
                            width: n.width,
                            height: n.height
                        })
                    }
                    i._updateCache(n);
                    i._propagate("resize", t)
                }
            })
        }
    });
    e.ui.plugin.add("resizable", "containment", {
        start: function () {
            var t, n, r, s, a, o, l, u = e(this).data("ui-resizable"),
                c = u.options,
                f = u.element,
                h = c.containment,
                d = h instanceof e ? h.get(0) : /parent/.test(h) ? f.parent().get(0) : h;
            if (!d) {
                return
            }
            u.containerElement = e(d);
            if (/document/.test(h) || h === document) {
                u.containerOffset = {
                    left: 0,
                    top: 0
                };
                u.containerPosition = {
                    left: 0,
                    top: 0
                };
                u.parentData = {
                    element: e(document),
                    left: 0,
                    top: 0,
                    width: e(document).width(),
                    height: e(document).height() || document.body.parentNode.scrollHeight
                }
            }
            else {
                t = e(d);
                n = [];
                e(["Top", "Right", "Left", "Bottom"]).each(function (e, r) {
                    n[e] = i(t.css("padding" + r))
                });
                u.containerOffset = t.offset();
                u.containerPosition = t.position();
                u.containerSize = {
                    height: t.innerHeight() - n[3],
                    width: t.innerWidth() - n[1]
                };
                r = u.containerOffset;
                s = u.containerSize.height;
                a = u.containerSize.width;
                o = e.ui.hasScroll(d, "left") ? d.scrollWidth : a;
                l = e.ui.hasScroll(d) ? d.scrollHeight : s;
                u.parentData = {
                    element: d,
                    left: r.left,
                    top: r.top,
                    width: o,
                    height: l
                }
            }
        },
        resize: function (t) {
            var i, n, r, s, a = e(this).data("ui-resizable"),
                o = a.options,
                l = a.containerOffset,
                u = a.position,
                c = a._aspectRatio || t.shiftKey,
                f = {
                    top: 0,
                    left: 0
                },
                h = a.containerElement;
            if (h[0] !== document && /static/.test(h.css("position"))) {
                f = l
            }
            if (u.left < (a._helper ? l.left : 0)) {
                a.size.width = a.size.width + (a._helper ? a.position.left - l.left : a.position.left - f.left);
                if (c) {
                    a.size.height = a.size.width / a.aspectRatio
                }
                a.position.left = o.helper ? l.left : 0
            }
            if (u.top < (a._helper ? l.top : 0)) {
                a.size.height = a.size.height + (a._helper ? a.position.top - l.top : a.position.top);
                if (c) {
                    a.size.width = a.size.height * a.aspectRatio
                }
                a.position.top = a._helper ? l.top : 0
            }
            a.offset.left = a.parentData.left + a.position.left;
            a.offset.top = a.parentData.top + a.position.top;
            i = Math.abs((a._helper ? a.offset.left - f.left : a.offset.left - f.left) + a.sizeDiff.width);
            n = Math.abs((a._helper ? a.offset.top - f.top : a.offset.top - l.top) + a.sizeDiff.height);
            r = a.containerElement.get(0) === a.element.parent().get(0);
            s = /relative|absolute/.test(a.containerElement.css("position"));
            if (r && s) {
                i -= Math.abs(a.parentData.left)
            }
            if (i + a.size.width >= a.parentData.width) {
                a.size.width = a.parentData.width - i;
                if (c) {
                    a.size.height = a.size.width / a.aspectRatio
                }
            }
            if (n + a.size.height >= a.parentData.height) {
                a.size.height = a.parentData.height - n;
                if (c) {
                    a.size.width = a.size.height * a.aspectRatio
                }
            }
        },
        stop: function () {
            var t = e(this).data("ui-resizable"),
                i = t.options,
                n = t.containerOffset,
                r = t.containerPosition,
                s = t.containerElement,
                a = e(t.helper),
                o = a.offset(),
                l = a.outerWidth() - t.sizeDiff.width,
                u = a.outerHeight() - t.sizeDiff.height;
            if (t._helper && !i.animate && /relative/.test(s.css("position"))) {
                e(this).css({
                    left: o.left - r.left - n.left,
                    width: l,
                    height: u
                })
            }
            if (t._helper && !i.animate && /static/.test(s.css("position"))) {
                e(this).css({
                    left: o.left - r.left - n.left,
                    width: l,
                    height: u
                })
            }
        }
    });
    e.ui.plugin.add("resizable", "alsoResize", {
        start: function () {
            var t = e(this).data("ui-resizable"),
                i = t.options,
                n = function (t) {
                    e(t).each(function () {
                        var t = e(this);
                        t.data("ui-resizable-alsoresize", {
                            width: parseInt(t.width(), 10),
                            height: parseInt(t.height(), 10),
                            left: parseInt(t.css("left"), 10),
                            top: parseInt(t.css("top"), 10)
                        })
                    })
                };
            if (typeof i.alsoResize === "object" && !i.alsoResize.parentNode) {
                if (i.alsoResize.length) {
                    i.alsoResize = i.alsoResize[0];
                    n(i.alsoResize)
                }
                else {
                    e.each(i.alsoResize, function (e) {
                        n(e)
                    })
                }
            }
            else {
                n(i.alsoResize)
            }
        },
        resize: function (t, i) {
            var n = e(this).data("ui-resizable"),
                r = n.options,
                s = n.originalSize,
                a = n.originalPosition,
                o = {
                    height: n.size.height - s.height || 0,
                    width: n.size.width - s.width || 0,
                    top: n.position.top - a.top || 0,
                    left: n.position.left - a.left || 0
                },
                l = function (t, n) {
                    e(t).each(function () {
                        var t = e(this),
                            r = e(this).data("ui-resizable-alsoresize"),
                            s = {},
                            a = n && n.length ? n : t.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                        e.each(a, function (e, t) {
                            var i = (r[t] || 0) + (o[t] || 0);
                            if (i && i >= 0) {
                                s[t] = i || null
                            }
                        });
                        t.css(s)
                    })
                };
            if (typeof r.alsoResize === "object" && !r.alsoResize.nodeType) {
                e.each(r.alsoResize, function (e, t) {
                    l(e, t)
                })
            }
            else {
                l(r.alsoResize)
            }
        },
        stop: function () {
            e(this).removeData("resizable-alsoresize")
        }
    });
    e.ui.plugin.add("resizable", "ghost", {
        start: function () {
            var t = e(this).data("ui-resizable"),
                i = t.options,
                n = t.size;
            t.ghost = t.originalElement.clone();
            t.ghost.css({
                opacity: .25,
                display: "block",
                position: "relative",
                height: n.height,
                width: n.width,
                margin: 0,
                left: 0,
                top: 0
            }).addClass("ui-resizable-ghost").addClass(typeof i.ghost === "string" ? i.ghost : "");
            t.ghost.appendTo(t.helper)
        },
        resize: function () {
            var t = e(this).data("ui-resizable");
            if (t.ghost) {
                t.ghost.css({
                    position: "relative",
                    height: t.size.height,
                    width: t.size.width
                })
            }
        },
        stop: function () {
            var t = e(this).data("ui-resizable");
            if (t.ghost && t.helper) {
                t.helper.get(0).removeChild(t.ghost.get(0))
            }
        }
    });
    e.ui.plugin.add("resizable", "grid", {
        resize: function () {
            var t = e(this).data("ui-resizable"),
                i = t.options,
                n = t.size,
                r = t.originalSize,
                s = t.originalPosition,
                a = t.axis,
                o = typeof i.grid === "number" ? [i.grid, i.grid] : i.grid,
                l = o[0] || 1,
                u = o[1] || 1,
                c = Math.round((n.width - r.width) / l) * l,
                f = Math.round((n.height - r.height) / u) * u,
                h = r.width + c,
                d = r.height + f,
                p = i.maxWidth && i.maxWidth < h,
                g = i.maxHeight && i.maxHeight < d,
                m = i.minWidth && i.minWidth > h,
                v = i.minHeight && i.minHeight > d;
            i.grid = o;
            if (m) {
                h = h + l
            }
            if (v) {
                d = d + u
            }
            if (p) {
                h = h - l
            }
            if (g) {
                d = d - u
            }
            if (/^(se|s|e)$/.test(a)) {
                t.size.width = h;
                t.size.height = d
            }
            else if (/^(ne)$/.test(a)) {
                t.size.width = h;
                t.size.height = d;
                t.position.top = s.top - f
            }
            else if (/^(sw)$/.test(a)) {
                t.size.width = h;
                t.size.height = d;
                t.position.left = s.left - c
            }
            else {
                if (d - u > 0) {
                    t.size.height = d;
                    t.position.top = s.top - f
                }
                else {
                    t.size.height = u;
                    t.position.top = s.top + r.height - u
                }
                if (h - l > 0) {
                    t.size.width = h;
                    t.position.left = s.left - c
                }
                else {
                    t.size.width = l;
                    t.position.left = s.left + r.width - l
                }
            }
        }
    })
})(jQuery);
(function (e, t) {
    e.widget("ui.selectable", e.ui.mouse, {
        version: "1.10.4",
        options: {
            appendTo: "body",
            autoRefresh: true,
            distance: 0,
            filter: "*",
            tolerance: "touch",
            selected: null,
            selecting: null,
            start: null,
            stop: null,
            unselected: null,
            unselecting: null
        },
        _create: function () {
            var t, i = this;
            this.element.addClass("ui-selectable");
            this.dragged = false;
            this.refresh = function () {
                t = e(i.options.filter, i.element[0]);
                t.addClass("ui-selectee");
                t.each(function () {
                    var t = e(this),
                        i = t.offset();
                    e.data(this, "selectable-item", {
                        element: this,
                        $element: t,
                        left: i.left,
                        top: i.top,
                        right: i.left + t.outerWidth(),
                        bottom: i.top + t.outerHeight(),
                        startselected: false,
                        selected: t.hasClass("ui-selected"),
                        selecting: t.hasClass("ui-selecting"),
                        unselecting: t.hasClass("ui-unselecting")
                    })
                })
            };
            this.refresh();
            this.selectees = t.addClass("ui-selectee");
            this._mouseInit();
            this.helper = e("<div class='ui-selectable-helper'></div>")
        },
        _destroy: function () {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item");
            this.element.removeClass("ui-selectable ui-selectable-disabled");
            this._mouseDestroy()
        },
        _mouseStart: function (t) {
            var i = this,
                n = this.options;
            this.opos = [t.pageX, t.pageY];
            if (this.options.disabled) {
                return
            }
            this.selectees = e(n.filter, this.element[0]);
            this._trigger("start", t);
            e(n.appendTo).append(this.helper);
            this.helper.css({
                left: t.pageX,
                top: t.pageY,
                width: 0,
                height: 0
            });
            if (n.autoRefresh) {
                this.refresh()
            }
            this.selectees.filter(".ui-selected").each(function () {
                var n = e.data(this, "selectable-item");
                n.startselected = true;
                if (!t.metaKey && !t.ctrlKey) {
                    n.$element.removeClass("ui-selected");
                    n.selected = false;
                    n.$element.addClass("ui-unselecting");
                    n.unselecting = true;
                    i._trigger("unselecting", t, {
                        unselecting: n.element
                    })
                }
            });
            e(t.target).parents().addBack().each(function () {
                var n, r = e.data(this, "selectable-item");
                if (r) {
                    n = !t.metaKey && !t.ctrlKey || !r.$element.hasClass("ui-selected");
                    r.$element.removeClass(n ? "ui-unselecting" : "ui-selected").addClass(n ? "ui-selecting" : "ui-unselecting");
                    r.unselecting = !n;
                    r.selecting = n;
                    r.selected = n;
                    if (n) {
                        i._trigger("selecting", t, {
                            selecting: r.element
                        })
                    }
                    else {
                        i._trigger("unselecting", t, {
                            unselecting: r.element
                        })
                    }
                    return false
                }
            })
        },
        _mouseDrag: function (t) {
            this.dragged = true;
            if (this.options.disabled) {
                return
            }
            var i, n = this,
                r = this.options,
                s = this.opos[0],
                a = this.opos[1],
                o = t.pageX,
                l = t.pageY;
            if (s > o) {
                i = o;
                o = s;
                s = i
            }
            if (a > l) {
                i = l;
                l = a;
                a = i
            }
            this.helper.css({
                left: s,
                top: a,
                width: o - s,
                height: l - a
            });
            this.selectees.each(function () {
                var i = e.data(this, "selectable-item"),
                    u = false;
                if (!i || i.element === n.element[0]) {
                    return
                }
                if (r.tolerance === "touch") {
                    u = !(i.left > o || i.right < s || i.top > l || i.bottom < a)
                }
                else if (r.tolerance === "fit") {
                    u = i.left > s && i.right < o && i.top > a && i.bottom < l
                }
                if (u) {
                    if (i.selected) {
                        i.$element.removeClass("ui-selected");
                        i.selected = false
                    }
                    if (i.unselecting) {
                        i.$element.removeClass("ui-unselecting");
                        i.unselecting = false
                    }
                    if (!i.selecting) {
                        i.$element.addClass("ui-selecting");
                        i.selecting = true;
                        n._trigger("selecting", t, {
                            selecting: i.element
                        })
                    }
                }
                else {
                    if (i.selecting) {
                        if ((t.metaKey || t.ctrlKey) && i.startselected) {
                            i.$element.removeClass("ui-selecting");
                            i.selecting = false;
                            i.$element.addClass("ui-selected");
                            i.selected = true
                        }
                        else {
                            i.$element.removeClass("ui-selecting");
                            i.selecting = false;
                            if (i.startselected) {
                                i.$element.addClass("ui-unselecting");
                                i.unselecting = true
                            }
                            n._trigger("unselecting", t, {
                                unselecting: i.element
                            })
                        }
                    }
                    if (i.selected) {
                        if (!t.metaKey && !t.ctrlKey && !i.startselected) {
                            i.$element.removeClass("ui-selected");
                            i.selected = false;
                            i.$element.addClass("ui-unselecting");
                            i.unselecting = true;
                            n._trigger("unselecting", t, {
                                unselecting: i.element
                            })
                        }
                    }
                }
            });
            return false
        },
        _mouseStop: function (t) {
            var i = this;
            this.dragged = false;
            e(".ui-unselecting", this.element[0]).each(function () {
                var n = e.data(this, "selectable-item");
                n.$element.removeClass("ui-unselecting");
                n.unselecting = false;
                n.startselected = false;
                i._trigger("unselected", t, {
                    unselected: n.element
                })
            });
            e(".ui-selecting", this.element[0]).each(function () {
                var n = e.data(this, "selectable-item");
                n.$element.removeClass("ui-selecting").addClass("ui-selected");
                n.selecting = false;
                n.selected = true;
                n.startselected = true;
                i._trigger("selected", t, {
                    selected: n.element
                })
            });
            this._trigger("stop", t);
            this.helper.remove();
            return false
        }
    })
})(jQuery);
(function (e, t) {
    function i(e, t, i) {
        return e > t && e < t + i
    }

    function n(e) {
        return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"))
    }
    e.widget("ui.sortable", e.ui.mouse, {
        version: "1.10.4",
        widgetEventPrefix: "sort",
        ready: false,
        options: {
            appendTo: "parent",
            axis: false,
            connectWith: false,
            containment: false,
            cursor: "auto",
            cursorAt: false,
            dropOnEmpty: true,
            forcePlaceholderSize: false,
            forceHelperSize: false,
            grid: false,
            handle: false,
            helper: "original",
            items: "> *",
            opacity: false,
            placeholder: false,
            revert: false,
            scroll: true,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: "default",
            tolerance: "intersect",
            zIndex: 1e3,
            activate: null,
            beforeStop: null,
            change: null,
            deactivate: null,
            out: null,
            over: null,
            receive: null,
            remove: null,
            sort: null,
            start: null,
            stop: null,
            update: null
        },
        _create: function () {
            var e = this.options;
            this.containerCache = {};
            this.element.addClass("ui-sortable");
            this.refresh();
            this.floating = this.items.length ? e.axis === "x" || n(this.items[0].item) : false;
            this.offset = this.element.offset();
            this._mouseInit();
            this.ready = true
        },
        _destroy: function () {
            this.element.removeClass("ui-sortable ui-sortable-disabled");
            this._mouseDestroy();
            for (var e = this.items.length - 1; e >= 0; e--) {
                this.items[e].item.removeData(this.widgetName + "-item")
            }
            return this
        },
        _setOption: function (t, i) {
            if (t === "disabled") {
                this.options[t] = i;
                this.widget().toggleClass("ui-sortable-disabled", !!i)
            }
            else {
                e.Widget.prototype._setOption.apply(this, arguments)
            }
        },
        _mouseCapture: function (t, i) {
            var n = null,
                r = false,
                s = this;
            if (this.reverting) {
                return false
            }
            if (this.options.disabled || this.options.type === "static") {
                return false
            }
            this._refreshItems(t);
            e(t.target).parents().each(function () {
                if (e.data(this, s.widgetName + "-item") === s) {
                    n = e(this);
                    return false
                }
            });
            if (e.data(t.target, s.widgetName + "-item") === s) {
                n = e(t.target)
            }
            if (!n) {
                return false
            }
            if (this.options.handle && !i) {
                e(this.options.handle, n).find("*").addBack().each(function () {
                    if (this === t.target) {
                        r = true
                    }
                });
                if (!r) {
                    return false
                }
            }
            this.currentItem = n;
            this._removeCurrentsFromItems();
            return true
        },
        _mouseStart: function (t, i, n) {
            var r, s, a = this.options;
            this.currentContainer = this;
            this.refreshPositions();
            this.helper = this._createHelper(t);
            this._cacheHelperProportions();
            this._cacheMargins();
            this.scrollParent = this.helper.scrollParent();
            this.offset = this.currentItem.offset();
            this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            };
            e.extend(this.offset, {
                click: {
                    left: t.pageX - this.offset.left,
                    top: t.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            });
            this.helper.css("position", "absolute");
            this.cssPosition = this.helper.css("position");
            this.originalPosition = this._generatePosition(t);
            this.originalPageX = t.pageX;
            this.originalPageY = t.pageY;
            a.cursorAt && this._adjustOffsetFromHelper(a.cursorAt);
            this.domPosition = {
                prev: this.currentItem.prev()[0],
                parent: this.currentItem.parent()[0]
            };
            if (this.helper[0] !== this.currentItem[0]) {
                this.currentItem.hide()
            }
            this._createPlaceholder();
            if (a.containment) {
                this._setContainment()
            }
            if (a.cursor && a.cursor !== "auto") {
                s = this.document.find("body");
                this.storedCursor = s.css("cursor");
                s.css("cursor", a.cursor);
                this.storedStylesheet = e("<style>*{ cursor: " + a.cursor + " !important; }</style>").appendTo(s)
            }
            if (a.opacity) {
                if (this.helper.css("opacity")) {
                    this._storedOpacity = this.helper.css("opacity")
                }
                this.helper.css("opacity", a.opacity)
            }
            if (a.zIndex) {
                if (this.helper.css("zIndex")) {
                    this._storedZIndex = this.helper.css("zIndex")
                }
                this.helper.css("zIndex", a.zIndex)
            }
            if (this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
                this.overflowOffset = this.scrollParent.offset()
            }
            this._trigger("start", t, this._uiHash());
            if (!this._preserveHelperProportions) {
                this._cacheHelperProportions()
            }
            if (!n) {
                for (r = this.containers.length - 1; r >= 0; r--) {
                    this.containers[r]._trigger("activate", t, this._uiHash(this))
                }
            }
            if (e.ui.ddmanager) {
                e.ui.ddmanager.current = this
            }
            if (e.ui.ddmanager && !a.dropBehaviour) {
                e.ui.ddmanager.prepareOffsets(this, t)
            }
            this.dragging = true;
            this.helper.addClass("ui-sortable-helper");
            this._mouseDrag(t);
            return true
        },
        _mouseDrag: function (t) {
            var i, n, r, s, a = this.options,
                o = false;
            this.position = this._generatePosition(t);
            this.positionAbs = this._convertPositionTo("absolute");
            if (!this.lastPositionAbs) {
                this.lastPositionAbs = this.positionAbs
            }
            if (this.options.scroll) {
                if (this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
                    if (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < a.scrollSensitivity) {
                        this.scrollParent[0].scrollTop = o = this.scrollParent[0].scrollTop + a.scrollSpeed
                    }
                    else if (t.pageY - this.overflowOffset.top < a.scrollSensitivity) {
                        this.scrollParent[0].scrollTop = o = this.scrollParent[0].scrollTop - a.scrollSpeed
                    }
                    if (this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < a.scrollSensitivity) {
                        this.scrollParent[0].scrollLeft = o = this.scrollParent[0].scrollLeft + a.scrollSpeed
                    }
                    else if (t.pageX - this.overflowOffset.left < a.scrollSensitivity) {
                        this.scrollParent[0].scrollLeft = o = this.scrollParent[0].scrollLeft - a.scrollSpeed
                    }
                }
                else {
                    if (t.pageY - e(document).scrollTop() < a.scrollSensitivity) {
                        o = e(document).scrollTop(e(document).scrollTop() - a.scrollSpeed)
                    }
                    else if (e(window).height() - (t.pageY - e(document).scrollTop()) < a.scrollSensitivity) {
                        o = e(document).scrollTop(e(document).scrollTop() + a.scrollSpeed)
                    }
                    if (t.pageX - e(document).scrollLeft() < a.scrollSensitivity) {
                        o = e(document).scrollLeft(e(document).scrollLeft() - a.scrollSpeed)
                    }
                    else if (e(window).width() - (t.pageX - e(document).scrollLeft()) < a.scrollSensitivity) {
                        o = e(document).scrollLeft(e(document).scrollLeft() + a.scrollSpeed)
                    }
                }
                if (o !== false && e.ui.ddmanager && !a.dropBehaviour) {
                    e.ui.ddmanager.prepareOffsets(this, t)
                }
            }
            this.positionAbs = this._convertPositionTo("absolute");
            if (!this.options.axis || this.options.axis !== "y") {
                this.helper[0].style.left = this.position.left + "px"
            }
            if (!this.options.axis || this.options.axis !== "x") {
                this.helper[0].style.top = this.position.top + "px"
            }
            for (i = this.items.length - 1; i >= 0; i--) {
                n = this.items[i];
                r = n.item[0];
                s = this._intersectsWithPointer(n);
                if (!s) {
                    continue
                }
                if (n.instance !== this.currentContainer) {
                    continue
                }
                if (r !== this.currentItem[0] && this.placeholder[s === 1 ? "next" : "prev"]()[0] !== r && !e.contains(this.placeholder[0], r) && (this.options.type === "semi-dynamic" ? !e.contains(this.element[0], r) : true)) {
                    this.direction = s === 1 ? "down" : "up";
                    if (this.options.tolerance === "pointer" || this._intersectsWithSides(n)) {
                        this._rearrange(t, n)
                    }
                    else {
                        break
                    }
                    this._trigger("change", t, this._uiHash());
                    break
                }
            }
            this._contactContainers(t);
            if (e.ui.ddmanager) {
                e.ui.ddmanager.drag(this, t)
            }
            this._trigger("sort", t, this._uiHash());
            this.lastPositionAbs = this.positionAbs;
            return false
        },
        _mouseStop: function (t, i) {
            if (!t) {
                return
            }
            if (e.ui.ddmanager && !this.options.dropBehaviour) {
                e.ui.ddmanager.drop(this, t)
            }
            if (this.options.revert) {
                var n = this,
                    r = this.placeholder.offset(),
                    s = this.options.axis,
                    a = {};
                if (!s || s === "x") {
                    a.left = r.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)
                }
                if (!s || s === "y") {
                    a.top = r.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)
                }
                this.reverting = true;
                e(this.helper).animate(a, parseInt(this.options.revert, 10) || 500, function () {
                    n._clear(t)
                })
            }
            else {
                this._clear(t, i)
            }
            return false
        },
        cancel: function () {
            if (this.dragging) {
                this._mouseUp({
                    target: null
                });
                if (this.options.helper === "original") {
                    this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
                }
                else {
                    this.currentItem.show()
                }
                for (var t = this.containers.length - 1; t >= 0; t--) {
                    this.containers[t]._trigger("deactivate", null, this._uiHash(this));
                    if (this.containers[t].containerCache.over) {
                        this.containers[t]._trigger("out", null, this._uiHash(this));
                        this.containers[t].containerCache.over = 0
                    }
                }
            }
            if (this.placeholder) {
                if (this.placeholder[0].parentNode) {
                    this.placeholder[0].parentNode.removeChild(this.placeholder[0])
                }
                if (this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
                    this.helper.remove()
                }
                e.extend(this, {
                    helper: null,
                    dragging: false,
                    reverting: false,
                    _noFinalSort: null
                });
                if (this.domPosition.prev) {
                    e(this.domPosition.prev).after(this.currentItem)
                }
                else {
                    e(this.domPosition.parent).prepend(this.currentItem)
                }
            }
            return this
        },
        serialize: function (t) {
            var i = this._getItemsAsjQuery(t && t.connected),
                n = [];
            t = t || {};
            e(i).each(function () {
                var i = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                if (i) {
                    n.push((t.key || i[1] + "[]") + "=" + (t.key && t.expression ? i[1] : i[2]))
                }
            });
            if (!n.length && t.key) {
                n.push(t.key + "=")
            }
            return n.join("&")
        },
        toArray: function (t) {
            var i = this._getItemsAsjQuery(t && t.connected),
                n = [];
            t = t || {};
            i.each(function () {
                n.push(e(t.item || this).attr(t.attribute || "id") || "")
            });
            return n
        },
        _intersectsWith: function (e) {
            var t = this.positionAbs.left,
                i = t + this.helperProportions.width,
                n = this.positionAbs.top,
                r = n + this.helperProportions.height,
                s = e.left,
                a = s + e.width,
                o = e.top,
                l = o + e.height,
                u = this.offset.click.top,
                c = this.offset.click.left,
                f = this.options.axis === "x" || n + u > o && n + u < l,
                h = this.options.axis === "y" || t + c > s && t + c < a,
                d = f && h;
            if (this.options.tolerance === "pointer" || this.options.forcePointerForContainers || this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"]) {
                return d
            }
            else {
                return s < t + this.helperProportions.width / 2 && i - this.helperProportions.width / 2 < a && o < n + this.helperProportions.height / 2 && r - this.helperProportions.height / 2 < l
            }
        },
        _intersectsWithPointer: function (e) {
            var t = this.options.axis === "x" || i(this.positionAbs.top + this.offset.click.top, e.top, e.height),
                n = this.options.axis === "y" || i(this.positionAbs.left + this.offset.click.left, e.left, e.width),
                r = t && n,
                s = this._getDragVerticalDirection(),
                a = this._getDragHorizontalDirection();
            if (!r) {
                return false
            }
            return this.floating ? a && a === "right" || s === "down" ? 2 : 1 : s && (s === "down" ? 2 : 1)
        },
        _intersectsWithSides: function (e) {
            var t = i(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height),
                n = i(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width),
                r = this._getDragVerticalDirection(),
                s = this._getDragHorizontalDirection();
            if (this.floating && s) {
                return s === "right" && n || s === "left" && !n
            }
            else {
                return r && (r === "down" && t || r === "up" && !t)
            }
        },
        _getDragVerticalDirection: function () {
            var e = this.positionAbs.top - this.lastPositionAbs.top;
            return e !== 0 && (e > 0 ? "down" : "up")
        },
        _getDragHorizontalDirection: function () {
            var e = this.positionAbs.left - this.lastPositionAbs.left;
            return e !== 0 && (e > 0 ? "right" : "left")
        },
        refresh: function (e) {
            this._refreshItems(e);
            this.refreshPositions();
            return this
        },
        _connectWith: function () {
            var e = this.options;
            return e.connectWith.constructor === String ? [e.connectWith] : e.connectWith
        },
        _getItemsAsjQuery: function (t) {
            var i, n, r, s, a = [],
                o = [],
                l = this._connectWith();
            if (l && t) {
                for (i = l.length - 1; i >= 0; i--) {
                    r = e(l[i]);
                    for (n = r.length - 1; n >= 0; n--) {
                        s = e.data(r[n], this.widgetFullName);
                        if (s && s !== this && !s.options.disabled) {
                            o.push([e.isFunction(s.options.items) ? s.options.items.call(s.element) : e(s.options.items, s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), s])
                        }
                    }
                }
            }
            o.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                options: this.options,
                item: this.currentItem
            }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);

            function u() {
                a.push(this)
            }
            for (i = o.length - 1; i >= 0; i--) {
                o[i][0].each(u)
            }
            return e(a)
        },
        _removeCurrentsFromItems: function () {
            var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = e.grep(this.items, function (e) {
                for (var i = 0; i < t.length; i++) {
                    if (t[i] === e.item[0]) {
                        return false
                    }
                }
                return true
            })
        },
        _refreshItems: function (t) {
            this.items = [];
            this.containers = [this];
            var i, n, r, s, a, o, l, u, c = this.items,
                f = [
                    [e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                        item: this.currentItem
                    }) : e(this.options.items, this.element), this]
                ],
                h = this._connectWith();
            if (h && this.ready) {
                for (i = h.length - 1; i >= 0; i--) {
                    r = e(h[i]);
                    for (n = r.length - 1; n >= 0; n--) {
                        s = e.data(r[n], this.widgetFullName);
                        if (s && s !== this && !s.options.disabled) {
                            f.push([e.isFunction(s.options.items) ? s.options.items.call(s.element[0], t, {
                                item: this.currentItem
                            }) : e(s.options.items, s.element), s]);
                            this.containers.push(s)
                        }
                    }
                }
            }
            for (i = f.length - 1; i >= 0; i--) {
                a = f[i][1];
                o = f[i][0];
                for (n = 0, u = o.length; n < u; n++) {
                    l = e(o[n]);
                    l.data(this.widgetName + "-item", a);
                    c.push({
                        item: l,
                        instance: a,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    })
                }
            }
        },
        refreshPositions: function (t) {
            if (this.offsetParent && this.helper) {
                this.offset.parent = this._getParentOffset()
            }
            var i, n, r, s;
            for (i = this.items.length - 1; i >= 0; i--) {
                n = this.items[i];
                if (n.instance !== this.currentContainer && this.currentContainer && n.item[0] !== this.currentItem[0]) {
                    continue
                }
                r = this.options.toleranceElement ? e(this.options.toleranceElement, n.item) : n.item;
                if (!t) {
                    n.width = r.outerWidth();
                    n.height = r.outerHeight()
                }
                s = r.offset();
                n.left = s.left;
                n.top = s.top
            }
            if (this.options.custom && this.options.custom.refreshContainers) {
                this.options.custom.refreshContainers.call(this)
            }
            else {
                for (i = this.containers.length - 1; i >= 0; i--) {
                    s = this.containers[i].element.offset();
                    this.containers[i].containerCache.left = s.left;
                    this.containers[i].containerCache.top = s.top;
                    this.containers[i].containerCache.width = this.containers[i].element.outerWidth();
                    this.containers[i].containerCache.height = this.containers[i].element.outerHeight()
                }
            }
            return this
        },
        _createPlaceholder: function (t) {
            t = t || this;
            var i, n = t.options;
            if (!n.placeholder || n.placeholder.constructor === String) {
                i = n.placeholder;
                n.placeholder = {
                    element: function () {
                        var n = t.currentItem[0].nodeName.toLowerCase(),
                            r = e("<" + n + ">", t.document[0]).addClass(i || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                        if (n === "tr") {
                            t.currentItem.children().each(function () {
                                e("<td>&#160;</td>", t.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(r)
                            })
                        }
                        else if (n === "img") {
                            r.attr("src", t.currentItem.attr("src"))
                        }
                        if (!i) {
                            r.css("visibility", "hidden")
                        }
                        return r
                    },
                    update: function (e, r) {
                        if (i && !n.forcePlaceholderSize) {
                            return
                        }
                        if (!r.height()) {
                            r.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10))
                        }
                        if (!r.width()) {
                            r.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10))
                        }
                    }
                }
            }
            t.placeholder = e(n.placeholder.element.call(t.element, t.currentItem));
            t.currentItem.after(t.placeholder);
            n.placeholder.update(t, t.placeholder)
        },
        _contactContainers: function (t) {
            var r, s, a, o, l, u, c, f, h, d, p = null,
                g = null;
            for (r = this.containers.length - 1; r >= 0; r--) {
                if (e.contains(this.currentItem[0], this.containers[r].element[0])) {
                    continue
                }
                if (this._intersectsWith(this.containers[r].containerCache)) {
                    if (p && e.contains(this.containers[r].element[0], p.element[0])) {
                        continue
                    }
                    p = this.containers[r];
                    g = r
                }
                else {
                    if (this.containers[r].containerCache.over) {
                        this.containers[r]._trigger("out", t, this._uiHash(this));
                        this.containers[r].containerCache.over = 0
                    }
                }
            }
            if (!p) {
                return
            }
            if (this.containers.length === 1) {
                if (!this.containers[g].containerCache.over) {
                    this.containers[g]._trigger("over", t, this._uiHash(this));
                    this.containers[g].containerCache.over = 1
                }
            }
            else {
                a = 1e4;
                o = null;
                d = p.floating || n(this.currentItem);
                l = d ? "left" : "top";
                u = d ? "width" : "height";
                c = this.positionAbs[l] + this.offset.click[l];
                for (s = this.items.length - 1; s >= 0; s--) {
                    if (!e.contains(this.containers[g].element[0], this.items[s].item[0])) {
                        continue
                    }
                    if (this.items[s].item[0] === this.currentItem[0]) {
                        continue
                    }
                    if (d && !i(this.positionAbs.top + this.offset.click.top, this.items[s].top, this.items[s].height)) {
                        continue
                    }
                    f = this.items[s].item.offset()[l];
                    h = false;
                    if (Math.abs(f - c) > Math.abs(f + this.items[s][u] - c)) {
                        h = true;
                        f += this.items[s][u]
                    }
                    if (Math.abs(f - c) < a) {
                        a = Math.abs(f - c);
                        o = this.items[s];
                        this.direction = h ? "up" : "down"
                    }
                }
                if (!o && !this.options.dropOnEmpty) {
                    return
                }
                if (this.currentContainer === this.containers[g]) {
                    return
                }
                o ? this._rearrange(t, o, null, true) : this._rearrange(t, null, this.containers[g].element, true);
                this._trigger("change", t, this._uiHash());
                this.containers[g]._trigger("change", t, this._uiHash(this));
                this.currentContainer = this.containers[g];
                this.options.placeholder.update(this.currentContainer, this.placeholder);
                this.containers[g]._trigger("over", t, this._uiHash(this));
                this.containers[g].containerCache.over = 1
            }
        },
        _createHelper: function (t) {
            var i = this.options,
                n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [t, this.currentItem])) : i.helper === "clone" ? this.currentItem.clone() : this.currentItem;
            if (!n.parents("body").length) {
                e(i.appendTo !== "parent" ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(n[0])
            }
            if (n[0] === this.currentItem[0]) {
                this._storedCSS = {
                    width: this.currentItem[0].style.width,
                    height: this.currentItem[0].style.height,
                    position: this.currentItem.css("position"),
                    top: this.currentItem.css("top"),
                    left: this.currentItem.css("left")
                }
            }
            if (!n[0].style.width || i.forceHelperSize) {
                n.width(this.currentItem.width())
            }
            if (!n[0].style.height || i.forceHelperSize) {
                n.height(this.currentItem.height())
            }
            return n
        },
        _adjustOffsetFromHelper: function (t) {
            if (typeof t === "string") {
                t = t.split(" ")
            }
            if (e.isArray(t)) {
                t = {
                    left: +t[0],
                    top: +t[1] || 0
                }
            }
            if ("left" in t) {
                this.offset.click.left = t.left + this.margins.left
            }
            if ("right" in t) {
                this.offset.click.left = this.helperProportions.width - t.right + this.margins.left
            }
            if ("top" in t) {
                this.offset.click.top = t.top + this.margins.top
            }
            if ("bottom" in t) {
                this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top
            }
        },
        _getParentOffset: function () {
            this.offsetParent = this.helper.offsetParent();
            var t = this.offsetParent.offset();
            if (this.cssPosition === "absolute" && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0])) {
                t.left += this.scrollParent.scrollLeft();
                t.top += this.scrollParent.scrollTop()
            }
            if (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && e.ui.ie) {
                t = {
                    top: 0,
                    left: 0
                }
            }
            return {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function () {
            if (this.cssPosition === "relative") {
                var e = this.currentItem.position();
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            else {
                return {
                    top: 0,
                    left: 0
                }
            }
        },
        _cacheMargins: function () {
            this.margins = {
                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
            }
        },
        _cacheHelperProportions: function () {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function () {
            var t, i, n, r = this.options;
            if (r.containment === "parent") {
                r.containment = this.helper[0].parentNode
            }
            if (r.containment === "document" || r.containment === "window") {
                this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e(r.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (e(r.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]
            }
            if (!/^(document|window|parent)$/.test(r.containment)) {
                t = e(r.containment)[0];
                i = e(r.containment).offset();
                n = e(t).css("overflow") !== "hidden";
                this.containment = [i.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (n ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (n ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]
            }
        },
        _convertPositionTo: function (t, i) {
            if (!i) {
                i = this.position
            }
            var n = t === "absolute" ? 1 : -1,
                r = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
                s = /(html|body)/i.test(r[0].tagName);
            return {
                top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : s ? 0 : r.scrollTop()) * n,
                left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : s ? 0 : r.scrollLeft()) * n
            }
        },
        _generatePosition: function (t) {
            var i, n, r = this.options,
                s = t.pageX,
                a = t.pageY,
                o = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
                l = /(html|body)/i.test(o[0].tagName);
            if (this.cssPosition === "relative" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {
                this.offset.relative = this._getRelativeOffset()
            }
            if (this.originalPosition) {
                if (this.containment) {
                    if (t.pageX - this.offset.click.left < this.containment[0]) {
                        s = this.containment[0] + this.offset.click.left
                    }
                    if (t.pageY - this.offset.click.top < this.containment[1]) {
                        a = this.containment[1] + this.offset.click.top
                    }
                    if (t.pageX - this.offset.click.left > this.containment[2]) {
                        s = this.containment[2] + this.offset.click.left
                    }
                    if (t.pageY - this.offset.click.top > this.containment[3]) {
                        a = this.containment[3] + this.offset.click.top
                    }
                }
                if (r.grid) {
                    i = this.originalPageY + Math.round((a - this.originalPageY) / r.grid[1]) * r.grid[1];
                    a = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - r.grid[1] : i + r.grid[1] : i;
                    n = this.originalPageX + Math.round((s - this.originalPageX) / r.grid[0]) * r.grid[0];
                    s = this.containment ? n - this.offset.click.left >= this.containment[0] && n - this.offset.click.left <= this.containment[2] ? n : n - this.offset.click.left >= this.containment[0] ? n - r.grid[0] : n + r.grid[0] : n
                }
            }
            return {
                top: a - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : l ? 0 : o.scrollTop()),
                left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : l ? 0 : o.scrollLeft())
            }
        },
        _rearrange: function (e, t, i, n) {
            i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], this.direction === "down" ? t.item[0] : t.item[0].nextSibling);
            this.counter = this.counter ? ++this.counter : 1;
            var r = this.counter;
            this._delay(function () {
                if (r === this.counter) {
                    this.refreshPositions(!n)
                }
            })
        },
        _clear: function (e, t) {
            this.reverting = false;
            var i, n = [];
            if (!this._noFinalSort && this.currentItem.parent().length) {
                this.placeholder.before(this.currentItem)
            }
            this._noFinalSort = null;
            if (this.helper[0] === this.currentItem[0]) {
                for (i in this._storedCSS) {
                    if (this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
                        this._storedCSS[i] = ""
                    }
                }
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
            }
            else {
                this.currentItem.show()
            }
            if (this.fromOutside && !t) {
                n.push(function (e) {
                    this._trigger("receive", e, this._uiHash(this.fromOutside))
                })
            }
            if ((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !t) {
                n.push(function (e) {
                    this._trigger("update", e, this._uiHash())
                })
            }
            if (this !== this.currentContainer) {
                if (!t) {
                    n.push(function (e) {
                        this._trigger("remove", e, this._uiHash())
                    });
                    n.push(function (e) {
                        return function (t) {
                            e._trigger("receive", t, this._uiHash(this))
                        }
                    }.call(this, this.currentContainer));
                    n.push(function (e) {
                        return function (t) {
                            e._trigger("update", t, this._uiHash(this))
                        }
                    }.call(this, this.currentContainer))
                }
            }

            function r(e, t, i) {
                return function (n) {
                    i._trigger(e, n, t._uiHash(t))
                }
            }
            for (i = this.containers.length - 1; i >= 0; i--) {
                if (!t) {
                    n.push(r("deactivate", this, this.containers[i]))
                }
                if (this.containers[i].containerCache.over) {
                    n.push(r("out", this, this.containers[i]));
                    this.containers[i].containerCache.over = 0
                }
            }
            if (this.storedCursor) {
                this.document.find("body").css("cursor", this.storedCursor);
                this.storedStylesheet.remove()
            }
            if (this._storedOpacity) {
                this.helper.css("opacity", this._storedOpacity)
            }
            if (this._storedZIndex) {
                this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex)
            }
            this.dragging = false;
            if (this.cancelHelperRemoval) {
                if (!t) {
                    this._trigger("beforeStop", e, this._uiHash());
                    for (i = 0; i < n.length; i++) {
                        n[i].call(this, e)
                    }
                    this._trigger("stop", e, this._uiHash())
                }
                this.fromOutside = false;
                return false
            }
            if (!t) {
                this._trigger("beforeStop", e, this._uiHash())
            }
            this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
            if (this.helper[0] !== this.currentItem[0]) {
                this.helper.remove()
            }
            this.helper = null;
            if (!t) {
                for (i = 0; i < n.length; i++) {
                    n[i].call(this, e)
                }
                this._trigger("stop", e, this._uiHash())
            }
            this.fromOutside = false;
            return true
        },
        _trigger: function () {
            if (e.Widget.prototype._trigger.apply(this, arguments) === false) {
                this.cancel()
            }
        },
        _uiHash: function (t) {
            var i = t || this;
            return {
                helper: i.helper,
                placeholder: i.placeholder || e([]),
                position: i.position,
                originalPosition: i.originalPosition,
                offset: i.positionAbs,
                item: i.currentItem,
                sender: t ? t.element : null
            }
        }
    })
})(jQuery);
(function (e, t) {
    var i = 0,
        n = {},
        r = {};
    n.height = n.paddingTop = n.paddingBottom = n.borderTopWidth = n.borderBottomWidth = "hide";
    r.height = r.paddingTop = r.paddingBottom = r.borderTopWidth = r.borderBottomWidth = "show";
    e.widget("ui.accordion", {
        version: "1.10.4",
        options: {
            active: 0,
            animate: {},
            collapsible: false,
            event: "click",
            header: "> li > :first-child,> :not(li):even",
            heightStyle: "auto",
            icons: {
                activeHeader: "ui-icon-triangle-1-s",
                header: "ui-icon-triangle-1-e"
            },
            activate: null,
            beforeActivate: null
        },
        _create: function () {
            var t = this.options;
            this.prevShow = this.prevHide = e();
            this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist");
            if (!t.collapsible && (t.active === false || t.active == null)) {
                t.active = 0
            }
            this._processPanels();
            if (t.active < 0) {
                t.active += this.headers.length
            }
            this._refresh()
        },
        _getCreateEventData: function () {
            return {
                header: this.active,
                panel: !this.active.length ? e() : this.active.next(),
                content: !this.active.length ? e() : this.active.next()
            }
        },
        _createIcons: function () {
            var t = this.options.icons;
            if (t) {
                e("<span>").addClass("ui-accordion-header-icon ui-icon " + t.header).prependTo(this.headers);
                this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader);
                this.headers.addClass("ui-accordion-icons")
            }
        },
        _destroyIcons: function () {
            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()
        },
        _destroy: function () {
            var e;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");
            this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function () {
                if (/^ui-accordion/.test(this.id)) {
                    this.removeAttribute("id")
                }
            });
            this._destroyIcons();
            e = this.headers.next().css("display", "").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function () {
                if (/^ui-accordion/.test(this.id)) {
                    this.removeAttribute("id")
                }
            });
            if (this.options.heightStyle !== "content") {
                e.css("height", "")
            }
        },
        _setOption: function (e, t) {
            if (e === "active") {
                this._activate(t);
                return
            }
            if (e === "event") {
                if (this.options.event) {
                    this._off(this.headers, this.options.event)
                }
                this._setupEvents(t)
            }
            this._super(e, t);
            if (e === "collapsible" && !t && this.options.active === false) {
                this._activate(0)
            }
            if (e === "icons") {
                this._destroyIcons();
                if (t) {
                    this._createIcons()
                }
            }
            if (e === "disabled") {
                this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!t)
            }
        },
        _keydown: function (t) {
            if (t.altKey || t.ctrlKey) {
                return
            }
            var i = e.ui.keyCode,
                n = this.headers.length,
                r = this.headers.index(t.target),
                s = false;
            switch (t.keyCode) {
                case i.RIGHT:
                case i.DOWN:
                    s = this.headers[(r + 1) % n];
                    break;
                case i.LEFT:
                case i.UP:
                    s = this.headers[(r - 1 + n) % n];
                    break;
                case i.SPACE:
                case i.ENTER:
                    this._eventHandler(t);
                    break;
                case i.HOME:
                    s = this.headers[0];
                    break;
                case i.END:
                    s = this.headers[n - 1];
                    break
            }
            if (s) {
                e(t.target).attr("tabIndex", -1);
                e(s).attr("tabIndex", 0);
                s.focus();
                t.preventDefault()
            }
        },
        _panelKeyDown: function (t) {
            if (t.keyCode === e.ui.keyCode.UP && t.ctrlKey) {
                e(t.currentTarget).prev().focus()
            }
        },
        refresh: function () {
            var t = this.options;
            this._processPanels();
            if (t.active === false && t.collapsible === true || !this.headers.length) {
                t.active = false;
                this.active = e()
            }
            else if (t.active === false) {
                this._activate(0)
            }
            else if (this.active.length && !e.contains(this.element[0], this.active[0])) {
                if (this.headers.length === this.headers.find(".ui-state-disabled").length) {
                    t.active = false;
                    this.active = e()
                }
                else {
                    this._activate(Math.max(0, t.active - 1))
                }
            }
            else {
                t.active = this.headers.index(this.active)
            }
            this._destroyIcons();
            this._refresh()
        },
        _processPanels: function () {
            this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
            this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()
        },
        _refresh: function () {
            var t, n = this.options,
                r = n.heightStyle,
                s = this.element.parent(),
                a = this.accordionId = "ui-accordion-" + (this.element.attr("id") || ++i);
            this.active = this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");
            this.active.next().addClass("ui-accordion-content-active").show();
            this.headers.attr("role", "tab").each(function (t) {
                var i = e(this),
                    n = i.attr("id"),
                    r = i.next(),
                    s = r.attr("id");
                if (!n) {
                    n = a + "-header-" + t;
                    i.attr("id", n)
                }
                if (!s) {
                    s = a + "-panel-" + t;
                    r.attr("id", s)
                }
                i.attr("aria-controls", s);
                r.attr("aria-labelledby", n)
            }).next().attr("role", "tabpanel");
            this.headers.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                tabIndex: -1
            }).next().attr({
                "aria-hidden": "true"
            }).hide();
            if (!this.active.length) {
                this.headers.eq(0).attr("tabIndex", 0)
            }
            else {
                this.active.attr({
                    "aria-selected": "true",
                    "aria-expanded": "true",
                    tabIndex: 0
                }).next().attr({
                    "aria-hidden": "false"
                })
            }
            this._createIcons();
            this._setupEvents(n.event);
            if (r === "fill") {
                t = s.height();
                this.element.siblings(":visible").each(function () {
                    var i = e(this),
                        n = i.css("position");
                    if (n === "absolute" || n === "fixed") {
                        return
                    }
                    t -= i.outerHeight(true)
                });
                this.headers.each(function () {
                    t -= e(this).outerHeight(true)
                });
                this.headers.next().each(function () {
                    e(this).height(Math.max(0, t - e(this).innerHeight() + e(this).height()))
                }).css("overflow", "auto")
            }
            else if (r === "auto") {
                t = 0;
                this.headers.next().each(function () {
                    t = Math.max(t, e(this).css("height", "").height())
                }).height(t)
            }
        },
        _activate: function (t) {
            var i = this._findActive(t)[0];
            if (i === this.active[0]) {
                return
            }
            i = i || this.active[0];
            this._eventHandler({
                target: i,
                currentTarget: i,
                preventDefault: e.noop
            })
        },
        _findActive: function (t) {
            return typeof t === "number" ? this.headers.eq(t) : e()
        },
        _setupEvents: function (t) {
            var i = {
                keydown: "_keydown"
            };
            if (t) {
                e.each(t.split(" "), function (e, t) {
                    i[t] = "_eventHandler"
                })
            }
            this._off(this.headers.add(this.headers.next()));
            this._on(this.headers, i);
            this._on(this.headers.next(), {
                keydown: "_panelKeyDown"
            });
            this._hoverable(this.headers);
            this._focusable(this.headers)
        },
        _eventHandler: function (t) {
            var i = this.options,
                n = this.active,
                r = e(t.currentTarget),
                s = r[0] === n[0],
                a = s && i.collapsible,
                o = a ? e() : r.next(),
                l = n.next(),
                u = {
                    oldHeader: n,
                    oldPanel: l,
                    newHeader: a ? e() : r,
                    newPanel: o
                };
            t.preventDefault();
            if (s && !i.collapsible || this._trigger("beforeActivate", t, u) === false) {
                return
            }
            i.active = a ? false : this.headers.index(r);
            this.active = s ? e() : r;
            this._toggle(u);
            n.removeClass("ui-accordion-header-active ui-state-active");
            if (i.icons) {
                n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header)
            }
            if (!s) {
                r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");
                if (i.icons) {
                    r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader)
                }
                r.next().addClass("ui-accordion-content-active")
            }
        },
        _toggle: function (t) {
            var i = t.newPanel,
                n = this.prevShow.length ? this.prevShow : t.oldPanel;
            this.prevShow.add(this.prevHide).stop(true, true);
            this.prevShow = i;
            this.prevHide = n;
            if (this.options.animate) {
                this._animate(i, n, t)
            }
            else {
                n.hide();
                i.show();
                this._toggleComplete(t)
            }
            n.attr({
                "aria-hidden": "true"
            });
            n.prev().attr("aria-selected", "false");
            if (i.length && n.length) {
                n.prev().attr({
                    tabIndex: -1,
                    "aria-expanded": "false"
                })
            }
            else if (i.length) {
                this.headers.filter(function () {
                    return e(this).attr("tabIndex") === 0
                }).attr("tabIndex", -1)
            }
            i.attr("aria-hidden", "false").prev().attr({
                "aria-selected": "true",
                tabIndex: 0,
                "aria-expanded": "true"
            })
        },
        _animate: function (e, t, i) {
            var s, a, o, l = this,
                u = 0,
                c = e.length && (!t.length || e.index() < t.index()),
                f = this.options.animate || {},
                h = c && f.down || f,
                d = function () {
                    l._toggleComplete(i)
                };
            if (typeof h === "number") {
                o = h
            }
            if (typeof h === "string") {
                a = h
            }
            a = a || h.easing || f.easing;
            o = o || h.duration || f.duration;
            if (!t.length) {
                return e.animate(r, o, a, d)
            }
            if (!e.length) {
                return t.animate(n, o, a, d)
            }
            s = e.show().outerHeight();
            t.animate(n, {
                duration: o,
                easing: a,
                step: function (e, t) {
                    t.now = Math.round(e)
                }
            });
            e.hide().animate(r, {
                duration: o,
                easing: a,
                complete: d,
                step: function (e, i) {
                    i.now = Math.round(e);
                    if (i.prop !== "height") {
                        u += i.now
                    }
                    else if (l.options.heightStyle !== "content") {
                        i.now = Math.round(s - t.outerHeight() - u);
                        u = 0
                    }
                }
            })
        },
        _toggleComplete: function (e) {
            var t = e.oldPanel;
            t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
            if (t.length) {
                t.parent()[0].className = t.parent()[0].className
            }
            this._trigger("activate", null, e)
        }
    })
})(jQuery);
(function (e, t) {
    e.widget("ui.autocomplete", {
        version: "1.10.4",
        defaultElement: "<input>",
        options: {
            appendTo: null,
            autoFocus: false,
            delay: 300,
            minLength: 1,
            position: {
                my: "left top",
                at: "left bottom",
                collision: "none"
            },
            source: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            response: null,
            search: null,
            select: null
        },
        requestIndex: 0,
        pending: 0,
        _create: function () {
            var t, i, n, r = this.element[0].nodeName.toLowerCase(),
                s = r === "textarea",
                a = r === "input";
            this.isMultiLine = s ? true : a ? false : this.element.prop("isContentEditable");
            this.valueMethod = this.element[s || a ? "val" : "text"];
            this.isNewMenu = true;
            this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off");
            this._on(this.element, {
                keydown: function (r) {
                    if (this.element.prop("readOnly")) {
                        t = true;
                        n = true;
                        i = true;
                        return
                    }
                    t = false;
                    n = false;
                    i = false;
                    var s = e.ui.keyCode;
                    switch (r.keyCode) {
                        case s.PAGE_UP:
                            t = true;
                            this._move("previousPage", r);
                            break;
                        case s.PAGE_DOWN:
                            t = true;
                            this._move("nextPage", r);
                            break;
                        case s.UP:
                            t = true;
                            this._keyEvent("previous", r);
                            break;
                        case s.DOWN:
                            t = true;
                            this._keyEvent("next", r);
                            break;
                        case s.ENTER:
                        case s.NUMPAD_ENTER:
                            if (this.menu.active) {
                                t = true;
                                r.preventDefault();
                                this.menu.select(r)
                            }
                            break;
                        case s.TAB:
                            if (this.menu.active) {
                                this.menu.select(r)
                            }
                            break;
                        case s.ESCAPE:
                            if (this.menu.element.is(":visible")) {
                                this._value(this.term);
                                this.close(r);
                                r.preventDefault()
                            }
                            break;
                        default:
                            i = true;
                            this._searchTimeout(r);
                            break
                    }
                },
                keypress: function (n) {
                    if (t) {
                        t = false;
                        if (!this.isMultiLine || this.menu.element.is(":visible")) {
                            n.preventDefault()
                        }
                        return
                    }
                    if (i) {
                        return
                    }
                    var r = e.ui.keyCode;
                    switch (n.keyCode) {
                        case r.PAGE_UP:
                            this._move("previousPage", n);
                            break;
                        case r.PAGE_DOWN:
                            this._move("nextPage", n);
                            break;
                        case r.UP:
                            this._keyEvent("previous", n);
                            break;
                        case r.DOWN:
                            this._keyEvent("next", n);
                            break
                    }
                },
                input: function (e) {
                    if (n) {
                        n = false;
                        e.preventDefault();
                        return
                    }
                    this._searchTimeout(e)
                },
                focus: function () {
                    this.selectedItem = null;
                    this.previous = this._value()
                },
                blur: function (e) {
                    if (this.cancelBlur) {
                        delete this.cancelBlur;
                        return
                    }
                    clearTimeout(this.searching);
                    this.close(e);
                    this._change(e)
                }
            });
            this._initSource();
            this.menu = e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({
                role: null
            }).hide().data("ui-menu");
            this._on(this.menu.element, {
                mousedown: function (t) {
                    t.preventDefault();
                    this.cancelBlur = true;
                    this._delay(function () {
                        delete this.cancelBlur
                    });
                    var i = this.menu.element[0];
                    if (!e(t.target).closest(".ui-menu-item").length) {
                        this._delay(function () {
                            var t = this;
                            this.document.one("mousedown", function (n) {
                                if (n.target !== t.element[0] && n.target !== i && !e.contains(i, n.target)) {
                                    t.close()
                                }
                            })
                        })
                    }
                },
                menufocus: function (t, i) {
                    if (this.isNewMenu) {
                        this.isNewMenu = false;
                        if (t.originalEvent && /^mouse/.test(t.originalEvent.type)) {
                            this.menu.blur();
                            this.document.one("mousemove", function () {
                                e(t.target).trigger(t.originalEvent)
                            });
                            return
                        }
                    }
                    var n = i.item.data("ui-autocomplete-item");
                    if (false !== this._trigger("focus", t, {
                            item: n
                        })) {
                        if (t.originalEvent && /^key/.test(t.originalEvent.type)) {
                            this._value(n.value)
                        }
                    }
                    else {
                        this.liveRegion.text(n.value)
                    }
                },
                menuselect: function (e, t) {
                    var i = t.item.data("ui-autocomplete-item"),
                        n = this.previous;
                    if (this.element[0] !== this.document[0].activeElement) {
                        this.element.focus();
                        this.previous = n;
                        this._delay(function () {
                            this.previous = n;
                            this.selectedItem = i
                        })
                    }
                    if (false !== this._trigger("select", e, {
                            item: i
                        })) {
                        this._value(i.value)
                    }
                    this.term = this._value();
                    this.close(e);
                    this.selectedItem = i
                }
            });
            this.liveRegion = e("<span>", {
                role: "status",
                "aria-live": "polite"
            }).addClass("ui-helper-hidden-accessible").insertBefore(this.element);
            this._on(this.window, {
                beforeunload: function () {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _destroy: function () {
            clearTimeout(this.searching);
            this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");
            this.menu.element.remove();
            this.liveRegion.remove()
        },
        _setOption: function (e, t) {
            this._super(e, t);
            if (e === "source") {
                this._initSource()
            }
            if (e === "appendTo") {
                this.menu.element.appendTo(this._appendTo())
            }
            if (e === "disabled" && t && this.xhr) {
                this.xhr.abort()
            }
        },
        _appendTo: function () {
            var t = this.options.appendTo;
            if (t) {
                t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)
            }
            if (!t) {
                t = this.element.closest(".ui-front")
            }
            if (!t.length) {
                t = this.document[0].body
            }
            return t
        },
        _initSource: function () {
            var t, i, n = this;
            if (e.isArray(this.options.source)) {
                t = this.options.source;
                this.source = function (i, n) {
                    n(e.ui.autocomplete.filter(t, i.term))
                }
            }
            else if (typeof this.options.source === "string") {
                i = this.options.source;
                this.source = function (t, r) {
                    if (n.xhr) {
                        n.xhr.abort()
                    }
                    n.xhr = e.ajax({
                        url: i,
                        data: t,
                        dataType: "json",
                        success: function (e) {
                            r(e)
                        },
                        error: function () {
                            r([])
                        }
                    })
                }
            }
            else {
                this.source = this.options.source
            }
        },
        _searchTimeout: function (e) {
            clearTimeout(this.searching);
            this.searching = this._delay(function () {
                if (this.term !== this._value()) {
                    this.selectedItem = null;
                    this.search(null, e)
                }
            }, this.options.delay)
        },
        search: function (e, t) {
            e = e != null ? e : this._value();
            this.term = this._value();
            if (e.length < this.options.minLength) {
                return this.close(t)
            }
            if (this._trigger("search", t) === false) {
                return
            }
            return this._search(e)
        },
        _search: function (e) {
            this.pending++;
            this.element.addClass("ui-autocomplete-loading");
            this.cancelSearch = false;
            this.source({
                term: e
            }, this._response())
        },
        _response: function () {
            var t = ++this.requestIndex;
            return e.proxy(function (e) {
                if (t === this.requestIndex) {
                    this.__response(e)
                }
                this.pending--;
                if (!this.pending) {
                    this.element.removeClass("ui-autocomplete-loading")
                }
            }, this)
        },
        __response: function (e) {
            if (e) {
                e = this._normalize(e)
            }
            this._trigger("response", null, {
                content: e
            });
            if (!this.options.disabled && e && e.length && !this.cancelSearch) {
                this._suggest(e);
                this._trigger("open")
            }
            else {
                this._close()
            }
        },
        close: function (e) {
            this.cancelSearch = true;
            this._close(e)
        },
        _close: function (e) {
            if (this.menu.element.is(":visible")) {
                this.menu.element.hide();
                this.menu.blur();
                this.isNewMenu = true;
                this._trigger("close", e)
            }
        },
        _change: function (e) {
            if (this.previous !== this._value()) {
                this._trigger("change", e, {
                    item: this.selectedItem
                })
            }
        },
        _normalize: function (t) {
            if (t.length && t[0].label && t[0].value) {
                return t
            }
            return e.map(t, function (t) {
                if (typeof t === "string") {
                    return {
                        label: t,
                        value: t
                    }
                }
                return e.extend({
                    label: t.label || t.value,
                    value: t.value || t.label
                }, t)
            })
        },
        _suggest: function (t) {
            var i = this.menu.element.empty();
            this._renderMenu(i, t);
            this.isNewMenu = true;
            this.menu.refresh();
            i.show();
            this._resizeMenu();
            i.position(e.extend({ of: this.element
            }, this.options.position));
            if (this.options.autoFocus) {
                this.menu.next()
            }
        },
        _resizeMenu: function () {
            var e = this.menu.element;
            e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()))
        },
        _renderMenu: function (t, i) {
            var n = this;
            e.each(i, function (e, i) {
                n._renderItemData(t, i)
            })
        },
        _renderItemData: function (e, t) {
            return this._renderItem(e, t).data("ui-autocomplete-item", t)
        },
        _renderItem: function (t, i) {
            return e("<li>").append(e("<a>").text(i.label)).appendTo(t)
        },
        _move: function (e, t) {
            if (!this.menu.element.is(":visible")) {
                this.search(null, t);
                return
            }
            if (this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e)) {
                this._value(this.term);
                this.menu.blur();
                return
            }
            this.menu[e](t)
        },
        widget: function () {
            return this.menu.element
        },
        _value: function () {
            return this.valueMethod.apply(this.element, arguments)
        },
        _keyEvent: function (e, t) {
            if (!this.isMultiLine || this.menu.element.is(":visible")) {
                this._move(e, t);
                t.preventDefault()
            }
        }
    });
    e.extend(e.ui.autocomplete, {
        escapeRegex: function (e) {
            return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
        },
        filter: function (t, i) {
            var n = new RegExp(e.ui.autocomplete.escapeRegex(i), "i");
            return e.grep(t, function (e) {
                return n.test(e.label || e.value || e)
            })
        }
    });
    e.widget("ui.autocomplete", e.ui.autocomplete, {
        options: {
            messages: {
                noResults: "No search results.",
                results: function (e) {
                    return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                }
            }
        },
        __response: function (e) {
            var t;
            this._superApply(arguments);
            if (this.options.disabled || this.cancelSearch) {
                return
            }
            if (e && e.length) {
                t = this.options.messages.results(e.length)
            }
            else {
                t = this.options.messages.noResults
            }
            this.liveRegion.text(t)
        }
    })
})(jQuery);
(function (e, t) {
    var i, n = "ui-button ui-widget ui-state-default ui-corner-all",
        r = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
        s = function () {
            var t = e(this);
            setTimeout(function () {
                t.find(":ui-button").button("refresh")
            }, 1)
        },
        a = function (t) {
            var i = t.name,
                n = t.form,
                r = e([]);
            if (i) {
                i = i.replace(/'/g, "\\'");
                if (n) {
                    r = e(n).find("[name='" + i + "']")
                }
                else {
                    r = e("[name='" + i + "']", t.ownerDocument).filter(function () {
                        return !this.form
                    })
                }
            }
            return r
        };
    e.widget("ui.button", {
        version: "1.10.4",
        defaultElement: "<button>",
        options: {
            disabled: null,
            text: true,
            label: null,
            icons: {
                primary: null,
                secondary: null
            }
        },
        _create: function () {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, s);
            if (typeof this.options.disabled !== "boolean") {
                this.options.disabled = !!this.element.prop("disabled")
            }
            else {
                this.element.prop("disabled", this.options.disabled)
            }
            this._determineButtonType();
            this.hasTitle = !!this.buttonElement.attr("title");
            var t = this,
                r = this.options,
                o = this.type === "checkbox" || this.type === "radio",
                l = !o ? "ui-state-active" : "";
            if (r.label === null) {
                r.label = this.type === "input" ? this.buttonElement.val() : this.buttonElement.html()
            }
            this._hoverable(this.buttonElement);
            this.buttonElement.addClass(n).attr("role", "button").bind("mouseenter" + this.eventNamespace, function () {
                if (r.disabled) {
                    return
                }
                if (this === i) {
                    e(this).addClass("ui-state-active")
                }
            }).bind("mouseleave" + this.eventNamespace, function () {
                if (r.disabled) {
                    return
                }
                e(this).removeClass(l)
            }).bind("click" + this.eventNamespace, function (e) {
                if (r.disabled) {
                    e.preventDefault();
                    e.stopImmediatePropagation()
                }
            });
            this._on({
                focus: function () {
                    this.buttonElement.addClass("ui-state-focus")
                },
                blur: function () {
                    this.buttonElement.removeClass("ui-state-focus")
                }
            });
            if (o) {
                this.element.bind("change" + this.eventNamespace, function () {
                    t.refresh()
                })
            }
            if (this.type === "checkbox") {
                this.buttonElement.bind("click" + this.eventNamespace, function () {
                    if (r.disabled) {
                        return false
                    }
                })
            }
            else if (this.type === "radio") {
                this.buttonElement.bind("click" + this.eventNamespace, function () {
                    if (r.disabled) {
                        return false
                    }
                    e(this).addClass("ui-state-active");
                    t.buttonElement.attr("aria-pressed", "true");
                    var i = t.element[0];
                    a(i).not(i).map(function () {
                        return e(this).button("widget")[0]
                    }).removeClass("ui-state-active").attr("aria-pressed", "false")
                })
            }
            else {
                this.buttonElement.bind("mousedown" + this.eventNamespace, function () {
                    if (r.disabled) {
                        return false
                    }
                    e(this).addClass("ui-state-active");
                    i = this;
                    t.document.one("mouseup", function () {
                        i = null
                    })
                }).bind("mouseup" + this.eventNamespace, function () {
                    if (r.disabled) {
                        return false
                    }
                    e(this).removeClass("ui-state-active")
                }).bind("keydown" + this.eventNamespace, function (t) {
                    if (r.disabled) {
                        return false
                    }
                    if (t.keyCode === e.ui.keyCode.SPACE || t.keyCode === e.ui.keyCode.ENTER) {
                        e(this).addClass("ui-state-active")
                    }
                }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function () {
                    e(this).removeClass("ui-state-active")
                });
                if (this.buttonElement.is("a")) {
                    this.buttonElement.keyup(function (t) {
                        if (t.keyCode === e.ui.keyCode.SPACE) {
                            e(this).click()
                        }
                    })
                }
            }
            this._setOption("disabled", r.disabled);
            this._resetButton()
        },
        _determineButtonType: function () {
            var e, t, i;
            if (this.element.is("[type=checkbox]")) {
                this.type = "checkbox"
            }
            else if (this.element.is("[type=radio]")) {
                this.type = "radio"
            }
            else if (this.element.is("input")) {
                this.type = "input"
            }
            else {
                this.type = "button"
            }
            if (this.type === "checkbox" || this.type === "radio") {
                e = this.element.parents().last();
                t = "label[for='" + this.element.attr("id") + "']";
                this.buttonElement = e.find(t);
                if (!this.buttonElement.length) {
                    e = e.length ? e.siblings() : this.element.siblings();
                    this.buttonElement = e.filter(t);
                    if (!this.buttonElement.length) {
                        this.buttonElement = e.find(t)
                    }
                }
                this.element.addClass("ui-helper-hidden-accessible");
                i = this.element.is(":checked");
                if (i) {
                    this.buttonElement.addClass("ui-state-active")
                }
                this.buttonElement.prop("aria-pressed", i)
            }
            else {
                this.buttonElement = this.element
            }
        },
        widget: function () {
            return this.buttonElement
        },
        _destroy: function () {
            this.element.removeClass("ui-helper-hidden-accessible");
            this.buttonElement.removeClass(n + " ui-state-active " + r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
            if (!this.hasTitle) {
                this.buttonElement.removeAttr("title")
            }
        },
        _setOption: function (e, t) {
            this._super(e, t);
            if (e === "disabled") {
                this.element.prop("disabled", !!t);
                if (t) {
                    this.buttonElement.removeClass("ui-state-focus")
                }
                return
            }
            this._resetButton()
        },
        refresh: function () {
            var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            if (t !== this.options.disabled) {
                this._setOption("disabled", t)
            }
            if (this.type === "radio") {
                a(this.element[0]).each(function () {
                    if (e(this).is(":checked")) {
                        e(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true")
                    }
                    else {
                        e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
                    }
                })
            }
            else if (this.type === "checkbox") {
                if (this.element.is(":checked")) {
                    this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true")
                }
                else {
                    this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false")
                }
            }
        },
        _resetButton: function () {
            if (this.type === "input") {
                if (this.options.label) {
                    this.element.val(this.options.label)
                }
                return
            }
            var t = this.buttonElement.removeClass(r),
                i = e("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),
                n = this.options.icons,
                s = n.primary && n.secondary,
                a = [];
            if (n.primary || n.secondary) {
                if (this.options.text) {
                    a.push("ui-button-text-icon" + (s ? "s" : n.primary ? "-primary" : "-secondary"))
                }
                if (n.primary) {
                    t.prepend("<span class='ui-button-icon-primary ui-icon " + n.primary + "'></span>")
                }
                if (n.secondary) {
                    t.append("<span class='ui-button-icon-secondary ui-icon " + n.secondary + "'></span>")
                }
                if (!this.options.text) {
                    a.push(s ? "ui-button-icons-only" : "ui-button-icon-only");
                    if (!this.hasTitle) {
                        t.attr("title", e.trim(i))
                    }
                }
            }
            else {
                a.push("ui-button-text-only")
            }
            t.addClass(a.join(" "))
        }
    });
    e.widget("ui.buttonset", {
        version: "1.10.4",
        options: {
            items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
        },
        _create: function () {
            this.element.addClass("ui-buttonset")
        },
        _init: function () {
            this.refresh()
        },
        _setOption: function (e, t) {
            if (e === "disabled") {
                this.buttons.button("option", e, t)
            }
            this._super(e, t)
        },
        refresh: function () {
            var t = this.element.css("direction") === "rtl";
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function () {
                return e(this).button("widget")[0]
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(t ? "ui-corner-left" : "ui-corner-right").end().end()
        },
        _destroy: function () {
            this.element.removeClass("ui-buttonset");
            this.buttons.map(function () {
                return e(this).button("widget")[0]
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
        }
    })
})(jQuery);
(function (e, t) {
    e.extend(e.ui, {
        datepicker: {
            version: "1.10.4"
        }
    });
    var i = "datepicker",
        n;

    function r() {
        this._curInst = null;
        this._keyEvent = false;
        this._disabledInputs = [];
        this._datepickerShowing = false;
        this._inDialog = false;
        this._mainDivId = "ui-datepicker-div";
        this._inlineClass = "ui-datepicker-inline";
        this._appendClass = "ui-datepicker-append";
        this._triggerClass = "ui-datepicker-trigger";
        this._dialogClass = "ui-datepicker-dialog";
        this._disableClass = "ui-datepicker-disabled";
        this._unselectableClass = "ui-datepicker-unselectable";
        this._currentClass = "ui-datepicker-current-day";
        this._dayOverClass = "ui-datepicker-days-cell-over";
        this.regional = [];
        this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: false,
            showMonthAfterYear: false,
            yearSuffix: ""
        };
        this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: false,
            hideIfNoPrevNext: false,
            navigationAsDateFormat: false,
            gotoCurrent: false,
            changeMonth: false,
            changeYear: false,
            yearRange: "c-10:c+10",
            showOtherMonths: false,
            selectOtherMonths: false,
            showWeek: false,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null,
            maxDate: null,
            duration: "fast",
            beforeShowDay: null,
            beforeShow: null,
            onSelect: null,
            onChangeMonthYear: null,
            onClose: null,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: true,
            showButtonPanel: false,
            autoSize: false,
            disabled: false
        };
        e.extend(this._defaults, this.regional[""]);
        this.dpDiv = s(e("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
    }
    e.extend(r.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        _widgetDatepicker: function () {
            return this.dpDiv
        },
        setDefaults: function (e) {
            a(this._defaults, e || {});
            return this
        },
        _attachDatepicker: function (t, i) {
            var n, r, s;
            n = t.nodeName.toLowerCase();
            r = n === "div" || n === "span";
            if (!t.id) {
                this.uuid += 1;
                t.id = "dp" + this.uuid
            }
            s = this._newInst(e(t), r);
            s.settings = e.extend({}, i || {});
            if (n === "input") {
                this._connectDatepicker(t, s)
            }
            else if (r) {
                this._inlineDatepicker(t, s)
            }
        },
        _newInst: function (t, i) {
            var n = t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {
                id: n,
                input: t,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: i,
                dpDiv: !i ? this.dpDiv : s(e("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
            }
        },
        _connectDatepicker: function (t, n) {
            var r = e(t);
            n.append = e([]);
            n.trigger = e([]);
            if (r.hasClass(this.markerClassName)) {
                return
            }
            this._attachments(r, n);
            r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);
            this._autoSize(n);
            e.data(t, i, n);
            if (n.settings.disabled) {
                this._disableDatepicker(t)
            }
        },
        _attachments: function (t, i) {
            var n, r, s, a = this._get(i, "appendText"),
                o = this._get(i, "isRTL");
            if (i.append) {
                i.append.remove()
            }
            if (a) {
                i.append = e("<span class='" + this._appendClass + "'>" + a + "</span>");
                t[o ? "before" : "after"](i.append)
            }
            t.unbind("focus", this._showDatepicker);
            if (i.trigger) {
                i.trigger.remove()
            }
            n = this._get(i, "showOn");
            if (n === "focus" || n === "both") {
                t.focus(this._showDatepicker)
            }
            if (n === "button" || n === "both") {
                r = this._get(i, "buttonText");
                s = this._get(i, "buttonImage");
                i.trigger = e(this._get(i, "buttonImageOnly") ? e("<img/>").addClass(this._triggerClass).attr({
                    src: s,
                    alt: r,
                    title: r
                }) : e("<button type='button'></button>").addClass(this._triggerClass).html(!s ? r : e("<img/>").attr({
                    src: s,
                    alt: r,
                    title: r
                })));
                t[o ? "before" : "after"](i.trigger);
                i.trigger.click(function () {
                    if (e.datepicker._datepickerShowing && e.datepicker._lastInput === t[0]) {
                        e.datepicker._hideDatepicker()
                    }
                    else if (e.datepicker._datepickerShowing && e.datepicker._lastInput !== t[0]) {
                        e.datepicker._hideDatepicker();
                        e.datepicker._showDatepicker(t[0])
                    }
                    else {
                        e.datepicker._showDatepicker(t[0])
                    }
                    return false
                })
            }
        },
        _autoSize: function (e) {
            if (this._get(e, "autoSize") && !e.inline) {
                var t, i, n, r, s = new Date(2009, 12 - 1, 20),
                    a = this._get(e, "dateFormat");
                if (a.match(/[DM]/)) {
                    t = function (e) {
                        i = 0;
                        n = 0;
                        for (r = 0; r < e.length; r++) {
                            if (e[r].length > i) {
                                i = e[r].length;
                                n = r
                            }
                        }
                        return n
                    };
                    s.setMonth(t(this._get(e, a.match(/MM/) ? "monthNames" : "monthNamesShort")));
                    s.setDate(t(this._get(e, a.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - s.getDay())
                }
                e.input.attr("size", this._formatDate(e, s).length)
            }
        },
        _inlineDatepicker: function (t, n) {
            var r = e(t);
            if (r.hasClass(this.markerClassName)) {
                return
            }
            r.addClass(this.markerClassName).append(n.dpDiv);
            e.data(t, i, n);
            this._setDate(n, this._getDefaultDate(n), true);
            this._updateDatepicker(n);
            this._updateAlternate(n);
            if (n.settings.disabled) {
                this._disableDatepicker(t)
            }
            n.dpDiv.css("display", "block")
        },
        _dialogDatepicker: function (t, n, r, s, o) {
            var l, u, c, f, h, d = this._dialogInst;
            if (!d) {
                this.uuid += 1;
                l = "dp" + this.uuid;
                this._dialogInput = e("<input type='text' id='" + l + "' style='position: absolute; top: -100px; width: 0px;'/>");
                this._dialogInput.keydown(this._doKeyDown);
                e("body").append(this._dialogInput);
                d = this._dialogInst = this._newInst(this._dialogInput, false);
                d.settings = {};
                e.data(this._dialogInput[0], i, d)
            }
            a(d.settings, s || {});
            n = n && n.constructor === Date ? this._formatDate(d, n) : n;
            this._dialogInput.val(n);
            this._pos = o ? o.length ? o : [o.pageX, o.pageY] : null;
            if (!this._pos) {
                u = document.documentElement.clientWidth;
                c = document.documentElement.clientHeight;
                f = document.documentElement.scrollLeft || document.body.scrollLeft;
                h = document.documentElement.scrollTop || document.body.scrollTop;
                this._pos = [u / 2 - 100 + f, c / 2 - 150 + h]
            }
            this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px");
            d.settings.onSelect = r;
            this._inDialog = true;
            this.dpDiv.addClass(this._dialogClass);
            this._showDatepicker(this._dialogInput[0]);
            if (e.blockUI) {
                e.blockUI(this.dpDiv)
            }
            e.data(this._dialogInput[0], i, d);
            return this
        },
        _destroyDatepicker: function (t) {
            var n, r = e(t),
                s = e.data(t, i);
            if (!r.hasClass(this.markerClassName)) {
                return
            }
            n = t.nodeName.toLowerCase();
            e.removeData(t, i);
            if (n === "input") {
                s.append.remove();
                s.trigger.remove();
                r.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)
            }
            else if (n === "div" || n === "span") {
                r.removeClass(this.markerClassName).empty()
            }
        },
        _enableDatepicker: function (t) {
            var n, r, s = e(t),
                a = e.data(t, i);
            if (!s.hasClass(this.markerClassName)) {
                return
            }
            n = t.nodeName.toLowerCase();
            if (n === "input") {
                t.disabled = false;
                a.trigger.filter("button").each(function () {
                    this.disabled = false
                }).end().filter("img").css({
                    opacity: "1.0",
                    cursor: ""
                })
            }
            else if (n === "div" || n === "span") {
                r = s.children("." + this._inlineClass);
                r.children().removeClass("ui-state-disabled");
                r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", false)
            }
            this._disabledInputs = e.map(this._disabledInputs, function (e) {
                return e === t ? null : e
            })
        },
        _disableDatepicker: function (t) {
            var n, r, s = e(t),
                a = e.data(t, i);
            if (!s.hasClass(this.markerClassName)) {
                return
            }
            n = t.nodeName.toLowerCase();
            if (n === "input") {
                t.disabled = true;
                a.trigger.filter("button").each(function () {
                    this.disabled = true
                }).end().filter("img").css({
                    opacity: "0.5",
                    cursor: "default"
                })
            }
            else if (n === "div" || n === "span") {
                r = s.children("." + this._inlineClass);
                r.children().addClass("ui-state-disabled");
                r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", true)
            }
            this._disabledInputs = e.map(this._disabledInputs, function (e) {
                return e === t ? null : e
            });
            this._disabledInputs[this._disabledInputs.length] = t
        },
        _isDisabledDatepicker: function (e) {
            if (!e) {
                return false
            }
            for (var t = 0; t < this._disabledInputs.length; t++) {
                if (this._disabledInputs[t] === e) {
                    return true
                }
            }
            return false
        },
        _getInst: function (t) {
            try {
                return e.data(t, i)
            }
            catch (err) {
                throw "Missing instance data for this datepicker"
            }
        },
        _optionDatepicker: function (i, n, r) {
            var s, o, l, u, c = this._getInst(i);
            if (arguments.length === 2 && typeof n === "string") {
                return n === "defaults" ? e.extend({}, e.datepicker._defaults) : c ? n === "all" ? e.extend({}, c.settings) : this._get(c, n) : null
            }
            s = n || {};
            if (typeof n === "string") {
                s = {};
                s[n] = r
            }
            if (c) {
                if (this._curInst === c) {
                    this._hideDatepicker()
                }
                o = this._getDateDatepicker(i, true);
                l = this._getMinMaxDate(c, "min");
                u = this._getMinMaxDate(c, "max");
                a(c.settings, s);
                if (l !== null && s.dateFormat !== t && s.minDate === t) {
                    c.settings.minDate = this._formatDate(c, l)
                }
                if (u !== null && s.dateFormat !== t && s.maxDate === t) {
                    c.settings.maxDate = this._formatDate(c, u)
                }
                if ("disabled" in s) {
                    if (s.disabled) {
                        this._disableDatepicker(i)
                    }
                    else {
                        this._enableDatepicker(i)
                    }
                }
                this._attachments(e(i), c);
                this._autoSize(c);
                this._setDate(c, o);
                this._updateAlternate(c);
                this._updateDatepicker(c)
            }
        },
        _changeDatepicker: function (e, t, i) {
            this._optionDatepicker(e, t, i)
        },
        _refreshDatepicker: function (e) {
            var t = this._getInst(e);
            if (t) {
                this._updateDatepicker(t)
            }
        },
        _setDateDatepicker: function (e, t) {
            var i = this._getInst(e);
            if (i) {
                this._setDate(i, t);
                this._updateDatepicker(i);
                this._updateAlternate(i)
            }
        },
        _getDateDatepicker: function (e, t) {
            var i = this._getInst(e);
            if (i && !i.inline) {
                this._setDateFromField(i, t)
            }
            return i ? this._getDate(i) : null
        },
        _doKeyDown: function (t) {
            var i, n, r, s = e.datepicker._getInst(t.target),
                a = true,
                o = s.dpDiv.is(".ui-datepicker-rtl");
            s._keyEvent = true;
            if (e.datepicker._datepickerShowing) {
                switch (t.keyCode) {
                    case 9:
                        e.datepicker._hideDatepicker();
                        a = false;
                        break;
                    case 13:
                        r = e("td." + e.datepicker._dayOverClass + ":not(." + e.datepicker._currentClass + ")", s.dpDiv);
                        if (r[0]) {
                            e.datepicker._selectDay(t.target, s.selectedMonth, s.selectedYear, r[0])
                        }
                        i = e.datepicker._get(s, "onSelect");
                        if (i) {
                            n = e.datepicker._formatDate(s);
                            i.apply(s.input ? s.input[0] : null, [n, s])
                        }
                        else {
                            e.datepicker._hideDatepicker()
                        }
                        return false;
                    case 27:
                        e.datepicker._hideDatepicker();
                        break;
                    case 33:
                        e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(s, "stepBigMonths") : -e.datepicker._get(s, "stepMonths"), "M");
                        break;
                    case 34:
                        e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(s, "stepBigMonths") : +e.datepicker._get(s, "stepMonths"), "M");
                        break;
                    case 35:
                        if (t.ctrlKey || t.metaKey) {
                            e.datepicker._clearDate(t.target)
                        }
                        a = t.ctrlKey || t.metaKey;
                        break;
                    case 36:
                        if (t.ctrlKey || t.metaKey) {
                            e.datepicker._gotoToday(t.target)
                        }
                        a = t.ctrlKey || t.metaKey;
                        break;
                    case 37:
                        if (t.ctrlKey || t.metaKey) {
                            e.datepicker._adjustDate(t.target, o ? +1 : -1, "D")
                        }
                        a = t.ctrlKey || t.metaKey;
                        if (t.originalEvent.altKey) {
                            e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(s, "stepBigMonths") : -e.datepicker._get(s, "stepMonths"), "M")
                        }
                        break;
                    case 38:
                        if (t.ctrlKey || t.metaKey) {
                            e.datepicker._adjustDate(t.target, -7, "D")
                        }
                        a = t.ctrlKey || t.metaKey;
                        break;
                    case 39:
                        if (t.ctrlKey || t.metaKey) {
                            e.datepicker._adjustDate(t.target, o ? -1 : +1, "D")
                        }
                        a = t.ctrlKey || t.metaKey;
                        if (t.originalEvent.altKey) {
                            e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(s, "stepBigMonths") : +e.datepicker._get(s, "stepMonths"), "M")
                        }
                        break;
                    case 40:
                        if (t.ctrlKey || t.metaKey) {
                            e.datepicker._adjustDate(t.target, +7, "D")
                        }
                        a = t.ctrlKey || t.metaKey;
                        break;
                    default:
                        a = false
                }
            }
            else if (t.keyCode === 36 && t.ctrlKey) {
                e.datepicker._showDatepicker(this)
            }
            else {
                a = false
            }
            if (a) {
                t.preventDefault();
                t.stopPropagation()
            }
        },
        _doKeyPress: function (t) {
            var i, n, r = e.datepicker._getInst(t.target);
            if (e.datepicker._get(r, "constrainInput")) {
                i = e.datepicker._possibleChars(e.datepicker._get(r, "dateFormat"));
                n = String.fromCharCode(t.charCode == null ? t.keyCode : t.charCode);
                return t.ctrlKey || t.metaKey || (n < " " || !i || i.indexOf(n) > -1)
            }
        },
        _doKeyUp: function (t) {
            var i, n = e.datepicker._getInst(t.target);
            if (n.input.val() !== n.lastVal) {
                try {
                    i = e.datepicker.parseDate(e.datepicker._get(n, "dateFormat"), n.input ? n.input.val() : null, e.datepicker._getFormatConfig(n));
                    if (i) {
                        e.datepicker._setDateFromField(n);
                        e.datepicker._updateAlternate(n);
                        e.datepicker._updateDatepicker(n)
                    }
                }
                catch (err) {}
            }
            return true
        },
        _showDatepicker: function (t) {
            t = t.target || t;
            if (t.nodeName.toLowerCase() !== "input") {
                t = e("input", t.parentNode)[0]
            }
            if (e.datepicker._isDisabledDatepicker(t) || e.datepicker._lastInput === t) {
                return
            }
            var i, n, r, s, o, l, u;
            i = e.datepicker._getInst(t);
            if (e.datepicker._curInst && e.datepicker._curInst !== i) {
                e.datepicker._curInst.dpDiv.stop(true, true);
                if (i && e.datepicker._datepickerShowing) {
                    e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])
                }
            }
            n = e.datepicker._get(i, "beforeShow");
            r = n ? n.apply(t, [t, i]) : {};
            if (r === false) {
                return
            }
            a(i.settings, r);
            i.lastVal = null;
            e.datepicker._lastInput = t;
            e.datepicker._setDateFromField(i);
            if (e.datepicker._inDialog) {
                t.value = ""
            }
            if (!e.datepicker._pos) {
                e.datepicker._pos = e.datepicker._findPos(t);
                e.datepicker._pos[1] += t.offsetHeight
            }
            s = false;
            e(t).parents().each(function () {
                s |= e(this).css("position") === "fixed";
                return !s
            });
            o = {
                left: e.datepicker._pos[0],
                top: e.datepicker._pos[1]
            };
            e.datepicker._pos = null;
            i.dpDiv.empty();
            i.dpDiv.css({
                position: "absolute",
                display: "block",
                top: "-1000px"
            });
            e.datepicker._updateDatepicker(i);
            o = e.datepicker._checkOffset(i, o, s);
            i.dpDiv.css({
                position: e.datepicker._inDialog && e.blockUI ? "static" : s ? "fixed" : "absolute",
                display: "none",
                left: o.left + "px",
                top: o.top + "px"
            });
            if (!i.inline) {
                l = e.datepicker._get(i, "showAnim");
                u = e.datepicker._get(i, "duration");
                i.dpDiv.zIndex(e(t).zIndex() + 1);
                e.datepicker._datepickerShowing = true;
                if (e.effects && e.effects.effect[l]) {
                    i.dpDiv.show(l, e.datepicker._get(i, "showOptions"), u)
                }
                else {
                    i.dpDiv[l || "show"](l ? u : null)
                }
                if (e.datepicker._shouldFocusInput(i)) {
                    i.input.focus()
                }
                e.datepicker._curInst = i
            }
        },
        _updateDatepicker: function (t) {
            this.maxRows = 4;
            n = t;
            t.dpDiv.empty().append(this._generateHTML(t));
            this._attachHandlers(t);
            t.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var i, r = this._getNumberOfMonths(t),
                s = r[1],
                a = 17;
            t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
            if (s > 1) {
                t.dpDiv.addClass("ui-datepicker-multi-" + s).css("width", a * s + "em")
            }
            t.dpDiv[(r[0] !== 1 || r[1] !== 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi");
            t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl");
            if (t === e.datepicker._curInst && e.datepicker._datepickerShowing && e.datepicker._shouldFocusInput(t)) {
                t.input.focus()
            }
            if (t.yearshtml) {
                i = t.yearshtml;
                setTimeout(function () {
                    if (i === t.yearshtml && t.yearshtml) {
                        t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml)
                    }
                    i = t.yearshtml = null
                }, 0)
            }
        },
        _shouldFocusInput: function (e) {
            return e.input && e.input.is(":visible") && !e.input.is(":disabled") && !e.input.is(":focus")
        },
        _checkOffset: function (t, i, n) {
            var r = t.dpDiv.outerWidth(),
                s = t.dpDiv.outerHeight(),
                a = t.input ? t.input.outerWidth() : 0,
                o = t.input ? t.input.outerHeight() : 0,
                l = document.documentElement.clientWidth + (n ? 0 : e(document).scrollLeft()),
                u = document.documentElement.clientHeight + (n ? 0 : e(document).scrollTop());
            i.left -= this._get(t, "isRTL") ? r - a : 0;
            i.left -= n && i.left === t.input.offset().left ? e(document).scrollLeft() : 0;
            i.top -= n && i.top === t.input.offset().top + o ? e(document).scrollTop() : 0;
            i.left -= Math.min(i.left, i.left + r > l && l > r ? Math.abs(i.left + r - l) : 0);
            i.top -= Math.min(i.top, i.top + s > u && u > s ? Math.abs(s + o) : 0);
            return i
        },
        _findPos: function (t) {
            var i, n = this._getInst(t),
                r = this._get(n, "isRTL");
            while (t && (t.type === "hidden" || t.nodeType !== 1 || e.expr.filters.hidden(t))) {
                t = t[r ? "previousSibling" : "nextSibling"]
            }
            i = e(t).offset();
            return [i.left, i.top]
        },
        _hideDatepicker: function (t) {
            var n, r, s, a, o = this._curInst;
            if (!o || t && o !== e.data(t, i)) {
                return
            }
            if (this._datepickerShowing) {
                n = this._get(o, "showAnim");
                r = this._get(o, "duration");
                s = function () {
                    e.datepicker._tidyDialog(o)
                };
                if (e.effects && (e.effects.effect[n] || e.effects[n])) {
                    o.dpDiv.hide(n, e.datepicker._get(o, "showOptions"), r, s)
                }
                else {
                    o.dpDiv[n === "slideDown" ? "slideUp" : n === "fadeIn" ? "fadeOut" : "hide"](n ? r : null, s)
                }
                if (!n) {
                    s()
                }
                this._datepickerShowing = false;
                a = this._get(o, "onClose");
                if (a) {
                    a.apply(o.input ? o.input[0] : null, [o.input ? o.input.val() : "", o])
                }
                this._lastInput = null;
                if (this._inDialog) {
                    this._dialogInput.css({
                        position: "absolute",
                        left: "0",
                        top: "-100px"
                    });
                    if (e.blockUI) {
                        e.unblockUI();
                        e("body").append(this.dpDiv)
                    }
                }
                this._inDialog = false
            }
        },
        _tidyDialog: function (e) {
            e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
        },
        _checkExternalClick: function (t) {
            if (!e.datepicker._curInst) {
                return
            }
            var i = e(t.target),
                n = e.datepicker._getInst(i[0]);
            if (i[0].id !== e.datepicker._mainDivId && i.parents("#" + e.datepicker._mainDivId).length === 0 && !i.hasClass(e.datepicker.markerClassName) && !i.closest("." + e.datepicker._triggerClass).length && e.datepicker._datepickerShowing && !(e.datepicker._inDialog && e.blockUI) || i.hasClass(e.datepicker.markerClassName) && e.datepicker._curInst !== n) {
                e.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function (t, i, n) {
            var r = e(t),
                s = this._getInst(r[0]);
            if (this._isDisabledDatepicker(r[0])) {
                return
            }
            this._adjustInstDate(s, i + (n === "M" ? this._get(s, "showCurrentAtPos") : 0), n);
            this._updateDatepicker(s)
        },
        _gotoToday: function (t) {
            var i, n = e(t),
                r = this._getInst(n[0]);
            if (this._get(r, "gotoCurrent") && r.currentDay) {
                r.selectedDay = r.currentDay;
                r.drawMonth = r.selectedMonth = r.currentMonth;
                r.drawYear = r.selectedYear = r.currentYear
            }
            else {
                i = new Date;
                r.selectedDay = i.getDate();
                r.drawMonth = r.selectedMonth = i.getMonth();
                r.drawYear = r.selectedYear = i.getFullYear()
            }
            this._notifyChange(r);
            this._adjustDate(n)
        },
        _selectMonthYear: function (t, i, n) {
            var r = e(t),
                s = this._getInst(r[0]);
            s["selected" + (n === "M" ? "Month" : "Year")] = s["draw" + (n === "M" ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10);
            this._notifyChange(s);
            this._adjustDate(r)
        },
        _selectDay: function (t, i, n, r) {
            var s, a = e(t);
            if (e(r).hasClass(this._unselectableClass) || this._isDisabledDatepicker(a[0])) {
                return
            }
            s = this._getInst(a[0]);
            s.selectedDay = s.currentDay = e("a", r).html();
            s.selectedMonth = s.currentMonth = i;
            s.selectedYear = s.currentYear = n;
            this._selectDate(t, this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear))
        },
        _clearDate: function (t) {
            var i = e(t);
            this._selectDate(i, "")
        },
        _selectDate: function (t, i) {
            var n, r = e(t),
                s = this._getInst(r[0]);
            i = i != null ? i : this._formatDate(s);
            if (s.input) {
                s.input.val(i)
            }
            this._updateAlternate(s);
            n = this._get(s, "onSelect");
            if (n) {
                n.apply(s.input ? s.input[0] : null, [i, s])
            }
            else if (s.input) {
                s.input.trigger("change")
            }
            if (s.inline) {
                this._updateDatepicker(s)
            }
            else {
                this._hideDatepicker();
                this._lastInput = s.input[0];
                if (typeof s.input[0] !== "object") {
                    s.input.focus()
                }
                this._lastInput = null
            }
        },
        _updateAlternate: function (t) {
            var i, n, r, s = this._get(t, "altField");
            if (s) {
                i = this._get(t, "altFormat") || this._get(t, "dateFormat");
                n = this._getDate(t);
                r = this.formatDate(i, n, this._getFormatConfig(t));
                e(s).each(function () {
                    e(this).val(r)
                })
            }
        },
        noWeekends: function (e) {
            var t = e.getDay();
            return [t > 0 && t < 6, ""]
        },
        iso8601Week: function (e) {
            var t, i = new Date(e.getTime());
            i.setDate(i.getDate() + 4 - (i.getDay() || 7));
            t = i.getTime();
            i.setMonth(0);
            i.setDate(1);
            return Math.floor(Math.round((t - i) / 864e5) / 7) + 1
        },
        parseDate: function (t, i, n) {
            if (t == null || i == null) {
                throw "Invalid arguments"
            }
            i = typeof i === "object" ? i.toString() : i + "";
            if (i === "") {
                return null
            }
            var r, s, a, o = 0,
                l = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                u = typeof l !== "string" ? l : (new Date).getFullYear() % 100 + parseInt(l, 10),
                c = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
                f = (n ? n.dayNames : null) || this._defaults.dayNames,
                h = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
                d = (n ? n.monthNames : null) || this._defaults.monthNames,
                p = -1,
                g = -1,
                m = -1,
                v = -1,
                y = false,
                b, w = function (e) {
                    var i = r + 1 < t.length && t.charAt(r + 1) === e;
                    if (i) {
                        r++
                    }
                    return i
                },
                _ = function (e) {
                    var t = w(e),
                        n = e === "@" ? 14 : e === "!" ? 20 : e === "y" && t ? 4 : e === "o" ? 3 : 2,
                        r = new RegExp("^\\d{1," + n + "}"),
                        s = i.substring(o).match(r);
                    if (!s) {
                        throw "Missing number at position " + o
                    }
                    o += s[0].length;
                    return parseInt(s[0], 10)
                },
                x = function (t, n, r) {
                    var s = -1,
                        a = e.map(w(t) ? r : n, function (e, t) {
                            return [
                                [t, e]
                            ]
                        }).sort(function (e, t) {
                            return -(e[1].length - t[1].length)
                        });
                    e.each(a, function (e, t) {
                        var n = t[1];
                        if (i.substr(o, n.length).toLowerCase() === n.toLowerCase()) {
                            s = t[0];
                            o += n.length;
                            return false
                        }
                    });
                    if (s !== -1) {
                        return s + 1
                    }
                    else {
                        throw "Unknown name at position " + o
                    }
                },
                k = function () {
                    if (i.charAt(o) !== t.charAt(r)) {
                        throw "Unexpected literal at position " + o
                    }
                    o++
                };
            for (r = 0; r < t.length; r++) {
                if (y) {
                    if (t.charAt(r) === "'" && !w("'")) {
                        y = false
                    }
                    else {
                        k()
                    }
                }
                else {
                    switch (t.charAt(r)) {
                        case "d":
                            m = _("d");
                            break;
                        case "D":
                            x("D", c, f);
                            break;
                        case "o":
                            v = _("o");
                            break;
                        case "m":
                            g = _("m");
                            break;
                        case "M":
                            g = x("M", h, d);
                            break;
                        case "y":
                            p = _("y");
                            break;
                        case "@":
                            b = new Date(_("@"));
                            p = b.getFullYear();
                            g = b.getMonth() + 1;
                            m = b.getDate();
                            break;
                        case "!":
                            b = new Date((_("!") - this._ticksTo1970) / 1e4);
                            p = b.getFullYear();
                            g = b.getMonth() + 1;
                            m = b.getDate();
                            break;
                        case "'":
                            if (w("'")) {
                                k()
                            }
                            else {
                                y = true
                            }
                            break;
                        default:
                            k()
                    }
                }
            }
            if (o < i.length) {
                a = i.substr(o);
                if (!/^\s+/.test(a)) {
                    throw "Extra/unparsed characters found in date: " + a
                }
            }
            if (p === -1) {
                p = (new Date).getFullYear()
            }
            else if (p < 100) {
                p += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (p <= u ? 0 : -100)
            }
            if (v > -1) {
                g = 1;
                m = v;
                do {
                    s = this._getDaysInMonth(p, g - 1);
                    if (m <= s) {
                        break
                    }
                    g++;
                    m -= s
                } while (true)
            }
            b = this._daylightSavingAdjust(new Date(p, g - 1, m));
            if (b.getFullYear() !== p || b.getMonth() + 1 !== g || b.getDate() !== m) {
                throw "Invalid date"
            }
            return b
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: ((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) + Math.floor(1970 / 400)) * 24 * 60 * 60 * 1e7,
        formatDate: function (e, t, i) {
            if (!t) {
                return ""
            }
            var n, r = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort,
                s = (i ? i.dayNames : null) || this._defaults.dayNames,
                a = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort,
                o = (i ? i.monthNames : null) || this._defaults.monthNames,
                l = function (t) {
                    var i = n + 1 < e.length && e.charAt(n + 1) === t;
                    if (i) {
                        n++
                    }
                    return i
                },
                u = function (e, t, i) {
                    var n = "" + t;
                    if (l(e)) {
                        while (n.length < i) {
                            n = "0" + n
                        }
                    }
                    return n
                },
                c = function (e, t, i, n) {
                    return l(e) ? n[t] : i[t]
                },
                f = "",
                h = false;
            if (t) {
                for (n = 0; n < e.length; n++) {
                    if (h) {
                        if (e.charAt(n) === "'" && !l("'")) {
                            h = false
                        }
                        else {
                            f += e.charAt(n)
                        }
                    }
                    else {
                        switch (e.charAt(n)) {
                            case "d":
                                f += u("d", t.getDate(), 2);
                                break;
                            case "D":
                                f += c("D", t.getDay(), r, s);
                                break;
                            case "o":
                                f += u("o", Math.round((new Date(t.getFullYear(), t.getMonth(), t.getDate()).getTime() - new Date(t.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                                break;
                            case "m":
                                f += u("m", t.getMonth() + 1, 2);
                                break;
                            case "M":
                                f += c("M", t.getMonth(), a, o);
                                break;
                            case "y":
                                f += l("y") ? t.getFullYear() : (t.getYear() % 100 < 10 ? "0" : "") + t.getYear() % 100;
                                break;
                            case "@":
                                f += t.getTime();
                                break;
                            case "!":
                                f += t.getTime() * 1e4 + this._ticksTo1970;
                                break;
                            case "'":
                                if (l("'")) {
                                    f += "'"
                                }
                                else {
                                    h = true
                                }
                                break;
                            default:
                                f += e.charAt(n)
                        }
                    }
                }
            }
            return f
        },
        _possibleChars: function (e) {
            var t, i = "",
                n = false,
                r = function (i) {
                    var n = t + 1 < e.length && e.charAt(t + 1) === i;
                    if (n) {
                        t++
                    }
                    return n
                };
            for (t = 0; t < e.length; t++) {
                if (n) {
                    if (e.charAt(t) === "'" && !r("'")) {
                        n = false
                    }
                    else {
                        i += e.charAt(t)
                    }
                }
                else {
                    switch (e.charAt(t)) {
                        case "d":
                        case "m":
                        case "y":
                        case "@":
                            i += "0123456789";
                            break;
                        case "D":
                        case "M":
                            return null;
                        case "'":
                            if (r("'")) {
                                i += "'"
                            }
                            else {
                                n = true
                            }
                            break;
                        default:
                            i += e.charAt(t)
                    }
                }
            }
            return i
        },
        _get: function (e, i) {
            return e.settings[i] !== t ? e.settings[i] : this._defaults[i]
        },
        _setDateFromField: function (e, t) {
            if (e.input.val() === e.lastVal) {
                return
            }
            var i = this._get(e, "dateFormat"),
                n = e.lastVal = e.input ? e.input.val() : null,
                r = this._getDefaultDate(e),
                s = r,
                a = this._getFormatConfig(e);
            try {
                s = this.parseDate(i, n, a) || r
            }
            catch (event) {
                n = t ? "" : n
            }
            e.selectedDay = s.getDate();
            e.drawMonth = e.selectedMonth = s.getMonth();
            e.drawYear = e.selectedYear = s.getFullYear();
            e.currentDay = n ? s.getDate() : 0;
            e.currentMonth = n ? s.getMonth() : 0;
            e.currentYear = n ? s.getFullYear() : 0;
            this._adjustInstDate(e)
        },
        _getDefaultDate: function (e) {
            return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
        },
        _determineDate: function (t, i, n) {
            var r = function (e) {
                    var t = new Date;
                    t.setDate(t.getDate() + e);
                    return t
                },
                s = function (i) {
                    try {
                        return e.datepicker.parseDate(e.datepicker._get(t, "dateFormat"), i, e.datepicker._getFormatConfig(t))
                    }
                    catch (e) {}
                    var n = (i.toLowerCase().match(/^c/) ? e.datepicker._getDate(t) : null) || new Date,
                        r = n.getFullYear(),
                        s = n.getMonth(),
                        a = n.getDate(),
                        o = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
                        l = o.exec(i);
                    while (l) {
                        switch (l[2] || "d") {
                            case "d":
                            case "D":
                                a += parseInt(l[1], 10);
                                break;
                            case "w":
                            case "W":
                                a += parseInt(l[1], 10) * 7;
                                break;
                            case "m":
                            case "M":
                                s += parseInt(l[1], 10);
                                a = Math.min(a, e.datepicker._getDaysInMonth(r, s));
                                break;
                            case "y":
                            case "Y":
                                r += parseInt(l[1], 10);
                                a = Math.min(a, e.datepicker._getDaysInMonth(r, s));
                                break
                        }
                        l = o.exec(i)
                    }
                    return new Date(r, s, a)
                },
                a = i == null || i === "" ? n : typeof i === "string" ? s(i) : typeof i === "number" ? isNaN(i) ? n : r(i) : new Date(i.getTime());
            a = a && a.toString() === "Invalid Date" ? n : a;
            if (a) {
                a.setHours(0);
                a.setMinutes(0);
                a.setSeconds(0);
                a.setMilliseconds(0)
            }
            return this._daylightSavingAdjust(a)
        },
        _daylightSavingAdjust: function (e) {
            if (!e) {
                return null
            }
            e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0);
            return e
        },
        _setDate: function (e, t, i) {
            var n = !t,
                r = e.selectedMonth,
                s = e.selectedYear,
                a = this._restrictMinMax(e, this._determineDate(e, t, new Date));
            e.selectedDay = e.currentDay = a.getDate();
            e.drawMonth = e.selectedMonth = e.currentMonth = a.getMonth();
            e.drawYear = e.selectedYear = e.currentYear = a.getFullYear();
            if ((r !== e.selectedMonth || s !== e.selectedYear) && !i) {
                this._notifyChange(e)
            }
            this._adjustInstDate(e);
            if (e.input) {
                e.input.val(n ? "" : this._formatDate(e))
            }
        },
        _getDate: function (e) {
            var t = !e.currentYear || e.input && e.input.val() === "" ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return t
        },
        _attachHandlers: function (t) {
            var i = this._get(t, "stepMonths"),
                n = "#" + t.id.replace(/\\\\/g, "\\");
            t.dpDiv.find("[data-handler]").map(function () {
                var t = {
                    prev: function () {
                        e.datepicker._adjustDate(n, -i, "M")
                    },
                    next: function () {
                        e.datepicker._adjustDate(n, +i, "M")
                    },
                    hide: function () {
                        e.datepicker._hideDatepicker()
                    },
                    today: function () {
                        e.datepicker._gotoToday(n)
                    },
                    selectDay: function () {
                        e.datepicker._selectDay(n, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this);
                        return false
                    },
                    selectMonth: function () {
                        e.datepicker._selectMonthYear(n, this, "M");
                        return false
                    },
                    selectYear: function () {
                        e.datepicker._selectMonthYear(n, this, "Y");
                        return false
                    }
                };
                e(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")])
            })
        },
        _generateHTML: function (e) {
            var t, i, n, r, s, a, o, l, u, c, f, h, d, p, g, m, v, y, b, w, _, x, k, C, M, T, D, S, E, A, I, $, P, z, N, H, O, L, j, F = new Date,
                R = this._daylightSavingAdjust(new Date(F.getFullYear(), F.getMonth(), F.getDate())),
                W = this._get(e, "isRTL"),
                Y = this._get(e, "showButtonPanel"),
                q = this._get(e, "hideIfNoPrevNext"),
                B = this._get(e, "navigationAsDateFormat"),
                U = this._getNumberOfMonths(e),
                Q = this._get(e, "showCurrentAtPos"),
                G = this._get(e, "stepMonths"),
                X = U[0] !== 1 || U[1] !== 1,
                V = this._daylightSavingAdjust(!e.currentDay ? new Date(9999, 9, 9) : new Date(e.currentYear, e.currentMonth, e.currentDay)),
                K = this._getMinMaxDate(e, "min"),
                Z = this._getMinMaxDate(e, "max"),
                J = e.drawMonth - Q,
                et = e.drawYear;
            if (J < 0) {
                J += 12;
                et--
            }
            if (Z) {
                t = this._daylightSavingAdjust(new Date(Z.getFullYear(), Z.getMonth() - U[0] * U[1] + 1, Z.getDate()));
                t = K && t < K ? K : t;
                while (this._daylightSavingAdjust(new Date(et, J, 1)) > t) {
                    J--;
                    if (J < 0) {
                        J = 11;
                        et--
                    }
                }
            }
            e.drawMonth = J;
            e.drawYear = et;
            i = this._get(e, "prevText");
            i = !B ? i : this.formatDate(i, this._daylightSavingAdjust(new Date(et, J - G, 1)), this._getFormatConfig(e));
            n = this._canAdjustMonth(e, -1, et, J) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'" + " title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (W ? "e" : "w") + "'>" + i + "</span></a>" : q ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (W ? "e" : "w") + "'>" + i + "</span></a>";
            r = this._get(e, "nextText");
            r = !B ? r : this.formatDate(r, this._daylightSavingAdjust(new Date(et, J + G, 1)), this._getFormatConfig(e));
            s = this._canAdjustMonth(e, +1, et, J) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'" + " title='" + r + "'><span class='ui-icon ui-icon-circle-triangle-" + (W ? "w" : "e") + "'>" + r + "</span></a>" : q ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + r + "'><span class='ui-icon ui-icon-circle-triangle-" + (W ? "w" : "e") + "'>" + r + "</span></a>";
            a = this._get(e, "currentText");
            o = this._get(e, "gotoCurrent") && e.currentDay ? V : R;
            a = !B ? a : this.formatDate(a, o, this._getFormatConfig(e));
            l = !e.inline ? "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(e, "closeText") + "</button>" : "";
            u = Y ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (W ? l : "") + (this._isInRange(e, o) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'" + ">" + a + "</button>" : "") + (W ? "" : l) + "</div>" : "";
            c = parseInt(this._get(e, "firstDay"), 10);
            c = isNaN(c) ? 0 : c;
            f = this._get(e, "showWeek");
            h = this._get(e, "dayNames");
            d = this._get(e, "dayNamesMin");
            p = this._get(e, "monthNames");
            g = this._get(e, "monthNamesShort");
            m = this._get(e, "beforeShowDay");
            v = this._get(e, "showOtherMonths");
            y = this._get(e, "selectOtherMonths");
            b = this._getDefaultDate(e);
            w = "";
            _;
            for (x = 0; x < U[0]; x++) {
                k = "";
                this.maxRows = 4;
                for (C = 0; C < U[1]; C++) {
                    M = this._daylightSavingAdjust(new Date(et, J, e.selectedDay));
                    T = " ui-corner-all";
                    D = "";
                    if (X) {
                        D += "<div class='ui-datepicker-group";
                        if (U[1] > 1) {
                            switch (C) {
                                case 0:
                                    D += " ui-datepicker-group-first";
                                    T = " ui-corner-" + (W ? "right" : "left");
                                    break;
                                case U[1] - 1:
                                    D += " ui-datepicker-group-last";
                                    T = " ui-corner-" + (W ? "left" : "right");
                                    break;
                                default:
                                    D += " ui-datepicker-group-middle";
                                    T = "";
                                    break
                            }
                        }
                        D += "'>"
                    }
                    D += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + T + "'>" + (/all|left/.test(T) && x === 0 ? W ? s : n : "") + (/all|right/.test(T) && x === 0 ? W ? n : s : "") + this._generateMonthYearHeader(e, J, et, K, Z, x > 0 || C > 0, p, g) + "</div><table class='ui-datepicker-calendar'><thead>" + "<tr>";
                    S = f ? "<th class='ui-datepicker-week-col'>" + this._get(e, "weekHeader") + "</th>" : "";
                    for (_ = 0; _ < 7; _++) {
                        E = (_ + c) % 7;
                        S += "<th" + ((_ + c + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" + "<span title='" + h[E] + "'>" + d[E] + "</span></th>"
                    }
                    D += S + "</tr></thead><tbody>";
                    A = this._getDaysInMonth(et, J);
                    if (et === e.selectedYear && J === e.selectedMonth) {
                        e.selectedDay = Math.min(e.selectedDay, A)
                    }
                    I = (this._getFirstDayOfMonth(et, J) - c + 7) % 7;
                    $ = Math.ceil((I + A) / 7);
                    P = X ? this.maxRows > $ ? this.maxRows : $ : $;
                    this.maxRows = P;
                    z = this._daylightSavingAdjust(new Date(et, J, 1 - I));
                    for (N = 0; N < P; N++) {
                        D += "<tr>";
                        H = !f ? "" : "<td class='ui-datepicker-week-col'>" + this._get(e, "calculateWeek")(z) + "</td>";
                        for (_ = 0; _ < 7; _++) {
                            O = m ? m.apply(e.input ? e.input[0] : null, [z]) : [true, ""];
                            L = z.getMonth() !== J;
                            j = L && !y || !O[0] || K && z < K || Z && z > Z;
                            H += "<td class='" + ((_ + c + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (L ? " ui-datepicker-other-month" : "") + (z.getTime() === M.getTime() && J === e.selectedMonth && e._keyEvent || b.getTime() === z.getTime() && b.getTime() === M.getTime() ? " " + this._dayOverClass : "") + (j ? " " + this._unselectableClass + " ui-state-disabled" : "") + (L && !v ? "" : " " + O[1] + (z.getTime() === V.getTime() ? " " + this._currentClass : "") + (z.getTime() === R.getTime() ? " ui-datepicker-today" : "")) + "'" + ((!L || v) && O[2] ? " title='" + O[2].replace(/'/g, "&#39;") + "'" : "") + (j ? "" : " data-handler='selectDay' data-event='click' data-month='" + z.getMonth() + "' data-year='" + z.getFullYear() + "'") + ">" + (L && !v ? "&#xa0;" : j ? "<span class='ui-state-default'>" + z.getDate() + "</span>" : "<a class='ui-state-default" + (z.getTime() === R.getTime() ? " ui-state-highlight" : "") + (z.getTime() === V.getTime() ? " ui-state-active" : "") + (L ? " ui-priority-secondary" : "") + "' href='#'>" + z.getDate() + "</a>") + "</td>";
                            z.setDate(z.getDate() + 1);
                            z = this._daylightSavingAdjust(z)
                        }
                        D += H + "</tr>"
                    }
                    J++;
                    if (J > 11) {
                        J = 0;
                        et++
                    }
                    D += "</tbody></table>" + (X ? "</div>" + (U[0] > 0 && C === U[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
                    k += D
                }
                w += k
            }
            w += u;
            e._keyEvent = false;
            return w
        },
        _generateMonthYearHeader: function (e, t, i, n, r, s, a, o) {
            var l, u, c, f, h, d, p, g, m = this._get(e, "changeMonth"),
                v = this._get(e, "changeYear"),
                y = this._get(e, "showMonthAfterYear"),
                b = "<div class='ui-datepicker-title'>",
                w = "";
            if (s || !m) {
                w += "<span class='ui-datepicker-month'>" + a[t] + "</span>"
            }
            else {
                l = n && n.getFullYear() === i;
                u = r && r.getFullYear() === i;
                w += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
                for (c = 0; c < 12; c++) {
                    if ((!l || c >= n.getMonth()) && (!u || c <= r.getMonth())) {
                        w += "<option value='" + c + "'" + (c === t ? " selected='selected'" : "") + ">" + o[c] + "</option>"
                    }
                }
                w += "</select>"
            }
            if (!y) {
                b += w + (s || !(m && v) ? "&#xa0;" : "")
            }
            if (!e.yearshtml) {
                e.yearshtml = "";
                if (s || !v) {
                    b += "<span class='ui-datepicker-year'>" + i + "</span>"
                }
                else {
                    f = this._get(e, "yearRange").split(":");
                    h = (new Date).getFullYear();
                    d = function (e) {
                        var t = e.match(/c[+\-].*/) ? i + parseInt(e.substring(1), 10) : e.match(/[+\-].*/) ? h + parseInt(e, 10) : parseInt(e, 10);
                        return isNaN(t) ? h : t
                    };
                    p = d(f[0]);
                    g = Math.max(p, d(f[1] || ""));
                    p = n ? Math.max(p, n.getFullYear()) : p;
                    g = r ? Math.min(g, r.getFullYear()) : g;
                    e.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
                    for (; p <= g; p++) {
                        e.yearshtml += "<option value='" + p + "'" + (p === i ? " selected='selected'" : "") + ">" + p + "</option>"
                    }
                    e.yearshtml += "</select>";
                    b += e.yearshtml;
                    e.yearshtml = null
                }
            }
            b += this._get(e, "yearSuffix");
            if (y) {
                b += (s || !(m && v) ? "&#xa0;" : "") + w
            }
            b += "</div>";
            return b
        },
        _adjustInstDate: function (e, t, i) {
            var n = e.drawYear + (i === "Y" ? t : 0),
                r = e.drawMonth + (i === "M" ? t : 0),
                s = Math.min(e.selectedDay, this._getDaysInMonth(n, r)) + (i === "D" ? t : 0),
                a = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(n, r, s)));
            e.selectedDay = a.getDate();
            e.drawMonth = e.selectedMonth = a.getMonth();
            e.drawYear = e.selectedYear = a.getFullYear();
            if (i === "M" || i === "Y") {
                this._notifyChange(e)
            }
        },
        _restrictMinMax: function (e, t) {
            var i = this._getMinMaxDate(e, "min"),
                n = this._getMinMaxDate(e, "max"),
                r = i && t < i ? i : t;
            return n && r > n ? n : r
        },
        _notifyChange: function (e) {
            var t = this._get(e, "onChangeMonthYear");
            if (t) {
                t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
            }
        },
        _getNumberOfMonths: function (e) {
            var t = this._get(e, "numberOfMonths");
            return t == null ? [1, 1] : typeof t === "number" ? [1, t] : t
        },
        _getMinMaxDate: function (e, t) {
            return this._determineDate(e, this._get(e, t + "Date"), null)
        },
        _getDaysInMonth: function (e, t) {
            return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
        },
        _getFirstDayOfMonth: function (e, t) {
            return new Date(e, t, 1).getDay()
        },
        _canAdjustMonth: function (e, t, i, n) {
            var r = this._getNumberOfMonths(e),
                s = this._daylightSavingAdjust(new Date(i, n + (t < 0 ? t : r[0] * r[1]), 1));
            if (t < 0) {
                s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth()))
            }
            return this._isInRange(e, s)
        },
        _isInRange: function (e, t) {
            var i, n, r = this._getMinMaxDate(e, "min"),
                s = this._getMinMaxDate(e, "max"),
                a = null,
                o = null,
                l = this._get(e, "yearRange");
            if (l) {
                i = l.split(":");
                n = (new Date).getFullYear();
                a = parseInt(i[0], 10);
                o = parseInt(i[1], 10);
                if (i[0].match(/[+\-].*/)) {
                    a += n
                }
                if (i[1].match(/[+\-].*/)) {
                    o += n
                }
            }
            return (!r || t.getTime() >= r.getTime()) && (!s || t.getTime() <= s.getTime()) && (!a || t.getFullYear() >= a) && (!o || t.getFullYear() <= o)
        },
        _getFormatConfig: function (e) {
            var t = this._get(e, "shortYearCutoff");
            t = typeof t !== "string" ? t : (new Date).getFullYear() % 100 + parseInt(t, 10);
            return {
                shortYearCutoff: t,
                dayNamesShort: this._get(e, "dayNamesShort"),
                dayNames: this._get(e, "dayNames"),
                monthNamesShort: this._get(e, "monthNamesShort"),
                monthNames: this._get(e, "monthNames")
            }
        },
        _formatDate: function (e, t, i, n) {
            if (!t) {
                e.currentDay = e.selectedDay;
                e.currentMonth = e.selectedMonth;
                e.currentYear = e.selectedYear
            }
            var r = t ? typeof t === "object" ? t : this._daylightSavingAdjust(new Date(n, i, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return this.formatDate(this._get(e, "dateFormat"), r, this._getFormatConfig(e))
        }
    });

    function s(t) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return t.delegate(i, "mouseout", function () {
            e(this).removeClass("ui-state-hover");
            if (this.className.indexOf("ui-datepicker-prev") !== -1) {
                e(this).removeClass("ui-datepicker-prev-hover")
            }
            if (this.className.indexOf("ui-datepicker-next") !== -1) {
                e(this).removeClass("ui-datepicker-next-hover")
            }
        }).delegate(i, "mouseover", function () {
            if (!e.datepicker._isDisabledDatepicker(n.inline ? t.parent()[0] : n.input[0])) {
                e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
                e(this).addClass("ui-state-hover");
                if (this.className.indexOf("ui-datepicker-prev") !== -1) {
                    e(this).addClass("ui-datepicker-prev-hover")
                }
                if (this.className.indexOf("ui-datepicker-next") !== -1) {
                    e(this).addClass("ui-datepicker-next-hover")
                }
            }
        })
    }

    function a(t, i) {
        e.extend(t, i);
        for (var n in i) {
            if (i[n] == null) {
                t[n] = i[n]
            }
        }
        return t
    }
    e.fn.datepicker = function (t) {
        if (!this.length) {
            return this
        }
        if (!e.datepicker.initialized) {
            e(document).mousedown(e.datepicker._checkExternalClick);
            e.datepicker.initialized = true
        }
        if (e("#" + e.datepicker._mainDivId).length === 0) {
            e("body").append(e.datepicker.dpDiv)
        }
        var i = Array.prototype.slice.call(arguments, 1);
        if (typeof t === "string" && (t === "isDisabled" || t === "getDate" || t === "widget")) {
            return e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i))
        }
        if (t === "option" && arguments.length === 2 && typeof arguments[1] === "string") {
            return e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i))
        }
        return this.each(function () {
            typeof t === "string" ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this].concat(i)) : e.datepicker._attachDatepicker(this, t)
        })
    };
    e.datepicker = new r;
    e.datepicker.initialized = false;
    e.datepicker.uuid = (new Date).getTime();
    e.datepicker.version = "1.10.4"
})(jQuery);
(function (e, t) {
    var i = {
            buttons: true,
            height: true,
            maxHeight: true,
            maxWidth: true,
            minHeight: true,
            minWidth: true,
            width: true
        },
        n = {
            maxHeight: true,
            maxWidth: true,
            minHeight: true,
            minWidth: true
        };
    e.widget("ui.dialog", {
        version: "1.10.4",
        options: {
            appendTo: "body",
            autoOpen: true,
            buttons: [],
            closeOnEscape: true,
            closeText: "close",
            dialogClass: "",
            draggable: true,
            hide: null,
            height: "auto",
            maxHeight: null,
            maxWidth: null,
            minHeight: 150,
            minWidth: 150,
            modal: false,
            position: {
                my: "center",
                at: "center",
                of: window,
                collision: "fit",
                using: function (t) {
                    var i = e(this).css(t).offset().top;
                    if (i < 0) {
                        e(this).css("top", t.top - i)
                    }
                }
            },
            resizable: true,
            show: null,
            title: null,
            width: 300,
            beforeClose: null,
            close: null,
            drag: null,
            dragStart: null,
            dragStop: null,
            focus: null,
            open: null,
            resize: null,
            resizeStart: null,
            resizeStop: null
        },
        _create: function () {
            this.originalCss = {
                display: this.element[0].style.display,
                width: this.element[0].style.width,
                minHeight: this.element[0].style.minHeight,
                maxHeight: this.element[0].style.maxHeight,
                height: this.element[0].style.height
            };
            this.originalPosition = {
                parent: this.element.parent(),
                index: this.element.parent().children().index(this.element)
            };
            this.originalTitle = this.element.attr("title");
            this.options.title = this.options.title || this.originalTitle;
            this._createWrapper();
            this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);
            this._createTitlebar();
            this._createButtonPane();
            if (this.options.draggable && e.fn.draggable) {
                this._makeDraggable()
            }
            if (this.options.resizable && e.fn.resizable) {
                this._makeResizable()
            }
            this._isOpen = false
        },
        _init: function () {
            if (this.options.autoOpen) {
                this.open()
            }
        },
        _appendTo: function () {
            var t = this.options.appendTo;
            if (t && (t.jquery || t.nodeType)) {
                return e(t)
            }
            return this.document.find(t || "body").eq(0)
        },
        _destroy: function () {
            var e, t = this.originalPosition;
            this._destroyOverlay();
            this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();
            this.uiDialog.stop(true, true).remove();
            if (this.originalTitle) {
                this.element.attr("title", this.originalTitle)
            }
            e = t.parent.children().eq(t.index);
            if (e.length && e[0] !== this.element[0]) {
                e.before(this.element)
            }
            else {
                t.parent.append(this.element)
            }
        },
        widget: function () {
            return this.uiDialog
        },
        disable: e.noop,
        enable: e.noop,
        close: function (t) {
            var i, n = this;
            if (!this._isOpen || this._trigger("beforeClose", t) === false) {
                return
            }
            this._isOpen = false;
            this._destroyOverlay();
            if (!this.opener.filter(":focusable").focus().length) {
                try {
                    i = this.document[0].activeElement;
                    if (i && i.nodeName.toLowerCase() !== "body") {
                        e(i).blur()
                    }
                }
                catch (error) {}
            }
            this._hide(this.uiDialog, this.options.hide, function () {
                n._trigger("close", t)
            })
        },
        isOpen: function () {
            return this._isOpen
        },
        moveToTop: function () {
            this._moveToTop()
        },
        _moveToTop: function (e, t) {
            var i = !!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
            if (i && !t) {
                this._trigger("focus", e)
            }
            return i
        },
        open: function () {
            var t = this;
            if (this._isOpen) {
                if (this._moveToTop()) {
                    this._focusTabbable()
                }
                return
            }
            this._isOpen = true;
            this.opener = e(this.document[0].activeElement);
            this._size();
            this._position();
            this._createOverlay();
            this._moveToTop(null, true);
            this._show(this.uiDialog, this.options.show, function () {
                t._focusTabbable();
                t._trigger("focus")
            });
            this._trigger("open")
        },
        _focusTabbable: function () {
            var e = this.element.find("[autofocus]");
            if (!e.length) {
                e = this.element.find(":tabbable")
            }
            if (!e.length) {
                e = this.uiDialogButtonPane.find(":tabbable")
            }
            if (!e.length) {
                e = this.uiDialogTitlebarClose.filter(":tabbable")
            }
            if (!e.length) {
                e = this.uiDialog
            }
            e.eq(0).focus()
        },
        _keepFocus: function (t) {
            function i() {
                var t = this.document[0].activeElement,
                    i = this.uiDialog[0] === t || e.contains(this.uiDialog[0], t);
                if (!i) {
                    this._focusTabbable()
                }
            }
            t.preventDefault();
            i.call(this);
            this._delay(i)
        },
        _createWrapper: function () {
            this.uiDialog = e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({
                tabIndex: -1,
                role: "dialog"
            }).appendTo(this._appendTo());
            this._on(this.uiDialog, {
                keydown: function (t) {
                    if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === e.ui.keyCode.ESCAPE) {
                        t.preventDefault();
                        this.close(t);
                        return
                    }
                    if (t.keyCode !== e.ui.keyCode.TAB) {
                        return
                    }
                    var i = this.uiDialog.find(":tabbable"),
                        n = i.filter(":first"),
                        r = i.filter(":last");
                    if ((t.target === r[0] || t.target === this.uiDialog[0]) && !t.shiftKey) {
                        n.focus(1);
                        t.preventDefault()
                    }
                    else if ((t.target === n[0] || t.target === this.uiDialog[0]) && t.shiftKey) {
                        r.focus(1);
                        t.preventDefault()
                    }
                },
                mousedown: function (e) {
                    if (this._moveToTop(e)) {
                        this._focusTabbable()
                    }
                }
            });
            if (!this.element.find("[aria-describedby]").length) {
                this.uiDialog.attr({
                    "aria-describedby": this.element.uniqueId().attr("id")
                })
            }
        },
        _createTitlebar: function () {
            var t;
            this.uiDialogTitlebar = e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);
            this._on(this.uiDialogTitlebar, {
                mousedown: function (t) {
                    if (!e(t.target).closest(".ui-dialog-titlebar-close")) {
                        this.uiDialog.focus()
                    }
                }
            });
            this.uiDialogTitlebarClose = e("<button type='button'></button>").button({
                label: this.options.closeText,
                icons: {
                    primary: "ui-icon-closethick"
                },
                text: false
            }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
            this._on(this.uiDialogTitlebarClose, {
                click: function (e) {
                    e.preventDefault();
                    this.close(e)
                }
            });
            t = e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);
            this._title(t);
            this.uiDialog.attr({
                "aria-labelledby": t.attr("id")
            })
        },
        _title: function (e) {
            if (!this.options.title) {
                e.html("&#160;")
            }
            e.text(this.options.title)
        },
        _createButtonPane: function () {
            this.uiDialogButtonPane = e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");
            this.uiButtonSet = e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);
            this._createButtons()
        },
        _createButtons: function () {
            var t = this,
                i = this.options.buttons;
            this.uiDialogButtonPane.remove();
            this.uiButtonSet.empty();
            if (e.isEmptyObject(i) || e.isArray(i) && !i.length) {
                this.uiDialog.removeClass("ui-dialog-buttons");
                return
            }
            e.each(i, function (i, n) {
                var r, s;
                n = e.isFunction(n) ? {
                    click: n,
                    text: i
                } : n;
                n = e.extend({
                    type: "button"
                }, n);
                r = n.click;
                n.click = function () {
                    r.apply(t.element[0], arguments)
                };
                s = {
                    icons: n.icons,
                    text: n.showText
                };
                delete n.icons;
                delete n.showText;
                e("<button></button>", n).button(s).appendTo(t.uiButtonSet)
            });
            this.uiDialog.addClass("ui-dialog-buttons");
            this.uiDialogButtonPane.appendTo(this.uiDialog)
        },
        _makeDraggable: function () {
            var t = this,
                i = this.options;

            function n(e) {
                return {
                    position: e.position,
                    offset: e.offset
                }
            }
            this.uiDialog.draggable({
                cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
                handle: ".ui-dialog-titlebar",
                containment: "document",
                start: function (i, r) {
                    e(this).addClass("ui-dialog-dragging");
                    t._blockFrames();
                    t._trigger("dragStart", i, n(r))
                },
                drag: function (e, i) {
                    t._trigger("drag", e, n(i))
                },
                stop: function (r, s) {
                    i.position = [s.position.left - t.document.scrollLeft(), s.position.top - t.document.scrollTop()];
                    e(this).removeClass("ui-dialog-dragging");
                    t._unblockFrames();
                    t._trigger("dragStop", r, n(s))
                }
            })
        },
        _makeResizable: function () {
            var t = this,
                i = this.options,
                n = i.resizable,
                r = this.uiDialog.css("position"),
                s = typeof n === "string" ? n : "n,e,s,w,se,sw,ne,nw";

            function a(e) {
                return {
                    originalPosition: e.originalPosition,
                    originalSize: e.originalSize,
                    position: e.position,
                    size: e.size
                }
            }
            this.uiDialog.resizable({
                cancel: ".ui-dialog-content",
                containment: "document",
                alsoResize: this.element,
                maxWidth: i.maxWidth,
                maxHeight: i.maxHeight,
                minWidth: i.minWidth,
                minHeight: this._minHeight(),
                handles: s,
                start: function (i, n) {
                    e(this).addClass("ui-dialog-resizing");
                    t._blockFrames();
                    t._trigger("resizeStart", i, a(n))
                },
                resize: function (e, i) {
                    t._trigger("resize", e, a(i))
                },
                stop: function (n, r) {
                    i.height = e(this).height();
                    i.width = e(this).width();
                    e(this).removeClass("ui-dialog-resizing");
                    t._unblockFrames();
                    t._trigger("resizeStop", n, a(r))
                }
            }).css("position", r)
        },
        _minHeight: function () {
            var e = this.options;
            return e.height === "auto" ? e.minHeight : Math.min(e.minHeight, e.height)
        },
        _position: function () {
            var e = this.uiDialog.is(":visible");
            if (!e) {
                this.uiDialog.show()
            }
            this.uiDialog.position(this.options.position);
            if (!e) {
                this.uiDialog.hide()
            }
        },
        _setOptions: function (t) {
            var r = this,
                s = false,
                a = {};
            e.each(t, function (e, t) {
                r._setOption(e, t);
                if (e in i) {
                    s = true
                }
                if (e in n) {
                    a[e] = t
                }
            });
            if (s) {
                this._size();
                this._position()
            }
            if (this.uiDialog.is(":data(ui-resizable)")) {
                this.uiDialog.resizable("option", a)
            }
        },
        _setOption: function (e, t) {
            var i, n, r = this.uiDialog;
            if (e === "dialogClass") {
                r.removeClass(this.options.dialogClass).addClass(t)
            }
            if (e === "disabled") {
                return
            }
            this._super(e, t);
            if (e === "appendTo") {
                this.uiDialog.appendTo(this._appendTo())
            }
            if (e === "buttons") {
                this._createButtons()
            }
            if (e === "closeText") {
                this.uiDialogTitlebarClose.button({
                    label: "" + t
                })
            }
            if (e === "draggable") {
                i = r.is(":data(ui-draggable)");
                if (i && !t) {
                    r.draggable("destroy")
                }
                if (!i && t) {
                    this._makeDraggable()
                }
            }
            if (e === "position") {
                this._position()
            }
            if (e === "resizable") {
                n = r.is(":data(ui-resizable)");
                if (n && !t) {
                    r.resizable("destroy")
                }
                if (n && typeof t === "string") {
                    r.resizable("option", "handles", t)
                }
                if (!n && t !== false) {
                    this._makeResizable()
                }
            }
            if (e === "title") {
                this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))
            }
        },
        _size: function () {
            var e, t, i, n = this.options;
            this.element.show().css({
                width: "auto",
                minHeight: 0,
                maxHeight: "none",
                height: 0
            });
            if (n.minWidth > n.width) {
                n.width = n.minWidth
            }
            e = this.uiDialog.css({
                height: "auto",
                width: n.width
            }).outerHeight();
            t = Math.max(0, n.minHeight - e);
            i = typeof n.maxHeight === "number" ? Math.max(0, n.maxHeight - e) : "none";
            if (n.height === "auto") {
                this.element.css({
                    minHeight: t,
                    maxHeight: i,
                    height: "auto"
                })
            }
            else {
                this.element.height(Math.max(0, n.height - e))
            }
            if (this.uiDialog.is(":data(ui-resizable)")) {
                this.uiDialog.resizable("option", "minHeight", this._minHeight())
            }
        },
        _blockFrames: function () {
            this.iframeBlocks = this.document.find("iframe").map(function () {
                var t = e(this);
                return e("<div>").css({
                    position: "absolute",
                    width: t.outerWidth(),
                    height: t.outerHeight()
                }).appendTo(t.parent()).offset(t.offset())[0]
            })
        },
        _unblockFrames: function () {
            if (this.iframeBlocks) {
                this.iframeBlocks.remove();
                delete this.iframeBlocks
            }
        },
        _allowInteraction: function (t) {
            if (e(t.target).closest(".ui-dialog").length) {
                return true
            }
            return !!e(t.target).closest(".ui-datepicker").length
        },
        _createOverlay: function () {
            if (!this.options.modal) {
                return
            }
            var t = this,
                i = this.widgetFullName;
            if (!e.ui.dialog.overlayInstances) {
                this._delay(function () {
                    if (e.ui.dialog.overlayInstances) {
                        this.document.bind("focusin.dialog", function (n) {
                            if (!t._allowInteraction(n)) {
                                n.preventDefault();
                                e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable()
                            }
                        })
                    }
                })
            }
            this.overlay = e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());
            this._on(this.overlay, {
                mousedown: "_keepFocus"
            });
            e.ui.dialog.overlayInstances++
        },
        _destroyOverlay: function () {
            if (!this.options.modal) {
                return
            }
            if (this.overlay) {
                e.ui.dialog.overlayInstances--;
                if (!e.ui.dialog.overlayInstances) {
                    this.document.unbind("focusin.dialog")
                }
                this.overlay.remove();
                this.overlay = null
            }
        }
    });
    e.ui.dialog.overlayInstances = 0;
    if (e.uiBackCompat !== false) {
        e.widget("ui.dialog", e.ui.dialog, {
            _position: function () {
                var t = this.options.position,
                    i = [],
                    n = [0, 0],
                    r;
                if (t) {
                    if (typeof t === "string" || typeof t === "object" && "0" in t) {
                        i = t.split ? t.split(" ") : [t[0], t[1]];
                        if (i.length === 1) {
                            i[1] = i[0]
                        }
                        e.each(["left", "top"], function (e, t) {
                            if (+i[e] === i[e]) {
                                n[e] = i[e];
                                i[e] = t
                            }
                        });
                        t = {
                            my: i[0] + (n[0] < 0 ? n[0] : "+" + n[0]) + " " + i[1] + (n[1] < 0 ? n[1] : "+" + n[1]),
                            at: i.join(" ")
                        }
                    }
                    t = e.extend({}, e.ui.dialog.prototype.options.position, t)
                }
                else {
                    t = e.ui.dialog.prototype.options.position
                }
                r = this.uiDialog.is(":visible");
                if (!r) {
                    this.uiDialog.show()
                }
                this.uiDialog.position(t);
                if (!r) {
                    this.uiDialog.hide()
                }
            }
        })
    }
})(jQuery);
(function (e, t) {
    e.widget("ui.menu", {
        version: "1.10.4",
        defaultElement: "<ul>",
        delay: 300,
        options: {
            icons: {
                submenu: "ui-icon-carat-1-e"
            },
            menus: "ul",
            position: {
                my: "left top",
                at: "right top"
            },
            role: "menu",
            blur: null,
            focus: null,
            select: null
        },
        _create: function () {
            this.activeMenu = this.element;
            this.mouseHandled = false;
            this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                role: this.options.role,
                tabIndex: 0
            }).bind("click" + this.eventNamespace, e.proxy(function (e) {
                if (this.options.disabled) {
                    e.preventDefault()
                }
            }, this));
            if (this.options.disabled) {
                this.element.addClass("ui-state-disabled").attr("aria-disabled", "true")
            }
            this._on({
                "mousedown .ui-menu-item > a": function (e) {
                    e.preventDefault()
                },
                "click .ui-state-disabled > a": function (e) {
                    e.preventDefault()
                },
                "click .ui-menu-item:has(a)": function (t) {
                    var i = e(t.target).closest(".ui-menu-item");
                    if (!this.mouseHandled && i.not(".ui-state-disabled").length) {
                        this.select(t);
                        if (!t.isPropagationStopped()) {
                            this.mouseHandled = true
                        }
                        if (i.has(".ui-menu").length) {
                            this.expand(t)
                        }
                        else if (!this.element.is(":focus") && e(this.document[0].activeElement).closest(".ui-menu").length) {
                            this.element.trigger("focus", [true]);
                            if (this.active && this.active.parents(".ui-menu").length === 1) {
                                clearTimeout(this.timer)
                            }
                        }
                    }
                },
                "mouseenter .ui-menu-item": function (t) {
                    var i = e(t.currentTarget);
                    i.siblings().children(".ui-state-active").removeClass("ui-state-active");
                    this.focus(t, i)
                },
                mouseleave: "collapseAll",
                "mouseleave .ui-menu": "collapseAll",
                focus: function (e, t) {
                    var i = this.active || this.element.children(".ui-menu-item").eq(0);
                    if (!t) {
                        this.focus(e, i)
                    }
                },
                blur: function (t) {
                    this._delay(function () {
                        if (!e.contains(this.element[0], this.document[0].activeElement)) {
                            this.collapseAll(t)
                        }
                    })
                },
                keydown: "_keydown"
            });
            this.refresh();
            this._on(this.document, {
                click: function (t) {
                    if (!e(t.target).closest(".ui-menu").length) {
                        this.collapseAll(t)
                    }
                    this.mouseHandled = false
                }
            })
        },
        _destroy: function () {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
            this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () {
                var t = e(this);
                if (t.data("ui-menu-submenu-carat")) {
                    t.remove()
                }
            });
            this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")
        },
        _keydown: function (t) {
            var i, n, r, s, a, o = true;

            function l(e) {
                return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
            }
            switch (t.keyCode) {
                case e.ui.keyCode.PAGE_UP:
                    this.previousPage(t);
                    break;
                case e.ui.keyCode.PAGE_DOWN:
                    this.nextPage(t);
                    break;
                case e.ui.keyCode.HOME:
                    this._move("first", "first", t);
                    break;
                case e.ui.keyCode.END:
                    this._move("last", "last", t);
                    break;
                case e.ui.keyCode.UP:
                    this.previous(t);
                    break;
                case e.ui.keyCode.DOWN:
                    this.next(t);
                    break;
                case e.ui.keyCode.LEFT:
                    this.collapse(t);
                    break;
                case e.ui.keyCode.RIGHT:
                    if (this.active && !this.active.is(".ui-state-disabled")) {
                        this.expand(t)
                    }
                    break;
                case e.ui.keyCode.ENTER:
                case e.ui.keyCode.SPACE:
                    this._activate(t);
                    break;
                case e.ui.keyCode.ESCAPE:
                    this.collapse(t);
                    break;
                default:
                    o = false;
                    n = this.previousFilter || "";
                    r = String.fromCharCode(t.keyCode);
                    s = false;
                    clearTimeout(this.filterTimer);
                    if (r === n) {
                        s = true
                    }
                    else {
                        r = n + r
                    }
                    a = new RegExp("^" + l(r), "i");
                    i = this.activeMenu.children(".ui-menu-item").filter(function () {
                        return a.test(e(this).children("a").text())
                    });
                    i = s && i.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : i;
                    if (!i.length) {
                        r = String.fromCharCode(t.keyCode);
                        a = new RegExp("^" + l(r), "i");
                        i = this.activeMenu.children(".ui-menu-item").filter(function () {
                            return a.test(e(this).children("a").text())
                        })
                    }
                    if (i.length) {
                        this.focus(t, i);
                        if (i.length > 1) {
                            this.previousFilter = r;
                            this.filterTimer = this._delay(function () {
                                delete this.previousFilter
                            }, 1e3)
                        }
                        else {
                            delete this.previousFilter
                        }
                    }
                    else {
                        delete this.previousFilter
                    }
            }
            if (o) {
                t.preventDefault()
            }
        },
        _activate: function (e) {
            if (!this.active.is(".ui-state-disabled")) {
                if (this.active.children("a[aria-haspopup='true']").length) {
                    this.expand(e)
                }
                else {
                    this.select(e)
                }
            }
        },
        refresh: function () {
            var t, i = this.options.icons.submenu,
                n = this.element.find(this.options.menus);
            this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length);
            n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({
                role: this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }).each(function () {
                var t = e(this),
                    n = t.prev("a"),
                    r = e("<span>").addClass("ui-menu-icon ui-icon " + i).data("ui-menu-submenu-carat", true);
                n.attr("aria-haspopup", "true").prepend(r);
                t.attr("aria-labelledby", n.attr("id"))
            });
            t = n.add(this.element);
            t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({
                tabIndex: -1,
                role: this._itemRole()
            });
            t.children(":not(.ui-menu-item)").each(function () {
                var t = e(this);
                if (!/[^\-\u2014\u2013\s]/.test(t.text())) {
                    t.addClass("ui-widget-content ui-menu-divider")
                }
            });
            t.children(".ui-state-disabled").attr("aria-disabled", "true");
            if (this.active && !e.contains(this.element[0], this.active[0])) {
                this.blur()
            }
        },
        _itemRole: function () {
            return {
                menu: "menuitem",
                listbox: "option"
            }[this.options.role]
        },
        _setOption: function (e, t) {
            if (e === "icons") {
                this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu)
            }
            this._super(e, t)
        },
        focus: function (e, t) {
            var i, n;
            this.blur(e, e && e.type === "focus");
            this._scrollIntoView(t);
            this.active = t.first();
            n = this.active.children("a").addClass("ui-state-focus");
            if (this.options.role) {
                this.element.attr("aria-activedescendant", n.attr("id"))
            }
            this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");
            if (e && e.type === "keydown") {
                this._close()
            }
            else {
                this.timer = this._delay(function () {
                    this._close()
                }, this.delay)
            }
            i = t.children(".ui-menu");
            if (i.length && e && /^mouse/.test(e.type)) {
                this._startOpening(i)
            }
            this.activeMenu = t.parent();
            this._trigger("focus", e, {
                item: t
            })
        },
        _scrollIntoView: function (t) {
            var i, n, r, s, a, o;
            if (this._hasScroll()) {
                i = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0;
                n = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0;
                r = t.offset().top - this.activeMenu.offset().top - i - n;
                s = this.activeMenu.scrollTop();
                a = this.activeMenu.height();
                o = t.height();
                if (r < 0) {
                    this.activeMenu.scrollTop(s + r)
                }
                else if (r + o > a) {
                    this.activeMenu.scrollTop(s + r - a + o)
                }
            }
        },
        blur: function (e, t) {
            if (!t) {
                clearTimeout(this.timer)
            }
            if (!this.active) {
                return
            }
            this.active.children("a").removeClass("ui-state-focus");
            this.active = null;
            this._trigger("blur", e, {
                item: this.active
            })
        },
        _startOpening: function (e) {
            clearTimeout(this.timer);
            if (e.attr("aria-hidden") !== "true") {
                return
            }
            this.timer = this._delay(function () {
                this._close();
                this._open(e)
            }, this.delay)
        },
        _open: function (t) {
            var i = e.extend({ of: this.active
            }, this.options.position);
            clearTimeout(this.timer);
            this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true");
            t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i)
        },
        collapseAll: function (t, i) {
            clearTimeout(this.timer);
            this.timer = this._delay(function () {
                var n = i ? this.element : e(t && t.target).closest(this.element.find(".ui-menu"));
                if (!n.length) {
                    n = this.element
                }
                this._close(n);
                this.blur(t);
                this.activeMenu = n
            }, this.delay)
        },
        _close: function (e) {
            if (!e) {
                e = this.active ? this.active.parent() : this.element
            }
            e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active")
        },
        collapse: function (e) {
            var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            if (t && t.length) {
                this._close();
                this.focus(e, t)
            }
        },
        expand: function (e) {
            var t = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
            if (t && t.length) {
                this._open(t.parent());
                this._delay(function () {
                    this.focus(e, t)
                })
            }
        },
        next: function (e) {
            this._move("next", "first", e)
        },
        previous: function (e) {
            this._move("prev", "last", e)
        },
        isFirstItem: function () {
            return this.active && !this.active.prevAll(".ui-menu-item").length
        },
        isLastItem: function () {
            return this.active && !this.active.nextAll(".ui-menu-item").length
        },
        _move: function (e, t, i) {
            var n;
            if (this.active) {
                if (e === "first" || e === "last") {
                    n = this.active[e === "first" ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1)
                }
                else {
                    n = this.active[e + "All"](".ui-menu-item").eq(0)
                }
            }
            if (!n || !n.length || !this.active) {
                n = this.activeMenu.children(".ui-menu-item")[t]()
            }
            this.focus(i, n)
        },
        nextPage: function (t) {
            var i, n, r;
            if (!this.active) {
                this.next(t);
                return
            }
            if (this.isLastItem()) {
                return
            }
            if (this._hasScroll()) {
                n = this.active.offset().top;
                r = this.element.height();
                this.active.nextAll(".ui-menu-item").each(function () {
                    i = e(this);
                    return i.offset().top - n - r < 0
                });
                this.focus(t, i)
            }
            else {
                this.focus(t, this.activeMenu.children(".ui-menu-item")[!this.active ? "first" : "last"]())
            }
        },
        previousPage: function (t) {
            var i, n, r;
            if (!this.active) {
                this.next(t);
                return
            }
            if (this.isFirstItem()) {
                return
            }
            if (this._hasScroll()) {
                n = this.active.offset().top;
                r = this.element.height();
                this.active.prevAll(".ui-menu-item").each(function () {
                    i = e(this);
                    return i.offset().top - n + r > 0
                });
                this.focus(t, i)
            }
            else {
                this.focus(t, this.activeMenu.children(".ui-menu-item").first())
            }
        },
        _hasScroll: function () {
            return this.element.outerHeight() < this.element.prop("scrollHeight")
        },
        select: function (t) {
            this.active = this.active || e(t.target).closest(".ui-menu-item");
            var i = {
                item: this.active
            };
            if (!this.active.has(".ui-menu").length) {
                this.collapseAll(t, true)
            }
            this._trigger("select", t, i)
        }
    })
})(jQuery);
(function (e, t) {
    e.widget("ui.progressbar", {
        version: "1.10.4",
        options: {
            max: 100,
            value: 0,
            change: null,
            complete: null
        },
        min: 0,
        _create: function () {
            this.oldValue = this.options.value = this._constrainedValue();
            this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                role: "progressbar",
                "aria-valuemin": this.min
            });
            this.valueDiv = e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);
            this._refreshValue()
        },
        _destroy: function () {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
            this.valueDiv.remove()
        },
        value: function (e) {
            if (e === t) {
                return this.options.value
            }
            this.options.value = this._constrainedValue(e);
            this._refreshValue()
        },
        _constrainedValue: function (e) {
            if (e === t) {
                e = this.options.value
            }
            this.indeterminate = e === false;
            if (typeof e !== "number") {
                e = 0
            }
            return this.indeterminate ? false : Math.min(this.options.max, Math.max(this.min, e))
        },
        _setOptions: function (e) {
            var t = e.value;
            delete e.value;
            this._super(e);
            this.options.value = this._constrainedValue(t);
            this._refreshValue()
        },
        _setOption: function (e, t) {
            if (e === "max") {
                t = Math.max(this.min, t)
            }
            this._super(e, t)
        },
        _percentage: function () {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
        },
        _refreshValue: function () {
            var t = this.options.value,
                i = this._percentage();
            this.valueDiv.toggle(this.indeterminate || t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(i.toFixed(0) + "%");
            this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate);
            if (this.indeterminate) {
                this.element.removeAttr("aria-valuenow");
                if (!this.overlayDiv) {
                    this.overlayDiv = e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv)
                }
            }
            else {
                this.element.attr({
                    "aria-valuemax": this.options.max,
                    "aria-valuenow": t
                });
                if (this.overlayDiv) {
                    this.overlayDiv.remove();
                    this.overlayDiv = null
                }
            }
            if (this.oldValue !== t) {
                this.oldValue = t;
                this._trigger("change")
            }
            if (t === this.options.max) {
                this._trigger("complete")
            }
        }
    })
})(jQuery);
(function (e, t) {
    var i = 5;
    e.widget("ui.slider", e.ui.mouse, {
        version: "1.10.4",
        widgetEventPrefix: "slide",
        options: {
            animate: false,
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: false,
            step: 1,
            value: 0,
            values: null,
            change: null,
            slide: null,
            start: null,
            stop: null
        },
        _create: function () {
            this._keySliding = false;
            this._mouseSliding = false;
            this._animateOff = true;
            this._handleIndex = null;
            this._detectOrientation();
            this._mouseInit();
            this.element.addClass("ui-slider" + " ui-slider-" + this.orientation + " ui-widget" + " ui-widget-content" + " ui-corner-all");
            this._refresh();
            this._setOption("disabled", this.options.disabled);
            this._animateOff = false
        },
        _refresh: function () {
            this._createRange();
            this._createHandles();
            this._setupEvents();
            this._refreshValue()
        },
        _createHandles: function () {
            var t, i, n = this.options,
                r = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),
                s = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
                a = [];
            i = n.values && n.values.length || 1;
            if (r.length > i) {
                r.slice(i).remove();
                r = r.slice(0, i)
            }
            for (t = r.length; t < i; t++) {
                a.push(s)
            }
            this.handles = r.add(e(a.join("")).appendTo(this.element));
            this.handle = this.handles.eq(0);
            this.handles.each(function (t) {
                e(this).data("ui-slider-handle-index", t)
            })
        },
        _createRange: function () {
            var t = this.options,
                i = "";
            if (t.range) {
                if (t.range === true) {
                    if (!t.values) {
                        t.values = [this._valueMin(), this._valueMin()]
                    }
                    else if (t.values.length && t.values.length !== 2) {
                        t.values = [t.values[0], t.values[0]]
                    }
                    else if (e.isArray(t.values)) {
                        t.values = t.values.slice(0)
                    }
                }
                if (!this.range || !this.range.length) {
                    this.range = e("<div></div>").appendTo(this.element);
                    i = "ui-slider-range" + " ui-widget-header ui-corner-all"
                }
                else {
                    this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                        left: "",
                        bottom: ""
                    })
                }
                this.range.addClass(i + (t.range === "min" || t.range === "max" ? " ui-slider-range-" + t.range : ""))
            }
            else {
                if (this.range) {
                    this.range.remove()
                }
                this.range = null
            }
        },
        _setupEvents: function () {
            var e = this.handles.add(this.range).filter("a");
            this._off(e);
            this._on(e, this._handleEvents);
            this._hoverable(e);
            this._focusable(e)
        },
        _destroy: function () {
            this.handles.remove();
            if (this.range) {
                this.range.remove()
            }
            this.element.removeClass("ui-slider" + " ui-slider-horizontal" + " ui-slider-vertical" + " ui-widget" + " ui-widget-content" + " ui-corner-all");
            this._mouseDestroy()
        },
        _mouseCapture: function (t) {
            var i, n, r, s, a, o, l, u, c = this,
                f = this.options;
            if (f.disabled) {
                return false
            }
            this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            };
            this.elementOffset = this.element.offset();
            i = {
                x: t.pageX,
                y: t.pageY
            };
            n = this._normValueFromMouse(i);
            r = this._valueMax() - this._valueMin() + 1;
            this.handles.each(function (t) {
                var i = Math.abs(n - c.values(t));
                if (r > i || r === i && (t === c._lastChangedValue || c.values(t) === f.min)) {
                    r = i;
                    s = e(this);
                    a = t
                }
            });
            o = this._start(t, a);
            if (o === false) {
                return false
            }
            this._mouseSliding = true;
            this._handleIndex = a;
            s.addClass("ui-state-active").focus();
            l = s.offset();
            u = !e(t.target).parents().addBack().is(".ui-slider-handle");
            this._clickOffset = u ? {
                left: 0,
                top: 0
            } : {
                left: t.pageX - l.left - s.width() / 2,
                top: t.pageY - l.top - s.height() / 2 - (parseInt(s.css("borderTopWidth"), 10) || 0) - (parseInt(s.css("borderBottomWidth"), 10) || 0) + (parseInt(s.css("marginTop"), 10) || 0)
            };
            if (!this.handles.hasClass("ui-state-hover")) {
                this._slide(t, a, n)
            }
            this._animateOff = true;
            return true
        },
        _mouseStart: function () {
            return true
        },
        _mouseDrag: function (e) {
            var t = {
                    x: e.pageX,
                    y: e.pageY
                },
                i = this._normValueFromMouse(t);
            this._slide(e, this._handleIndex, i);
            return false
        },
        _mouseStop: function (e) {
            this.handles.removeClass("ui-state-active");
            this._mouseSliding = false;
            this._stop(e, this._handleIndex);
            this._change(e, this._handleIndex);
            this._handleIndex = null;
            this._clickOffset = null;
            this._animateOff = false;
            return false
        },
        _detectOrientation: function () {
            this.orientation = this.options.orientation === "vertical" ? "vertical" : "horizontal"
        },
        _normValueFromMouse: function (e) {
            var t, i, n, r, s;
            if (this.orientation === "horizontal") {
                t = this.elementSize.width;
                i = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)
            }
            else {
                t = this.elementSize.height;
                i = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)
            }
            n = i / t;
            if (n > 1) {
                n = 1
            }
            if (n < 0) {
                n = 0
            }
            if (this.orientation === "vertical") {
                n = 1 - n
            }
            r = this._valueMax() - this._valueMin();
            s = this._valueMin() + n * r;
            return this._trimAlignValue(s)
        },
        _start: function (e, t) {
            var i = {
                handle: this.handles[t],
                value: this.value()
            };
            if (this.options.values && this.options.values.length) {
                i.value = this.values(t);
                i.values = this.values()
            }
            return this._trigger("start", e, i)
        },
        _slide: function (e, t, i) {
            var n, r, s;
            if (this.options.values && this.options.values.length) {
                n = this.values(t ? 0 : 1);
                if (this.options.values.length === 2 && this.options.range === true && (t === 0 && i > n || t === 1 && i < n)) {
                    i = n
                }
                if (i !== this.values(t)) {
                    r = this.values();
                    r[t] = i;
                    s = this._trigger("slide", e, {
                        handle: this.handles[t],
                        value: i,
                        values: r
                    });
                    n = this.values(t ? 0 : 1);
                    if (s !== false) {
                        this.values(t, i)
                    }
                }
            }
            else {
                if (i !== this.value()) {
                    s = this._trigger("slide", e, {
                        handle: this.handles[t],
                        value: i
                    });
                    if (s !== false) {
                        this.value(i)
                    }
                }
            }
        },
        _stop: function (e, t) {
            var i = {
                handle: this.handles[t],
                value: this.value()
            };
            if (this.options.values && this.options.values.length) {
                i.value = this.values(t);
                i.values = this.values()
            }
            this._trigger("stop", e, i)
        },
        _change: function (e, t) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    handle: this.handles[t],
                    value: this.value()
                };
                if (this.options.values && this.options.values.length) {
                    i.value = this.values(t);
                    i.values = this.values()
                }
                this._lastChangedValue = t;
                this._trigger("change", e, i)
            }
        },
        value: function (e) {
            if (arguments.length) {
                this.options.value = this._trimAlignValue(e);
                this._refreshValue();
                this._change(null, 0);
                return
            }
            return this._value()
        },
        values: function (t, i) {
            var n, r, s;
            if (arguments.length > 1) {
                this.options.values[t] = this._trimAlignValue(i);
                this._refreshValue();
                this._change(null, t);
                return
            }
            if (arguments.length) {
                if (e.isArray(arguments[0])) {
                    n = this.options.values;
                    r = arguments[0];
                    for (s = 0; s < n.length; s += 1) {
                        n[s] = this._trimAlignValue(r[s]);
                        this._change(null, s)
                    }
                    this._refreshValue()
                }
                else {
                    if (this.options.values && this.options.values.length) {
                        return this._values(t)
                    }
                    else {
                        return this.value()
                    }
                }
            }
            else {
                return this._values()
            }
        },
        _setOption: function (t, i) {
            var n, r = 0;
            if (t === "range" && this.options.range === true) {
                if (i === "min") {
                    this.options.value = this._values(0);
                    this.options.values = null
                }
                else if (i === "max") {
                    this.options.value = this._values(this.options.values.length - 1);
                    this.options.values = null
                }
            }
            if (e.isArray(this.options.values)) {
                r = this.options.values.length
            }
            e.Widget.prototype._setOption.apply(this, arguments);
            switch (t) {
                case "orientation":
                    this._detectOrientation();
                    this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation);
                    this._refreshValue();
                    break;
                case "value":
                    this._animateOff = true;
                    this._refreshValue();
                    this._change(null, 0);
                    this._animateOff = false;
                    break;
                case "values":
                    this._animateOff = true;
                    this._refreshValue();
                    for (n = 0; n < r; n += 1) {
                        this._change(null, n)
                    }
                    this._animateOff = false;
                    break;
                case "min":
                case "max":
                    this._animateOff = true;
                    this._refreshValue();
                    this._animateOff = false;
                    break;
                case "range":
                    this._animateOff = true;
                    this._refresh();
                    this._animateOff = false;
                    break
            }
        },
        _value: function () {
            var e = this.options.value;
            e = this._trimAlignValue(e);
            return e
        },
        _values: function (e) {
            var t, i, n;
            if (arguments.length) {
                t = this.options.values[e];
                t = this._trimAlignValue(t);
                return t
            }
            else if (this.options.values && this.options.values.length) {
                i = this.options.values.slice();
                for (n = 0; n < i.length; n += 1) {
                    i[n] = this._trimAlignValue(i[n])
                }
                return i
            }
            else {
                return []
            }
        },
        _trimAlignValue: function (e) {
            if (e <= this._valueMin()) {
                return this._valueMin()
            }
            if (e >= this._valueMax()) {
                return this._valueMax()
            }
            var t = this.options.step > 0 ? this.options.step : 1,
                i = (e - this._valueMin()) % t,
                n = e - i;
            if (Math.abs(i) * 2 >= t) {
                n += i > 0 ? t : -t
            }
            return parseFloat(n.toFixed(5))
        },
        _valueMin: function () {
            return this.options.min
        },
        _valueMax: function () {
            return this.options.max
        },
        _refreshValue: function () {
            var t, i, n, r, s, a = this.options.range,
                o = this.options,
                l = this,
                u = !this._animateOff ? o.animate : false,
                c = {};
            if (this.options.values && this.options.values.length) {
                this.handles.each(function (n) {
                    i = (l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin()) * 100;
                    c[l.orientation === "horizontal" ? "left" : "bottom"] = i + "%";
                    e(this).stop(1, 1)[u ? "animate" : "css"](c, o.animate);
                    if (l.options.range === true) {
                        if (l.orientation === "horizontal") {
                            if (n === 0) {
                                l.range.stop(1, 1)[u ? "animate" : "css"]({
                                    left: i + "%"
                                }, o.animate)
                            }
                            if (n === 1) {
                                l.range[u ? "animate" : "css"]({
                                    width: i - t + "%"
                                }, {
                                    queue: false,
                                    duration: o.animate
                                })
                            }
                        }
                        else {
                            if (n === 0) {
                                l.range.stop(1, 1)[u ? "animate" : "css"]({
                                    bottom: i + "%"
                                }, o.animate)
                            }
                            if (n === 1) {
                                l.range[u ? "animate" : "css"]({
                                    height: i - t + "%"
                                }, {
                                    queue: false,
                                    duration: o.animate
                                })
                            }
                        }
                    }
                    t = i
                })
            }
            else {
                n = this.value();
                r = this._valueMin();
                s = this._valueMax();
                i = s !== r ? (n - r) / (s - r) * 100 : 0;
                c[this.orientation === "horizontal" ? "left" : "bottom"] = i + "%";
                this.handle.stop(1, 1)[u ? "animate" : "css"](c, o.animate);
                if (a === "min" && this.orientation === "horizontal") {
                    this.range.stop(1, 1)[u ? "animate" : "css"]({
                        width: i + "%"
                    }, o.animate)
                }
                if (a === "max" && this.orientation === "horizontal") {
                    this.range[u ? "animate" : "css"]({
                        width: 100 - i + "%"
                    }, {
                        queue: false,
                        duration: o.animate
                    })
                }
                if (a === "min" && this.orientation === "vertical") {
                    this.range.stop(1, 1)[u ? "animate" : "css"]({
                        height: i + "%"
                    }, o.animate)
                }
                if (a === "max" && this.orientation === "vertical") {
                    this.range[u ? "animate" : "css"]({
                        height: 100 - i + "%"
                    }, {
                        queue: false,
                        duration: o.animate
                    })
                }
            }
        },
        _handleEvents: {
            keydown: function (t) {
                var n, r, s, a, o = e(t.target).data("ui-slider-handle-index");
                switch (t.keyCode) {
                    case e.ui.keyCode.HOME:
                    case e.ui.keyCode.END:
                    case e.ui.keyCode.PAGE_UP:
                    case e.ui.keyCode.PAGE_DOWN:
                    case e.ui.keyCode.UP:
                    case e.ui.keyCode.RIGHT:
                    case e.ui.keyCode.DOWN:
                    case e.ui.keyCode.LEFT:
                        t.preventDefault();
                        if (!this._keySliding) {
                            this._keySliding = true;
                            e(t.target).addClass("ui-state-active");
                            n = this._start(t, o);
                            if (n === false) {
                                return
                            }
                        }
                        break
                }
                a = this.options.step;
                if (this.options.values && this.options.values.length) {
                    r = s = this.values(o)
                }
                else {
                    r = s = this.value()
                }
                switch (t.keyCode) {
                    case e.ui.keyCode.HOME:
                        s = this._valueMin();
                        break;
                    case e.ui.keyCode.END:
                        s = this._valueMax();
                        break;
                    case e.ui.keyCode.PAGE_UP:
                        s = this._trimAlignValue(r + (this._valueMax() - this._valueMin()) / i);
                        break;
                    case e.ui.keyCode.PAGE_DOWN:
                        s = this._trimAlignValue(r - (this._valueMax() - this._valueMin()) / i);
                        break;
                    case e.ui.keyCode.UP:
                    case e.ui.keyCode.RIGHT:
                        if (r === this._valueMax()) {
                            return
                        }
                        s = this._trimAlignValue(r + a);
                        break;
                    case e.ui.keyCode.DOWN:
                    case e.ui.keyCode.LEFT:
                        if (r === this._valueMin()) {
                            return
                        }
                        s = this._trimAlignValue(r - a);
                        break
                }
                this._slide(t, o, s)
            },
            click: function (e) {
                e.preventDefault()
            },
            keyup: function (t) {
                var i = e(t.target).data("ui-slider-handle-index");
                if (this._keySliding) {
                    this._keySliding = false;
                    this._stop(t, i);
                    this._change(t, i);
                    e(t.target).removeClass("ui-state-active")
                }
            }
        }
    })
})(jQuery);
(function (e) {
    function t(e) {
        return function () {
            var t = this.element.val();
            e.apply(this, arguments);
            this._refresh();
            if (t !== this.element.val()) {
                this._trigger("change")
            }
        }
    }
    e.widget("ui.spinner", {
        version: "1.10.4",
        defaultElement: "<input>",
        widgetEventPrefix: "spin",
        options: {
            culture: null,
            icons: {
                down: "ui-icon-triangle-1-s",
                up: "ui-icon-triangle-1-n"
            },
            incremental: true,
            max: null,
            min: null,
            numberFormat: null,
            page: 10,
            step: 1,
            change: null,
            spin: null,
            start: null,
            stop: null
        },
        _create: function () {
            this._setOption("max", this.options.max);
            this._setOption("min", this.options.min);
            this._setOption("step", this.options.step);
            if (this.value() !== "") {
                this._value(this.element.val(), true)
            }
            this._draw();
            this._on(this._events);
            this._refresh();
            this._on(this.window, {
                beforeunload: function () {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _getCreateOptions: function () {
            var t = {},
                i = this.element;
            e.each(["min", "max", "step"], function (e, n) {
                var r = i.attr(n);
                if (r !== undefined && r.length) {
                    t[n] = r
                }
            });
            return t
        },
        _events: {
            keydown: function (e) {
                if (this._start(e) && this._keydown(e)) {
                    e.preventDefault()
                }
            },
            keyup: "_stop",
            focus: function () {
                this.previous = this.element.val()
            },
            blur: function (e) {
                if (this.cancelBlur) {
                    delete this.cancelBlur;
                    return
                }
                this._stop();
                this._refresh();
                if (this.previous !== this.element.val()) {
                    this._trigger("change", e)
                }
            },
            mousewheel: function (e, t) {
                if (!t) {
                    return
                }
                if (!this.spinning && !this._start(e)) {
                    return false
                }
                this._spin((t > 0 ? 1 : -1) * this.options.step, e);
                clearTimeout(this.mousewheelTimer);
                this.mousewheelTimer = this._delay(function () {
                    if (this.spinning) {
                        this._stop(e)
                    }
                }, 100);
                e.preventDefault()
            },
            "mousedown .ui-spinner-button": function (t) {
                var i;
                i = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val();

                function n() {
                    var e = this.element[0] === this.document[0].activeElement;
                    if (!e) {
                        this.element.focus();
                        this.previous = i;
                        this._delay(function () {
                            this.previous = i
                        })
                    }
                }
                t.preventDefault();
                n.call(this);
                this.cancelBlur = true;
                this._delay(function () {
                    delete this.cancelBlur;
                    n.call(this)
                });
                if (this._start(t) === false) {
                    return
                }
                this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
            },
            "mouseup .ui-spinner-button": "_stop",
            "mouseenter .ui-spinner-button": function (t) {
                if (!e(t.currentTarget).hasClass("ui-state-active")) {
                    return
                }
                if (this._start(t) === false) {
                    return false
                }
                this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
            },
            "mouseleave .ui-spinner-button": "_stop"
        },
        _draw: function () {
            var e = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton");
            this.buttons = e.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all");
            if (this.buttons.height() > Math.ceil(e.height() * .5) && e.height() > 0) {
                e.height(e.height())
            }
            if (this.options.disabled) {
                this.disable()
            }
        },
        _keydown: function (t) {
            var i = this.options,
                n = e.ui.keyCode;
            switch (t.keyCode) {
                case n.UP:
                    this._repeat(null, 1, t);
                    return true;
                case n.DOWN:
                    this._repeat(null, -1, t);
                    return true;
                case n.PAGE_UP:
                    this._repeat(null, i.page, t);
                    return true;
                case n.PAGE_DOWN:
                    this._repeat(null, -i.page, t);
                    return true
            }
            return false
        },
        _uiSpinnerHtml: function () {
            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"
        },
        _buttonHtml: function () {
            return "" + "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>" + "<span class='ui-icon " + this.options.icons.up + "'>&#9650;</span>" + "</a>" + "<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" + "<span class='ui-icon " + this.options.icons.down + "'>&#9660;</span>" + "</a>"
        },
        _start: function (e) {
            if (!this.spinning && this._trigger("start", e) === false) {
                return false
            }
            if (!this.counter) {
                this.counter = 1
            }
            this.spinning = true;
            return true
        },
        _repeat: function (e, t, i) {
            e = e || 500;
            clearTimeout(this.timer);
            this.timer = this._delay(function () {
                this._repeat(40, t, i)
            }, e);
            this._spin(t * this.options.step, i)
        },
        _spin: function (e, t) {
            var i = this.value() || 0;
            if (!this.counter) {
                this.counter = 1
            }
            i = this._adjustValue(i + e * this._increment(this.counter));
            if (!this.spinning || this._trigger("spin", t, {
                    value: i
                }) !== false) {
                this._value(i);
                this.counter++
            }
        },
        _increment: function (t) {
            var i = this.options.incremental;
            if (i) {
                return e.isFunction(i) ? i(t) : Math.floor(t * t * t / 5e4 - t * t / 500 + 17 * t / 200 + 1)
            }
            return 1
        },
        _precision: function () {
            var e = this._precisionOf(this.options.step);
            if (this.options.min !== null) {
                e = Math.max(e, this._precisionOf(this.options.min))
            }
            return e
        },
        _precisionOf: function (e) {
            var t = e.toString(),
                i = t.indexOf(".");
            return i === -1 ? 0 : t.length - i - 1
        },
        _adjustValue: function (e) {
            var t, i, n = this.options;
            t = n.min !== null ? n.min : 0;
            i = e - t;
            i = Math.round(i / n.step) * n.step;
            e = t + i;
            e = parseFloat(e.toFixed(this._precision()));
            if (n.max !== null && e > n.max) {
                return n.max
            }
            if (n.min !== null && e < n.min) {
                return n.min
            }
            return e
        },
        _stop: function (e) {
            if (!this.spinning) {
                return
            }
            clearTimeout(this.timer);
            clearTimeout(this.mousewheelTimer);
            this.counter = 0;
            this.spinning = false;
            this._trigger("stop", e)
        },
        _setOption: function (e, t) {
            if (e === "culture" || e === "numberFormat") {
                var i = this._parse(this.element.val());
                this.options[e] = t;
                this.element.val(this._format(i));
                return
            }
            if (e === "max" || e === "min" || e === "step") {
                if (typeof t === "string") {
                    t = this._parse(t)
                }
            }
            if (e === "icons") {
                this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up);
                this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)
            }
            this._super(e, t);
            if (e === "disabled") {
                if (t) {
                    this.element.prop("disabled", true);
                    this.buttons.button("disable")
                }
                else {
                    this.element.prop("disabled", false);
                    this.buttons.button("enable")
                }
            }
        },
        _setOptions: t(function (e) {
            this._super(e);
            this._value(this.element.val())
        }),
        _parse: function (e) {
            if (typeof e === "string" && e !== "") {
                e = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(e, 10, this.options.culture) : +e
            }
            return e === "" || isNaN(e) ? null : e
        },
        _format: function (e) {
            if (e === "") {
                return ""
            }
            return window.Globalize && this.options.numberFormat ? Globalize.format(e, this.options.numberFormat, this.options.culture) : e
        },
        _refresh: function () {
            this.element.attr({
                "aria-valuemin": this.options.min,
                "aria-valuemax": this.options.max,
                "aria-valuenow": this._parse(this.element.val())
            })
        },
        _value: function (e, t) {
            var i;
            if (e !== "") {
                i = this._parse(e);
                if (i !== null) {
                    if (!t) {
                        i = this._adjustValue(i)
                    }
                    e = this._format(i)
                }
            }
            this.element.val(e);
            this._refresh()
        },
        _destroy: function () {
            this.element.removeClass("ui-spinner-input").prop("disabled", false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
            this.uiSpinner.replaceWith(this.element)
        },
        stepUp: t(function (e) {
            this._stepUp(e)
        }),
        _stepUp: function (e) {
            if (this._start()) {
                this._spin((e || 1) * this.options.step);
                this._stop()
            }
        },
        stepDown: t(function (e) {
            this._stepDown(e)
        }),
        _stepDown: function (e) {
            if (this._start()) {
                this._spin((e || 1) * -this.options.step);
                this._stop()
            }
        },
        pageUp: t(function (e) {
            this._stepUp((e || 1) * this.options.page)
        }),
        pageDown: t(function (e) {
            this._stepDown((e || 1) * this.options.page)
        }),
        value: function (e) {
            if (!arguments.length) {
                return this._parse(this.element.val())
            }
            t(this._value).call(this, e)
        },
        widget: function () {
            return this.uiSpinner
        }
    })
})(jQuery);
(function (e, t) {
    var i = 0,
        n = /#.*$/;

    function r() {
        return ++i
    }

    function s(e) {
        e = e.cloneNode(false);
        return e.hash.length > 1 && decodeURIComponent(e.href.replace(n, "")) === decodeURIComponent(location.href.replace(n, ""))
    }
    e.widget("ui.tabs", {
        version: "1.10.4",
        delay: 300,
        options: {
            active: null,
            collapsible: false,
            event: "click",
            heightStyle: "content",
            hide: null,
            show: null,
            activate: null,
            beforeActivate: null,
            beforeLoad: null,
            load: null
        },
        _create: function () {
            var t = this,
                i = this.options;
            this.running = false;
            this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", i.collapsible).delegate(".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function (t) {
                if (e(this).is(".ui-state-disabled")) {
                    t.preventDefault()
                }
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function () {
                if (e(this).closest("li").is(".ui-state-disabled")) {
                    this.blur()
                }
            });
            this._processTabs();
            i.active = this._initialActive();
            if (e.isArray(i.disabled)) {
                i.disabled = e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"), function (e) {
                    return t.tabs.index(e)
                }))).sort()
            }
            if (this.options.active !== false && this.anchors.length) {
                this.active = this._findActive(i.active)
            }
            else {
                this.active = e()
            }
            this._refresh();
            if (this.active.length) {
                this.load(i.active)
            }
        },
        _initialActive: function () {
            var t = this.options.active,
                i = this.options.collapsible,
                n = location.hash.substring(1);
            if (t === null) {
                if (n) {
                    this.tabs.each(function (i, r) {
                        if (e(r).attr("aria-controls") === n) {
                            t = i;
                            return false
                        }
                    })
                }
                if (t === null) {
                    t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))
                }
                if (t === null || t === -1) {
                    t = this.tabs.length ? 0 : false
                }
            }
            if (t !== false) {
                t = this.tabs.index(this.tabs.eq(t));
                if (t === -1) {
                    t = i ? false : 0
                }
            }
            if (!i && t === false && this.anchors.length) {
                t = 0
            }
            return t
        },
        _getCreateEventData: function () {
            return {
                tab: this.active,
                panel: !this.active.length ? e() : this._getPanelForTab(this.active)
            }
        },
        _tabKeydown: function (t) {
            var i = e(this.document[0].activeElement).closest("li"),
                n = this.tabs.index(i),
                r = true;
            if (this._handlePageNav(t)) {
                return
            }
            switch (t.keyCode) {
                case e.ui.keyCode.RIGHT:
                case e.ui.keyCode.DOWN:
                    n++;
                    break;
                case e.ui.keyCode.UP:
                case e.ui.keyCode.LEFT:
                    r = false;
                    n--;
                    break;
                case e.ui.keyCode.END:
                    n = this.anchors.length - 1;
                    break;
                case e.ui.keyCode.HOME:
                    n = 0;
                    break;
                case e.ui.keyCode.SPACE:
                    t.preventDefault();
                    clearTimeout(this.activating);
                    this._activate(n);
                    return;
                case e.ui.keyCode.ENTER:
                    t.preventDefault();
                    clearTimeout(this.activating);
                    this._activate(n === this.options.active ? false : n);
                    return;
                default:
                    return
            }
            t.preventDefault();
            clearTimeout(this.activating);
            n = this._focusNextTab(n, r);
            if (!t.ctrlKey) {
                i.attr("aria-selected", "false");
                this.tabs.eq(n).attr("aria-selected", "true");
                this.activating = this._delay(function () {
                    this.option("active", n)
                }, this.delay)
            }
        },
        _panelKeydown: function (t) {
            if (this._handlePageNav(t)) {
                return
            }
            if (t.ctrlKey && t.keyCode === e.ui.keyCode.UP) {
                t.preventDefault();
                this.active.focus()
            }
        },
        _handlePageNav: function (t) {
            if (t.altKey && t.keyCode === e.ui.keyCode.PAGE_UP) {
                this._activate(this._focusNextTab(this.options.active - 1, false));
                return true
            }
            if (t.altKey && t.keyCode === e.ui.keyCode.PAGE_DOWN) {
                this._activate(this._focusNextTab(this.options.active + 1, true));
                return true
            }
        },
        _findNextTab: function (t, i) {
            var n = this.tabs.length - 1;

            function r() {
                if (t > n) {
                    t = 0
                }
                if (t < 0) {
                    t = n
                }
                return t
            }
            while (e.inArray(r(), this.options.disabled) !== -1) {
                t = i ? t + 1 : t - 1
            }
            return t
        },
        _focusNextTab: function (e, t) {
            e = this._findNextTab(e, t);
            this.tabs.eq(e).focus();
            return e
        },
        _setOption: function (e, t) {
            if (e === "active") {
                this._activate(t);
                return
            }
            if (e === "disabled") {
                this._setupDisabled(t);
                return
            }
            this._super(e, t);
            if (e === "collapsible") {
                this.element.toggleClass("ui-tabs-collapsible", t);
                if (!t && this.options.active === false) {
                    this._activate(0)
                }
            }
            if (e === "event") {
                this._setupEvents(t)
            }
            if (e === "heightStyle") {
                this._setupHeightStyle(t)
            }
        },
        _tabId: function (e) {
            return e.attr("aria-controls") || "ui-tabs-" + r()
        },
        _sanitizeSelector: function (e) {
            return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : ""
        },
        refresh: function () {
            var t = this.options,
                i = this.tablist.children(":has(a[href])");
            t.disabled = e.map(i.filter(".ui-state-disabled"), function (e) {
                return i.index(e)
            });
            this._processTabs();
            if (t.active === false || !this.anchors.length) {
                t.active = false;
                this.active = e()
            }
            else if (this.active.length && !e.contains(this.tablist[0], this.active[0])) {
                if (this.tabs.length === t.disabled.length) {
                    t.active = false;
                    this.active = e()
                }
                else {
                    this._activate(this._findNextTab(Math.max(0, t.active - 1), false))
                }
            }
            else {
                t.active = this.tabs.index(this.active)
            }
            this._refresh()
        },
        _refresh: function () {
            this._setupDisabled(this.options.disabled);
            this._setupEvents(this.options.event);
            this._setupHeightStyle(this.options.heightStyle);
            this.tabs.not(this.active).attr({
                "aria-selected": "false",
                tabIndex: -1
            });
            this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            });
            if (!this.active.length) {
                this.tabs.eq(0).attr("tabIndex", 0)
            }
            else {
                this.active.addClass("ui-tabs-active ui-state-active").attr({
                    "aria-selected": "true",
                    tabIndex: 0
                });
                this._getPanelForTab(this.active).show().attr({
                    "aria-expanded": "true",
                    "aria-hidden": "false"
                })
            }
        },
        _processTabs: function () {
            var t = this;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist");
            this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({
                role: "tab",
                tabIndex: -1
            });
            this.anchors = this.tabs.map(function () {
                return e("a", this)[0]
            }).addClass("ui-tabs-anchor").attr({
                role: "presentation",
                tabIndex: -1
            });
            this.panels = e();
            this.anchors.each(function (i, n) {
                var r, a, o, l = e(n).uniqueId().attr("id"),
                    u = e(n).closest("li"),
                    c = u.attr("aria-controls");
                if (s(n)) {
                    r = n.hash;
                    a = t.element.find(t._sanitizeSelector(r))
                }
                else {
                    o = t._tabId(u);
                    r = "#" + o;
                    a = t.element.find(r);
                    if (!a.length) {
                        a = t._createPanel(o);
                        a.insertAfter(t.panels[i - 1] || t.tablist)
                    }
                    a.attr("aria-live", "polite")
                }
                if (a.length) {
                    t.panels = t.panels.add(a)
                }
                if (c) {
                    u.data("ui-tabs-aria-controls", c)
                }
                u.attr({
                    "aria-controls": r.substring(1),
                    "aria-labelledby": l
                });
                a.attr("aria-labelledby", l)
            });
            this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel")
        },
        _getList: function () {
            return this.tablist || this.element.find("ol,ul").eq(0)
        },
        _createPanel: function (t) {
            return e("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", true)
        },
        _setupDisabled: function (t) {
            if (e.isArray(t)) {
                if (!t.length) {
                    t = false
                }
                else if (t.length === this.anchors.length) {
                    t = true
                }
            }
            for (var i = 0, n; n = this.tabs[i]; i++) {
                if (t === true || e.inArray(i, t) !== -1) {
                    e(n).addClass("ui-state-disabled").attr("aria-disabled", "true")
                }
                else {
                    e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled")
                }
            }
            this.options.disabled = t
        },
        _setupEvents: function (t) {
            var i = {
                click: function (e) {
                    e.preventDefault()
                }
            };
            if (t) {
                e.each(t.split(" "), function (e, t) {
                    i[t] = "_eventHandler"
                })
            }
            this._off(this.anchors.add(this.tabs).add(this.panels));
            this._on(this.anchors, i);
            this._on(this.tabs, {
                keydown: "_tabKeydown"
            });
            this._on(this.panels, {
                keydown: "_panelKeydown"
            });
            this._focusable(this.tabs);
            this._hoverable(this.tabs)
        },
        _setupHeightStyle: function (t) {
            var i, n = this.element.parent();
            if (t === "fill") {
                i = n.height();
                i -= this.element.outerHeight() - this.element.height();
                this.element.siblings(":visible").each(function () {
                    var t = e(this),
                        n = t.css("position");
                    if (n === "absolute" || n === "fixed") {
                        return
                    }
                    i -= t.outerHeight(true)
                });
                this.element.children().not(this.panels).each(function () {
                    i -= e(this).outerHeight(true)
                });
                this.panels.each(function () {
                    e(this).height(Math.max(0, i - e(this).innerHeight() + e(this).height()))
                }).css("overflow", "auto")
            }
            else if (t === "auto") {
                i = 0;
                this.panels.each(function () {
                    i = Math.max(i, e(this).height("").height())
                }).height(i)
            }
        },
        _eventHandler: function (t) {
            var i = this.options,
                n = this.active,
                r = e(t.currentTarget),
                s = r.closest("li"),
                a = s[0] === n[0],
                o = a && i.collapsible,
                l = o ? e() : this._getPanelForTab(s),
                u = !n.length ? e() : this._getPanelForTab(n),
                c = {
                    oldTab: n,
                    oldPanel: u,
                    newTab: o ? e() : s,
                    newPanel: l
                };
            t.preventDefault();
            if (s.hasClass("ui-state-disabled") || s.hasClass("ui-tabs-loading") || this.running || a && !i.collapsible || this._trigger("beforeActivate", t, c) === false) {
                return
            }
            i.active = o ? false : this.tabs.index(s);
            this.active = a ? e() : s;
            if (this.xhr) {
                this.xhr.abort()
            }
            if (!u.length && !l.length) {
                e.error("jQuery UI Tabs: Mismatching fragment identifier.")
            }
            if (l.length) {
                this.load(this.tabs.index(s), t)
            }
            this._toggle(t, c)
        },
        _toggle: function (t, i) {
            var n = this,
                r = i.newPanel,
                s = i.oldPanel;
            this.running = true;

            function a() {
                n.running = false;
                n._trigger("activate", t, i)
            }

            function o() {
                i.newTab.closest("li").addClass("ui-tabs-active ui-state-active");
                if (r.length && n.options.show) {
                    n._show(r, n.options.show, a)
                }
                else {
                    r.show();
                    a()
                }
            }
            if (s.length && this.options.hide) {
                this._hide(s, this.options.hide, function () {
                    i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
                    o()
                })
            }
            else {
                i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
                s.hide();
                o()
            }
            s.attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            });
            i.oldTab.attr("aria-selected", "false");
            if (r.length && s.length) {
                i.oldTab.attr("tabIndex", -1)
            }
            else if (r.length) {
                this.tabs.filter(function () {
                    return e(this).attr("tabIndex") === 0
                }).attr("tabIndex", -1)
            }
            r.attr({
                "aria-expanded": "true",
                "aria-hidden": "false"
            });
            i.newTab.attr({
                "aria-selected": "true",
                tabIndex: 0
            })
        },
        _activate: function (t) {
            var i, n = this._findActive(t);
            if (n[0] === this.active[0]) {
                return
            }
            if (!n.length) {
                n = this.active
            }
            i = n.find(".ui-tabs-anchor")[0];
            this._eventHandler({
                target: i,
                currentTarget: i,
                preventDefault: e.noop
            })
        },
        _findActive: function (t) {
            return t === false ? e() : this.tabs.eq(t)
        },
        _getIndex: function (e) {
            if (typeof e === "string") {
                e = this.anchors.index(this.anchors.filter("[href$='" + e + "']"))
            }
            return e
        },
        _destroy: function () {
            if (this.xhr) {
                this.xhr.abort()
            }
            this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
            this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");
            this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
            this.tabs.add(this.panels).each(function () {
                if (e.data(this, "ui-tabs-destroy")) {
                    e(this).remove()
                }
                else {
                    e(this).removeClass("ui-state-default ui-state-active ui-state-disabled " + "ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")
                }
            });
            this.tabs.each(function () {
                var t = e(this),
                    i = t.data("ui-tabs-aria-controls");
                if (i) {
                    t.attr("aria-controls", i).removeData("ui-tabs-aria-controls")
                }
                else {
                    t.removeAttr("aria-controls")
                }
            });
            this.panels.show();
            if (this.options.heightStyle !== "content") {
                this.panels.css("height", "")
            }
        },
        enable: function (i) {
            var n = this.options.disabled;
            if (n === false) {
                return
            }
            if (i === t) {
                n = false
            }
            else {
                i = this._getIndex(i);
                if (e.isArray(n)) {
                    n = e.map(n, function (e) {
                        return e !== i ? e : null
                    })
                }
                else {
                    n = e.map(this.tabs, function (e, t) {
                        return t !== i ? t : null
                    })
                }
            }
            this._setupDisabled(n)
        },
        disable: function (i) {
            var n = this.options.disabled;
            if (n === true) {
                return
            }
            if (i === t) {
                n = true
            }
            else {
                i = this._getIndex(i);
                if (e.inArray(i, n) !== -1) {
                    return
                }
                if (e.isArray(n)) {
                    n = e.merge([i], n).sort()
                }
                else {
                    n = [i]
                }
            }
            this._setupDisabled(n)
        },
        load: function (t, i) {
            t = this._getIndex(t);
            var n = this,
                r = this.tabs.eq(t),
                a = r.find(".ui-tabs-anchor"),
                o = this._getPanelForTab(r),
                l = {
                    tab: r,
                    panel: o
                };
            if (s(a[0])) {
                return
            }
            this.xhr = e.ajax(this._ajaxSettings(a, i, l));
            if (this.xhr && this.xhr.statusText !== "canceled") {
                r.addClass("ui-tabs-loading");
                o.attr("aria-busy", "true");
                this.xhr.success(function (e) {
                    setTimeout(function () {
                        o.html(e);
                        n._trigger("load", i, l)
                    }, 1)
                }).complete(function (e, t) {
                    setTimeout(function () {
                        if (t === "abort") {
                            n.panels.stop(false, true)
                        }
                        r.removeClass("ui-tabs-loading");
                        o.removeAttr("aria-busy");
                        if (e === n.xhr) {
                            delete n.xhr
                        }
                    }, 1)
                })
            }
        },
        _ajaxSettings: function (t, i, n) {
            var r = this;
            return {
                url: t.attr("href"),
                beforeSend: function (t, s) {
                    return r._trigger("beforeLoad", i, e.extend({
                        jqXHR: t,
                        ajaxSettings: s
                    }, n))
                }
            }
        },
        _getPanelForTab: function (t) {
            var i = e(t).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + i))
        }
    })
})(jQuery);
(function (e) {
    var t = 0;

    function i(t, i) {
        var n = (t.attr("aria-describedby") || "").split(/\s+/);
        n.push(i);
        t.data("ui-tooltip-id", i).attr("aria-describedby", e.trim(n.join(" ")))
    }

    function n(t) {
        var i = t.data("ui-tooltip-id"),
            n = (t.attr("aria-describedby") || "").split(/\s+/),
            r = e.inArray(i, n);
        if (r !== -1) {
            n.splice(r, 1)
        }
        t.removeData("ui-tooltip-id");
        n = e.trim(n.join(" "));
        if (n) {
            t.attr("aria-describedby", n)
        }
        else {
            t.removeAttr("aria-describedby")
        }
    }
    e.widget("ui.tooltip", {
        version: "1.10.4",
        options: {
            content: function () {
                var t = e(this).attr("title") || "";
                return e("<a>").text(t).html()
            },
            hide: true,
            items: "[title]:not([disabled])",
            position: {
                my: "left top+15",
                at: "left bottom",
                collision: "flipfit flip"
            },
            show: true,
            tooltipClass: null,
            track: false,
            close: null,
            open: null
        },
        _create: function () {
            this._on({
                mouseover: "open",
                focusin: "open"
            });
            this.tooltips = {};
            this.parents = {};
            if (this.options.disabled) {
                this._disable()
            }
        },
        _setOption: function (t, i) {
            var n = this;
            if (t === "disabled") {
                this[i ? "_disable" : "_enable"]();
                this.options[t] = i;
                return
            }
            this._super(t, i);
            if (t === "content") {
                e.each(this.tooltips, function (e, t) {
                    n._updateContent(t)
                })
            }
        },
        _disable: function () {
            var t = this;
            e.each(this.tooltips, function (i, n) {
                var r = e.Event("blur");
                r.target = r.currentTarget = n[0];
                t.close(r, true)
            });
            this.element.find(this.options.items).addBack().each(function () {
                var t = e(this);
                if (t.is("[title]")) {
                    t.data("ui-tooltip-title", t.attr("title")).attr("title", "")
                }
            })
        },
        _enable: function () {
            this.element.find(this.options.items).addBack().each(function () {
                var t = e(this);
                if (t.data("ui-tooltip-title")) {
                    t.attr("title", t.data("ui-tooltip-title"))
                }
            })
        },
        open: function (t) {
            var i = this,
                n = e(t ? t.target : this.element).closest(this.options.items);
            if (!n.length || n.data("ui-tooltip-id")) {
                return
            }
            if (n.attr("title")) {
                n.data("ui-tooltip-title", n.attr("title"))
            }
            n.data("ui-tooltip-open", true);
            if (t && t.type === "mouseover") {
                n.parents().each(function () {
                    var t = e(this),
                        n;
                    if (t.data("ui-tooltip-open")) {
                        n = e.Event("blur");
                        n.target = n.currentTarget = this;
                        i.close(n, true)
                    }
                    if (t.attr("title")) {
                        t.uniqueId();
                        i.parents[this.id] = {
                            element: this,
                            title: t.attr("title")
                        };
                        t.attr("title", "")
                    }
                })
            }
            this._updateContent(n, t)
        },
        _updateContent: function (e, t) {
            var i, n = this.options.content,
                r = this,
                s = t ? t.type : null;
            if (typeof n === "string") {
                return this._open(t, e, n)
            }
            i = n.call(e[0], function (i) {
                if (!e.data("ui-tooltip-open")) {
                    return
                }
                r._delay(function () {
                    if (t) {
                        t.type = s
                    }
                    this._open(t, e, i)
                })
            });
            if (i) {
                this._open(t, e, i)
            }
        },
        _open: function (t, n, r) {
            var s, a, o, l = e.extend({}, this.options.position);
            if (!r) {
                return
            }
            s = this._find(n);
            if (s.length) {
                s.find(".ui-tooltip-content").html(r);
                return
            }
            if (n.is("[title]")) {
                if (t && t.type === "mouseover") {
                    n.attr("title", "")
                }
                else {
                    n.removeAttr("title")
                }
            }
            s = this._tooltip(n);
            i(n, s.attr("id"));
            s.find(".ui-tooltip-content").html(r);

            function u(e) {
                l.of = e;
                if (s.is(":hidden")) {
                    return
                }
                s.position(l)
            }
            if (this.options.track && t && /^mouse/.test(t.type)) {
                this._on(this.document, {
                    mousemove: u
                });
                u(t)
            }
            else {
                s.position(e.extend({ of: n
                }, this.options.position))
            }
            s.hide();
            this._show(s, this.options.show);
            if (this.options.show && this.options.show.delay) {
                o = this.delayedShow = setInterval(function () {
                    if (s.is(":visible")) {
                        u(l.of);
                        clearInterval(o)
                    }
                }, e.fx.interval)
            }
            this._trigger("open", t, {
                tooltip: s
            });
            a = {
                keyup: function (t) {
                    if (t.keyCode === e.ui.keyCode.ESCAPE) {
                        var i = e.Event(t);
                        i.currentTarget = n[0];
                        this.close(i, true)
                    }
                },
                remove: function () {
                    this._removeTooltip(s)
                }
            };
            if (!t || t.type === "mouseover") {
                a.mouseleave = "close"
            }
            if (!t || t.type === "focusin") {
                a.focusout = "close"
            }
            this._on(true, n, a)
        },
        close: function (t) {
            var i = this,
                r = e(t ? t.currentTarget : this.element),
                s = this._find(r);
            if (this.closing) {
                return
            }
            clearInterval(this.delayedShow);
            if (r.data("ui-tooltip-title")) {
                r.attr("title", r.data("ui-tooltip-title"))
            }
            n(r);
            s.stop(true);
            this._hide(s, this.options.hide, function () {
                i._removeTooltip(e(this))
            });
            r.removeData("ui-tooltip-open");
            this._off(r, "mouseleave focusout keyup");
            if (r[0] !== this.element[0]) {
                this._off(r, "remove")
            }
            this._off(this.document, "mousemove");
            if (t && t.type === "mouseleave") {
                e.each(this.parents, function (t, n) {
                    e(n.element).attr("title", n.title);
                    delete i.parents[t]
                })
            }
            this.closing = true;
            this._trigger("close", t, {
                tooltip: s
            });
            this.closing = false
        },
        _tooltip: function (i) {
            var n = "ui-tooltip-" + t++,
                r = e("<div>").attr({
                    id: n,
                    role: "tooltip"
                }).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""));
            e("<div>").addClass("ui-tooltip-content").appendTo(r);
            r.appendTo(this.document[0].body);
            this.tooltips[n] = i;
            return r
        },
        _find: function (t) {
            var i = t.data("ui-tooltip-id");
            return i ? e("#" + i) : e()
        },
        _removeTooltip: function (e) {
            e.remove();
            delete this.tooltips[e.attr("id")]
        },
        _destroy: function () {
            var t = this;
            e.each(this.tooltips, function (i, n) {
                var r = e.Event("blur");
                r.target = r.currentTarget = n[0];
                t.close(r, true);
                e("#" + i).remove();
                if (n.data("ui-tooltip-title")) {
                    n.attr("title", n.data("ui-tooltip-title"));
                    n.removeData("ui-tooltip-title")
                }
            })
        }
    })
})(jQuery);
(function (e, t) {
    var i = "ui-effects-";
    e.effects = {
        effect: {}
    };
    (function (e, t) {
        var i = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
            n = /^([\-+])=\s*(\d+\.?\d*)/,
            r = [{
                re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                parse: function (e) {
                    return [e[1], e[2], e[3], e[4]]
                }
            }, {
                re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                parse: function (e) {
                    return [e[1] * 2.55, e[2] * 2.55, e[3] * 2.55, e[4]]
                }
            }, {
                re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
                parse: function (e) {
                    return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)]
                }
            }, {
                re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
                parse: function (e) {
                    return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)]
                }
            }, {
                re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                space: "hsla",
                parse: function (e) {
                    return [e[1], e[2] / 100, e[3] / 100, e[4]]
                }
            }],
            s = e.Color = function (t, i, n, r) {
                return new e.Color.fn.parse(t, i, n, r)
            },
            a = {
                rgba: {
                    props: {
                        red: {
                            idx: 0,
                            type: "byte"
                        },
                        green: {
                            idx: 1,
                            type: "byte"
                        },
                        blue: {
                            idx: 2,
                            type: "byte"
                        }
                    }
                },
                hsla: {
                    props: {
                        hue: {
                            idx: 0,
                            type: "degrees"
                        },
                        saturation: {
                            idx: 1,
                            type: "percent"
                        },
                        lightness: {
                            idx: 2,
                            type: "percent"
                        }
                    }
                }
            },
            o = {
                byte: {
                    floor: true,
                    max: 255
                },
                percent: {
                    max: 1
                },
                degrees: {
                    mod: 360,
                    floor: true
                }
            },
            l = s.support = {},
            u = e("<p>")[0],
            c, f = e.each;
        u.style.cssText = "background-color:rgba(1,1,1,.5)";
        l.rgba = u.style.backgroundColor.indexOf("rgba") > -1;
        f(a, function (e, t) {
            t.cache = "_" + e;
            t.props.alpha = {
                idx: 3,
                type: "percent",
                def: 1
            }
        });

        function h(e, t, i) {
            var n = o[t.type] || {};
            if (e == null) {
                return i || !t.def ? null : t.def
            }
            e = n.floor ? ~~e : parseFloat(e);
            if (isNaN(e)) {
                return t.def
            }
            if (n.mod) {
                return (e + n.mod) % n.mod
            }
            return 0 > e ? 0 : n.max < e ? n.max : e
        }

        function d(t) {
            var i = s(),
                n = i._rgba = [];
            t = t.toLowerCase();
            f(r, function (e, r) {
                var s, o = r.re.exec(t),
                    l = o && r.parse(o),
                    u = r.space || "rgba";
                if (l) {
                    s = i[u](l);
                    i[a[u].cache] = s[a[u].cache];
                    n = i._rgba = s._rgba;
                    return false
                }
            });
            if (n.length) {
                if (n.join() === "0,0,0,0") {
                    e.extend(n, c.transparent)
                }
                return i
            }
            return c[t]
        }
        s.fn = e.extend(s.prototype, {
            parse: function (i, n, r, o) {
                if (i === t) {
                    this._rgba = [null, null, null, null];
                    return this
                }
                if (i.jquery || i.nodeType) {
                    i = e(i).css(n);
                    n = t
                }
                var l = this,
                    u = e.type(i),
                    p = this._rgba = [];
                if (n !== t) {
                    i = [i, n, r, o];
                    u = "array"
                }
                if (u === "string") {
                    return this.parse(d(i) || c._default)
                }
                if (u === "array") {
                    f(a.rgba.props, function (e, t) {
                        p[t.idx] = h(i[t.idx], t)
                    });
                    return this
                }
                if (u === "object") {
                    if (i instanceof s) {
                        f(a, function (e, t) {
                            if (i[t.cache]) {
                                l[t.cache] = i[t.cache].slice()
                            }
                        })
                    }
                    else {
                        f(a, function (t, n) {
                            var r = n.cache;
                            f(n.props, function (e, t) {
                                if (!l[r] && n.to) {
                                    if (e === "alpha" || i[e] == null) {
                                        return
                                    }
                                    l[r] = n.to(l._rgba)
                                }
                                l[r][t.idx] = h(i[e], t, true)
                            });
                            if (l[r] && e.inArray(null, l[r].slice(0, 3)) < 0) {
                                l[r][3] = 1;
                                if (n.from) {
                                    l._rgba = n.from(l[r])
                                }
                            }
                        })
                    }
                    return this
                }
            },
            is: function (e) {
                var t = s(e),
                    i = true,
                    n = this;
                f(a, function (e, r) {
                    var s, a = t[r.cache];
                    if (a) {
                        s = n[r.cache] || r.to && r.to(n._rgba) || [];
                        f(r.props, function (e, t) {
                            if (a[t.idx] != null) {
                                i = a[t.idx] === s[t.idx];
                                return i
                            }
                        })
                    }
                    return i
                });
                return i
            },
            _space: function () {
                var e = [],
                    t = this;
                f(a, function (i, n) {
                    if (t[n.cache]) {
                        e.push(i)
                    }
                });
                return e.pop()
            },
            transition: function (e, t) {
                var i = s(e),
                    n = i._space(),
                    r = a[n],
                    l = this.alpha() === 0 ? s("transparent") : this,
                    u = l[r.cache] || r.to(l._rgba),
                    c = u.slice();
                i = i[r.cache];
                f(r.props, function (e, n) {
                    var r = n.idx,
                        s = u[r],
                        a = i[r],
                        l = o[n.type] || {};
                    if (a === null) {
                        return
                    }
                    if (s === null) {
                        c[r] = a
                    }
                    else {
                        if (l.mod) {
                            if (a - s > l.mod / 2) {
                                s += l.mod
                            }
                            else if (s - a > l.mod / 2) {
                                s -= l.mod
                            }
                        }
                        c[r] = h((a - s) * t + s, n)
                    }
                });
                return this[n](c)
            },
            blend: function (t) {
                if (this._rgba[3] === 1) {
                    return this
                }
                var i = this._rgba.slice(),
                    n = i.pop(),
                    r = s(t)._rgba;
                return s(e.map(i, function (e, t) {
                    return (1 - n) * r[t] + n * e
                }))
            },
            toRgbaString: function () {
                var t = "rgba(",
                    i = e.map(this._rgba, function (e, t) {
                        return e == null ? t > 2 ? 1 : 0 : e
                    });
                if (i[3] === 1) {
                    i.pop();
                    t = "rgb("
                }
                return t + i.join() + ")"
            },
            toHslaString: function () {
                var t = "hsla(",
                    i = e.map(this.hsla(), function (e, t) {
                        if (e == null) {
                            e = t > 2 ? 1 : 0
                        }
                        if (t && t < 3) {
                            e = Math.round(e * 100) + "%"
                        }
                        return e
                    });
                if (i[3] === 1) {
                    i.pop();
                    t = "hsl("
                }
                return t + i.join() + ")"
            },
            toHexString: function (t) {
                var i = this._rgba.slice(),
                    n = i.pop();
                if (t) {
                    i.push(~~(n * 255))
                }
                return "#" + e.map(i, function (e) {
                    e = (e || 0).toString(16);
                    return e.length === 1 ? "0" + e : e
                }).join("")
            },
            toString: function () {
                return this._rgba[3] === 0 ? "transparent" : this.toRgbaString()
            }
        });
        s.fn.parse.prototype = s.fn;

        function p(e, t, i) {
            i = (i + 1) % 1;
            if (i * 6 < 1) {
                return e + (t - e) * i * 6
            }
            if (i * 2 < 1) {
                return t
            }
            if (i * 3 < 2) {
                return e + (t - e) * (2 / 3 - i) * 6
            }
            return e
        }
        a.hsla.to = function (e) {
            if (e[0] == null || e[1] == null || e[2] == null) {
                return [null, null, null, e[3]]
            }
            var t = e[0] / 255,
                i = e[1] / 255,
                n = e[2] / 255,
                r = e[3],
                s = Math.max(t, i, n),
                a = Math.min(t, i, n),
                o = s - a,
                l = s + a,
                u = l * .5,
                c, f;
            if (a === s) {
                c = 0
            }
            else if (t === s) {
                c = 60 * (i - n) / o + 360
            }
            else if (i === s) {
                c = 60 * (n - t) / o + 120
            }
            else {
                c = 60 * (t - i) / o + 240
            }
            if (o === 0) {
                f = 0
            }
            else if (u <= .5) {
                f = o / l
            }
            else {
                f = o / (2 - l)
            }
            return [Math.round(c) % 360, f, u, r == null ? 1 : r]
        };
        a.hsla.from = function (e) {
            if (e[0] == null || e[1] == null || e[2] == null) {
                return [null, null, null, e[3]]
            }
            var t = e[0] / 360,
                i = e[1],
                n = e[2],
                r = e[3],
                s = n <= .5 ? n * (1 + i) : n + i - n * i,
                a = 2 * n - s;
            return [Math.round(p(a, s, t + 1 / 3) * 255), Math.round(p(a, s, t) * 255), Math.round(p(a, s, t - 1 / 3) * 255), r]
        };
        f(a, function (i, r) {
            var a = r.props,
                o = r.cache,
                l = r.to,
                u = r.from;
            s.fn[i] = function (i) {
                if (l && !this[o]) {
                    this[o] = l(this._rgba)
                }
                if (i === t) {
                    return this[o].slice()
                }
                var n, r = e.type(i),
                    c = r === "array" || r === "object" ? i : arguments,
                    d = this[o].slice();
                f(a, function (e, t) {
                    var i = c[r === "object" ? e : t.idx];
                    if (i == null) {
                        i = d[t.idx]
                    }
                    d[t.idx] = h(i, t)
                });
                if (u) {
                    n = s(u(d));
                    n[o] = d;
                    return n
                }
                else {
                    return s(d)
                }
            };
            f(a, function (t, r) {
                if (s.fn[t]) {
                    return
                }
                s.fn[t] = function (s) {
                    var a = e.type(s),
                        o = t === "alpha" ? this._hsla ? "hsla" : "rgba" : i,
                        l = this[o](),
                        u = l[r.idx],
                        c;
                    if (a === "undefined") {
                        return u
                    }
                    if (a === "function") {
                        s = s.call(this, u);
                        a = e.type(s)
                    }
                    if (s == null && r.empty) {
                        return this
                    }
                    if (a === "string") {
                        c = n.exec(s);
                        if (c) {
                            s = u + parseFloat(c[2]) * (c[1] === "+" ? 1 : -1)
                        }
                    }
                    l[r.idx] = s;
                    return this[o](l)
                }
            })
        });
        s.hook = function (t) {
            var i = t.split(" ");
            f(i, function (t, i) {
                e.cssHooks[i] = {
                    set: function (t, n) {
                        var r, a, o = "";
                        if (n !== "transparent" && (e.type(n) !== "string" || (r = d(n)))) {
                            n = s(r || n);
                            if (!l.rgba && n._rgba[3] !== 1) {
                                a = i === "backgroundColor" ? t.parentNode : t;
                                while ((o === "" || o === "transparent") && a && a.style) {
                                    try {
                                        o = e.css(a, "backgroundColor");
                                        a = a.parentNode
                                    }
                                    catch (e) {}
                                }
                                n = n.blend(o && o !== "transparent" ? o : "_default")
                            }
                            n = n.toRgbaString()
                        }
                        try {
                            t.style[i] = n
                        }
                        catch (e) {}
                    }
                };
                e.fx.step[i] = function (t) {
                    if (!t.colorInit) {
                        t.start = s(t.elem, i);
                        t.end = s(t.end);
                        t.colorInit = true
                    }
                    e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos))
                }
            })
        };
        s.hook(i);
        e.cssHooks.borderColor = {
            expand: function (e) {
                var t = {};
                f(["Top", "Right", "Bottom", "Left"], function (i, n) {
                    t["border" + n + "Color"] = e
                });
                return t
            }
        };
        c = e.Color.names = {
            aqua: "#00ffff",
            black: "#000000",
            blue: "#0000ff",
            fuchsia: "#ff00ff",
            gray: "#808080",
            green: "#008000",
            lime: "#00ff00",
            maroon: "#800000",
            navy: "#000080",
            olive: "#808000",
            purple: "#800080",
            red: "#ff0000",
            silver: "#c0c0c0",
            teal: "#008080",
            white: "#ffffff",
            yellow: "#ffff00",
            transparent: [null, null, null, 0],
            _default: "#ffffff"
        }
    })(jQuery);
    (function () {
        var i = ["add", "remove", "toggle"],
            n = {
                border: 1,
                borderBottom: 1,
                borderColor: 1,
                borderLeft: 1,
                borderRight: 1,
                borderTop: 1,
                borderWidth: 1,
                margin: 1,
                padding: 1
            };
        e.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function (t, i) {
            e.fx.step[i] = function (e) {
                if (e.end !== "none" && !e.setAttr || e.pos === 1 && !e.setAttr) {
                    jQuery.style(e.elem, i, e.end);
                    e.setAttr = true
                }
            }
        });

        function r(t) {
            var i, n, r = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle,
                s = {};
            if (r && r.length && r[0] && r[r[0]]) {
                n = r.length;
                while (n--) {
                    i = r[n];
                    if (typeof r[i] === "string") {
                        s[e.camelCase(i)] = r[i]
                    }
                }
            }
            else {
                for (i in r) {
                    if (typeof r[i] === "string") {
                        s[i] = r[i]
                    }
                }
            }
            return s
        }

        function s(t, i) {
            var r = {},
                s, a;
            for (s in i) {
                a = i[s];
                if (t[s] !== a) {
                    if (!n[s]) {
                        if (e.fx.step[s] || !isNaN(parseFloat(a))) {
                            r[s] = a
                        }
                    }
                }
            }
            return r
        }
        if (!e.fn.addBack) {
            e.fn.addBack = function (e) {
                return this.add(e == null ? this.prevObject : this.prevObject.filter(e))
            }
        }
        e.effects.animateClass = function (t, n, a, o) {
            var l = e.speed(n, a, o);
            return this.queue(function () {
                var n = e(this),
                    a = n.attr("class") || "",
                    o, u = l.children ? n.find("*").addBack() : n;
                u = u.map(function () {
                    var t = e(this);
                    return {
                        el: t,
                        start: r(this)
                    }
                });
                o = function () {
                    e.each(i, function (e, i) {
                        if (t[i]) {
                            n[i + "Class"](t[i])
                        }
                    })
                };
                o();
                u = u.map(function () {
                    this.end = r(this.el[0]);
                    this.diff = s(this.start, this.end);
                    return this
                });
                n.attr("class", a);
                u = u.map(function () {
                    var t = this,
                        i = e.Deferred(),
                        n = e.extend({}, l, {
                            queue: false,
                            complete: function () {
                                i.resolve(t)
                            }
                        });
                    this.el.animate(this.diff, n);
                    return i.promise()
                });
                e.when.apply(e, u.get()).done(function () {
                    o();
                    e.each(arguments, function () {
                        var t = this.el;
                        e.each(this.diff, function (e) {
                            t.css(e, "")
                        })
                    });
                    l.complete.call(n[0])
                })
            })
        };
        e.fn.extend({
            addClass: function (t) {
                return function (i, n, r, s) {
                    return n ? e.effects.animateClass.call(this, {
                        add: i
                    }, n, r, s) : t.apply(this, arguments)
                }
            }(e.fn.addClass),
            removeClass: function (t) {
                return function (i, n, r, s) {
                    return arguments.length > 1 ? e.effects.animateClass.call(this, {
                        remove: i
                    }, n, r, s) : t.apply(this, arguments)
                }
            }(e.fn.removeClass),
            toggleClass: function (i) {
                return function (n, r, s, a, o) {
                    if (typeof r === "boolean" || r === t) {
                        if (!s) {
                            return i.apply(this, arguments)
                        }
                        else {
                            return e.effects.animateClass.call(this, r ? {
                                add: n
                            } : {
                                remove: n
                            }, s, a, o)
                        }
                    }
                    else {
                        return e.effects.animateClass.call(this, {
                            toggle: n
                        }, r, s, a)
                    }
                }
            }(e.fn.toggleClass),
            switchClass: function (t, i, n, r, s) {
                return e.effects.animateClass.call(this, {
                    add: i,
                    remove: t
                }, n, r, s)
            }
        })
    })();
    (function () {
        e.extend(e.effects, {
            version: "1.10.4",
            save: function (e, t) {
                for (var n = 0; n < t.length; n++) {
                    if (t[n] !== null) {
                        e.data(i + t[n], e[0].style[t[n]])
                    }
                }
            },
            restore: function (e, n) {
                var r, s;
                for (s = 0; s < n.length; s++) {
                    if (n[s] !== null) {
                        r = e.data(i + n[s]);
                        if (r === t) {
                            r = ""
                        }
                        e.css(n[s], r)
                    }
                }
            },
            setMode: function (e, t) {
                if (t === "toggle") {
                    t = e.is(":hidden") ? "show" : "hide"
                }
                return t
            },
            getBaseline: function (e, t) {
                var i, n;
                switch (e[0]) {
                    case "top":
                        i = 0;
                        break;
                    case "middle":
                        i = .5;
                        break;
                    case "bottom":
                        i = 1;
                        break;
                    default:
                        i = e[0] / t.height
                }
                switch (e[1]) {
                    case "left":
                        n = 0;
                        break;
                    case "center":
                        n = .5;
                        break;
                    case "right":
                        n = 1;
                        break;
                    default:
                        n = e[1] / t.width
                }
                return {
                    x: n,
                    y: i
                }
            },
            createWrapper: function (t) {
                if (t.parent().is(".ui-effects-wrapper")) {
                    return t.parent()
                }
                var i = {
                        width: t.outerWidth(true),
                        height: t.outerHeight(true),
                        float: t.css("float")
                    },
                    n = e("<div></div>").addClass("ui-effects-wrapper").css({
                        fontSize: "100%",
                        background: "transparent",
                        border: "none",
                        margin: 0,
                        padding: 0
                    }),
                    r = {
                        width: t.width(),
                        height: t.height()
                    },
                    s = document.activeElement;
                try {
                    s.id
                }
                catch (e) {
                    s = document.body
                }
                t.wrap(n);
                if (t[0] === s || e.contains(t[0], s)) {
                    e(s).focus()
                }
                n = t.parent();
                if (t.css("position") === "static") {
                    n.css({
                        position: "relative"
                    });
                    t.css({
                        position: "relative"
                    })
                }
                else {
                    e.extend(i, {
                        position: t.css("position"),
                        zIndex: t.css("z-index")
                    });
                    e.each(["top", "left", "bottom", "right"], function (e, n) {
                        i[n] = t.css(n);
                        if (isNaN(parseInt(i[n], 10))) {
                            i[n] = "auto"
                        }
                    });
                    t.css({
                        position: "relative",
                        top: 0,
                        left: 0,
                        right: "auto",
                        bottom: "auto"
                    })
                }
                t.css(r);
                return n.css(i).show()
            },
            removeWrapper: function (t) {
                var i = document.activeElement;
                if (t.parent().is(".ui-effects-wrapper")) {
                    t.parent().replaceWith(t);
                    if (t[0] === i || e.contains(t[0], i)) {
                        e(i).focus()
                    }
                }
                return t
            },
            setTransition: function (t, i, n, r) {
                r = r || {};
                e.each(i, function (e, i) {
                    var s = t.cssUnit(i);
                    if (s[0] > 0) {
                        r[i] = s[0] * n + s[1]
                    }
                });
                return r
            }
        });

        function n(t, i, n, r) {
            if (e.isPlainObject(t)) {
                i = t;
                t = t.effect
            }
            t = {
                effect: t
            };
            if (i == null) {
                i = {}
            }
            if (e.isFunction(i)) {
                r = i;
                n = null;
                i = {}
            }
            if (typeof i === "number" || e.fx.speeds[i]) {
                r = n;
                n = i;
                i = {}
            }
            if (e.isFunction(n)) {
                r = n;
                n = null
            }
            if (i) {
                e.extend(t, i)
            }
            n = n || i.duration;
            t.duration = e.fx.off ? 0 : typeof n === "number" ? n : n in e.fx.speeds ? e.fx.speeds[n] : e.fx.speeds._default;
            t.complete = r || i.complete;
            return t
        }

        function r(t) {
            if (!t || typeof t === "number" || e.fx.speeds[t]) {
                return true
            }
            if (typeof t === "string" && !e.effects.effect[t]) {
                return true
            }
            if (e.isFunction(t)) {
                return true
            }
            if (typeof t === "object" && !t.effect) {
                return true
            }
            return false
        }
        e.fn.extend({
            effect: function () {
                var t = n.apply(this, arguments),
                    i = t.mode,
                    r = t.queue,
                    s = e.effects.effect[t.effect];
                if (e.fx.off || !s) {
                    if (i) {
                        return this[i](t.duration, t.complete)
                    }
                    else {
                        return this.each(function () {
                            if (t.complete) {
                                t.complete.call(this)
                            }
                        })
                    }
                }

                function a(i) {
                    var n = e(this),
                        r = t.complete,
                        a = t.mode;

                    function o() {
                        if (e.isFunction(r)) {
                            r.call(n[0])
                        }
                        if (e.isFunction(i)) {
                            i()
                        }
                    }
                    if (n.is(":hidden") ? a === "hide" : a === "show") {
                        n[a]();
                        o()
                    }
                    else {
                        s.call(n[0], t, o)
                    }
                }
                return r === false ? this.each(a) : this.queue(r || "fx", a)
            },
            show: function (e) {
                return function (t) {
                    if (r(t)) {
                        return e.apply(this, arguments)
                    }
                    else {
                        var i = n.apply(this, arguments);
                        i.mode = "show";
                        return this.effect.call(this, i)
                    }
                }
            }(e.fn.show),
            hide: function (e) {
                return function (t) {
                    if (r(t)) {
                        return e.apply(this, arguments)
                    }
                    else {
                        var i = n.apply(this, arguments);
                        i.mode = "hide";
                        return this.effect.call(this, i)
                    }
                }
            }(e.fn.hide),
            toggle: function (e) {
                return function (t) {
                    if (r(t) || typeof t === "boolean") {
                        return e.apply(this, arguments)
                    }
                    else {
                        var i = n.apply(this, arguments);
                        i.mode = "toggle";
                        return this.effect.call(this, i)
                    }
                }
            }(e.fn.toggle),
            cssUnit: function (t) {
                var i = this.css(t),
                    n = [];
                e.each(["em", "px", "%", "pt"], function (e, t) {
                    if (i.indexOf(t) > 0) {
                        n = [parseFloat(i), t]
                    }
                });
                return n
            }
        })
    })();
    (function () {
        var t = {};
        e.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function (e, i) {
            t[i] = function (t) {
                return Math.pow(t, e + 2)
            }
        });
        e.extend(t, {
            Sine: function (e) {
                return 1 - Math.cos(e * Math.PI / 2)
            },
            Circ: function (e) {
                return 1 - Math.sqrt(1 - e * e)
            },
            Elastic: function (e) {
                return e === 0 || e === 1 ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin(((e - 1) * 80 - 7.5) * Math.PI / 15)
            },
            Back: function (e) {
                return e * e * (3 * e - 2)
            },
            Bounce: function (e) {
                var t, i = 4;
                while (e < ((t = Math.pow(2, --i)) - 1) / 11) {}
                return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((t * 3 - 2) / 22 - e, 2)
            }
        });
        e.each(t, function (t, i) {
            e.easing["easeIn" + t] = i;
            e.easing["easeOut" + t] = function (e) {
                return 1 - i(1 - e)
            };
            e.easing["easeInOut" + t] = function (e) {
                return e < .5 ? i(e * 2) / 2 : 1 - i(e * -2 + 2) / 2
            }
        })
    })()
})(jQuery);
(function (e, t) {
    var i = /up|down|vertical/,
        n = /up|left|vertical|horizontal/;
    e.effects.effect.blind = function (t, r) {
        var s = e(this),
            a = ["position", "top", "bottom", "left", "right", "height", "width"],
            o = e.effects.setMode(s, t.mode || "hide"),
            l = t.direction || "up",
            u = i.test(l),
            c = u ? "height" : "width",
            f = u ? "top" : "left",
            h = n.test(l),
            d = {},
            p = o === "show",
            g, m, v;
        if (s.parent().is(".ui-effects-wrapper")) {
            e.effects.save(s.parent(), a)
        }
        else {
            e.effects.save(s, a)
        }
        s.show();
        g = e.effects.createWrapper(s).css({
            overflow: "hidden"
        });
        m = g[c]();
        v = parseFloat(g.css(f)) || 0;
        d[c] = p ? m : 0;
        if (!h) {
            s.css(u ? "bottom" : "right", 0).css(u ? "top" : "left", "auto").css({
                position: "absolute"
            });
            d[f] = p ? v : m + v
        }
        if (p) {
            g.css(c, 0);
            if (!h) {
                g.css(f, v + m)
            }
        }
        g.animate(d, {
            duration: t.duration,
            easing: t.easing,
            queue: false,
            complete: function () {
                if (o === "hide") {
                    s.hide()
                }
                e.effects.restore(s, a);
                e.effects.removeWrapper(s);
                r()
            }
        })
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.bounce = function (t, i) {
        var n = e(this),
            r = ["position", "top", "bottom", "left", "right", "height", "width"],
            s = e.effects.setMode(n, t.mode || "effect"),
            a = s === "hide",
            o = s === "show",
            l = t.direction || "up",
            u = t.distance,
            c = t.times || 5,
            f = c * 2 + (o || a ? 1 : 0),
            h = t.duration / f,
            d = t.easing,
            p = l === "up" || l === "down" ? "top" : "left",
            g = l === "up" || l === "left",
            m, v, y, b = n.queue(),
            w = b.length;
        if (o || a) {
            r.push("opacity")
        }
        e.effects.save(n, r);
        n.show();
        e.effects.createWrapper(n);
        if (!u) {
            u = n[p === "top" ? "outerHeight" : "outerWidth"]() / 3
        }
        if (o) {
            y = {
                opacity: 1
            };
            y[p] = 0;
            n.css("opacity", 0).css(p, g ? -u * 2 : u * 2).animate(y, h, d)
        }
        if (a) {
            u = u / Math.pow(2, c - 1)
        }
        y = {};
        y[p] = 0;
        for (m = 0; m < c; m++) {
            v = {};
            v[p] = (g ? "-=" : "+=") + u;
            n.animate(v, h, d).animate(y, h, d);
            u = a ? u * 2 : u / 2
        }
        if (a) {
            v = {
                opacity: 0
            };
            v[p] = (g ? "-=" : "+=") + u;
            n.animate(v, h, d)
        }
        n.queue(function () {
            if (a) {
                n.hide()
            }
            e.effects.restore(n, r);
            e.effects.removeWrapper(n);
            i()
        });
        if (w > 1) {
            b.splice.apply(b, [1, 0].concat(b.splice(w, f + 1)))
        }
        n.dequeue()
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.clip = function (t, i) {
        var n = e(this),
            r = ["position", "top", "bottom", "left", "right", "height", "width"],
            s = e.effects.setMode(n, t.mode || "hide"),
            a = s === "show",
            o = t.direction || "vertical",
            l = o === "vertical",
            u = l ? "height" : "width",
            c = l ? "top" : "left",
            f = {},
            h, d, p;
        e.effects.save(n, r);
        n.show();
        h = e.effects.createWrapper(n).css({
            overflow: "hidden"
        });
        d = n[0].tagName === "IMG" ? h : n;
        p = d[u]();
        if (a) {
            d.css(u, 0);
            d.css(c, p / 2)
        }
        f[u] = a ? p : 0;
        f[c] = a ? 0 : p / 2;
        d.animate(f, {
            queue: false,
            duration: t.duration,
            easing: t.easing,
            complete: function () {
                if (!a) {
                    n.hide()
                }
                e.effects.restore(n, r);
                e.effects.removeWrapper(n);
                i()
            }
        })
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.drop = function (t, i) {
        var n = e(this),
            r = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"],
            s = e.effects.setMode(n, t.mode || "hide"),
            a = s === "show",
            o = t.direction || "left",
            l = o === "up" || o === "down" ? "top" : "left",
            u = o === "up" || o === "left" ? "pos" : "neg",
            c = {
                opacity: a ? 1 : 0
            },
            f;
        e.effects.save(n, r);
        n.show();
        e.effects.createWrapper(n);
        f = t.distance || n[l === "top" ? "outerHeight" : "outerWidth"](true) / 2;
        if (a) {
            n.css("opacity", 0).css(l, u === "pos" ? -f : f)
        }
        c[l] = (a ? u === "pos" ? "+=" : "-=" : u === "pos" ? "-=" : "+=") + f;
        n.animate(c, {
            queue: false,
            duration: t.duration,
            easing: t.easing,
            complete: function () {
                if (s === "hide") {
                    n.hide()
                }
                e.effects.restore(n, r);
                e.effects.removeWrapper(n);
                i()
            }
        })
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.explode = function (t, i) {
        var n = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3,
            r = n,
            s = e(this),
            a = e.effects.setMode(s, t.mode || "hide"),
            o = a === "show",
            l = s.show().css("visibility", "hidden").offset(),
            u = Math.ceil(s.outerWidth() / r),
            c = Math.ceil(s.outerHeight() / n),
            f = [],
            h, d, p, g, m, v;

        function y() {
            f.push(this);
            if (f.length === n * r) {
                b()
            }
        }
        for (h = 0; h < n; h++) {
            g = l.top + h * c;
            v = h - (n - 1) / 2;
            for (d = 0; d < r; d++) {
                p = l.left + d * u;
                m = d - (r - 1) / 2;
                s.clone().appendTo("body").wrap("<div></div>").css({
                    position: "absolute",
                    visibility: "visible",
                    left: -d * u,
                    top: -h * c
                }).parent().addClass("ui-effects-explode").css({
                    position: "absolute",
                    overflow: "hidden",
                    width: u,
                    height: c,
                    left: p + (o ? m * u : 0),
                    top: g + (o ? v * c : 0),
                    opacity: o ? 0 : 1
                }).animate({
                    left: p + (o ? 0 : m * u),
                    top: g + (o ? 0 : v * c),
                    opacity: o ? 1 : 0
                }, t.duration || 500, t.easing, y)
            }
        }

        function b() {
            s.css({
                visibility: "visible"
            });
            e(f).remove();
            if (!o) {
                s.hide()
            }
            i()
        }
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.fade = function (t, i) {
        var n = e(this),
            r = e.effects.setMode(n, t.mode || "toggle");
        n.animate({
            opacity: r
        }, {
            queue: false,
            duration: t.duration,
            easing: t.easing,
            complete: i
        })
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.fold = function (t, i) {
        var n = e(this),
            r = ["position", "top", "bottom", "left", "right", "height", "width"],
            s = e.effects.setMode(n, t.mode || "hide"),
            a = s === "show",
            o = s === "hide",
            l = t.size || 15,
            u = /([0-9]+)%/.exec(l),
            c = !!t.horizFirst,
            f = a !== c,
            h = f ? ["width", "height"] : ["height", "width"],
            d = t.duration / 2,
            p, g, m = {},
            v = {};
        e.effects.save(n, r);
        n.show();
        p = e.effects.createWrapper(n).css({
            overflow: "hidden"
        });
        g = f ? [p.width(), p.height()] : [p.height(), p.width()];
        if (u) {
            l = parseInt(u[1], 10) / 100 * g[o ? 0 : 1]
        }
        if (a) {
            p.css(c ? {
                height: 0,
                width: l
            } : {
                height: l,
                width: 0
            })
        }
        m[h[0]] = a ? g[0] : l;
        v[h[1]] = a ? g[1] : 0;
        p.animate(m, d, t.easing).animate(v, d, t.easing, function () {
            if (o) {
                n.hide()
            }
            e.effects.restore(n, r);
            e.effects.removeWrapper(n);
            i()
        })
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.highlight = function (t, i) {
        var n = e(this),
            r = ["backgroundImage", "backgroundColor", "opacity"],
            s = e.effects.setMode(n, t.mode || "show"),
            a = {
                backgroundColor: n.css("backgroundColor")
            };
        if (s === "hide") {
            a.opacity = 0
        }
        e.effects.save(n, r);
        n.show().css({
            backgroundImage: "none",
            backgroundColor: t.color || "#ffff99"
        }).animate(a, {
            queue: false,
            duration: t.duration,
            easing: t.easing,
            complete: function () {
                if (s === "hide") {
                    n.hide()
                }
                e.effects.restore(n, r);
                i()
            }
        })
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.pulsate = function (t, i) {
        var n = e(this),
            r = e.effects.setMode(n, t.mode || "show"),
            s = r === "show",
            a = r === "hide",
            o = s || r === "hide",
            l = (t.times || 5) * 2 + (o ? 1 : 0),
            u = t.duration / l,
            c = 0,
            f = n.queue(),
            h = f.length,
            d;
        if (s || !n.is(":visible")) {
            n.css("opacity", 0).show();
            c = 1
        }
        for (d = 1; d < l; d++) {
            n.animate({
                opacity: c
            }, u, t.easing);
            c = 1 - c
        }
        n.animate({
            opacity: c
        }, u, t.easing);
        n.queue(function () {
            if (a) {
                n.hide()
            }
            i()
        });
        if (h > 1) {
            f.splice.apply(f, [1, 0].concat(f.splice(h, l + 1)))
        }
        n.dequeue()
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.puff = function (t, i) {
        var n = e(this),
            r = e.effects.setMode(n, t.mode || "hide"),
            s = r === "hide",
            a = parseInt(t.percent, 10) || 150,
            o = a / 100,
            l = {
                height: n.height(),
                width: n.width(),
                outerHeight: n.outerHeight(),
                outerWidth: n.outerWidth()
            };
        e.extend(t, {
            effect: "scale",
            queue: false,
            fade: true,
            mode: r,
            complete: i,
            percent: s ? a : 100,
            from: s ? l : {
                height: l.height * o,
                width: l.width * o,
                outerHeight: l.outerHeight * o,
                outerWidth: l.outerWidth * o
            }
        });
        n.effect(t)
    };
    e.effects.effect.scale = function (t, i) {
        var n = e(this),
            r = e.extend(true, {}, t),
            s = e.effects.setMode(n, t.mode || "effect"),
            a = parseInt(t.percent, 10) || (parseInt(t.percent, 10) === 0 ? 0 : s === "hide" ? 0 : 100),
            o = t.direction || "both",
            l = t.origin,
            u = {
                height: n.height(),
                width: n.width(),
                outerHeight: n.outerHeight(),
                outerWidth: n.outerWidth()
            },
            c = {
                y: o !== "horizontal" ? a / 100 : 1,
                x: o !== "vertical" ? a / 100 : 1
            };
        r.effect = "size";
        r.queue = false;
        r.complete = i;
        if (s !== "effect") {
            r.origin = l || ["middle", "center"];
            r.restore = true
        }
        r.from = t.from || (s === "show" ? {
            height: 0,
            width: 0,
            outerHeight: 0,
            outerWidth: 0
        } : u);
        r.to = {
            height: u.height * c.y,
            width: u.width * c.x,
            outerHeight: u.outerHeight * c.y,
            outerWidth: u.outerWidth * c.x
        };
        if (r.fade) {
            if (s === "show") {
                r.from.opacity = 0;
                r.to.opacity = 1
            }
            if (s === "hide") {
                r.from.opacity = 1;
                r.to.opacity = 0
            }
        }
        n.effect(r)
    };
    e.effects.effect.size = function (t, i) {
        var n, r, s, a = e(this),
            o = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"],
            l = ["position", "top", "bottom", "left", "right", "overflow", "opacity"],
            u = ["width", "height", "overflow"],
            c = ["fontSize"],
            f = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"],
            h = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"],
            d = e.effects.setMode(a, t.mode || "effect"),
            p = t.restore || d !== "effect",
            g = t.scale || "both",
            m = t.origin || ["middle", "center"],
            v = a.css("position"),
            y = p ? o : l,
            b = {
                height: 0,
                width: 0,
                outerHeight: 0,
                outerWidth: 0
            };
        if (d === "show") {
            a.show()
        }
        n = {
            height: a.height(),
            width: a.width(),
            outerHeight: a.outerHeight(),
            outerWidth: a.outerWidth()
        };
        if (t.mode === "toggle" && d === "show") {
            a.from = t.to || b;
            a.to = t.from || n
        }
        else {
            a.from = t.from || (d === "show" ? b : n);
            a.to = t.to || (d === "hide" ? b : n)
        }
        s = {
            from: {
                y: a.from.height / n.height,
                x: a.from.width / n.width
            },
            to: {
                y: a.to.height / n.height,
                x: a.to.width / n.width
            }
        };
        if (g === "box" || g === "both") {
            if (s.from.y !== s.to.y) {
                y = y.concat(f);
                a.from = e.effects.setTransition(a, f, s.from.y, a.from);
                a.to = e.effects.setTransition(a, f, s.to.y, a.to)
            }
            if (s.from.x !== s.to.x) {
                y = y.concat(h);
                a.from = e.effects.setTransition(a, h, s.from.x, a.from);
                a.to = e.effects.setTransition(a, h, s.to.x, a.to)
            }
        }
        if (g === "content" || g === "both") {
            if (s.from.y !== s.to.y) {
                y = y.concat(c).concat(u);
                a.from = e.effects.setTransition(a, c, s.from.y, a.from);
                a.to = e.effects.setTransition(a, c, s.to.y, a.to)
            }
        }
        e.effects.save(a, y);
        a.show();
        e.effects.createWrapper(a);
        a.css("overflow", "hidden").css(a.from);
        if (m) {
            r = e.effects.getBaseline(m, n);
            a.from.top = (n.outerHeight - a.outerHeight()) * r.y;
            a.from.left = (n.outerWidth - a.outerWidth()) * r.x;
            a.to.top = (n.outerHeight - a.to.outerHeight) * r.y;
            a.to.left = (n.outerWidth - a.to.outerWidth) * r.x
        }
        a.css(a.from);
        if (g === "content" || g === "both") {
            f = f.concat(["marginTop", "marginBottom"]).concat(c);
            h = h.concat(["marginLeft", "marginRight"]);
            u = o.concat(f).concat(h);
            a.find("*[width]").each(function () {
                var i = e(this),
                    n = {
                        height: i.height(),
                        width: i.width(),
                        outerHeight: i.outerHeight(),
                        outerWidth: i.outerWidth()
                    };
                if (p) {
                    e.effects.save(i, u)
                }
                i.from = {
                    height: n.height * s.from.y,
                    width: n.width * s.from.x,
                    outerHeight: n.outerHeight * s.from.y,
                    outerWidth: n.outerWidth * s.from.x
                };
                i.to = {
                    height: n.height * s.to.y,
                    width: n.width * s.to.x,
                    outerHeight: n.height * s.to.y,
                    outerWidth: n.width * s.to.x
                };
                if (s.from.y !== s.to.y) {
                    i.from = e.effects.setTransition(i, f, s.from.y, i.from);
                    i.to = e.effects.setTransition(i, f, s.to.y, i.to)
                }
                if (s.from.x !== s.to.x) {
                    i.from = e.effects.setTransition(i, h, s.from.x, i.from);
                    i.to = e.effects.setTransition(i, h, s.to.x, i.to)
                }
                i.css(i.from);
                i.animate(i.to, t.duration, t.easing, function () {
                    if (p) {
                        e.effects.restore(i, u)
                    }
                })
            })
        }
        a.animate(a.to, {
            queue: false,
            duration: t.duration,
            easing: t.easing,
            complete: function () {
                if (a.to.opacity === 0) {
                    a.css("opacity", a.from.opacity)
                }
                if (d === "hide") {
                    a.hide()
                }
                e.effects.restore(a, y);
                if (!p) {
                    if (v === "static") {
                        a.css({
                            position: "relative",
                            top: a.to.top,
                            left: a.to.left
                        })
                    }
                    else {
                        e.each(["top", "left"], function (e, t) {
                            a.css(t, function (t, i) {
                                var n = parseInt(i, 10),
                                    r = e ? a.to.left : a.to.top;
                                if (i === "auto") {
                                    return r + "px"
                                }
                                return n + r + "px"
                            })
                        })
                    }
                }
                e.effects.removeWrapper(a);
                i()
            }
        })
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.shake = function (t, i) {
        var n = e(this),
            r = ["position", "top", "bottom", "left", "right", "height", "width"],
            s = e.effects.setMode(n, t.mode || "effect"),
            a = t.direction || "left",
            o = t.distance || 20,
            l = t.times || 3,
            u = l * 2 + 1,
            c = Math.round(t.duration / u),
            f = a === "up" || a === "down" ? "top" : "left",
            h = a === "up" || a === "left",
            d = {},
            p = {},
            g = {},
            m, v = n.queue(),
            y = v.length;
        e.effects.save(n, r);
        n.show();
        e.effects.createWrapper(n);
        d[f] = (h ? "-=" : "+=") + o;
        p[f] = (h ? "+=" : "-=") + o * 2;
        g[f] = (h ? "-=" : "+=") + o * 2;
        n.animate(d, c, t.easing);
        for (m = 1; m < l; m++) {
            n.animate(p, c, t.easing).animate(g, c, t.easing)
        }
        n.animate(p, c, t.easing).animate(d, c / 2, t.easing).queue(function () {
            if (s === "hide") {
                n.hide()
            }
            e.effects.restore(n, r);
            e.effects.removeWrapper(n);
            i()
        });
        if (y > 1) {
            v.splice.apply(v, [1, 0].concat(v.splice(y, u + 1)))
        }
        n.dequeue()
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.slide = function (t, i) {
        var n = e(this),
            r = ["position", "top", "bottom", "left", "right", "width", "height"],
            s = e.effects.setMode(n, t.mode || "show"),
            a = s === "show",
            o = t.direction || "left",
            l = o === "up" || o === "down" ? "top" : "left",
            u = o === "up" || o === "left",
            c, f = {};
        e.effects.save(n, r);
        n.show();
        c = t.distance || n[l === "top" ? "outerHeight" : "outerWidth"](true);
        e.effects.createWrapper(n).css({
            overflow: "hidden"
        });
        if (a) {
            n.css(l, u ? isNaN(c) ? "-" + c : -c : c)
        }
        f[l] = (a ? u ? "+=" : "-=" : u ? "-=" : "+=") + c;
        n.animate(f, {
            queue: false,
            duration: t.duration,
            easing: t.easing,
            complete: function () {
                if (s === "hide") {
                    n.hide()
                }
                e.effects.restore(n, r);
                e.effects.removeWrapper(n);
                i()
            }
        })
    }
})(jQuery);
(function (e, t) {
    e.effects.effect.transfer = function (t, i) {
        var n = e(this),
            r = e(t.to),
            s = r.css("position") === "fixed",
            a = e("body"),
            o = s ? a.scrollTop() : 0,
            l = s ? a.scrollLeft() : 0,
            u = r.offset(),
            c = {
                top: u.top - o,
                left: u.left - l,
                height: r.innerHeight(),
                width: r.innerWidth()
            },
            f = n.offset(),
            h = e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({
                top: f.top - o,
                left: f.left - l,
                height: n.innerHeight(),
                width: n.innerWidth(),
                position: s ? "fixed" : "absolute"
            }).animate(c, t.duration, t.easing, function () {
                h.remove();
                i()
            })
    }
})(jQuery);
(function (e, t) {
    if (typeof exports === "object") {
        module.exports = t(require("./punycode"), require("./IPv6"), require("./SecondLevelDomains"))
    }
    else if (typeof define === "function" && define.amd) {
        define(["./punycode", "./IPv6", "./SecondLevelDomains"], t)
    }
    else {
        e.URI = t(e.punycode, e.IPv6, e.SecondLevelDomains, e)
    }
})(this, function (e, t, i, n) {
    "use strict";
    var r = n && n.URI;

    function s(e, t) {
        if (!(this instanceof s)) {
            return new s(e, t)
        }
        if (e === undefined) {
            if (typeof location !== "undefined") {
                e = location.href + ""
            }
            else {
                e = ""
            }
        }
        this.href(e);
        if (t !== undefined) {
            return this.absoluteTo(t)
        }
        return this
    }
    var a = s.prototype;
    var o = Object.prototype.hasOwnProperty;

    function l(e) {
        return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1")
    }

    function u(e) {
        if (e === undefined) {
            return "Undefined"
        }
        return String(Object.prototype.toString.call(e)).slice(8, -1)
    }

    function c(e) {
        return u(e) === "Array"
    }

    function f(e, t) {
        var i = {};
        var n, r;
        if (c(t)) {
            for (n = 0, r = t.length; n < r; n++) {
                i[t[n]] = true
            }
        }
        else {
            i[t] = true
        }
        for (n = 0, r = e.length; n < r; n++) {
            if (i[e[n]] !== undefined) {
                e.splice(n, 1);
                r--;
                n--
            }
        }
        return e
    }

    function h(e, t) {
        var i, n;
        if (c(t)) {
            for (i = 0, n = t.length; i < n; i++) {
                if (!h(e, t[i])) {
                    return false
                }
            }
            return true
        }
        var r = u(t);
        for (i = 0, n = e.length; i < n; i++) {
            if (r === "RegExp") {
                if (typeof e[i] === "string" && e[i].match(t)) {
                    return true
                }
            }
            else if (e[i] === t) {
                return true
            }
        }
        return false
    }

    function d(e, t) {
        if (!c(e) || !c(t)) {
            return false
        }
        if (e.length !== t.length) {
            return false
        }
        e.sort();
        t.sort();
        for (var i = 0, n = e.length; i < n; i++) {
            if (e[i] !== t[i]) {
                return false
            }
        }
        return true
    }
    s._parts = function () {
        return {
            protocol: null,
            username: null,
            password: null,
            hostname: null,
            urn: null,
            port: null,
            path: null,
            query: null,
            fragment: null,
            duplicateQueryParameters: s.duplicateQueryParameters,
            escapeQuerySpace: s.escapeQuerySpace
        }
    };
    s.duplicateQueryParameters = false;
    s.escapeQuerySpace = true;
    s.protocol_expression = /^[a-z][a-z0-9-+-]*$/i;
    s.idn_expression = /[^a-z0-9\.-]/i;
    s.punycode_expression = /(xn--)/i;
    s.ip4_expression = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;
    s.ip6_expression = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
    s.find_uri_expression = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi;
    s.defaultPorts = {
        http: "80",
        https: "443",
        ftp: "21",
        gopher: "70",
        ws: "80",
        wss: "443"
    };
    s.invalid_hostname_characters = /[^a-zA-Z0-9\.-]/;
    s.domAttributes = {
        a: "href",
        blockquote: "cite",
        link: "href",
        base: "href",
        script: "src",
        form: "action",
        img: "src",
        area: "href",
        iframe: "src",
        embed: "src",
        source: "src",
        track: "src",
        input: "src"
    };
    s.getDomAttribute = function (e) {
        if (!e || !e.nodeName) {
            return undefined
        }
        var t = e.nodeName.toLowerCase();
        if (t === "input" && e.type !== "image") {
            return undefined
        }
        return s.domAttributes[t]
    };

    function p(e) {
        return escape(e)
    }

    function g(e) {
        return encodeURIComponent(e).replace(/[!'()*]/g, p).replace(/\*/g, "%2A")
    }
    s.encode = g;
    s.decode = decodeURIComponent;
    s.iso8859 = function () {
        s.encode = escape;
        s.decode = unescape
    };
    s.unicode = function () {
        s.encode = g;
        s.decode = decodeURIComponent
    };
    s.characters = {
        pathname: {
            encode: {
                expression: /%(24|26|2B|2C|3B|3D|3A|40)/gi,
                map: {
                    "%24": "$",
                    "%26": "&",
                    "%2B": "+",
                    "%2C": ",",
                    "%3B": ";",
                    "%3D": "=",
                    "%3A": ":",
                    "%40": "@"
                }
            },
            decode: {
                expression: /[\/\?#]/g,
                map: {
                    "/": "%2F",
                    "?": "%3F",
                    "#": "%23"
                }
            }
        },
        reserved: {
            encode: {
                expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,
                map: {
                    "%3A": ":",
                    "%2F": "/",
                    "%3F": "?",
                    "%23": "#",
                    "%5B": "[",
                    "%5D": "]",
                    "%40": "@",
                    "%21": "!",
                    "%24": "$",
                    "%26": "&",
                    "%27": "'",
                    "%28": "(",
                    "%29": ")",
                    "%2A": "*",
                    "%2B": "+",
                    "%2C": ",",
                    "%3B": ";",
                    "%3D": "="
                }
            }
        }
    };
    s.encodeQuery = function (e, t) {
        var i = s.encode(e + "");
        return t ? i.replace(/%20/g, "+") : i
    };
    s.decodeQuery = function (e, t) {
        e += "";
        try {
            return s.decode(t ? e.replace(/\+/g, "%20") : e)
        }
        catch (e) {
            return e
        }
    };
    s.recodePath = function (e) {
        var t = (e + "").split("/");
        for (var i = 0, n = t.length; i < n; i++) {
            t[i] = s.encodePathSegment(s.decode(t[i]))
        }
        return t.join("/")
    };
    s.decodePath = function (e) {
        var t = (e + "").split("/");
        for (var i = 0, n = t.length; i < n; i++) {
            t[i] = s.decodePathSegment(t[i])
        }
        return t.join("/")
    };
    var m = {
        encode: "encode",
        decode: "decode"
    };
    var v;
    var y = function (e, t) {
        return function (i) {
            return s[t](i + "").replace(s.characters[e][t].expression, function (i) {
                return s.characters[e][t].map[i]
            })
        }
    };
    for (v in m) {
        s[v + "PathSegment"] = y("pathname", m[v])
    }
    s.encodeReserved = y("reserved", "encode");
    s.parse = function (e, t) {
        var i;
        if (!t) {
            t = {}
        }
        i = e.indexOf("#");
        if (i > -1) {
            t.fragment = e.substring(i + 1) || null;
            e = e.substring(0, i)
        }
        i = e.indexOf("?");
        if (i > -1) {
            t.query = e.substring(i + 1) || null;
            e = e.substring(0, i)
        }
        if (e.substring(0, 2) === "//") {
            t.protocol = null;
            e = e.substring(2);
            e = s.parseAuthority(e, t)
        }
        else {
            i = e.indexOf(":");
            if (i > -1) {
                t.protocol = e.substring(0, i) || null;
                if (t.protocol && !t.protocol.match(s.protocol_expression)) {
                    t.protocol = undefined
                }
                else if (t.protocol === "file") {
                    e = e.substring(i + 3)
                }
                else if (e.substring(i + 1, i + 3) === "//") {
                    e = e.substring(i + 3);
                    e = s.parseAuthority(e, t)
                }
                else {
                    e = e.substring(i + 1);
                    t.urn = true
                }
            }
        }
        t.path = e;
        return t
    };
    s.parseHost = function (e, t) {
        var i = e.indexOf("/");
        var n;
        var r;
        if (i === -1) {
            i = e.length
        }
        if (e.charAt(0) === "[") {
            n = e.indexOf("]");
            t.hostname = e.substring(1, n) || null;
            t.port = e.substring(n + 2, i) || null
        }
        else if (e.indexOf(":") !== e.lastIndexOf(":")) {
            t.hostname = e.substring(0, i) || null;
            t.port = null
        }
        else {
            r = e.substring(0, i).split(":");
            t.hostname = r[0] || null;
            t.port = r[1] || null
        }
        if (t.hostname && e.substring(i).charAt(0) !== "/") {
            i++;
            e = "/" + e
        }
        return e.substring(i) || "/"
    };
    s.parseAuthority = function (e, t) {
        e = s.parseUserinfo(e, t);
        return s.parseHost(e, t)
    };
    s.parseUserinfo = function (e, t) {
        var i = e.indexOf("/");
        var n = i > -1 ? e.lastIndexOf("@", i) : e.indexOf("@");
        var r;
        if (n > -1 && (i === -1 || n < i)) {
            r = e.substring(0, n).split(":");
            t.username = r[0] ? s.decode(r[0]) : null;
            r.shift();
            t.password = r[0] ? s.decode(r.join(":")) : null;
            e = e.substring(n + 1)
        }
        else {
            t.username = null;
            t.password = null
        }
        return e
    };
    s.parseQuery = function (e, t) {
        if (!e) {
            return {}
        }
        e = e.replace(/&+/g, "&").replace(/^\?*&*|&+$/g, "");
        if (!e) {
            return {}
        }
        var i = {};
        var n = e.split("&");
        var r = n.length;
        var a, o, l;
        for (var u = 0; u < r; u++) {
            a = n[u].split("=");
            o = s.decodeQuery(a.shift(), t);
            l = a.length ? s.decodeQuery(a.join("="), t) : null;
            if (i[o]) {
                if (typeof i[o] === "string") {
                    i[o] = [i[o]]
                }
                i[o].push(l)
            }
            else {
                i[o] = l
            }
        }
        return i
    };
    s.build = function (e) {
        var t = "";
        if (e.protocol) {
            t += e.protocol + ":"
        }
        if (!e.urn && (t || e.hostname)) {
            t += "//"
        }
        t += s.buildAuthority(e) || "";
        if (typeof e.path === "string") {
            if (e.path.charAt(0) !== "/" && typeof e.hostname === "string") {
                t += "/"
            }
            t += e.path
        }
        if (typeof e.query === "string" && e.query) {
            t += "?" + e.query
        }
        if (typeof e.fragment === "string" && e.fragment) {
            t += "#" + e.fragment
        }
        return t
    };
    s.buildHost = function (e) {
        var t = "";
        if (!e.hostname) {
            return ""
        }
        else if (s.ip6_expression.test(e.hostname)) {
            if (e.port) {
                t += "[" + e.hostname + "]:" + e.port
            }
            else {
                t += e.hostname
            }
        }
        else {
            t += e.hostname;
            if (e.port) {
                t += ":" + e.port
            }
        }
        return t
    };
    s.buildAuthority = function (e) {
        return s.buildUserinfo(e) + s.buildHost(e)
    };
    s.buildUserinfo = function (e) {
        var t = "";
        if (e.username) {
            t += s.encode(e.username);
            if (e.password) {
                t += ":" + s.encode(e.password)
            }
            t += "@"
        }
        return t
    };
    s.buildQuery = function (e, t, i) {
        var n = "";
        var r, a, l, u;
        for (a in e) {
            if (o.call(e, a) && a) {
                if (c(e[a])) {
                    r = {};
                    for (l = 0, u = e[a].length; l < u; l++) {
                        if (e[a][l] !== undefined && r[e[a][l] + ""] === undefined) {
                            n += "&" + s.buildQueryParameter(a, e[a][l], i);
                            if (t !== true) {
                                r[e[a][l] + ""] = true
                            }
                        }
                    }
                }
                else if (e[a] !== undefined) {
                    n += "&" + s.buildQueryParameter(a, e[a], i)
                }
            }
        }
        return n.substring(1)
    };
    s.buildQueryParameter = function (e, t, i) {
        return s.encodeQuery(e, i) + (t !== null ? "=" + s.encodeQuery(t, i) : "")
    };
    s.addQuery = function (e, t, i) {
        if (typeof t === "object") {
            for (var n in t) {
                if (o.call(t, n)) {
                    s.addQuery(e, n, t[n])
                }
            }
        }
        else if (typeof t === "string") {
            if (e[t] === undefined) {
                e[t] = i;
                return
            }
            else if (typeof e[t] === "string") {
                e[t] = [e[t]]
            }
            if (!c(i)) {
                i = [i]
            }
            e[t] = e[t].concat(i)
        }
        else {
            throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")
        }
    };
    s.removeQuery = function (e, t, i) {
        var n, r, a;
        if (c(t)) {
            for (n = 0, r = t.length; n < r; n++) {
                e[t[n]] = undefined
            }
        }
        else if (typeof t === "object") {
            for (a in t) {
                if (o.call(t, a)) {
                    s.removeQuery(e, a, t[a])
                }
            }
        }
        else if (typeof t === "string") {
            if (i !== undefined) {
                if (e[t] === i) {
                    e[t] = undefined
                }
                else if (c(e[t])) {
                    e[t] = f(e[t], i)
                }
            }
            else {
                e[t] = undefined
            }
        }
        else {
            throw new TypeError("URI.addQuery() accepts an object, string as the first parameter")
        }
    };
    s.hasQuery = function (e, t, i, n) {
        if (typeof t === "object") {
            for (var r in t) {
                if (o.call(t, r)) {
                    if (!s.hasQuery(e, r, t[r])) {
                        return false
                    }
                }
            }
            return true
        }
        else if (typeof t !== "string") {
            throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter")
        }
        switch (u(i)) {
            case "Undefined":
                return t in e;
            case "Boolean":
                var a = Boolean(c(e[t]) ? e[t].length : e[t]);
                return i === a;
            case "Function":
                return !!i(e[t], t, e);
            case "Array":
                if (!c(e[t])) {
                    return false
                }
                var l = n ? h : d;
                return l(e[t], i);
            case "RegExp":
                if (!c(e[t])) {
                    return Boolean(e[t] && e[t].match(i))
                }
                if (!n) {
                    return false
                }
                return h(e[t], i);
            case "Number":
                i = String(i);
            case "String":
                if (!c(e[t])) {
                    return e[t] === i
                }
                if (!n) {
                    return false
                }
                return h(e[t], i);
            default:
                throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")
        }
    };
    s.commonPath = function (e, t) {
        var i = Math.min(e.length, t.length);
        var n;
        for (n = 0; n < i; n++) {
            if (e.charAt(n) !== t.charAt(n)) {
                n--;
                break
            }
        }
        if (n < 1) {
            return e.charAt(0) === t.charAt(0) && e.charAt(0) === "/" ? "/" : ""
        }
        if (e.charAt(n) !== "/" || t.charAt(n) !== "/") {
            n = e.substring(0, n).lastIndexOf("/")
        }
        return e.substring(0, n + 1)
    };
    s.withinString = function (e, t) {
        return e.replace(s.find_uri_expression, t)
    };
    s.ensureValidHostname = function (t) {
        if (t.match(s.invalid_hostname_characters)) {
            if (!e) {
                throw new TypeError("Hostname '" + t + "' contains characters other than [A-Z0-9.-] and Punycode.js is not available")
            }
            if (e.toASCII(t).match(s.invalid_hostname_characters)) {
                throw new TypeError("Hostname '" + t + "' contains characters other than [A-Z0-9.-]")
            }
        }
    };
    s.noConflict = function (e) {
        if (e) {
            var i = {
                URI: this.noConflict()
            };
            if (URITemplate && typeof URITemplate.noConflict == "function") {
                i.URITemplate = URITemplate.noConflict()
            }
            if (t && typeof t.noConflict == "function") {
                i.IPv6 = t.noConflict()
            }
            if (SecondLevelDomains && typeof SecondLevelDomains.noConflict == "function") {
                i.SecondLevelDomains = SecondLevelDomains.noConflict()
            }
            return i
        }
        else if (n.URI === this) {
            n.URI = r
        }
        return this
    };
    a.build = function (e) {
        if (e === true) {
            this._deferred_build = true
        }
        else if (e === undefined || this._deferred_build) {
            this._string = s.build(this._parts);
            this._deferred_build = false
        }
        return this
    };
    a.clone = function () {
        return new s(this)
    };
    a.valueOf = a.toString = function () {
        return this.build(false)._string
    };
    m = {
        protocol: "protocol",
        username: "username",
        password: "password",
        hostname: "hostname",
        port: "port"
    };
    y = function (e) {
        return function (t, i) {
            if (t === undefined) {
                return this._parts[e] || ""
            }
            else {
                this._parts[e] = t || null;
                this.build(!i);
                return this
            }
        }
    };
    for (v in m) {
        a[v] = y(m[v])
    }
    m = {
        query: "?",
        fragment: "#"
    };
    y = function (e, t) {
        return function (i, n) {
            if (i === undefined) {
                return this._parts[e] || ""
            }
            else {
                if (i !== null) {
                    i = i + "";
                    if (i.charAt(0) === t) {
                        i = i.substring(1)
                    }
                }
                this._parts[e] = i;
                this.build(!n);
                return this
            }
        }
    };
    for (v in m) {
        a[v] = y(v, m[v])
    }
    m = {
        search: ["?", "query"],
        hash: ["#", "fragment"]
    };
    y = function (e, t) {
        return function (i, n) {
            var r = this[e](i, n);
            return typeof r === "string" && r.length ? t + r : r
        }
    };
    for (v in m) {
        a[v] = y(m[v][1], m[v][0])
    }
    a.pathname = function (e, t) {
        if (e === undefined || e === true) {
            var i = this._parts.path || (this._parts.hostname ? "/" : "");
            return e ? s.decodePath(i) : i
        }
        else {
            this._parts.path = e ? s.recodePath(e) : "/";
            this.build(!t);
            return this
        }
    };
    a.path = a.pathname;
    a.href = function (e, t) {
        var i;
        if (e === undefined) {
            return this.toString()
        }
        this._string = "";
        this._parts = s._parts();
        var n = e instanceof s;
        var r = typeof e === "object" && (e.hostname || e.path || e.pathname);
        if (e.nodeName) {
            var a = s.getDomAttribute(e);
            e = e[a] || "";
            r = false
        }
        if (!n && r && e.pathname !== undefined) {
            e = e.toString()
        }
        if (typeof e === "string") {
            this._parts = s.parse(e, this._parts)
        }
        else if (n || r) {
            var l = n ? e._parts : e;
            for (i in l) {
                if (o.call(this._parts, i)) {
                    this._parts[i] = l[i]
                }
            }
        }
        else {
            throw new TypeError("invalid input")
        }
        this.build(!t);
        return this
    };
    a.is = function (e) {
        var t = false;
        var n = false;
        var r = false;
        var a = false;
        var o = false;
        var l = false;
        var u = false;
        var c = !this._parts.urn;
        if (this._parts.hostname) {
            c = false;
            n = s.ip4_expression.test(this._parts.hostname);
            r = s.ip6_expression.test(this._parts.hostname);
            t = n || r;
            a = !t;
            o = a && i && i.has(this._parts.hostname);
            l = a && s.idn_expression.test(this._parts.hostname);
            u = a && s.punycode_expression.test(this._parts.hostname)
        }
        switch (e.toLowerCase()) {
            case "relative":
                return c;
            case "absolute":
                return !c;
            case "domain":
            case "name":
                return a;
            case "sld":
                return o;
            case "ip":
                return t;
            case "ip4":
            case "ipv4":
            case "inet4":
                return n;
            case "ip6":
            case "ipv6":
            case "inet6":
                return r;
            case "idn":
                return l;
            case "url":
                return !this._parts.urn;
            case "urn":
                return !!this._parts.urn;
            case "punycode":
                return u
        }
        return null
    };
    var b = a.protocol;
    var w = a.port;
    var _ = a.hostname;
    a.protocol = function (e, t) {
        if (e !== undefined) {
            if (e) {
                e = e.replace(/:(\/\/)?$/, "");
                if (e.match(/[^a-zA-z0-9\.+-]/)) {
                    throw new TypeError("Protocol '" + e + "' contains characters other than [A-Z0-9.+-]")
                }
            }
        }
        return b.call(this, e, t)
    };
    a.scheme = a.protocol;
    a.port = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e !== undefined) {
            if (e === 0) {
                e = null
            }
            if (e) {
                e += "";
                if (e.charAt(0) === ":") {
                    e = e.substring(1)
                }
                if (e.match(/[^0-9]/)) {
                    throw new TypeError("Port '" + e + "' contains characters other than [0-9]")
                }
            }
        }
        return w.call(this, e, t)
    };
    a.hostname = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e !== undefined) {
            var i = {};
            s.parseHost(e, i);
            e = i.hostname
        }
        return _.call(this, e, t)
    };
    a.host = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e === undefined) {
            return this._parts.hostname ? s.buildHost(this._parts) : ""
        }
        else {
            s.parseHost(e, this._parts);
            this.build(!t);
            return this
        }
    };
    a.authority = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e === undefined) {
            return this._parts.hostname ? s.buildAuthority(this._parts) : ""
        }
        else {
            s.parseAuthority(e, this._parts);
            this.build(!t);
            return this
        }
    };
    a.userinfo = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e === undefined) {
            if (!this._parts.username) {
                return ""
            }
            var i = s.buildUserinfo(this._parts);
            return i.substring(0, i.length - 1)
        }
        else {
            if (e[e.length - 1] !== "@") {
                e += "@"
            }
            s.parseUserinfo(e, this._parts);
            this.build(!t);
            return this
        }
    };
    a.resource = function (e, t) {
        var i;
        if (e === undefined) {
            return this.path() + this.search() + this.hash()
        }
        i = s.parse(e);
        this._parts.path = i.path;
        this._parts.query = i.query;
        this._parts.fragment = i.fragment;
        this.build(!t);
        return this
    };
    a.subdomain = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e === undefined) {
            if (!this._parts.hostname || this.is("IP")) {
                return ""
            }
            var i = this._parts.hostname.length - this.domain().length - 1;
            return this._parts.hostname.substring(0, i) || ""
        }
        else {
            var n = this._parts.hostname.length - this.domain().length;
            var r = this._parts.hostname.substring(0, n);
            var a = new RegExp("^" + l(r));
            if (e && e.charAt(e.length - 1) !== ".") {
                e += "."
            }
            if (e) {
                s.ensureValidHostname(e)
            }
            this._parts.hostname = this._parts.hostname.replace(a, e);
            this.build(!t);
            return this
        }
    };
    a.domain = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (typeof e === "boolean") {
            t = e;
            e = undefined
        }
        if (e === undefined) {
            if (!this._parts.hostname || this.is("IP")) {
                return ""
            }
            var i = this._parts.hostname.match(/\./g);
            if (i && i.length < 2) {
                return this._parts.hostname
            }
            var n = this._parts.hostname.length - this.tld(t).length - 1;
            n = this._parts.hostname.lastIndexOf(".", n - 1) + 1;
            return this._parts.hostname.substring(n) || ""
        }
        else {
            if (!e) {
                throw new TypeError("cannot set domain empty")
            }
            s.ensureValidHostname(e);
            if (!this._parts.hostname || this.is("IP")) {
                this._parts.hostname = e
            }
            else {
                var r = new RegExp(l(this.domain()) + "$");
                this._parts.hostname = this._parts.hostname.replace(r, e)
            }
            this.build(!t);
            return this
        }
    };
    a.tld = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (typeof e === "boolean") {
            t = e;
            e = undefined
        }
        if (e === undefined) {
            if (!this._parts.hostname || this.is("IP")) {
                return ""
            }
            var n = this._parts.hostname.lastIndexOf(".");
            var r = this._parts.hostname.substring(n + 1);
            if (t !== true && i && i.list[r.toLowerCase()]) {
                return i.get(this._parts.hostname) || r
            }
            return r
        }
        else {
            var s;
            if (!e) {
                throw new TypeError("cannot set TLD empty")
            }
            else if (e.match(/[^a-zA-Z0-9-]/)) {
                if (i && i.is(e)) {
                    s = new RegExp(l(this.tld()) + "$");
                    this._parts.hostname = this._parts.hostname.replace(s, e)
                }
                else {
                    throw new TypeError("TLD '" + e + "' contains characters other than [A-Z0-9]")
                }
            }
            else if (!this._parts.hostname || this.is("IP")) {
                throw new ReferenceError("cannot set TLD on non-domain host")
            }
            else {
                s = new RegExp(l(this.tld()) + "$");
                this._parts.hostname = this._parts.hostname.replace(s, e)
            }
            this.build(!t);
            return this
        }
    };
    a.directory = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e === undefined || e === true) {
            if (!this._parts.path && !this._parts.hostname) {
                return ""
            }
            if (this._parts.path === "/") {
                return "/"
            }
            var i = this._parts.path.length - this.filename().length - 1;
            var n = this._parts.path.substring(0, i) || (this._parts.hostname ? "/" : "");
            return e ? s.decodePath(n) : n
        }
        else {
            var r = this._parts.path.length - this.filename().length;
            var a = this._parts.path.substring(0, r);
            var o = new RegExp("^" + l(a));
            if (!this.is("relative")) {
                if (!e) {
                    e = "/"
                }
                if (e.charAt(0) !== "/") {
                    e = "/" + e
                }
            }
            if (e && e.charAt(e.length - 1) !== "/") {
                e += "/"
            }
            e = s.recodePath(e);
            this._parts.path = this._parts.path.replace(o, e);
            this.build(!t);
            return this
        }
    };
    a.filename = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e === undefined || e === true) {
            if (!this._parts.path || this._parts.path === "/") {
                return ""
            }
            var i = this._parts.path.lastIndexOf("/");
            var n = this._parts.path.substring(i + 1);
            return e ? s.decodePathSegment(n) : n
        }
        else {
            var r = false;
            if (e.charAt(0) === "/") {
                e = e.substring(1)
            }
            if (e.match(/\.?\//)) {
                r = true
            }
            var a = new RegExp(l(this.filename()) + "$");
            e = s.recodePath(e);
            this._parts.path = this._parts.path.replace(a, e);
            if (r) {
                this.normalizePath(t)
            }
            else {
                this.build(!t)
            }
            return this
        }
    };
    a.suffix = function (e, t) {
        if (this._parts.urn) {
            return e === undefined ? "" : this
        }
        if (e === undefined || e === true) {
            if (!this._parts.path || this._parts.path === "/") {
                return ""
            }
            var i = this.filename();
            var n = i.lastIndexOf(".");
            var r, a;
            if (n === -1) {
                return ""
            }
            r = i.substring(n + 1);
            a = /^[a-z0-9%]+$/i.test(r) ? r : "";
            return e ? s.decodePathSegment(a) : a
        }
        else {
            if (e.charAt(0) === ".") {
                e = e.substring(1)
            }
            var o = this.suffix();
            var u;
            if (!o) {
                if (!e) {
                    return this
                }
                this._parts.path += "." + s.recodePath(e)
            }
            else if (!e) {
                u = new RegExp(l("." + o) + "$")
            }
            else {
                u = new RegExp(l(o) + "$")
            }
            if (u) {
                e = s.recodePath(e);
                this._parts.path = this._parts.path.replace(u, e)
            }
            this.build(!t);
            return this
        }
    };
    a.segment = function (e, t, i) {
        var n = this._parts.urn ? ":" : "/";
        var r = this.path();
        var s = r.substring(0, 1) === "/";
        var a = r.split(n);
        if (e !== undefined && typeof e !== "number") {
            i = t;
            t = e;
            e = undefined
        }
        if (e !== undefined && typeof e !== "number") {
            throw new Error("Bad segment '" + e + "', must be 0-based integer")
        }
        if (s) {
            a.shift()
        }
        if (e < 0) {
            e = Math.max(a.length + e, 0)
        }
        if (t === undefined) {
            return e === undefined ? a : a[e]
        }
        else if (e === null || a[e] === undefined) {
            if (c(t)) {
                a = [];
                for (var o = 0, l = t.length; o < l; o++) {
                    if (!t[o].length && (!a.length || !a[a.length - 1].length)) {
                        continue
                    }
                    if (a.length && !a[a.length - 1].length) {
                        a.pop()
                    }
                    a.push(t[o])
                }
            }
            else if (t || typeof t === "string") {
                if (a[a.length - 1] === "") {
                    a[a.length - 1] = t
                }
                else {
                    a.push(t)
                }
            }
        }
        else {
            if (t || typeof t === "string" && t.length) {
                a[e] = t
            }
            else {
                a.splice(e, 1)
            }
        }
        if (s) {
            a.unshift("")
        }
        return this.path(a.join(n), i)
    };
    a.segmentCoded = function (e, t, i) {
        var n, r, a;
        if (typeof e !== "number") {
            i = t;
            t = e;
            e = undefined
        }
        if (t === undefined) {
            n = this.segment(e, t, i);
            if (!c(n)) {
                n = n !== undefined ? s.decode(n) : undefined
            }
            else {
                for (r = 0, a = n.length; r < a; r++) {
                    n[r] = s.decode(n[r])
                }
            }
            return n
        }
        if (!c(t)) {
            t = typeof t === "string" ? s.encode(t) : t
        }
        else {
            for (r = 0, a = t.length; r < a; r++) {
                t[r] = s.decode(t[r])
            }
        }
        return this.segment(e, t, i)
    };
    var x = a.query;
    a.query = function (e, t) {
        if (e === true) {
            return s.parseQuery(this._parts.query, this._parts.escapeQuerySpace)
        }
        else if (typeof e === "function") {
            var i = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
            var n = e.call(this, i);
            this._parts.query = s.buildQuery(n || i, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
            this.build(!t);
            return this
        }
        else if (e !== undefined && typeof e !== "string") {
            this._parts.query = s.buildQuery(e, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
            this.build(!t);
            return this
        }
        else {
            return x.call(this, e, t)
        }
    };
    a.setQuery = function (e, t, i) {
        var n = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        if (typeof e === "object") {
            for (var r in e) {
                if (o.call(e, r)) {
                    n[r] = e[r]
                }
            }
        }
        else if (typeof e === "string") {
            n[e] = t !== undefined ? t : null
        }
        else {
            throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")
        }
        this._parts.query = s.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
        if (typeof e !== "string") {
            i = t
        }
        this.build(!i);
        return this
    };
    a.addQuery = function (e, t, i) {
        var n = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        s.addQuery(n, e, t === undefined ? null : t);
        this._parts.query = s.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
        if (typeof e !== "string") {
            i = t
        }
        this.build(!i);
        return this
    };
    a.removeQuery = function (e, t, i) {
        var n = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        s.removeQuery(n, e, t);
        this._parts.query = s.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
        if (typeof e !== "string") {
            i = t
        }
        this.build(!i);
        return this
    };
    a.hasQuery = function (e, t, i) {
        var n = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        return s.hasQuery(n, e, t, i)
    };
    a.setSearch = a.setQuery;
    a.addSearch = a.addQuery;
    a.removeSearch = a.removeQuery;
    a.hasSearch = a.hasQuery;
    a.normalize = function () {
        if (this._parts.urn) {
            return this.normalizeProtocol(false).normalizeQuery(false).normalizeFragment(false).build()
        }
        return this.normalizeProtocol(false).normalizeHostname(false).normalizePort(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()
    };
    a.normalizeProtocol = function (e) {
        if (typeof this._parts.protocol === "string") {
            this._parts.protocol = this._parts.protocol.toLowerCase();
            this.build(!e)
        }
        return this
    };
    a.normalizeHostname = function (i) {
        if (this._parts.hostname) {
            if (this.is("IDN") && e) {
                this._parts.hostname = e.toASCII(this._parts.hostname)
            }
            else if (this.is("IPv6") && t) {
                this._parts.hostname = t.best(this._parts.hostname)
            }
            this._parts.hostname = this._parts.hostname.toLowerCase();
            this.build(!i)
        }
        return this
    };
    a.normalizePort = function (e) {
        if (typeof this._parts.protocol === "string" && this._parts.port === s.defaultPorts[this._parts.protocol]) {
            this._parts.port = null;
            this.build(!e)
        }
        return this
    };
    a.normalizePath = function (e) {
        if (this._parts.urn) {
            return this
        }
        if (!this._parts.path || this._parts.path === "/") {
            return this
        }
        var t;
        var i = this._parts.path;
        var n, r;
        if (i.charAt(0) !== "/") {
            t = true;
            i = "/" + i
        }
        i = i.replace(/(\/(\.\/)+)|(\/\.$)/g, "/").replace(/\/{2,}/g, "/");
        while (true) {
            n = i.indexOf("/../");
            if (n === -1) {
                break
            }
            else if (n === 0) {
                i = i.substring(3);
                break
            }
            r = i.substring(0, n).lastIndexOf("/");
            if (r === -1) {
                r = n
            }
            i = i.substring(0, r) + i.substring(n + 3)
        }
        if (t && this.is("relative")) {
            i = i.substring(1)
        }
        i = s.recodePath(i);
        this._parts.path = i;
        this.build(!e);
        return this
    };
    a.normalizePathname = a.normalizePath;
    a.normalizeQuery = function (e) {
        if (typeof this._parts.query === "string") {
            if (!this._parts.query.length) {
                this._parts.query = null
            }
            else {
                this.query(s.parseQuery(this._parts.query, this._parts.escapeQuerySpace))
            }
            this.build(!e)
        }
        return this
    };
    a.normalizeFragment = function (e) {
        if (!this._parts.fragment) {
            this._parts.fragment = null;
            this.build(!e)
        }
        return this
    };
    a.normalizeSearch = a.normalizeQuery;
    a.normalizeHash = a.normalizeFragment;
    a.iso8859 = function () {
        var e = s.encode;
        var t = s.decode;
        s.encode = escape;
        s.decode = decodeURIComponent;
        this.normalize();
        s.encode = e;
        s.decode = t;
        return this
    };
    a.unicode = function () {
        var e = s.encode;
        var t = s.decode;
        s.encode = g;
        s.decode = unescape;
        this.normalize();
        s.encode = e;
        s.decode = t;
        return this
    };
    a.readable = function () {
        var t = this.clone();
        t.username("").password("").normalize();
        var i = "";
        if (t._parts.protocol) {
            i += t._parts.protocol + "://"
        }
        if (t._parts.hostname) {
            if (t.is("punycode") && e) {
                i += e.toUnicode(t._parts.hostname);
                if (t._parts.port) {
                    i += ":" + t._parts.port
                }
            }
            else {
                i += t.host()
            }
        }
        if (t._parts.hostname && t._parts.path && t._parts.path.charAt(0) !== "/") {
            i += "/"
        }
        i += t.path(true);
        if (t._parts.query) {
            var n = "";
            for (var r = 0, a = t._parts.query.split("&"), o = a.length; r < o; r++) {
                var l = (a[r] || "").split("=");
                n += "&" + s.decodeQuery(l[0], this._parts.escapeQuerySpace).replace(/&/g, "%26");
                if (l[1] !== undefined) {
                    n += "=" + s.decodeQuery(l[1], this._parts.escapeQuerySpace).replace(/&/g, "%26")
                }
            }
            i += "?" + n.substring(1)
        }
        i += s.decodeQuery(t.hash(), true);
        return i
    };
    a.absoluteTo = function (e) {
        var t = this.clone();
        var i = ["protocol", "username", "password", "hostname", "port"];
        var n, r, a;
        if (this._parts.urn) {
            throw new Error("URNs do not have any generally defined hierarchical components")
        }
        if (!(e instanceof s)) {
            e = new s(e)
        }
        if (!t._parts.protocol) {
            t._parts.protocol = e._parts.protocol
        }
        if (this._parts.hostname) {
            return t
        }
        for (r = 0; a = i[r]; r++) {
            t._parts[a] = e._parts[a]
        }
        i = ["query", "path"];
        for (r = 0; a = i[r]; r++) {
            if (!t._parts[a] && e._parts[a]) {
                t._parts[a] = e._parts[a]
            }
        }
        if (t.path().charAt(0) !== "/") {
            n = e.directory();
            t._parts.path = (n ? n + "/" : "") + t._parts.path;
            t.normalizePath()
        }
        t.build();
        return t
    };
    a.relativeTo = function (e) {
        var t = this.clone().normalize();
        var i, n, r, a, o;
        if (t._parts.urn) {
            throw new Error("URNs do not have any generally defined hierarchical components")
        }
        e = new s(e).normalize();
        i = t._parts;
        n = e._parts;
        a = t.path();
        o = e.path();
        if (a.charAt(0) !== "/") {
            throw new Error("URI is already relative")
        }
        if (o.charAt(0) !== "/") {
            throw new Error("Cannot calculate a URI relative to another relative URI")
        }
        if (i.protocol === n.protocol) {
            i.protocol = null
        }
        if (i.username !== n.username || i.password !== n.password) {
            return t.build()
        }
        if (i.protocol !== null || i.username !== null || i.password !== null) {
            return t.build()
        }
        if (i.hostname === n.hostname && i.port === n.port) {
            i.hostname = null;
            i.port = null
        }
        else {
            return t.build()
        }
        if (a === o) {
            i.path = "";
            return t.build()
        }
        r = s.commonPath(t.path(), e.path());
        if (!r) {
            return t.build()
        }
        var l = n.path.substring(r.length).replace(/[^\/]*$/, "").replace(/.*?\//g, "../");
        i.path = l + i.path.substring(r.length);
        return t.build()
    };
    a.equals = function (e) {
        var t = this.clone();
        var i = new s(e);
        var n = {};
        var r = {};
        var a = {};
        var l, u, f;
        t.normalize();
        i.normalize();
        if (t.toString() === i.toString()) {
            return true
        }
        l = t.query();
        u = i.query();
        t.query("");
        i.query("");
        if (t.toString() !== i.toString()) {
            return false
        }
        if (l.length !== u.length) {
            return false
        }
        n = s.parseQuery(l, this._parts.escapeQuerySpace);
        r = s.parseQuery(u, this._parts.escapeQuerySpace);
        for (f in n) {
            if (o.call(n, f)) {
                if (!c(n[f])) {
                    if (n[f] !== r[f]) {
                        return false
                    }
                }
                else if (!d(n[f], r[f])) {
                    return false
                }
                a[f] = true
            }
        }
        for (f in r) {
            if (o.call(r, f)) {
                if (!a[f]) {
                    return false
                }
            }
        }
        return true
    };
    a.duplicateQueryParameters = function (e) {
        this._parts.duplicateQueryParameters = !!e;
        return this
    };
    a.escapeQuerySpace = function (e) {
        this._parts.escapeQuerySpace = !!e;
        return this
    };
    return s
});
(function (e, t) {
    if (typeof exports === "object") {
        module.exports = t(require("jquery", "./URI"))
    }
    else if (typeof define === "function" && define.amd) {
        define(["jquery", "./URI"], t)
    }
    else {
        t(e.jQuery, e.URI)
    }
})(this, function (e, t) {
    "use strict";
    var i = {};
    var n = {
        "=": function (e, t) {
            return e === t
        },
        "^=": function (e, t, i) {
            return !!(e + "").match(new RegExp("^" + r(t), "i"))
        },
        "$=": function (e, t, i) {
            return !!(e + "").match(new RegExp(r(t) + "$", "i"))
        },
        "*=": function (e, t, i) {
            if (i == "directory") {
                e += "/"
            }
            return !!(e + "").match(new RegExp(r(t), "i"))
        },
        "equals:": function (e, t) {
            return e.equals(t)
        },
        "is:": function (e, t) {
            return e.is(t)
        }
    };

    function r(e) {
        return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1")
    }

    function s(e) {
        var i = e.nodeName.toLowerCase();
        var n = t.domAttributes[i];
        if (i === "input" && e.type !== "image") {
            return undefined
        }
        return n
    }

    function a(t) {
        return {
            get: function (i) {
                return e(i).uri()[t]()
            },
            set: function (i, n) {
                e(i).uri()[t](n);
                return n
            }
        }
    }
    e.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "), function (t, n) {
        i[n] = true;
        e.attrHooks["uri:" + n] = a(n)
    });
    var o = {
        get: function (t) {
            return e(t).uri()
        },
        set: function (t, i) {
            return e(t).uri().href(i).toString()
        }
    };
    e.each(["src", "href", "action", "uri", "cite"], function (t, i) {
        e.attrHooks[i] = {
            set: o.set
        }
    });
    e.attrHooks.uri.get = o.get;
    e.fn.uri = function (e) {
        var i = this.first();
        var n = i.get(0);
        var r = s(n);
        if (!r) {
            throw new Error('Element "' + n.nodeName + '" does not have either property: href, src, action, cite')
        }
        if (e !== undefined) {
            var a = i.data("uri");
            if (a) {
                return a.href(e)
            }
            if (!(e instanceof t)) {
                e = t(e || "")
            }
        }
        else {
            e = i.data("uri");
            if (e) {
                return e
            }
            else {
                e = t(i.attr(r) || "")
            }
        }
        e._dom_element = n;
        e._dom_attribute = r;
        e.normalize();
        i.data("uri", e);
        return e
    };
    t.prototype.build = function (e) {
        if (this._dom_element) {
            this._string = t.build(this._parts);
            this._deferred_build = false;
            this._dom_element.setAttribute(this._dom_attribute, this._string);
            this._dom_element[this._dom_attribute] = this._string
        }
        else if (e === true) {
            this._deferred_build = true
        }
        else if (e === undefined || this._deferred_build) {
            this._string = t.build(this._parts);
            this._deferred_build = false
        }
        return this
    };
    var l;
    var u = /^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;

    function c(t, r) {
        var a, o, l;
        if (!s(t) || !r) {
            return false
        }
        a = r.match(u);
        if (!a || !a[5] && a[2] !== ":" && !n[a[2]]) {
            return false
        }
        l = e(t).uri();
        if (a[5]) {
            return l.is(a[5])
        }
        else if (a[2] === ":") {
            o = a[1].toLowerCase() + ":";
            if (!n[o]) {
                return false
            }
            return n[o](l, a[4])
        }
        else {
            o = a[1].toLowerCase();
            if (!i[o]) {
                return false
            }
            return n[a[2]](l[o](), a[4], o)
        }
        return false
    }
    if (e.expr.createPseudo) {
        l = e.expr.createPseudo(function (e) {
            return function (t) {
                return c(t, e)
            }
        })
    }
    else {
        l = function (e, t, i) {
            return c(e, i[3])
        }
    }
    e.expr[":"].uri = l;
    return {}
});
(function (e, t) {
    e.support.htmlMenuitem = "HTMLMenuItemElement" in window;
    e.support.htmlCommand = "HTMLCommandElement" in window;
    e.support.eventSelectstart = "onselectstart" in document.documentElement;
    if (!e.ui || !e.ui.widget) {
        var i = e.cleanData;
        e.cleanData = function (t) {
            for (var n = 0, r;
                (r = t[n]) != null; n++) {
                try {
                    e(r).triggerHandler("remove")
                }
                catch (e) {}
            }
            i(t)
        }
    }
    var n = null,
        r = false,
        s = e(window),
        a = 0,
        o = {},
        l = {},
        u = {},
        c = {
            selector: null,
            appendTo: null,
            trigger: "right",
            autoHide: false,
            delay: 200,
            reposition: true,
            determinePosition: function (t) {
                if (e.ui && e.ui.position) {
                    t.css("display", "block").position({
                        my: "center top",
                        at: "center bottom",
                        of: this,
                        offset: "0 5",
                        collision: "fit"
                    }).css("display", "none")
                }
                else {
                    var i = this.offset();
                    i.top += this.outerHeight();
                    i.left += this.outerWidth() / 2 - t.outerWidth() / 2;
                    t.css(i)
                }
            },
            position: function (e, t, i) {
                var n = this,
                    r;
                if (!t && !i) {
                    e.determinePosition.call(this, e.$menu);
                    return
                }
                else if (t === "maintain" && i === "maintain") {
                    r = e.$menu.position()
                }
                else {
                    r = {
                        top: i,
                        left: t
                    }
                }
                var a = s.scrollTop() + s.height(),
                    o = s.scrollLeft() + s.width(),
                    l = e.$menu.height(),
                    u = e.$menu.width();
                if (r.top + l > a) {
                    r.top -= l
                }
                if (r.left + u > o) {
                    r.left -= u
                }
                e.$menu.css(r)
            },
            positionSubmenu: function (t) {
                if (e.ui && e.ui.position) {
                    t.css("display", "block").position({
                        my: "left top",
                        at: "right top",
                        of: this,
                        collision: "flipfit fit"
                    }).css("display", "")
                }
                else {
                    var i = {
                        top: 0,
                        left: this.outerWidth()
                    };
                    t.css(i)
                }
            },
            zIndex: 1,
            animation: {
                duration: 50,
                show: "slideDown",
                hide: "slideUp"
            },
            events: {
                show: e.noop,
                hide: e.noop
            },
            callback: null,
            items: {}
        },
        f = {
            timer: null,
            pageX: null,
            pageY: null
        },
        h = function (e) {
            var t = 0,
                i = e;
            while (true) {
                t = Math.max(t, parseInt(i.css("z-index"), 10) || 0);
                i = i.parent();
                if (!i || !i.length || "html body".indexOf(i.prop("nodeName").toLowerCase()) > -1) {
                    break
                }
            }
            return t
        },
        d = {
            abortevent: function (e) {
                e.preventDefault();
                e.stopImmediatePropagation()
            },
            contextmenu: function (t) {
                var i = e(this);
                t.preventDefault();
                t.stopImmediatePropagation();
                if (t.data.trigger != "right" && t.originalEvent) {
                    return
                }
                if (i.hasClass("context-menu-active")) {
                    return
                }
                if (!i.hasClass("context-menu-disabled")) {
                    n = i;
                    if (t.data.build) {
                        var r = t.data.build(n, t);
                        if (r === false) {
                            return
                        }
                        t.data = e.extend(true, {}, c, t.data, r || {});
                        if (!t.data.items || e.isEmptyObject(t.data.items)) {
                            if (window.console) {
                                (console.error || console.log)("No items specified to show in contextMenu")
                            }
                            throw new Error("No Items specified")
                        }
                        t.data.$trigger = n;
                        p.create(t.data)
                    }
                    p.show.call(i, t.data, t.pageX, t.pageY)
                }
            },
            click: function (t) {
                t.preventDefault();
                t.stopImmediatePropagation();
                e(this).trigger(e.Event("contextmenu", {
                    data: t.data,
                    pageX: t.pageX,
                    pageY: t.pageY
                }))
            },
            mousedown: function (t) {
                var i = e(this);
                if (n && n.length && !n.is(i)) {
                    n.data("contextMenu").$menu.trigger("contextmenu:hide")
                }
                if (t.button == 2) {
                    n = i.data("contextMenuActive", true)
                }
            },
            mouseup: function (t) {
                var i = e(this);
                if (i.data("contextMenuActive") && n && n.length && n.is(i) && !i.hasClass("context-menu-disabled")) {
                    t.preventDefault();
                    t.stopImmediatePropagation();
                    n = i;
                    i.trigger(e.Event("contextmenu", {
                        data: t.data,
                        pageX: t.pageX,
                        pageY: t.pageY
                    }))
                }
                i.removeData("contextMenuActive")
            },
            mouseenter: function (t) {
                var i = e(this),
                    r = e(t.relatedTarget),
                    s = e(document);
                if (r.is(".context-menu-list") || r.closest(".context-menu-list").length) {
                    return
                }
                if (n && n.length) {
                    return
                }
                f.pageX = t.pageX;
                f.pageY = t.pageY;
                f.data = t.data;
                s.on("mousemove.contextMenuShow", d.mousemove);
                f.timer = setTimeout(function () {
                    f.timer = null;
                    s.off("mousemove.contextMenuShow");
                    n = i;
                    i.trigger(e.Event("contextmenu", {
                        data: f.data,
                        pageX: f.pageX,
                        pageY: f.pageY
                    }))
                }, t.data.delay)
            },
            mousemove: function (e) {
                f.pageX = e.pageX;
                f.pageY = e.pageY
            },
            mouseleave: function (t) {
                var i = e(t.relatedTarget);
                if (i.is(".context-menu-list") || i.closest(".context-menu-list").length) {
                    return
                }
                try {
                    clearTimeout(f.timer)
                }
                catch (e) {}
                f.timer = null
            },
            layerClick: function (t) {
                var i = e(this),
                    n = i.data("contextMenuRoot"),
                    r = false,
                    a = t.button,
                    o = t.pageX,
                    l = t.pageY,
                    u, c, f;
                t.preventDefault();
                t.stopImmediatePropagation();
                setTimeout(function () {
                    var i, r, f;
                    var h = n.trigger == "left" && a === 0 || n.trigger == "right" && a === 2;
                    if (document.elementFromPoint) {
                        n.$layer.hide();
                        u = document.elementFromPoint(o - s.scrollLeft(), l - s.scrollTop());
                        n.$layer.show()
                    }
                    if (n.reposition && h) {
                        if (document.elementFromPoint) {
                            if (n.$trigger.is(u) || n.$trigger.has(u).length) {
                                n.position.call(n.$trigger, n, o, l);
                                return
                            }
                        }
                        else {
                            c = n.$trigger.offset();
                            i = e(window);
                            c.top += i.scrollTop();
                            if (c.top <= t.pageY) {
                                c.left += i.scrollLeft();
                                if (c.left <= t.pageX) {
                                    c.bottom = c.top + n.$trigger.outerHeight();
                                    if (c.bottom >= t.pageY) {
                                        c.right = c.left + n.$trigger.outerWidth();
                                        if (c.right >= t.pageX) {
                                            n.position.call(n.$trigger, n, o, l);
                                            return
                                        }
                                    }
                                }
                            }
                        }
                    }
                    if (u && h) {
                        n.$trigger.one("contextmenu:hidden", function () {
                            e(u).contextMenu({
                                x: o,
                                y: l
                            })
                        })
                    }
                    n.$menu.trigger("contextmenu:hide")
                }, 50)
            },
            keyStop: function (e, t) {
                if (!t.isInput) {
                    e.preventDefault()
                }
                e.stopPropagation()
            },
            key: function (e) {
                var t = n.data("contextMenu") || {};
                switch (e.keyCode) {
                    case 9:
                    case 38:
                        d.keyStop(e, t);
                        if (t.isInput) {
                            if (e.keyCode == 9 && e.shiftKey) {
                                e.preventDefault();
                                t.$selected && t.$selected.find("input, textarea, select").blur();
                                t.$menu.trigger("prevcommand");
                                return
                            }
                            else if (e.keyCode == 38 && t.$selected.find("input, textarea, select").prop("type") == "checkbox") {
                                e.preventDefault();
                                return
                            }
                        }
                        else if (e.keyCode != 9 || e.shiftKey) {
                            t.$menu.trigger("prevcommand");
                            return
                        }
                    case 40:
                        d.keyStop(e, t);
                        if (t.isInput) {
                            if (e.keyCode == 9) {
                                e.preventDefault();
                                t.$selected && t.$selected.find("input, textarea, select").blur();
                                t.$menu.trigger("nextcommand");
                                return
                            }
                            else if (e.keyCode == 40 && t.$selected.find("input, textarea, select").prop("type") == "checkbox") {
                                e.preventDefault();
                                return
                            }
                        }
                        else {
                            t.$menu.trigger("nextcommand");
                            return
                        }
                        break;
                    case 37:
                        d.keyStop(e, t);
                        if (t.isInput || !t.$selected || !t.$selected.length) {
                            break
                        }
                        if (!t.$selected.parent().hasClass("context-menu-root")) {
                            var i = t.$selected.parent().parent();
                            t.$selected.trigger("contextmenu:blur");
                            t.$selected = i;
                            return
                        }
                        break;
                    case 39:
                        d.keyStop(e, t);
                        if (t.isInput || !t.$selected || !t.$selected.length) {
                            break
                        }
                        var r = t.$selected.data("contextMenu") || {};
                        if (r.$menu && t.$selected.hasClass("context-menu-submenu")) {
                            t.$selected = null;
                            r.$selected = null;
                            r.$menu.trigger("nextcommand");
                            return
                        }
                        break;
                    case 35:
                    case 36:
                        if (t.$selected && t.$selected.find("input, textarea, select").length) {
                            return
                        }
                        else {
                            (t.$selected && t.$selected.parent() || t.$menu).children(":not(.disabled, .not-selectable)")[e.keyCode == 36 ? "first" : "last"]().trigger("contextmenu:focus");
                            e.preventDefault();
                            return
                        }
                        break;
                    case 13:
                        d.keyStop(e, t);
                        if (t.isInput) {
                            if (t.$selected && !t.$selected.is("textarea, select")) {
                                e.preventDefault();
                                return
                            }
                            break
                        }
                        t.$selected && t.$selected.trigger("mouseup");
                        return;
                    case 32:
                    case 33:
                    case 34:
                        d.keyStop(e, t);
                        return;
                    case 27:
                        d.keyStop(e, t);
                        t.$menu.trigger("contextmenu:hide");
                        return;
                    default:
                        var s = String.fromCharCode(e.keyCode).toUpperCase();
                        if (t.accesskeys[s]) {
                            t.accesskeys[s].$node.trigger(t.accesskeys[s].$menu ? "contextmenu:focus" : "mouseup");
                            return
                        }
                        break
                }
                e.stopPropagation();
                t.$selected && t.$selected.trigger(e)
            },
            prevItem: function (t) {
                t.stopPropagation();
                var i = e(this).data("contextMenu") || {};
                if (i.$selected) {
                    var n = i.$selected;
                    i = i.$selected.parent().data("contextMenu") || {};
                    i.$selected = n
                }
                var r = i.$menu.children(),
                    s = !i.$selected || !i.$selected.prev().length ? r.last() : i.$selected.prev(),
                    a = s;
                while (s.hasClass("disabled") || s.hasClass("not-selectable")) {
                    if (s.prev().length) {
                        s = s.prev()
                    }
                    else {
                        s = r.last()
                    }
                    if (s.is(a)) {
                        return
                    }
                }
                if (i.$selected) {
                    d.itemMouseleave.call(i.$selected.get(0), t)
                }
                d.itemMouseenter.call(s.get(0), t);
                var o = s.find("input, textarea, select");
                if (o.length) {
                    o.focus()
                }
            },
            nextItem: function (t) {
                t.stopPropagation();
                var i = e(this).data("contextMenu") || {};
                if (i.$selected) {
                    var n = i.$selected;
                    i = i.$selected.parent().data("contextMenu") || {};
                    i.$selected = n
                }
                var r = i.$menu.children(),
                    s = !i.$selected || !i.$selected.next().length ? r.first() : i.$selected.next(),
                    a = s;
                while (s.hasClass("disabled") || s.hasClass("not-selectable")) {
                    if (s.next().length) {
                        s = s.next()
                    }
                    else {
                        s = r.first()
                    }
                    if (s.is(a)) {
                        return
                    }
                }
                if (i.$selected) {
                    d.itemMouseleave.call(i.$selected.get(0), t)
                }
                d.itemMouseenter.call(s.get(0), t);
                var o = s.find("input, textarea, select");
                if (o.length) {
                    o.focus()
                }
            },
            focusInput: function (t) {
                var i = e(this).closest(".context-menu-item"),
                    n = i.data(),
                    r = n.contextMenu,
                    s = n.contextMenuRoot;
                s.$selected = r.$selected = i;
                s.isInput = r.isInput = true
            },
            blurInput: function (t) {
                var i = e(this).closest(".context-menu-item"),
                    n = i.data(),
                    r = n.contextMenu,
                    s = n.contextMenuRoot;
                s.isInput = r.isInput = false
            },
            menuMouseenter: function (t) {
                var i = e(this).data().contextMenuRoot;
                i.hovering = true
            },
            menuMouseleave: function (t) {
                var i = e(this).data().contextMenuRoot;
                if (i.$layer && i.$layer.is(t.relatedTarget)) {
                    i.hovering = false
                }
            },
            itemMouseenter: function (t) {
                var i = e(this),
                    n = i.data(),
                    r = n.contextMenu,
                    s = n.contextMenuRoot;
                s.hovering = true;
                if (t && s.$layer && s.$layer.is(t.relatedTarget)) {
                    t.preventDefault();
                    t.stopImmediatePropagation()
                }(r.$menu ? r : s).$menu.children(".hover").trigger("contextmenu:blur");
                if (i.hasClass("disabled") || i.hasClass("not-selectable")) {
                    r.$selected = null;
                    return
                }
                i.trigger("contextmenu:focus")
            },
            itemMouseleave: function (t) {
                var i = e(this),
                    n = i.data(),
                    r = n.contextMenu,
                    s = n.contextMenuRoot;
                if (s !== r && s.$layer && s.$layer.is(t.relatedTarget)) {
                    s.$selected && s.$selected.trigger("contextmenu:blur");
                    t.preventDefault();
                    t.stopImmediatePropagation();
                    s.$selected = r.$selected = r.$node;
                    return
                }
                i.trigger("contextmenu:blur")
            },
            itemClick: function (t) {
                var i = e(this),
                    n = i.data(),
                    r = n.contextMenu,
                    s = n.contextMenuRoot,
                    a = n.contextMenuKey,
                    o;
                if (!r.items[a] || i.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")) {
                    return
                }
                t.preventDefault();
                t.stopImmediatePropagation();
                if (e.isFunction(s.callbacks[a]) && Object.prototype.hasOwnProperty.call(s.callbacks, a)) {
                    o = s.callbacks[a]
                }
                else if (e.isFunction(s.callback)) {
                    o = s.callback
                }
                else {
                    return
                }
                if (o.call(s.$trigger, a, s) !== false) {
                    s.$menu.trigger("contextmenu:hide")
                }
                else if (s.$menu.parent().length) {
                    p.update.call(s.$trigger, s)
                }
            },
            inputClick: function (e) {
                e.stopImmediatePropagation()
            },
            hideMenu: function (t, i) {
                var n = e(this).data("contextMenuRoot");
                p.hide.call(n.$trigger, n, i && i.force)
            },
            focusItem: function (t) {
                t.stopPropagation();
                var i = e(this),
                    n = i.data(),
                    r = n.contextMenu,
                    s = n.contextMenuRoot;
                i.addClass("hover").siblings(".hover").trigger("contextmenu:blur");
                r.$selected = s.$selected = i;
                if (r.$node) {
                    s.positionSubmenu.call(r.$node, r.$menu)
                }
            },
            blurItem: function (t) {
                t.stopPropagation();
                var i = e(this),
                    n = i.data(),
                    r = n.contextMenu,
                    s = n.contextMenuRoot;
                i.removeClass("hover");
                r.$selected = null
            }
        },
        p = {
            show: function (t, i, r) {
                var s = e(this),
                    a, o = {};
                e("#context-menu-layer").trigger("mousedown");
                t.$trigger = s;
                if (t.events.show.call(s, t) === false) {
                    n = null;
                    return
                }
                p.update.call(s, t);
                t.position.call(s, t, i, r);
                if (t.zIndex) {
                    o.zIndex = h(s) + t.zIndex
                }
                p.layer.call(t.$menu, t, o.zIndex);
                t.$menu.find("ul").css("zIndex", o.zIndex + 1);
                t.$menu.css(o)[t.animation.show](t.animation.duration, function () {
                    s.trigger("contextmenu:visible")
                });
                s.data("contextMenu", t).addClass("context-menu-active");
                e(document).off("keydown.contextMenu").on("keydown.contextMenu", d.key);
                if (t.autoHide) {
                    e(document).on("mousemove.contextMenuAutoHide", function (e) {
                        var i = s.offset();
                        i.right = i.left + s.outerWidth();
                        i.bottom = i.top + s.outerHeight();
                        if (t.$layer && !t.hovering && (!(e.pageX >= i.left && e.pageX <= i.right) || !(e.pageY >= i.top && e.pageY <= i.bottom))) {
                            t.$menu.trigger("contextmenu:hide")
                        }
                    })
                }
            },
            hide: function (i, r) {
                var s = e(this);
                if (!i) {
                    i = s.data("contextMenu") || {}
                }
                if (!r && i.events && i.events.hide.call(s, i) === false) {
                    return
                }
                s.removeData("contextMenu").removeClass("context-menu-active");
                if (i.$layer) {
                    setTimeout(function (e) {
                        return function () {
                            e.remove()
                        }
                    }(i.$layer), 10);
                    try {
                        delete i.$layer
                    }
                    catch (e) {
                        i.$layer = null
                    }
                }
                n = null;
                i.$menu.find(".hover").trigger("contextmenu:blur");
                i.$selected = null;
                e(document).off(".contextMenuAutoHide").off("keydown.contextMenu");
                i.$menu && i.$menu[i.animation.hide](i.animation.duration, function () {
                    if (i.build) {
                        i.$menu.remove();
                        e.each(i, function (e, n) {
                            switch (e) {
                                case "ns":
                                case "selector":
                                case "build":
                                case "trigger":
                                    return true;
                                default:
                                    i[e] = t;
                                    try {
                                        delete i[e]
                                    }
                                    catch (e) {}
                                    return true
                            }
                        })
                    }
                    setTimeout(function () {
                        s.trigger("contextmenu:hidden")
                    }, 10)
                })
            },
            create: function (i, n) {
                if (n === t) {
                    n = i
                }
                i.$menu = e('<ul class="context-menu-list"></ul>').addClass(i.className || "").data({
                    contextMenu: i,
                    contextMenuRoot: n
                });
                e.each(["callbacks", "commands", "inputs"], function (e, t) {
                    i[t] = {};
                    if (!n[t]) {
                        n[t] = {}
                    }
                });
                n.accesskeys || (n.accesskeys = {});
                e.each(i.items, function (t, r) {
                    var s = e('<li class="context-menu-item"></li>').addClass(r.className || ""),
                        a = null,
                        o = null;
                    s.on("click", e.noop);
                    r.$node = s.data({
                        contextMenu: i,
                        contextMenuRoot: n,
                        contextMenuKey: t
                    });
                    if (r.accesskey) {
                        var l = g(r.accesskey);
                        for (var c = 0, f; f = l[c]; c++) {
                            if (!n.accesskeys[f]) {
                                n.accesskeys[f] = r;
                                r._name = r.name.replace(new RegExp("(" + f + ")", "i"), '<span class="context-menu-accesskey">$1</span>');
                                break
                            }
                        }
                    }
                    if (typeof r == "string") {
                        s.addClass("context-menu-separator not-selectable")
                    }
                    else if (r.type && u[r.type]) {
                        u[r.type].call(s, r, i, n);
                        e.each([i, n], function (i, n) {
                            n.commands[t] = r;
                            if (e.isFunction(r.callback)) {
                                n.callbacks[t] = r.callback
                            }
                        })
                    }
                    else {
                        if (r.type == "html") {
                            s.addClass("context-menu-html not-selectable")
                        }
                        else if (r.type) {
                            a = e("<label></label>").appendTo(s);
                            e("<span></span>").html(r._name || r.name).appendTo(a);
                            s.addClass("context-menu-input");
                            i.hasTypes = true;
                            e.each([i, n], function (e, i) {
                                i.commands[t] = r;
                                i.inputs[t] = r
                            })
                        }
                        else if (r.items) {
                            r.type = "sub"
                        }
                        switch (r.type) {
                            case "text":
                                o = e('<input type="text" value="1" name="" value="">').attr("name", "context-menu-input-" + t).val(r.value || "").appendTo(a);
                                break;
                            case "textarea":
                                o = e('<textarea name=""></textarea>').attr("name", "context-menu-input-" + t).val(r.value || "").appendTo(a);
                                if (r.height) {
                                    o.height(r.height)
                                }
                                break;
                            case "checkbox":
                                o = e('<input type="checkbox" value="1" name="" value="">').attr("name", "context-menu-input-" + t).val(r.value || "").prop("checked", !!r.selected).prependTo(a);
                                break;
                            case "radio":
                                o = e('<input type="radio" value="1" name="" value="">').attr("name", "context-menu-input-" + r.radio).val(r.value || "").prop("checked", !!r.selected).prependTo(a);
                                break;
                            case "select":
                                o = e('<select name="">').attr("name", "context-menu-input-" + t).appendTo(a);
                                if (r.options) {
                                    e.each(r.options, function (t, i) {
                                        e("<option></option>").val(t).text(i).appendTo(o)
                                    });
                                    o.val(r.selected)
                                }
                                break;
                            case "sub":
                                e("<span></span>").html(r._name || r.name).appendTo(s);
                                r.appendTo = r.$node;
                                p.create(r, n);
                                s.data("contextMenu", r).addClass("context-menu-submenu");
                                r.callback = null;
                                break;
                            case "html":
                                e(r.html).appendTo(s);
                                break;
                            default:
                                e.each([i, n], function (i, n) {
                                    n.commands[t] = r;
                                    if (e.isFunction(r.callback)) {
                                        n.callbacks[t] = r.callback
                                    }
                                });
                                e("<span></span>").html(r._name || r.name || "").appendTo(s);
                                break
                        }
                        if (r.type && r.type != "sub" && r.type != "html") {
                            o.on("focus", d.focusInput).on("blur", d.blurInput);
                            if (r.events) {
                                o.on(r.events, i)
                            }
                        }
                        if (r.icon) {
                            s.addClass("mdi mdi-" + r.icon)
                        }
                    }
                    r.$input = o;
                    r.$label = a;
                    s.appendTo(i.$menu);
                    if (!i.hasTypes && e.support.eventSelectstart) {
                        s.on("selectstart.disableTextSelect", d.abortevent)
                    }
                });
                if (!i.$node) {
                    i.$menu.css("display", "none").addClass("context-menu-root")
                }
                i.$menu.appendTo(i.appendTo || document.body)
            },
            resize: function (t, i) {
                t.css({
                    position: "absolute",
                    display: "block"
                });
                t.data("width", Math.ceil(t.width()) + 1);
                t.css({
                    position: "static",
                    minWidth: "0px",
                    maxWidth: "100000px"
                });
                t.find("> li > ul").each(function () {
                    p.resize(e(this), true)
                });
                if (!i) {
                    t.find("ul").andSelf().css({
                        position: "",
                        display: "",
                        minWidth: "",
                        maxWidth: ""
                    }).width(function () {
                        return e(this).data("width")
                    })
                }
            },
            update: function (i, n) {
                var r = this;
                if (n === t) {
                    n = i;
                    p.resize(i.$menu)
                }
                i.$menu.children().each(function () {
                    var t = e(this),
                        s = t.data("contextMenuKey"),
                        a = i.items[s],
                        o = e.isFunction(a.disabled) && a.disabled.call(r, s, n) || a.disabled === true;
                    t[o ? "addClass" : "removeClass"]("disabled");
                    if (a.type) {
                        t.find("input, select, textarea").prop("disabled", o);
                        switch (a.type) {
                            case "text":
                            case "textarea":
                                a.$input.val(a.value || "");
                                break;
                            case "checkbox":
                            case "radio":
                                a.$input.val(a.value || "").prop("checked", !!a.selected);
                                break;
                            case "select":
                                a.$input.val(a.selected || "");
                                break
                        }
                    }
                    if (a.$menu) {
                        p.update.call(r, a, n)
                    }
                })
            },
            layer: function (t, i) {
                var n = t.$layer = e('<div id="context-menu-layer" style="position:fixed; z-index:-1; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({
                    height: s.height(),
                    width: s.width(),
                    display: "block"
                }).data("contextMenuRoot", t).insertBefore(this).on("contextmenu", d.abortevent).on("mousedown", d.layerClick);
                if (!e.support.fixedPosition) {
                    n.css({
                        position: "absolute",
                        height: e(document).height()
                    })
                }
                return n
            }
        };

    function g(e) {
        var t = e.split(/\s+/),
            i = [];
        for (var n = 0, r; r = t[n]; n++) {
            r = r[0].toUpperCase();
            i.push(r)
        }
        return i
    }
    e.fn.contextMenu = function (i) {
        if (i === t) {
            this.first().trigger("contextmenu:show")
        }
        else if (i.x && i.y) {
            this.first().trigger(e.Event("contextmenu:show", {
                pageX: i.x,
                pageY: i.y
            }))
        }
        else if (i === "hide") {
            var n = this.data("contextMenu").$menu;
            n && n.trigger("contextmenu:hide")
        }
        else if (i === "destroy") {
            e.contextMenu("destroy", {
                context: this
            })
        }
        else if (e.isPlainObject(i)) {
            i.context = this;
            e.contextMenu("create", i)
        }
        else if (i) {
            this.removeClass("context-menu-disabled")
        }
        else if (!i) {
            this.addClass("context-menu-disabled")
        }
        return this
    };
    e.contextMenu = function (i, n) {
        if (typeof i != "string") {
            n = i;
            i = "create"
        }
        if (typeof n == "string") {
            n = {
                selector: n
            }
        }
        else if (n === t) {
            n = {}
        }
        var s = e.extend(true, {}, c, n || {});
        var u = e(document);
        var f = u;
        var h = false;
        if (!s.context || !s.context.length) {
            s.context = document
        }
        else {
            f = e(s.context).first();
            s.context = f.get(0);
            h = s.context !== document
        }
        switch (i) {
            case "create":
                if (!s.selector) {
                    throw new Error("No selector specified")
                }
                if (s.selector.match(/.context-menu-(list|item|input)($|\s)/)) {
                    throw new Error('Cannot bind to selector "' + s.selector + '" as it contains a reserved className')
                }
                if (!s.build && (!s.items || e.isEmptyObject(s.items))) {
                    throw new Error("No Items specified")
                }
                a++;
                s.ns = ".contextMenu" + a;
                if (!h) {
                    o[s.selector] = s.ns
                }
                l[s.ns] = s;
                if (!s.trigger) {
                    s.trigger = "right"
                }
                if (!r) {
                    u.on({
                        "contextmenu:hide.contextMenu": d.hideMenu,
                        "prevcommand.contextMenu": d.prevItem,
                        "nextcommand.contextMenu": d.nextItem,
                        "contextmenu.contextMenu": d.abortevent,
                        "mouseenter.contextMenu": d.menuMouseenter,
                        "mouseleave.contextMenu": d.menuMouseleave
                    }, ".context-menu-list").on("mouseup.contextMenu", ".context-menu-input", d.inputClick).on({
                        "mouseup.contextMenu": d.itemClick,
                        "contextmenu:focus.contextMenu": d.focusItem,
                        "contextmenu:blur.contextMenu": d.blurItem,
                        "contextmenu.contextMenu": d.abortevent,
                        "mouseenter.contextMenu": d.itemMouseenter,
                        "mouseleave.contextMenu": d.itemMouseleave
                    }, ".context-menu-item");
                    r = true
                }
                f.on("contextmenu:show" + s.ns, s.selector, s, d.contextmenu);
                if (h) {
                    f.on("remove" + s.ns, function () {
                        e(this).contextMenu("destroy")
                    })
                }
                switch (s.trigger) {
                    case "hover":
                        f.on("mouseenter" + s.ns, s.selector, s, d.mouseenter).on("mouseleave" + s.ns, s.selector, s, d.mouseleave);
                        break;
                    case "left":
                        f.on("click" + s.ns, s.selector, s, d.click);
                        break
                }
                if (!s.build) {
                    p.create(s)
                }
                break;
            case "destroy":
                var g;
                if (h) {
                    var m = s.context;
                    e.each(l, function (t, i) {
                        if (i.context !== m) {
                            return true
                        }
                        g = e(".context-menu-list").filter(":visible");
                        if (g.length && g.data().contextMenuRoot.$trigger.is(e(i.context).find(i.selector))) {
                            g.trigger("contextmenu:hide", {
                                force: true
                            })
                        }
                        try {
                            if (l[i.ns].$menu) {
                                l[i.ns].$menu.remove()
                            }
                            delete l[i.ns]
                        }
                        catch (e) {
                            l[i.ns] = null
                        }
                        e(i.context).off(i.ns);
                        return true
                    })
                }
                else if (!s.selector) {
                    u.off(".contextMenu .contextMenuAutoHide");
                    e.each(l, function (t, i) {
                        e(i.context).off(i.ns)
                    });
                    o = {};
                    l = {};
                    a = 0;
                    r = false;
                    e("#context-menu-layer, .context-menu-list").remove()
                }
                else if (o[s.selector]) {
                    g = e(".context-menu-list").filter(":visible");
                    if (g.length && g.data().contextMenuRoot.$trigger.is(s.selector)) {
                        g.trigger("contextmenu:hide", {
                            force: true
                        })
                    }
                    try {
                        if (l[o[s.selector]].$menu) {
                            l[o[s.selector]].$menu.remove()
                        }
                        delete l[o[s.selector]]
                    }
                    catch (e) {
                        l[o[s.selector]] = null
                    }
                    u.off(o[s.selector])
                }
                break;
            case "html5":
                if (!e.support.htmlCommand && !e.support.htmlMenuitem || typeof n == "boolean" && n) {
                    e('menu[type="context"]').each(function () {
                        if (this.id) {
                            e.contextMenu({
                                selector: "[contextmenu=" + this.id + "]",
                                items: e.contextMenu.fromMenu(this)
                            })
                        }
                    }).css("display", "none")
                }
                break;
            default:
                throw new Error('Unknown operation "' + i + '"')
        }
        return this
    };
    e.contextMenu.setInputValues = function (i, n) {
        if (n === t) {
            n = {}
        }
        e.each(i.inputs, function (e, t) {
            switch (t.type) {
                case "text":
                case "textarea":
                    t.value = n[e] || "";
                    break;
                case "checkbox":
                    t.selected = n[e] ? true : false;
                    break;
                case "radio":
                    t.selected = (n[t.radio] || "") == t.value ? true : false;
                    break;
                case "select":
                    t.selected = n[e] || "";
                    break
            }
        })
    };
    e.contextMenu.getInputValues = function (i, n) {
        if (n === t) {
            n = {}
        }
        e.each(i.inputs, function (e, t) {
            switch (t.type) {
                case "text":
                case "textarea":
                case "select":
                    n[e] = t.$input.val();
                    break;
                case "checkbox":
                    n[e] = t.$input.prop("checked");
                    break;
                case "radio":
                    if (t.$input.prop("checked")) {
                        n[t.radio] = t.value
                    }
                    break
            }
        });
        return n
    };

    function m(t) {
        return t.id && e('label[for="' + t.id + '"]').val() || t.name
    }

    function v(i, n, r) {
        if (!r) {
            r = 0
        }
        n.each(function () {
            var n = e(this),
                s = this,
                a = this.nodeName.toLowerCase(),
                o, l;
            if (a == "label" && n.find("input, textarea, select").length) {
                o = n.text();
                n = n.children().first();
                s = n.get(0);
                a = s.nodeName.toLowerCase()
            }
            switch (a) {
                case "menu":
                    l = {
                        name: n.attr("label"),
                        items: {}
                    };
                    r = v(l.items, n.children(), r);
                    break;
                case "a":
                case "button":
                    l = {
                        name: n.text(),
                        disabled: !!n.attr("disabled"),
                        callback: function () {
                            return function () {
                                n.click()
                            }
                        }()
                    };
                    break;
                case "menuitem":
                case "command":
                    switch (n.attr("type")) {
                        case t:
                        case "command":
                        case "menuitem":
                            l = {
                                name: n.attr("label"),
                                disabled: !!n.attr("disabled"),
                                callback: function () {
                                    return function () {
                                        n.click()
                                    }
                                }()
                            };
                            break;
                        case "checkbox":
                            l = {
                                type: "checkbox",
                                disabled: !!n.attr("disabled"),
                                name: n.attr("label"),
                                selected: !!n.attr("checked")
                            };
                            break;
                        case "radio":
                            l = {
                                type: "radio",
                                disabled: !!n.attr("disabled"),
                                name: n.attr("label"),
                                radio: n.attr("radiogroup"),
                                value: n.attr("id"),
                                selected: !!n.attr("checked")
                            };
                            break;
                        default:
                            l = t
                    }
                    break;
                case "hr":
                    l = "-------";
                    break;
                case "input":
                    switch (n.attr("type")) {
                        case "text":
                            l = {
                                type: "text",
                                name: o || m(s),
                                disabled: !!n.attr("disabled"),
                                value: n.val()
                            };
                            break;
                        case "checkbox":
                            l = {
                                type: "checkbox",
                                name: o || m(s),
                                disabled: !!n.attr("disabled"),
                                selected: !!n.attr("checked")
                            };
                            break;
                        case "radio":
                            l = {
                                type: "radio",
                                name: o || m(s),
                                disabled: !!n.attr("disabled"),
                                radio: !!n.attr("name"),
                                value: n.val(),
                                selected: !!n.attr("checked")
                            };
                            break;
                        default:
                            l = t;
                            break
                    }
                    break;
                case "select":
                    l = {
                        type: "select",
                        name: o || m(s),
                        disabled: !!n.attr("disabled"),
                        selected: n.val(),
                        options: {}
                    };
                    n.children().each(function () {
                        l.options[this.value] = e(this).text()
                    });
                    break;
                case "textarea":
                    l = {
                        type: "textarea",
                        name: o || m(s),
                        disabled: !!n.attr("disabled"),
                        value: n.val()
                    };
                    break;
                case "label":
                    break;
                default:
                    l = {
                        type: "html",
                        html: n.clone(true)
                    };
                    break
            }
            if (l) {
                r++;
                i["key" + r] = l
            }
        });
        return r
    }
    e.contextMenu.fromMenu = function (t) {
        var i = e(t),
            n = {};
        v(n, i.children());
        return n
    };
    e.contextMenu.defaults = c;
    e.contextMenu.types = u;
    e.contextMenu.handle = d;
    e.contextMenu.op = p;
    e.contextMenu.menus = l
})(jQuery);
(function () {
    var e = this;
    var t = e.Backbone;
    var i = [];
    var n = i.push;
    var r = i.slice;
    var s = i.splice;
    var a;
    if (typeof exports !== "undefined") {
        a = exports
    }
    else {
        a = e.Backbone = {}
    }
    a.VERSION = "1.1.0";
    var o = e._;
    if (!o && typeof require !== "undefined") o = require("underscore");
    a.$ = e.jQuery || e.Zepto || e.ender || e.$;
    a.noConflict = function () {
        e.Backbone = t;
        return this
    };
    a.emulateHTTP = false;
    a.emulateJSON = false;
    var l = a.Events = {
        on: function (e, t, i) {
            if (!c(this, "on", e, [t, i]) || !t) return this;
            this._events || (this._events = {});
            var n = this._events[e] || (this._events[e] = []);
            n.push({
                callback: t,
                context: i,
                ctx: i || this
            });
            return this
        },
        once: function (e, t, i) {
            if (!c(this, "once", e, [t, i]) || !t) return this;
            var n = this;
            var r = o.once(function () {
                n.off(e, r);
                t.apply(this, arguments)
            });
            r._callback = t;
            return this.on(e, r, i)
        },
        off: function (e, t, i) {
            var n, r, s, a, l, u, f, h;
            if (!this._events || !c(this, "off", e, [t, i])) return this;
            if (!e && !t && !i) {
                this._events = {};
                return this
            }
            a = e ? [e] : o.keys(this._events);
            for (l = 0, u = a.length; l < u; l++) {
                e = a[l];
                if (s = this._events[e]) {
                    this._events[e] = n = [];
                    if (t || i) {
                        for (f = 0, h = s.length; f < h; f++) {
                            r = s[f];
                            if (t && t !== r.callback && t !== r.callback._callback || i && i !== r.context) {
                                n.push(r)
                            }
                        }
                    }
                    if (!n.length) delete this._events[e]
                }
            }
            return this
        },
        trigger: function (e) {
            if (!this._events) return this;
            var t = r.call(arguments, 1);
            if (!c(this, "trigger", e, t)) return this;
            var i = this._events[e];
            var n = this._events.all;
            if (i) f(i, t);
            if (n) f(n, arguments);
            return this
        },
        stopListening: function (e, t, i) {
            var n = this._listeningTo;
            if (!n) return this;
            var r = !t && !i;
            if (!i && typeof t === "object") i = this;
            if (e)(n = {})[e._listenId] = e;
            for (var s in n) {
                e = n[s];
                e.off(t, i, this);
                if (r || o.isEmpty(e._events)) delete this._listeningTo[s]
            }
            return this
        }
    };
    var u = /\s+/;
    var c = function (e, t, i, n) {
        if (!i) return true;
        if (typeof i === "object") {
            for (var r in i) {
                e[t].apply(e, [r, i[r]].concat(n))
            }
            return false
        }
        if (u.test(i)) {
            var s = i.split(u);
            for (var a = 0, o = s.length; a < o; a++) {
                e[t].apply(e, [s[a]].concat(n))
            }
            return false
        }
        return true
    };
    var f = function (e, t) {
        var i, n = -1,
            r = e.length,
            s = t[0],
            a = t[1],
            o = t[2];
        switch (t.length) {
            case 0:
                while (++n < r)(i = e[n]).callback.call(i.ctx);
                return;
            case 1:
                while (++n < r)(i = e[n]).callback.call(i.ctx, s);
                return;
            case 2:
                while (++n < r)(i = e[n]).callback.call(i.ctx, s, a);
                return;
            case 3:
                while (++n < r)(i = e[n]).callback.call(i.ctx, s, a, o);
                return;
            default:
                while (++n < r)(i = e[n]).callback.apply(i.ctx, t)
        }
    };
    var h = {
        listenTo: "on",
        listenToOnce: "once"
    };
    o.each(h, function (e, t) {
        l[t] = function (t, i, n) {
            var r = this._listeningTo || (this._listeningTo = {});
            var s = t._listenId || (t._listenId = o.uniqueId("l"));
            r[s] = t;
            if (!n && typeof i === "object") n = this;
            t[e](i, n, this);
            return this
        }
    });
    l.bind = l.on;
    l.unbind = l.off;
    o.extend(a, l);
    var d = a.Model = function (e, t) {
        var i = e || {};
        t || (t = {});
        this.cid = o.uniqueId("c");
        this.attributes = {};
        if (t.collection) this.collection = t.collection;
        if (t.parse) i = this.parse(i, t) || {};
        i = o.defaults({}, i, o.result(this, "defaults"));
        this.set(i, t);
        this.changed = {};
        this.initialize.apply(this, arguments)
    };
    o.extend(d.prototype, l, {
        changed: null,
        validationError: null,
        idAttribute: "id",
        initialize: function () {},
        toJSON: function (e) {
            return o.clone(this.attributes)
        },
        sync: function () {
            return a.sync.apply(this, arguments)
        },
        get: function (e) {
            return this.attributes[e]
        },
        escape: function (e) {
            return o.escape(this.get(e))
        },
        has: function (e) {
            return this.get(e) != null
        },
        set: function (e, t, i) {
            var n, r, s, a, l, u, c, f;
            if (e == null) return this;
            if (typeof e === "object") {
                r = e;
                i = t
            }
            else {
                (r = {})[e] = t
            }
            i || (i = {});
            if (!this._validate(r, i)) return false;
            s = i.unset;
            l = i.silent;
            a = [];
            u = this._changing;
            this._changing = true;
            if (!u) {
                this._previousAttributes = o.clone(this.attributes);
                this.changed = {}
            }
            f = this.attributes, c = this._previousAttributes;
            if (this.idAttribute in r) this.id = r[this.idAttribute];
            for (n in r) {
                t = r[n];
                if (!o.isEqual(f[n], t)) a.push(n);
                if (!o.isEqual(c[n], t)) {
                    this.changed[n] = t
                }
                else {
                    delete this.changed[n]
                }
                s ? delete f[n] : f[n] = t
            }
            if (!l) {
                if (a.length) this._pending = true;
                for (var h = 0, d = a.length; h < d; h++) {
                    this.trigger("change:" + a[h], this, f[a[h]], i)
                }
            }
            if (u) return this;
            if (!l) {
                while (this._pending) {
                    this._pending = false;
                    this.trigger("change", this, i)
                }
            }
            this._pending = false;
            this._changing = false;
            return this
        },
        unset: function (e, t) {
            return this.set(e, void 0, o.extend({}, t, {
                unset: true
            }))
        },
        clear: function (e) {
            var t = {};
            for (var i in this.attributes) t[i] = void 0;
            return this.set(t, o.extend({}, e, {
                unset: true
            }))
        },
        hasChanged: function (e) {
            if (e == null) return !o.isEmpty(this.changed);
            return o.has(this.changed, e)
        },
        changedAttributes: function (e) {
            if (!e) return this.hasChanged() ? o.clone(this.changed) : false;
            var t, i = false;
            var n = this._changing ? this._previousAttributes : this.attributes;
            for (var r in e) {
                if (o.isEqual(n[r], t = e[r])) continue;
                (i || (i = {}))[r] = t
            }
            return i
        },
        previous: function (e) {
            if (e == null || !this._previousAttributes) return null;
            return this._previousAttributes[e]
        },
        previousAttributes: function () {
            return o.clone(this._previousAttributes)
        },
        fetch: function (e) {
            e = e ? o.clone(e) : {};
            if (e.parse === void 0) e.parse = true;
            var t = this;
            var i = e.success;
            e.success = function (n) {
                if (!t.set(t.parse(n, e), e)) return false;
                if (i) i(t, n, e);
                t.trigger("sync", t, n, e)
            };
            L(this, e);
            return this.sync("read", this, e)
        },
        save: function (e, t, i) {
            var n, r, s, a = this.attributes;
            if (e == null || typeof e === "object") {
                n = e;
                i = t
            }
            else {
                (n = {})[e] = t
            }
            i = o.extend({
                validate: true
            }, i);
            if (n && !i.wait) {
                if (!this.set(n, i)) return false
            }
            else {
                if (!this._validate(n, i)) return false
            }
            if (n && i.wait) {
                this.attributes = o.extend({}, a, n)
            }
            if (i.parse === void 0) i.parse = true;
            var l = this;
            var u = i.success;
            i.success = function (e) {
                l.attributes = a;
                var t = l.parse(e, i);
                if (i.wait) t = o.extend(n || {}, t);
                if (o.isObject(t) && !l.set(t, i)) {
                    return false
                }
                if (u) u(l, e, i);
                l.trigger("sync", l, e, i)
            };
            L(this, i);
            r = this.isNew() ? "create" : i.patch ? "patch" : "update";
            if (r === "patch") i.attrs = n;
            s = this.sync(r, this, i);
            if (n && i.wait) this.attributes = a;
            return s
        },
        destroy: function (e) {
            e = e ? o.clone(e) : {};
            var t = this;
            var i = e.success;
            var n = function () {
                t.trigger("destroy", t, t.collection, e)
            };
            e.success = function (r) {
                if (e.wait || t.isNew()) n();
                if (i) i(t, r, e);
                if (!t.isNew()) t.trigger("sync", t, r, e)
            };
            if (this.isNew()) {
                e.success();
                return false
            }
            L(this, e);
            var r = this.sync("delete", this, e);
            if (!e.wait) n();
            return r
        },
        url: function () {
            var e = o.result(this, "urlRoot") || o.result(this.collection, "url") || O();
            if (this.isNew()) return e;
            return e + (e.charAt(e.length - 1) === "/" ? "" : "/") + encodeURIComponent(this.id)
        },
        parse: function (e, t) {
            return e
        },
        clone: function () {
            return new this.constructor(this.attributes)
        },
        isNew: function () {
            return this.id == null
        },
        isValid: function (e) {
            return this._validate({}, o.extend(e || {}, {
                validate: true
            }))
        },
        _validate: function (e, t) {
            if (!t.validate || !this.validate) return true;
            e = o.extend({}, this.attributes, e);
            var i = this.validationError = this.validate(e, t) || null;
            if (!i) return true;
            this.trigger("invalid", this, i, o.extend(t, {
                validationError: i
            }));
            return false
        }
    });
    var p = ["keys", "values", "pairs", "invert", "pick", "omit"];
    o.each(p, function (e) {
        d.prototype[e] = function () {
            var t = r.call(arguments);
            t.unshift(this.attributes);
            return o[e].apply(o, t)
        }
    });
    var g = a.Collection = function (e, t) {
        t || (t = {});
        if (t.model) this.model = t.model;
        if (t.comparator !== void 0) this.comparator = t.comparator;
        this._reset();
        this.initialize.apply(this, arguments);
        if (e) this.reset(e, o.extend({
            silent: true
        }, t))
    };
    var m = {
        add: true,
        remove: true,
        merge: true
    };
    var v = {
        add: true,
        remove: false
    };
    o.extend(g.prototype, l, {
        model: d,
        initialize: function () {},
        toJSON: function (e) {
            return this.map(function (t) {
                return t.toJSON(e)
            })
        },
        sync: function () {
            return a.sync.apply(this, arguments)
        },
        add: function (e, t) {
            return this.set(e, o.extend({
                merge: false
            }, t, v))
        },
        remove: function (e, t) {
            var i = !o.isArray(e);
            e = i ? [e] : o.clone(e);
            t || (t = {});
            var n, r, s, a;
            for (n = 0, r = e.length; n < r; n++) {
                a = e[n] = this.get(e[n]);
                if (!a) continue;
                delete this._byId[a.id];
                delete this._byId[a.cid];
                s = this.indexOf(a);
                this.models.splice(s, 1);
                this.length--;
                if (!t.silent) {
                    t.index = s;
                    a.trigger("remove", a, this, t)
                }
                this._removeReference(a)
            }
            return i ? e[0] : e
        },
        set: function (e, t) {
            t = o.defaults({}, t, m);
            if (t.parse) e = this.parse(e, t);
            var i = !o.isArray(e);
            e = i ? e ? [e] : [] : o.clone(e);
            var n, r, s, a, l, u, c;
            var f = t.at;
            var h = this.model;
            var p = this.comparator && f == null && t.sort !== false;
            var g = o.isString(this.comparator) ? this.comparator : null;
            var v = [],
                y = [],
                b = {};
            var w = t.add,
                _ = t.merge,
                x = t.remove;
            var k = !p && w && x ? [] : false;
            for (n = 0, r = e.length; n < r; n++) {
                l = e[n];
                if (l instanceof d) {
                    s = a = l
                }
                else {
                    s = l[h.prototype.idAttribute]
                }
                if (u = this.get(s)) {
                    if (x) b[u.cid] = true;
                    if (_) {
                        l = l === a ? a.attributes : l;
                        if (t.parse) l = u.parse(l, t);
                        u.set(l, t);
                        if (p && !c && u.hasChanged(g)) c = true
                    }
                    e[n] = u
                }
                else if (w) {
                    a = e[n] = this._prepareModel(l, t);
                    if (!a) continue;
                    v.push(a);
                    a.on("all", this._onModelEvent, this);
                    this._byId[a.cid] = a;
                    if (a.id != null) this._byId[a.id] = a
                }
                if (k) k.push(u || a)
            }
            if (x) {
                for (n = 0, r = this.length; n < r; ++n) {
                    if (!b[(a = this.models[n]).cid]) y.push(a)
                }
                if (y.length) this.remove(y, t)
            }
            if (v.length || k && k.length) {
                if (p) c = true;
                this.length += v.length;
                if (f != null) {
                    for (n = 0, r = v.length; n < r; n++) {
                        this.models.splice(f + n, 0, v[n])
                    }
                }
                else {
                    if (k) this.models.length = 0;
                    var C = k || v;
                    for (n = 0, r = C.length; n < r; n++) {
                        this.models.push(C[n])
                    }
                }
            }
            if (c) this.sort({
                silent: true
            });
            if (!t.silent) {
                for (n = 0, r = v.length; n < r; n++) {
                    (a = v[n]).trigger("add", a, this, t)
                }
                if (c || k && k.length) this.trigger("sort", this, t)
            }
            return i ? e[0] : e
        },
        reset: function (e, t) {
            t || (t = {});
            for (var i = 0, n = this.models.length; i < n; i++) {
                this._removeReference(this.models[i])
            }
            t.previousModels = this.models;
            this._reset();
            e = this.add(e, o.extend({
                silent: true
            }, t));
            if (!t.silent) this.trigger("reset", this, t);
            return e
        },
        push: function (e, t) {
            return this.add(e, o.extend({
                at: this.length
            }, t))
        },
        pop: function (e) {
            var t = this.at(this.length - 1);
            this.remove(t, e);
            return t
        },
        unshift: function (e, t) {
            return this.add(e, o.extend({
                at: 0
            }, t))
        },
        shift: function (e) {
            var t = this.at(0);
            this.remove(t, e);
            return t
        },
        slice: function () {
            return r.apply(this.models, arguments)
        },
        get: function (e) {
            if (e == null) return void 0;
            return this._byId[e.id] || this._byId[e.cid] || this._byId[e]
        },
        at: function (e) {
            return this.models[e]
        },
        where: function (e, t) {
            if (o.isEmpty(e)) return t ? void 0 : [];
            return this[t ? "find" : "filter"](function (t) {
                for (var i in e) {
                    if (e[i] !== t.get(i)) return false
                }
                return true
            })
        },
        findWhere: function (e) {
            return this.where(e, true)
        },
        sort: function (e) {
            if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
            e || (e = {});
            if (o.isString(this.comparator) || this.comparator.length === 1) {
                this.models = this.sortBy(this.comparator, this)
            }
            else {
                this.models.sort(o.bind(this.comparator, this))
            }
            if (!e.silent) this.trigger("sort", this, e);
            return this
        },
        pluck: function (e) {
            return o.invoke(this.models, "get", e)
        },
        fetch: function (e) {
            e = e ? o.clone(e) : {};
            if (e.parse === void 0) e.parse = true;
            var t = e.success;
            var i = this;
            e.success = function (n) {
                var r = e.reset ? "reset" : "set";
                i[r](n, e);
                if (t) t(i, n, e);
                i.trigger("sync", i, n, e)
            };
            L(this, e);
            return this.sync("read", this, e)
        },
        create: function (e, t) {
            t = t ? o.clone(t) : {};
            if (!(e = this._prepareModel(e, t))) return false;
            if (!t.wait) this.add(e, t);
            var i = this;
            var n = t.success;
            t.success = function (e, t, r) {
                if (r.wait) i.add(e, r);
                if (n) n(e, t, r)
            };
            e.save(null, t);
            return e
        },
        parse: function (e, t) {
            return e
        },
        clone: function () {
            return new this.constructor(this.models)
        },
        _reset: function () {
            this.length = 0;
            this.models = [];
            this._byId = {}
        },
        _prepareModel: function (e, t) {
            if (e instanceof d) {
                if (!e.collection) e.collection = this;
                return e
            }
            t = t ? o.clone(t) : {};
            t.collection = this;
            var i = new this.model(e, t);
            if (!i.validationError) return i;
            this.trigger("invalid", this, i.validationError, t);
            return false
        },
        _removeReference: function (e) {
            if (this === e.collection) delete e.collection;
            e.off("all", this._onModelEvent, this)
        },
        _onModelEvent: function (e, t, i, n) {
            if ((e === "add" || e === "remove") && i !== this) return;
            if (e === "destroy") this.remove(t, n);
            if (t && e === "change:" + t.idAttribute) {
                delete this._byId[t.previous(t.idAttribute)];
                if (t.id != null) this._byId[t.id] = t
            }
            this.trigger.apply(this, arguments)
        }
    });
    var y = ["forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain"];
    o.each(y, function (e) {
        g.prototype[e] = function () {
            var t = r.call(arguments);
            t.unshift(this.models);
            return o[e].apply(o, t)
        }
    });
    var b = ["groupBy", "countBy", "sortBy"];
    o.each(b, function (e) {
        g.prototype[e] = function (t, i) {
            var n = o.isFunction(t) ? t : function (e) {
                return e.get(t)
            };
            return o[e](this.models, n, i)
        }
    });
    var w = a.View = function (e) {
        this.cid = o.uniqueId("view");
        e || (e = {});
        o.extend(this, o.pick(e, x));
        this._ensureElement();
        this.initialize.apply(this, arguments);
        this.delegateEvents()
    };
    var _ = /^(\S+)\s*(.*)$/;
    var x = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"];
    o.extend(w.prototype, l, {
        tagName: "div",
        $: function (e) {
            return this.$el.find(e)
        },
        initialize: function () {},
        render: function () {
            return this
        },
        remove: function () {
            this.$el.remove();
            this.stopListening();
            return this
        },
        setElement: function (e, t) {
            if (this.$el) this.undelegateEvents();
            this.$el = e instanceof a.$ ? e : a.$(e);
            this.el = this.$el[0];
            if (t !== false) this.delegateEvents();
            return this
        },
        delegateEvents: function (e) {
            if (!(e || (e = o.result(this, "events")))) return this;
            this.undelegateEvents();
            for (var t in e) {
                var i = e[t];
                if (!o.isFunction(i)) i = this[e[t]];
                if (!i) continue;
                var n = t.match(_);
                var r = n[1],
                    s = n[2];
                i = o.bind(i, this);
                r += ".delegateEvents" + this.cid;
                if (s === "") {
                    this.$el.on(r, i)
                }
                else {
                    this.$el.on(r, s, i)
                }
            }
            return this
        },
        undelegateEvents: function () {
            this.$el.off(".delegateEvents" + this.cid);
            return this
        },
        _ensureElement: function () {
            if (!this.el) {
                var e = o.extend({}, o.result(this, "attributes"));
                if (this.id) e.id = o.result(this, "id");
                if (this.className) e["class"] = o.result(this, "className");
                var t = a.$("<" + o.result(this, "tagName") + ">").attr(e);
                this.setElement(t, false)
            }
            else {
                this.setElement(o.result(this, "el"), false)
            }
        }
    });
    a.sync = function (e, t, i) {
        var n = C[e];
        o.defaults(i || (i = {}), {
            emulateHTTP: a.emulateHTTP,
            emulateJSON: a.emulateJSON
        });
        var r = {
            type: n,
            dataType: "json"
        };
        if (!i.url) {
            r.url = o.result(t, "url") || O()
        }
        if (i.data == null && t && (e === "create" || e === "update" || e === "patch")) {
            r.contentType = "application/json";
            r.data = JSON.stringify(i.attrs || t.toJSON(i))
        }
        if (i.emulateJSON) {
            r.contentType = "application/x-www-form-urlencoded";
            r.data = r.data ? {
                model: r.data
            } : {}
        }
        if (i.emulateHTTP && (n === "PUT" || n === "DELETE" || n === "PATCH")) {
            r.type = "POST";
            if (i.emulateJSON) r.data._method = n;
            var s = i.beforeSend;
            i.beforeSend = function (e) {
                e.setRequestHeader("X-HTTP-Method-Override", n);
                if (s) return s.apply(this, arguments)
            }
        }
        if (r.type !== "GET" && !i.emulateJSON) {
            r.processData = false
        }
        if (r.type === "PATCH" && k) {
            r.xhr = function () {
                return new ActiveXObject("Microsoft.XMLHTTP")
            }
        }
        var l = i.xhr = a.ajax(o.extend(r, i));
        t.trigger("request", t, l, i);
        return l
    };
    var k = typeof window !== "undefined" && !!window.ActiveXObject && !(window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent);
    var C = {
        create: "POST",
        update: "PUT",
        patch: "PATCH",
        delete: "DELETE",
        read: "GET"
    };
    a.ajax = function () {
        return a.$.ajax.apply(a.$, arguments)
    };
    var M = a.Router = function (e) {
        e || (e = {});
        if (e.routes) this.routes = e.routes;
        this._bindRoutes();
        this.initialize.apply(this, arguments)
    };
    var T = /\((.*?)\)/g;
    var D = /(\(\?)?:\w+/g;
    var S = /\*\w+/g;
    var E = /[\-{}\[\]+?.,\\\^$|#\s]/g;
    o.extend(M.prototype, l, {
        initialize: function () {},
        route: function (e, t, i) {
            if (!o.isRegExp(e)) e = this._routeToRegExp(e);
            if (o.isFunction(t)) {
                i = t;
                t = ""
            }
            if (!i) i = this[t];
            var n = this;
            a.history.route(e, function (r) {
                var s = n._extractParameters(e, r);
                i && i.apply(n, s);
                n.trigger.apply(n, ["route:" + t].concat(s));
                n.trigger("route", t, s);
                a.history.trigger("route", n, t, s)
            });
            return this
        },
        navigate: function (e, t) {
            a.history.navigate(e, t);
            return this
        },
        _bindRoutes: function () {
            if (!this.routes) return;
            this.routes = o.result(this, "routes");
            var e, t = o.keys(this.routes);
            while ((e = t.pop()) != null) {
                this.route(e, this.routes[e])
            }
        },
        _routeToRegExp: function (e) {
            e = e.replace(E, "\\$&").replace(T, "(?:$1)?").replace(D, function (e, t) {
                return t ? e : "([^/]+)"
            }).replace(S, "(.*?)");
            return new RegExp("^" + e + "$")
        },
        _extractParameters: function (e, t) {
            var i = e.exec(t).slice(1);
            return o.map(i, function (e) {
                return e ? decodeURIComponent(e) : null
            })
        }
    });
    var A = a.History = function () {
        this.handlers = [];
        o.bindAll(this, "checkUrl");
        if (typeof window !== "undefined") {
            this.location = window.location;
            this.history = window.history
        }
    };
    var I = /^[#\/]|\s+$/g;
    var $ = /^\/+|\/+$/g;
    var P = /msie [\w.]+/;
    var z = /\/$/;
    var N = /[?#].*$/;
    A.started = false;
    o.extend(A.prototype, l, {
        interval: 50,
        getHash: function (e) {
            var t = (e || this).location.href.match(/#(.*)$/);
            return t ? t[1] : ""
        },
        getFragment: function (e, t) {
            if (e == null) {
                if (this._hasPushState || !this._wantsHashChange || t) {
                    e = this.location.pathname;
                    var i = this.root.replace(z, "");
                    if (!e.indexOf(i)) e = e.slice(i.length)
                }
                else {
                    e = this.getHash()
                }
            }
            return e.replace(I, "")
        },
        start: function (e) {
            if (A.started) throw new Error("Backbone.history has already been started");
            A.started = true;
            this.options = o.extend({
                root: "/"
            }, this.options, e);
            this.root = this.options.root;
            this._wantsHashChange = this.options.hashChange !== false;
            this._wantsPushState = !!this.options.pushState;
            this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
            var t = this.getFragment();
            var i = document.documentMode;
            var n = P.exec(navigator.userAgent.toLowerCase()) && (!i || i <= 7);
            this.root = ("/" + this.root + "/").replace($, "/");
            if (n && this._wantsHashChange) {
                this.iframe = a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;
                this.navigate(t)
            }
            if (this._hasPushState) {
                a.$(window).on("popstate", this.checkUrl)
            }
            else if (this._wantsHashChange && "onhashchange" in window && !n) {
                a.$(window).on("hashchange", this.checkUrl)
            }
            else if (this._wantsHashChange) {
                this._checkUrlInterval = setInterval(this.checkUrl, this.interval)
            }
            this.fragment = t;
            var r = this.location;
            var s = r.pathname.replace(/[^\/]$/, "$&/") === this.root;
            if (this._wantsHashChange && this._wantsPushState) {
                if (!this._hasPushState && !s) {
                    this.fragment = this.getFragment(null, true);
                    this.location.replace(this.root + this.location.search + "#" + this.fragment);
                    return true
                }
                else if (this._hasPushState && s && r.hash) {
                    this.fragment = this.getHash().replace(I, "");
                    this.history.replaceState({}, document.title, this.root + this.fragment + r.search)
                }
            }
            if (!this.options.silent) return this.loadUrl()
        },
        stop: function () {
            a.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl);
            clearInterval(this._checkUrlInterval);
            A.started = false
        },
        route: function (e, t) {
            this.handlers.unshift({
                route: e,
                callback: t
            })
        },
        checkUrl: function (e) {
            var t = this.getFragment();
            if (t === this.fragment && this.iframe) {
                t = this.getFragment(this.getHash(this.iframe))
            }
            if (t === this.fragment) return false;
            if (this.iframe) this.navigate(t);
            this.loadUrl()
        },
        loadUrl: function (e) {
            e = this.fragment = this.getFragment(e);
            return o.any(this.handlers, function (t) {
                if (t.route.test(e)) {
                    t.callback(e);
                    return true
                }
            })
        },
        navigate: function (e, t) {
            if (!A.started) return false;
            if (!t || t === true) t = {
                trigger: !!t
            };
            var i = this.root + (e = this.getFragment(e || ""));
            e = e.replace(N, "");
            if (this.fragment === e) return;
            this.fragment = e;
            if (e === "" && i !== "/") i = i.slice(0, -1);
            if (this._hasPushState) {
                this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, i)
            }
            else if (this._wantsHashChange) {
                this._updateHash(this.location, e, t.replace);
                if (this.iframe && e !== this.getFragment(this.getHash(this.iframe))) {
                    if (!t.replace) this.iframe.document.open().close();
                    this._updateHash(this.iframe.location, e, t.replace)
                }
            }
            else {
                return this.location.assign(i)
            }
            if (t.trigger) return this.loadUrl(e)
        },
        _updateHash: function (e, t, i) {
            if (i) {
                var n = e.href.replace(/(javascript:|#).*$/, "");
                e.replace(n + "#" + t)
            }
            else {
                e.hash = "#" + t
            }
        }
    });
    a.history = new A;
    var H = function (e, t) {
        var i = this;
        var n;
        if (e && o.has(e, "constructor")) {
            n = e.constructor
        }
        else {
            n = function () {
                return i.apply(this, arguments)
            }
        }
        o.extend(n, i, t);
        var r = function () {
            this.constructor = n
        };
        r.prototype = i.prototype;
        n.prototype = new r;
        if (e) o.extend(n.prototype, e);
        n.__super__ = i.prototype;
        return n
    };
    d.extend = g.extend = M.extend = w.extend = A.extend = H;
    var O = function () {
        throw new Error('A "url" property or function must be specified')
    };
    var L = function (e, t) {
        var i = t.error;
        t.error = function (n) {
            if (i) i(e, n, t);
            e.trigger("error", e, n, t)
        }
    }
}).call(this);
(function () {
    if (!Date.now) Date.now = function () {
        return +new Date
    };
    try {
        document.createElement("div").style.setProperty("opacity", 0, "")
    }
    catch (error) {
        var e = CSSStyleDeclaration.prototype,
            t = e.setProperty;
        e.setProperty = function (e, i, n) {
            t.call(this, e, i + "", n)
        }
    }
    d3 = {
        version: "2.9.6"
    };

    function i(e, t) {
        try {
            for (var i in t) {
                Object.defineProperty(e.prototype, i, {
                    value: t[i],
                    enumerable: false
                })
            }
        }
        catch (e) {
            e.prototype = t
        }
    }
    var n = s;

    function r(e) {
        var t = -1,
            i = e.length,
            n = [];
        while (++t < i) n.push(e[t]);
        return n
    }

    function s(e) {
        return Array.prototype.slice.call(e)
    }
    try {
        n(document.documentElement.childNodes)[0].nodeType
    }
    catch (e) {
        n = r
    }
    var a = [].__proto__ ? function (e, t) {
        e.__proto__ = t
    } : function (e, t) {
        for (var i in t) e[i] = t[i]
    };
    d3.map = function (e) {
        var t = new o;
        for (var i in e) t.set(i, e[i]);
        return t
    };

    function o() {}
    i(o, {
        has: function (e) {
            return l + e in this
        },
        get: function (e) {
            return this[l + e]
        },
        set: function (e, t) {
            return this[l + e] = t
        },
        remove: function (e) {
            e = l + e;
            return e in this && delete this[e]
        },
        keys: function () {
            var e = [];
            this.forEach(function (t) {
                e.push(t)
            });
            return e
        },
        values: function () {
            var e = [];
            this.forEach(function (t, i) {
                e.push(i)
            });
            return e
        },
        entries: function () {
            var e = [];
            this.forEach(function (t, i) {
                e.push({
                    key: t,
                    value: i
                })
            });
            return e
        },
        forEach: function (e) {
            for (var t in this) {
                if (t.charCodeAt(0) === u) {
                    e.call(this, t.substring(1), this[t])
                }
            }
        }
    });
    var l = "\x00",
        u = l.charCodeAt(0);

    function c(e) {
        return e
    }

    function f() {
        return this
    }

    function h() {
        return true
    }

    function d(e) {
        return typeof e === "function" ? e : function () {
            return e
        }
    }
    d3.functor = d;
    d3.rebind = function (e, t) {
        var i = 1,
            n = arguments.length,
            r;
        while (++i < n) e[r = arguments[i]] = p(e, t, t[r]);
        return e
    };

    function p(e, t, i) {
        return function () {
            var n = i.apply(t, arguments);
            return arguments.length ? e : n
        }
    }
    d3.ascending = function (e, t) {
        return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN
    };
    d3.descending = function (e, t) {
        return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN
    };
    d3.mean = function (e, t) {
        var i = e.length,
            n, r = 0,
            s = -1,
            a = 0;
        if (arguments.length === 1) {
            while (++s < i)
                if (g(n = e[s])) r += (n - r) / ++a
        }
        else {
            while (++s < i)
                if (g(n = t.call(e, e[s], s))) r += (n - r) / ++a
        }
        return a ? r : undefined
    };
    d3.median = function (e, t) {
        if (arguments.length > 1) e = e.map(t);
        e = e.filter(g);
        return e.length ? d3.quantile(e.sort(d3.ascending), .5) : undefined
    };
    d3.min = function (e, t) {
        var i = -1,
            n = e.length,
            r, s;
        if (arguments.length === 1) {
            while (++i < n && ((r = e[i]) == null || r != r)) r = undefined;
            while (++i < n)
                if ((s = e[i]) != null && r > s) r = s
        }
        else {
            while (++i < n && ((r = t.call(e, e[i], i)) == null || r != r)) r = undefined;
            while (++i < n)
                if ((s = t.call(e, e[i], i)) != null && r > s) r = s
        }
        return r
    };
    d3.max = function (e, t) {
        var i = -1,
            n = e.length,
            r, s;
        if (arguments.length === 1) {
            while (++i < n && ((r = e[i]) == null || r != r)) r = undefined;
            while (++i < n)
                if ((s = e[i]) != null && s > r) r = s
        }
        else {
            while (++i < n && ((r = t.call(e, e[i], i)) == null || r != r)) r = undefined;
            while (++i < n)
                if ((s = t.call(e, e[i], i)) != null && s > r) r = s
        }
        return r
    };
    d3.extent = function (e, t) {
        var i = -1,
            n = e.length,
            r, s, a;
        if (arguments.length === 1) {
            while (++i < n && ((r = a = e[i]) == null || r != r)) r = a = undefined;
            while (++i < n)
                if ((s = e[i]) != null) {
                    if (r > s) r = s;
                    if (a < s) a = s
                }
        }
        else {
            while (++i < n && ((r = a = t.call(e, e[i], i)) == null || r != r)) r = undefined;
            while (++i < n)
                if ((s = t.call(e, e[i], i)) != null) {
                    if (r > s) r = s;
                    if (a < s) a = s
                }
        }
        return [r, a]
    };
    d3.random = {
        normal: function (e, t) {
            if (arguments.length < 2) t = 1;
            if (arguments.length < 1) e = 0;
            return function () {
                var i, n, r;
                do {
                    i = Math.random() * 2 - 1;
                    n = Math.random() * 2 - 1;
                    r = i * i + n * n
                } while (!r || r > 1);
                return e + t * i * Math.sqrt(-2 * Math.log(r) / r)
            }
        }
    };

    function g(e) {
        return e != null && !isNaN(e)
    }
    d3.sum = function (e, t) {
        var i = 0,
            n = e.length,
            r, s = -1;
        if (arguments.length === 1) {
            while (++s < n)
                if (!isNaN(r = +e[s])) i += r
        }
        else {
            while (++s < n)
                if (!isNaN(r = +t.call(e, e[s], s))) i += r
        }
        return i
    };
    d3.quantile = function (e, t) {
        var i = (e.length - 1) * t + 1,
            n = Math.floor(i),
            r = e[n - 1],
            s = i - n;
        return s ? r + s * (e[n] - r) : r
    };
    d3.transpose = function (e) {
        return d3.zip.apply(d3, e)
    };
    d3.zip = function () {
        if (!(r = arguments.length)) return [];
        for (var e = -1, t = d3.min(arguments, m), i = new Array(t); ++e < t;) {
            for (var n = -1, r, s = i[e] = new Array(r); ++n < r;) {
                s[n] = arguments[n][e]
            }
        }
        return i
    };

    function m(e) {
        return e.length
    }
    d3.bisector = function (e) {
        return {
            left: function (t, i, n, r) {
                if (arguments.length < 3) n = 0;
                if (arguments.length < 4) r = t.length;
                while (n < r) {
                    var s = n + r >> 1;
                    if (e.call(t, t[s], s) < i) n = s + 1;
                    else r = s
                }
                return n
            },
            right: function (t, i, n, r) {
                if (arguments.length < 3) n = 0;
                if (arguments.length < 4) r = t.length;
                while (n < r) {
                    var s = n + r >> 1;
                    if (i < e.call(t, t[s], s)) r = s;
                    else n = s + 1
                }
                return n
            }
        }
    };
    var v = d3.bisector(function (e) {
        return e
    });
    d3.bisectLeft = v.left;
    d3.bisect = d3.bisectRight = v.right;
    d3.first = function (e, t) {
        var i = 0,
            n = e.length,
            r = e[0],
            s;
        if (arguments.length === 1) t = d3.ascending;
        while (++i < n) {
            if (t.call(e, r, s = e[i]) > 0) {
                r = s
            }
        }
        return r
    };
    d3.last = function (e, t) {
        var i = 0,
            n = e.length,
            r = e[0],
            s;
        if (arguments.length === 1) t = d3.ascending;
        while (++i < n) {
            if (t.call(e, r, s = e[i]) <= 0) {
                r = s
            }
        }
        return r
    };
    d3.nest = function () {
        var e = {},
            t = [],
            i = [],
            n, r;

        function s(i, a) {
            if (a >= t.length) return r ? r.call(e, i) : n ? i.sort(n) : i;
            var l = -1,
                u = i.length,
                c = t[a++],
                f, h, d = new o,
                p, g = {};
            while (++l < u) {
                if (p = d.get(f = c(h = i[l]))) {
                    p.push(h)
                }
                else {
                    d.set(f, [h])
                }
            }
            d.forEach(function (e) {
                g[e] = s(d.get(e), a)
            });
            return g
        }

        function a(e, n) {
            if (n >= t.length) return e;
            var r = [],
                s = i[n++],
                o;
            for (o in e) {
                r.push({
                    key: o,
                    values: a(e[o], n)
                })
            }
            if (s) r.sort(function (e, t) {
                return s(e.key, t.key)
            });
            return r
        }
        e.map = function (e) {
            return s(e, 0)
        };
        e.entries = function (e) {
            return a(s(e, 0), 0)
        };
        e.key = function (i) {
            t.push(i);
            return e
        };
        e.sortKeys = function (n) {
            i[t.length - 1] = n;
            return e
        };
        e.sortValues = function (t) {
            n = t;
            return e
        };
        e.rollup = function (t) {
            r = t;
            return e
        };
        return e
    };
    d3.keys = function (e) {
        var t = [];
        for (var i in e) t.push(i);
        return t
    };
    d3.values = function (e) {
        var t = [];
        for (var i in e) t.push(e[i]);
        return t
    };
    d3.entries = function (e) {
        var t = [];
        for (var i in e) t.push({
            key: i,
            value: e[i]
        });
        return t
    };
    d3.permute = function (e, t) {
        var i = [],
            n = -1,
            r = t.length;
        while (++n < r) i[n] = e[t[n]];
        return i
    };
    d3.merge = function (e) {
        return Array.prototype.concat.apply([], e)
    };
    d3.split = function (e, t) {
        var i = [],
            n = [],
            r, s = -1,
            a = e.length;
        if (arguments.length < 2) t = y;
        while (++s < a) {
            if (t.call(n, r = e[s], s)) {
                n = []
            }
            else {
                if (!n.length) i.push(n);
                n.push(r)
            }
        }
        return i
    };

    function y(e) {
        return e == null
    }

    function b(e) {
        return e.replace(/^\s+|\s+$/g, "").replace(/\s+/g, " ")
    }
    d3.range = function (e, t, i) {
        if (arguments.length < 3) {
            i = 1;
            if (arguments.length < 2) {
                t = e;
                e = 0
            }
        }
        if ((t - e) / i === Infinity) throw new Error("infinite range");
        var n = [],
            r = w(Math.abs(i)),
            s = -1,
            a;
        e *= r, t *= r, i *= r;
        if (i < 0)
            while ((a = e + i * ++s) > t) n.push(a / r);
        else
            while ((a = e + i * ++s) < t) n.push(a / r);
        return n
    };

    function w(e) {
        var t = 1;
        while (e * t % 1) t *= 10;
        return t
    }
    d3.requote = function (e) {
        return e.replace(_, "\\$&")
    };
    var _ = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
    d3.round = function (e, t) {
        return t ? Math.round(e * (t = Math.pow(10, t))) / t : Math.round(e)
    };
    d3.xhr = function (e, t, i) {
        var n = new XMLHttpRequest;
        if (arguments.length < 3) i = t, t = null;
        else if (t && n.overrideMimeType) n.overrideMimeType(t);
        n.open("GET", e, true);
        if (t) n.setRequestHeader("Accept", t);
        n.onreadystatechange = function () {
            if (n.readyState === 4) {
                var e = n.status;
                i(!e && n.response || e >= 200 && e < 300 || e === 304 ? n : null)
            }
        };
        n.send(null)
    };
    d3.text = function (e, t, i) {
        function n(e) {
            i(e && e.responseText)
        }
        if (arguments.length < 3) {
            i = t;
            t = null
        }
        d3.xhr(e, t, n)
    };
    d3.json = function (e, t) {
        d3.text(e, "application/json", function (e) {
            t(e ? JSON.parse(e) : null)
        })
    };
    d3.html = function (e, t) {
        d3.text(e, "text/html", function (e) {
            if (e != null) {
                var i = document.createRange();
                i.selectNode(document.body);
                e = i.createContextualFragment(e)
            }
            t(e)
        })
    };
    d3.xml = function (e, t, i) {
        function n(e) {
            i(e && e.responseXML)
        }
        if (arguments.length < 3) {
            i = t;
            t = null
        }
        d3.xhr(e, t, n)
    };
    var x = {
        svg: "http://www.w3.org/2000/svg",
        xhtml: "http://www.w3.org/1999/xhtml",
        xlink: "http://www.w3.org/1999/xlink",
        xml: "http://www.w3.org/XML/1998/namespace",
        xmlns: "http://www.w3.org/2000/xmlns/"
    };
    d3.ns = {
        prefix: x,
        qualify: function (e) {
            var t = e.indexOf(":"),
                i = e;
            if (t >= 0) {
                i = e.substring(0, t);
                e = e.substring(t + 1)
            }
            return x.hasOwnProperty(i) ? {
                space: x[i],
                local: e
            } : e
        }
    };
    d3.dispatch = function () {
        var e = new k,
            t = -1,
            i = arguments.length;
        while (++t < i) e[arguments[t]] = C(e);
        return e
    };

    function k() {}
    k.prototype.on = function (e, t) {
        var i = e.indexOf("."),
            n = "";
        if (i > 0) {
            n = e.substring(i + 1);
            e = e.substring(0, i)
        }
        return arguments.length < 2 ? this[e].on(n) : this[e].on(n, t)
    };

    function C(e) {
        var t = [],
            i = new o;

        function n() {
            var i = t,
                n = -1,
                r = i.length,
                s;
            while (++n < r)
                if (s = i[n].on) s.apply(this, arguments);
            return e
        }
        n.on = function (n, r) {
            var s = i.get(n),
                a;
            if (arguments.length < 2) return s && s.on;
            if (s) {
                s.on = null;
                t = t.slice(0, a = t.indexOf(s)).concat(t.slice(a + 1));
                i.remove(n)
            }
            if (r) t.push(i.set(n, {
                on: r
            }));
            return e
        };
        return n
    }
    d3.format = function (e) {
        var t = M.exec(e),
            i = t[1] || " ",
            n = t[3] || "",
            r = t[5],
            s = +t[6],
            a = t[7],
            o = t[8],
            l = t[9],
            u = 1,
            c = "",
            f = false;
        if (o) o = +o.substring(1);
        if (r) {
            i = "0";
            if (a) s -= Math.floor((s - 1) / 4)
        }
        switch (l) {
            case "n":
                a = true;
                l = "g";
                break;
            case "%":
                u = 100;
                c = "%";
                l = "f";
                break;
            case "p":
                u = 100;
                c = "%";
                l = "r";
                break;
            case "d":
                f = true;
                o = 0;
                break;
            case "s":
                u = -1;
                l = "r";
                break
        }
        if (l == "r" && !o) l = "g";
        l = T.get(l) || S;
        return function (e) {
            if (f && e % 1) return "";
            var t = e < 0 && (e = -e) ? "" : n;
            if (u < 0) {
                var h = d3.formatPrefix(e, o);
                e = h.scale(e);
                c = h.symbol
            }
            else {
                e *= u
            }
            e = l(e, o);
            if (r) {
                var d = e.length + t.length;
                if (d < s) e = new Array(s - d + 1).join(i) + e;
                if (a) e = E(e);
                e = t + e
            }
            else {
                if (a) e = E(e);
                e = t + e;
                var d = e.length;
                if (d < s) e = new Array(s - d + 1).join(i) + e
            }
            return e + c
        }
    };
    var M = /(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/;
    var T = d3.map({
        g: function (e, t) {
            return e.toPrecision(t)
        },
        e: function (e, t) {
            return e.toExponential(t)
        },
        f: function (e, t) {
            return e.toFixed(t)
        },
        r: function (e, t) {
            return d3.round(e, t = D(e, t)).toFixed(Math.max(0, Math.min(20, t)))
        }
    });

    function D(e, t) {
        return t - (e ? 1 + Math.floor(Math.log(e + Math.pow(10, 1 + Math.floor(Math.log(e) / Math.LN10) - t)) / Math.LN10) : 1)
    }

    function S(e) {
        return e + ""
    }

    function E(e) {
        var t = e.lastIndexOf("."),
            i = t >= 0 ? e.substring(t) : (t = e.length, ""),
            n = [];
        while (t > 0) n.push(e.substring(t -= 3, t + 3));
        return n.reverse().join(",") + i
    }
    var A = ["y", "z", "a", "f", "p", "n", "", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(I);
    d3.formatPrefix = function (e, t) {
        var i = 0;
        if (e) {
            if (e < 0) e *= -1;
            if (t) e = d3.round(e, D(e, t));
            i = 1 + Math.floor(1e-12 + Math.log(e) / Math.LN10);
            i = Math.max(-24, Math.min(24, Math.floor((i <= 0 ? i + 1 : i - 1) / 3) * 3))
        }
        return A[8 + i / 3]
    };

    function I(e, t) {
        var i = Math.pow(10, Math.abs(8 - t) * 3);
        return {
            scale: t > 8 ? function (e) {
                return e / i
            } : function (e) {
                return e * i
            },
            symbol: e
        }
    }
    var $ = R(2),
        P = R(3),
        z = function () {
            return F
        };
    var N = d3.map({
        linear: z,
        poly: R,
        quad: function () {
            return $
        },
        cubic: function () {
            return P
        },
        sin: function () {
            return W
        },
        exp: function () {
            return Y
        },
        circle: function () {
            return q
        },
        elastic: B,
        back: U,
        bounce: function () {
            return Q
        }
    });
    var H = d3.map({ in: F,
        out: L,
        "in-out": j,
        "out-in": function (e) {
            return j(L(e))
        }
    });
    d3.ease = function (e) {
        var t = e.indexOf("-"),
            i = t >= 0 ? e.substring(0, t) : e,
            n = t >= 0 ? e.substring(t + 1) : "in";
        i = N.get(i) || z;
        n = H.get(n) || F;
        return O(n(i.apply(null, Array.prototype.slice.call(arguments, 1))))
    };

    function O(e) {
        return function (t) {
            return t <= 0 ? 0 : t >= 1 ? 1 : e(t)
        }
    }

    function L(e) {
        return function (t) {
            return 1 - e(1 - t)
        }
    }

    function j(e) {
        return function (t) {
            return .5 * (t < .5 ? e(2 * t) : 2 - e(2 - 2 * t))
        }
    }

    function F(e) {
        return e
    }

    function R(e) {
        return function (t) {
            return Math.pow(t, e)
        }
    }

    function W(e) {
        return 1 - Math.cos(e * Math.PI / 2)
    }

    function Y(e) {
        return Math.pow(2, 10 * (e - 1))
    }

    function q(e) {
        return 1 - Math.sqrt(1 - e * e)
    }

    function B(e, t) {
        var i;
        if (arguments.length < 2) t = .45;
        if (arguments.length < 1) {
            e = 1;
            i = t / 4
        }
        else i = t / (2 * Math.PI) * Math.asin(1 / e);
        return function (n) {
            return 1 + e * Math.pow(2, 10 * -n) * Math.sin((n - i) * 2 * Math.PI / t)
        }
    }

    function U(e) {
        if (!e) e = 1.70158;
        return function (t) {
            return t * t * ((e + 1) * t - e)
        }
    }

    function Q(e) {
        return e < 1 / 2.75 ? 7.5625 * e * e : e < 2 / 2.75 ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : e < 2.5 / 2.75 ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
    }
    d3.event = null;

    function G() {
        d3.event.stopPropagation();
        d3.event.preventDefault()
    }

    function X() {
        var e = d3.event,
            t;
        while (t = e.sourceEvent) e = t;
        return e
    }

    function V(e) {
        var t = new k,
            i = 0,
            n = arguments.length;
        while (++i < n) t[arguments[i]] = C(t);
        t.of = function (i, n) {
            return function (r) {
                try {
                    var s = r.sourceEvent = d3.event;
                    r.target = e;
                    d3.event = r;
                    t[r.type].apply(i, n)
                }
                finally {
                    d3.event = s
                }
            }
        };
        return t
    }
    d3.interpolate = function (e, t) {
        var i = d3.interpolators.length,
            n;
        while (--i >= 0 && !(n = d3.interpolators[i](e, t)));
        return n
    };
    d3.interpolateNumber = function (e, t) {
        t -= e;
        return function (i) {
            return e + t * i
        }
    };
    d3.interpolateRound = function (e, t) {
        t -= e;
        return function (i) {
            return Math.round(e + t * i)
        }
    };
    d3.interpolateString = function (e, t) {
        var i, n, r, s = 0,
            a = 0,
            o = [],
            l = [],
            u, c;
        K.lastIndex = 0;
        for (n = 0; i = K.exec(t); ++n) {
            if (i.index) o.push(t.substring(s, a = i.index));
            l.push({
                i: o.length,
                x: i[0]
            });
            o.push(null);
            s = K.lastIndex
        }
        if (s < t.length) o.push(t.substring(s));
        for (n = 0, u = l.length;
            (i = K.exec(e)) && n < u; ++n) {
            c = l[n];
            if (c.x == i[0]) {
                if (c.i) {
                    if (o[c.i + 1] == null) {
                        o[c.i - 1] += c.x;
                        o.splice(c.i, 1);
                        for (r = n + 1; r < u; ++r) l[r].i--
                    }
                    else {
                        o[c.i - 1] += c.x + o[c.i + 1];
                        o.splice(c.i, 2);
                        for (r = n + 1; r < u; ++r) l[r].i -= 2
                    }
                }
                else {
                    if (o[c.i + 1] == null) {
                        o[c.i] = c.x
                    }
                    else {
                        o[c.i] = c.x + o[c.i + 1];
                        o.splice(c.i + 1, 1);
                        for (r = n + 1; r < u; ++r) l[r].i--
                    }
                }
                l.splice(n, 1);
                u--;
                n--
            }
            else {
                c.x = d3.interpolateNumber(parseFloat(i[0]), parseFloat(c.x))
            }
        }
        while (n < u) {
            c = l.pop();
            if (o[c.i + 1] == null) {
                o[c.i] = c.x
            }
            else {
                o[c.i] = c.x + o[c.i + 1];
                o.splice(c.i + 1, 1)
            }
            u--
        }
        if (o.length === 1) {
            return o[0] == null ? l[0].x : function () {
                return t
            }
        }
        return function (e) {
            for (n = 0; n < u; ++n) o[(c = l[n]).i] = c.x(e);
            return o.join("")
        }
    };
    d3.interpolateTransform = function (e, t) {
        var i = [],
            n = [],
            r, s = d3.transform(e),
            a = d3.transform(t),
            o = s.translate,
            l = a.translate,
            u = s.rotate,
            c = a.rotate,
            f = s.skew,
            h = a.skew,
            d = s.scale,
            p = a.scale;
        if (o[0] != l[0] || o[1] != l[1]) {
            i.push("translate(", null, ",", null, ")");
            n.push({
                i: 1,
                x: d3.interpolateNumber(o[0], l[0])
            }, {
                i: 3,
                x: d3.interpolateNumber(o[1], l[1])
            })
        }
        else if (l[0] || l[1]) {
            i.push("translate(" + l + ")")
        }
        else {
            i.push("")
        }
        if (u != c) {
            if (u - c > 180) c += 360;
            else if (c - u > 180) u += 360;
            n.push({
                i: i.push(i.pop() + "rotate(", null, ")") - 2,
                x: d3.interpolateNumber(u, c)
            })
        }
        else if (c) {
            i.push(i.pop() + "rotate(" + c + ")")
        }
        if (f != h) {
            n.push({
                i: i.push(i.pop() + "skewX(", null, ")") - 2,
                x: d3.interpolateNumber(f, h)
            })
        }
        else if (h) {
            i.push(i.pop() + "skewX(" + h + ")")
        }
        if (d[0] != p[0] || d[1] != p[1]) {
            r = i.push(i.pop() + "scale(", null, ",", null, ")");
            n.push({
                i: r - 4,
                x: d3.interpolateNumber(d[0], p[0])
            }, {
                i: r - 2,
                x: d3.interpolateNumber(d[1], p[1])
            })
        }
        else if (p[0] != 1 || p[1] != 1) {
            i.push(i.pop() + "scale(" + p + ")")
        }
        r = n.length;
        return function (e) {
            var t = -1,
                s;
            while (++t < r) i[(s = n[t]).i] = s.x(e);
            return i.join("")
        }
    };
    d3.interpolateRgb = function (e, t) {
        e = d3.rgb(e);
        t = d3.rgb(t);
        var i = e.r,
            n = e.g,
            r = e.b,
            s = t.r - i,
            a = t.g - n,
            o = t.b - r;
        return function (e) {
            return "#" + nt(Math.round(i + s * e)) + nt(Math.round(n + a * e)) + nt(Math.round(r + o * e))
        }
    };
    d3.interpolateHsl = function (e, t) {
        e = d3.hsl(e);
        t = d3.hsl(t);
        var i = e.h,
            n = e.s,
            r = e.l,
            s = t.h - i,
            a = t.s - n,
            o = t.l - r;
        if (s > 180) s -= 360;
        else if (s < -180) s += 360;
        return function (e) {
            return ct(i + s * e, n + a * e, r + o * e).toString()
        }
    };
    d3.interpolateArray = function (e, t) {
        var i = [],
            n = [],
            r = e.length,
            s = t.length,
            a = Math.min(e.length, t.length),
            o;
        for (o = 0; o < a; ++o) i.push(d3.interpolate(e[o], t[o]));
        for (; o < r; ++o) n[o] = e[o];
        for (; o < s; ++o) n[o] = t[o];
        return function (e) {
            for (o = 0; o < a; ++o) n[o] = i[o](e);
            return n
        }
    };
    d3.interpolateObject = function (e, t) {
        var i = {},
            n = {},
            r;
        for (r in e) {
            if (r in t) {
                i[r] = Z(r)(e[r], t[r])
            }
            else {
                n[r] = e[r]
            }
        }
        for (r in t) {
            if (!(r in e)) {
                n[r] = t[r]
            }
        }
        return function (e) {
            for (r in i) n[r] = i[r](e);
            return n
        }
    };
    var K = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;

    function Z(e) {
        return e == "transform" ? d3.interpolateTransform : d3.interpolate
    }
    d3.interpolators = [d3.interpolateObject, function (e, t) {
        return t instanceof Array && d3.interpolateArray(e, t)
    }, function (e, t) {
        return (typeof e === "string" || typeof t === "string") && d3.interpolateString(e + "", t + "")
    }, function (e, t) {
        return (typeof t === "string" ? ot.has(t) || /^(#|rgb\(|hsl\()/.test(t) : t instanceof it || t instanceof ut) && d3.interpolateRgb(e, t)
    }, function (e, t) {
        return !isNaN(e = +e) && !isNaN(t = +t) && d3.interpolateNumber(e, t)
    }];

    function J(e, t) {
        t = t - (e = +e) ? 1 / (t - e) : 0;
        return function (i) {
            return (i - e) * t
        }
    }

    function et(e, t) {
        t = t - (e = +e) ? 1 / (t - e) : 0;
        return function (i) {
            return Math.max(0, Math.min(1, (i - e) * t))
        }
    }
    d3.rgb = function (e, t, i) {
        return arguments.length === 1 ? e instanceof it ? tt(e.r, e.g, e.b) : rt("" + e, tt, ct) : tt(~~e, ~~t, ~~i)
    };

    function tt(e, t, i) {
        return new it(e, t, i)
    }

    function it(e, t, i) {
        this.r = e;
        this.g = t;
        this.b = i
    }
    it.prototype.brighter = function (e) {
        e = Math.pow(.7, arguments.length ? e : 1);
        var t = this.r,
            i = this.g,
            n = this.b,
            r = 30;
        if (!t && !i && !n) return tt(r, r, r);
        if (t && t < r) t = r;
        if (i && i < r) i = r;
        if (n && n < r) n = r;
        return tt(Math.min(255, Math.floor(t / e)), Math.min(255, Math.floor(i / e)), Math.min(255, Math.floor(n / e)))
    };
    it.prototype.darker = function (e) {
        e = Math.pow(.7, arguments.length ? e : 1);
        return tt(Math.floor(e * this.r), Math.floor(e * this.g), Math.floor(e * this.b))
    };
    it.prototype.hsl = function () {
        return st(this.r, this.g, this.b)
    };
    it.prototype.toString = function () {
        return "#" + nt(this.r) + nt(this.g) + nt(this.b)
    };

    function nt(e) {
        return e < 16 ? "0" + Math.max(0, e).toString(16) : Math.min(255, e).toString(16)
    }

    function rt(e, t, i) {
        var n = 0,
            r = 0,
            s = 0,
            a, o, l;
        a = /([a-z]+)\((.*)\)/i.exec(e);
        if (a) {
            o = a[2].split(",");
            switch (a[1]) {
                case "hsl":
                    {
                        return i(parseFloat(o[0]), parseFloat(o[1]) / 100, parseFloat(o[2]) / 100)
                    }
                case "rgb":
                    {
                        return t(at(o[0]), at(o[1]), at(o[2]))
                    }
            }
        }
        if (l = ot.get(e)) return t(l.r, l.g, l.b);
        if (e != null && e.charAt(0) === "#") {
            if (e.length === 4) {
                n = e.charAt(1);
                n += n;
                r = e.charAt(2);
                r += r;
                s = e.charAt(3);
                s += s
            }
            else if (e.length === 7) {
                n = e.substring(1, 3);
                r = e.substring(3, 5);
                s = e.substring(5, 7)
            }
            n = parseInt(n, 16);
            r = parseInt(r, 16);
            s = parseInt(s, 16)
        }
        return t(n, r, s)
    }

    function st(e, t, i) {
        var n = Math.min(e /= 255, t /= 255, i /= 255),
            r = Math.max(e, t, i),
            s = r - n,
            a, o, l = (r + n) / 2;
        if (s) {
            o = l < .5 ? s / (r + n) : s / (2 - r - n);
            if (e == r) a = (t - i) / s + (t < i ? 6 : 0);
            else if (t == r) a = (i - e) / s + 2;
            else a = (e - t) / s + 4;
            a *= 60
        }
        else {
            o = a = 0
        }
        return lt(a, o, l)
    }

    function at(e) {
        var t = parseFloat(e);
        return e.charAt(e.length - 1) === "%" ? Math.round(t * 2.55) : t
    }
    var ot = d3.map({
        aliceblue: "#f0f8ff",
        antiquewhite: "#faebd7",
        aqua: "#00ffff",
        aquamarine: "#7fffd4",
        azure: "#f0ffff",
        beige: "#f5f5dc",
        bisque: "#ffe4c4",
        black: "#000000",
        blanchedalmond: "#ffebcd",
        blue: "#0000ff",
        blueviolet: "#8a2be2",
        brown: "#a52a2a",
        burlywood: "#deb887",
        cadetblue: "#5f9ea0",
        chartreuse: "#7fff00",
        chocolate: "#d2691e",
        coral: "#ff7f50",
        cornflowerblue: "#6495ed",
        cornsilk: "#fff8dc",
        crimson: "#dc143c",
        cyan: "#00ffff",
        darkblue: "#00008b",
        darkcyan: "#008b8b",
        darkgoldenrod: "#b8860b",
        darkgray: "#a9a9a9",
        darkgreen: "#006400",
        darkgrey: "#a9a9a9",
        darkkhaki: "#bdb76b",
        darkmagenta: "#8b008b",
        darkolivegreen: "#556b2f",
        darkorange: "#ff8c00",
        darkorchid: "#9932cc",
        darkred: "#8b0000",
        darksalmon: "#e9967a",
        darkseagreen: "#8fbc8f",
        darkslateblue: "#483d8b",
        darkslategray: "#2f4f4f",
        darkslategrey: "#2f4f4f",
        darkturquoise: "#00ced1",
        darkviolet: "#9400d3",
        deeppink: "#ff1493",
        deepskyblue: "#00bfff",
        dimgray: "#696969",
        dimgrey: "#696969",
        dodgerblue: "#1e90ff",
        firebrick: "#b22222",
        floralwhite: "#fffaf0",
        forestgreen: "#228b22",
        fuchsia: "#ff00ff",
        gainsboro: "#dcdcdc",
        ghostwhite: "#f8f8ff",
        gold: "#ffd700",
        goldenrod: "#daa520",
        gray: "#808080",
        green: "#008000",
        greenyellow: "#adff2f",
        grey: "#808080",
        honeydew: "#f0fff0",
        hotpink: "#ff69b4",
        indianred: "#cd5c5c",
        indigo: "#4b0082",
        ivory: "#fffff0",
        khaki: "#f0e68c",
        lavender: "#e6e6fa",
        lavenderblush: "#fff0f5",
        lawngreen: "#7cfc00",
        lemonchiffon: "#fffacd",
        lightblue: "#add8e6",
        lightcoral: "#f08080",
        lightcyan: "#e0ffff",
        lightgoldenrodyellow: "#fafad2",
        lightgray: "#d3d3d3",
        lightgreen: "#90ee90",
        lightgrey: "#d3d3d3",
        lightpink: "#ffb6c1",
        lightsalmon: "#ffa07a",
        lightseagreen: "#20b2aa",
        lightskyblue: "#87cefa",
        lightslategray: "#778899",
        lightslategrey: "#778899",
        lightsteelblue: "#b0c4de",
        lightyellow: "#ffffe0",
        lime: "#00ff00",
        limegreen: "#32cd32",
        linen: "#faf0e6",
        magenta: "#ff00ff",
        maroon: "#800000",
        mediumaquamarine: "#66cdaa",
        mediumblue: "#0000cd",
        mediumorchid: "#ba55d3",
        mediumpurple: "#9370db",
        mediumseagreen: "#3cb371",
        mediumslateblue: "#7b68ee",
        mediumspringgreen: "#00fa9a",
        mediumturquoise: "#48d1cc",
        mediumvioletred: "#c71585",
        midnightblue: "#191970",
        mintcream: "#f5fffa",
        mistyrose: "#ffe4e1",
        moccasin: "#ffe4b5",
        navajowhite: "#ffdead",
        navy: "#000080",
        oldlace: "#fdf5e6",
        olive: "#808000",
        olivedrab: "#6b8e23",
        orange: "#ffa500",
        orangered: "#ff4500",
        orchid: "#da70d6",
        palegoldenrod: "#eee8aa",
        palegreen: "#98fb98",
        paleturquoise: "#afeeee",
        palevioletred: "#db7093",
        papayawhip: "#ffefd5",
        peachpuff: "#ffdab9",
        peru: "#cd853f",
        pink: "#ffc0cb",
        plum: "#dda0dd",
        powderblue: "#b0e0e6",
        purple: "#800080",
        red: "#ff0000",
        rosybrown: "#bc8f8f",
        royalblue: "#4169e1",
        saddlebrown: "#8b4513",
        salmon: "#fa8072",
        sandybrown: "#f4a460",
        seagreen: "#2e8b57",
        seashell: "#fff5ee",
        sienna: "#a0522d",
        silver: "#c0c0c0",
        skyblue: "#87ceeb",
        slateblue: "#6a5acd",
        slategray: "#708090",
        slategrey: "#708090",
        snow: "#fffafa",
        springgreen: "#00ff7f",
        steelblue: "#4682b4",
        tan: "#d2b48c",
        teal: "#008080",
        thistle: "#d8bfd8",
        tomato: "#ff6347",
        turquoise: "#40e0d0",
        violet: "#ee82ee",
        wheat: "#f5deb3",
        white: "#ffffff",
        whitesmoke: "#f5f5f5",
        yellow: "#ffff00",
        yellowgreen: "#9acd32"
    });
    ot.forEach(function (e, t) {
        ot.set(e, rt(t, tt, ct))
    });
    d3.hsl = function (e, t, i) {
        return arguments.length === 1 ? e instanceof ut ? lt(e.h, e.s, e.l) : rt("" + e, st, lt) : lt(+e, +t, +i)
    };

    function lt(e, t, i) {
        return new ut(e, t, i)
    }

    function ut(e, t, i) {
        this.h = e;
        this.s = t;
        this.l = i
    }
    ut.prototype.brighter = function (e) {
        e = Math.pow(.7, arguments.length ? e : 1);
        return lt(this.h, this.s, this.l / e)
    };
    ut.prototype.darker = function (e) {
        e = Math.pow(.7, arguments.length ? e : 1);
        return lt(this.h, this.s, e * this.l)
    };
    ut.prototype.rgb = function () {
        return ct(this.h, this.s, this.l)
    };
    ut.prototype.toString = function () {
        return this.rgb().toString()
    };

    function ct(e, t, i) {
        var n, r;
        e = e % 360;
        if (e < 0) e += 360;
        t = t < 0 ? 0 : t > 1 ? 1 : t;
        i = i < 0 ? 0 : i > 1 ? 1 : i;
        r = i <= .5 ? i * (1 + t) : i + t - i * t;
        n = 2 * i - r;

        function s(e) {
            if (e > 360) e -= 360;
            else if (e < 0) e += 360;
            if (e < 60) return n + (r - n) * e / 60;
            if (e < 180) return r;
            if (e < 240) return n + (r - n) * (240 - e) / 60;
            return n
        }

        function a(e) {
            return Math.round(s(e) * 255)
        }
        return tt(a(e + 120), a(e), a(e - 120))
    }

    function ft(e) {
        a(e, vt);
        return e
    }
    var ht = function (e, t) {
            return t.querySelector(e)
        },
        dt = function (e, t) {
            return t.querySelectorAll(e)
        },
        pt = document.documentElement,
        gt = pt.matchesSelector || pt.webkitMatchesSelector || pt.mozMatchesSelector || pt.msMatchesSelector || pt.oMatchesSelector,
        mt = function (e, t) {
            return gt.call(e, t)
        };
    if (typeof Sizzle === "function") {
        ht = function (e, t) {
            return Sizzle(e, t)[0] || null
        };
        dt = function (e, t) {
            return Sizzle.uniqueSort(Sizzle(e, t))
        };
        mt = Sizzle.matchesSelector
    }
    var vt = [];
    d3.selection = function () {
        return Mt
    };
    d3.selection.prototype = vt;
    vt.select = function (e) {
        var t = [],
            i, n, r, s;
        if (typeof e !== "function") e = yt(e);
        for (var a = -1, o = this.length; ++a < o;) {
            t.push(i = []);
            i.parentNode = (r = this[a]).parentNode;
            for (var l = -1, u = r.length; ++l < u;) {
                if (s = r[l]) {
                    i.push(n = e.call(s, s.__data__, l));
                    if (n && "__data__" in s) n.__data__ = s.__data__
                }
                else {
                    i.push(null)
                }
            }
        }
        return ft(t)
    };

    function yt(e) {
        return function () {
            return ht(e, this)
        }
    }
    vt.selectAll = function (e) {
        var t = [],
            i, r;
        if (typeof e !== "function") e = bt(e);
        for (var s = -1, a = this.length; ++s < a;) {
            for (var o = this[s], l = -1, u = o.length; ++l < u;) {
                if (r = o[l]) {
                    t.push(i = n(e.call(r, r.__data__, l)));
                    i.parentNode = r
                }
            }
        }
        return ft(t)
    };

    function bt(e) {
        return function () {
            return dt(e, this)
        }
    }
    vt.attr = function (e, t) {
        e = d3.ns.qualify(e);
        if (arguments.length < 2) {
            var i = this.node();
            return e.local ? i.getAttributeNS(e.space, e.local) : i.getAttribute(e)
        }

        function n() {
            this.removeAttribute(e)
        }

        function r() {
            this.removeAttributeNS(e.space, e.local)
        }

        function s() {
            this.setAttribute(e, t)
        }

        function a() {
            this.setAttributeNS(e.space, e.local, t)
        }

        function o() {
            var i = t.apply(this, arguments);
            if (i == null) this.removeAttribute(e);
            else this.setAttribute(e, i)
        }

        function l() {
            var i = t.apply(this, arguments);
            if (i == null) this.removeAttributeNS(e.space, e.local);
            else this.setAttributeNS(e.space, e.local, i)
        }
        return this.each(t == null ? e.local ? r : n : typeof t === "function" ? e.local ? l : o : e.local ? a : s)
    };
    vt.classed = function (e, t) {
        var i = b(e).split(" "),
            n = i.length,
            r = -1;
        if (arguments.length > 1) {
            while (++r < n) wt.call(this, i[r], t);
            return this
        }
        else {
            while (++r < n)
                if (!wt.call(this, i[r])) return false;
            return true
        }
    };

    function wt(e, t) {
        var i = new RegExp("(^|\\s+)" + d3.requote(e) + "(\\s+|$)", "g");
        if (arguments.length < 2) {
            var n = this.node();
            if (r = n.classList) return r.contains(e);
            var r = n.className;
            i.lastIndex = 0;
            return i.test(r.baseVal != null ? r.baseVal : r)
        }

        function s() {
            if (t = this.classList) return t.add(e);
            var t = this.className,
                n = t.baseVal != null,
                r = n ? t.baseVal : t;
            i.lastIndex = 0;
            if (!i.test(r)) {
                r = b(r + " " + e);
                if (n) t.baseVal = r;
                else this.className = r
            }
        }

        function a() {
            if (t = this.classList) return t.remove(e);
            var t = this.className,
                n = t.baseVal != null,
                r = n ? t.baseVal : t;
            r = b(r.replace(i, " "));
            if (n) t.baseVal = r;
            else this.className = r
        }

        function o() {
            (t.apply(this, arguments) ? s : a).call(this)
        }
        return this.each(typeof t === "function" ? o : t ? s : a)
    }
    vt.style = function (e, t, i) {
        if (arguments.length < 3) i = "";
        if (arguments.length < 2) return window.getComputedStyle(this.node(), null).getPropertyValue(e);

        function n() {
            this.style.removeProperty(e)
        }

        function r() {
            this.style.setProperty(e, t, i)
        }

        function s() {
            var n = t.apply(this, arguments);
            if (n == null) this.style.removeProperty(e);
            else this.style.setProperty(e, n, i)
        }
        return this.each(t == null ? n : typeof t === "function" ? s : r)
    };
    vt.property = function (e, t) {
        if (arguments.length < 2) return this.node()[e];

        function i() {
            delete this[e]
        }

        function n() {
            this[e] = t
        }

        function r() {
            var i = t.apply(this, arguments);
            if (i == null) delete this[e];
            else this[e] = i
        }
        return this.each(t == null ? i : typeof t === "function" ? r : n)
    };
    vt.text = function (e) {
        return arguments.length < 1 ? this.node().textContent : this.each(typeof e === "function" ? function () {
            var t = e.apply(this, arguments);
            this.textContent = t == null ? "" : t
        } : e == null ? function () {
            this.textContent = ""
        } : function () {
            this.textContent = e
        })
    };
    vt.html = function (e) {
        return arguments.length < 1 ? this.node().innerHTML : this.each(typeof e === "function" ? function () {
            var t = e.apply(this, arguments);
            this.innerHTML = t == null ? "" : t
        } : e == null ? function () {
            this.innerHTML = ""
        } : function () {
            this.innerHTML = e
        })
    };
    vt.append = function (e) {
        e = d3.ns.qualify(e);

        function t() {
            return this.appendChild(document.createElementNS(this.namespaceURI, e))
        }

        function i() {
            return this.appendChild(document.createElementNS(e.space, e.local))
        }
        return this.select(e.local ? i : t)
    };
    vt.insert = function (e, t) {
        e = d3.ns.qualify(e);

        function i() {
            return this.insertBefore(document.createElementNS(this.namespaceURI, e), ht(t, this))
        }

        function n() {
            return this.insertBefore(document.createElementNS(e.space, e.local), ht(t, this))
        }
        return this.select(e.local ? n : i)
    };
    vt.remove = function () {
        return this.each(function () {
            var e = this.parentNode;
            if (e) e.removeChild(this)
        })
    };
    vt.data = function (e, t) {
        var i = -1,
            n = this.length,
            r, s;
        if (!arguments.length) {
            e = new Array(n = (r = this[0]).length);
            while (++i < n) {
                if (s = r[i]) {
                    e[i] = s.__data__
                }
            }
            return e
        }

        function a(e, i) {
            var n, r = e.length,
                s = i.length,
                a = Math.min(r, s),
                f = Math.max(r, s),
                h = [],
                d = [],
                p = [],
                g, m;
            if (t) {
                var v = new o,
                    y = [],
                    b, w = i.length;
                for (n = -1; ++n < r;) {
                    b = t.call(g = e[n], g.__data__, n);
                    if (v.has(b)) {
                        p[w++] = g
                    }
                    else {
                        v.set(b, g)
                    }
                    y.push(b)
                }
                for (n = -1; ++n < s;) {
                    b = t.call(i, m = i[n], n);
                    if (v.has(b)) {
                        h[n] = g = v.get(b);
                        g.__data__ = m;
                        d[n] = p[n] = null
                    }
                    else {
                        d[n] = _t(m);
                        h[n] = p[n] = null
                    }
                    v.remove(b)
                }
                for (n = -1; ++n < r;) {
                    if (v.has(y[n])) {
                        p[n] = e[n]
                    }
                }
            }
            else {
                for (n = -1; ++n < a;) {
                    g = e[n];
                    m = i[n];
                    if (g) {
                        g.__data__ = m;
                        h[n] = g;
                        d[n] = p[n] = null
                    }
                    else {
                        d[n] = _t(m);
                        h[n] = p[n] = null
                    }
                }
                for (; n < s; ++n) {
                    d[n] = _t(i[n]);
                    h[n] = p[n] = null
                }
                for (; n < f; ++n) {
                    p[n] = e[n];
                    d[n] = h[n] = null
                }
            }
            d.update = h;
            d.parentNode = h.parentNode = p.parentNode = e.parentNode;
            l.push(d);
            u.push(h);
            c.push(p)
        }
        var l = Tt([]),
            u = ft([]),
            c = ft([]);
        if (typeof e === "function") {
            while (++i < n) {
                a(r = this[i], e.call(r, r.parentNode.__data__, i))
            }
        }
        else {
            while (++i < n) {
                a(r = this[i], e)
            }
        }
        u.enter = function () {
            return l
        };
        u.exit = function () {
            return c
        };
        return u
    };

    function _t(e) {
        return {
            __data__: e
        }
    }
    vt.datum = vt.map = function (e) {
        return arguments.length < 1 ? this.property("__data__") : this.property("__data__", e)
    };
    vt.filter = function (e) {
        var t = [],
            i, n, r;
        if (typeof e !== "function") e = xt(e);
        for (var s = 0, a = this.length; s < a; s++) {
            t.push(i = []);
            i.parentNode = (n = this[s]).parentNode;
            for (var o = 0, l = n.length; o < l; o++) {
                if ((r = n[o]) && e.call(r, r.__data__, o)) {
                    i.push(r)
                }
            }
        }
        return ft(t)
    };

    function xt(e) {
        return function () {
            return mt(this, e)
        }
    }
    vt.order = function () {
        for (var e = -1, t = this.length; ++e < t;) {
            for (var i = this[e], n = i.length - 1, r = i[n], s; --n >= 0;) {
                if (s = i[n]) {
                    if (r && r !== s.nextSibling) r.parentNode.insertBefore(s, r);
                    r = s
                }
            }
        }
        return this
    };
    vt.sort = function (e) {
        e = kt.apply(this, arguments);
        for (var t = -1, i = this.length; ++t < i;) this[t].sort(e);
        return this.order()
    };

    function kt(e) {
        if (!arguments.length) e = d3.ascending;
        return function (t, i) {
            return e(t && t.__data__, i && i.__data__)
        }
    }
    vt.on = function (e, t, i) {
        if (arguments.length < 3) i = false;
        var n = "__on" + e,
            r = e.indexOf(".");
        if (r > 0) e = e.substring(0, r);
        if (arguments.length < 2) return (r = this.node()[n]) && r._;
        return this.each(function (r, s) {
            var a = this,
                o = a[n];
            if (o) {
                a.removeEventListener(e, o, o.$);
                delete a[n]
            }
            if (t) {
                a.addEventListener(e, a[n] = l, l.$ = i);
                l._ = t
            }

            function l(e) {
                var i = d3.event;
                d3.event = e;
                try {
                    t.call(a, a.__data__, s)
                }
                finally {
                    d3.event = i
                }
            }
        })
    };
    vt.each = function (e) {
        return Ct(this, function (t, i, n) {
            e.call(t, t.__data__, i, n)
        })
    };

    function Ct(e, t) {
        for (var i = 0, n = e.length; i < n; i++) {
            for (var r = e[i], s = 0, a = r.length, o; s < a; s++) {
                if (o = r[s]) t(o, s, i)
            }
        }
        return e
    }
    vt.call = function (e) {
        e.apply(this, (arguments[0] = this, arguments));
        return this
    };
    vt.empty = function () {
        return !this.node()
    };
    vt.node = function (e) {
        for (var t = 0, i = this.length; t < i; t++) {
            for (var n = this[t], r = 0, s = n.length; r < s; r++) {
                var a = n[r];
                if (a) return a
            }
        }
        return null
    };
    vt.transition = function () {
        var e = [],
            t, i;
        for (var n = -1, r = this.length; ++n < r;) {
            e.push(t = []);
            for (var s = this[n], a = -1, o = s.length; ++a < o;) {
                t.push((i = s[a]) ? {
                    node: i,
                    delay: Lt,
                    duration: jt
                } : null)
            }
        }
        return St(e, zt || ++Pt, Date.now())
    };
    var Mt = ft([
        [document]
    ]);
    Mt[0].parentNode = pt;
    d3.select = function (e) {
        return typeof e === "string" ? Mt.select(e) : ft([
            [e]
        ])
    };
    d3.selectAll = function (e) {
        return typeof e === "string" ? Mt.selectAll(e) : ft([n(e)])
    };

    function Tt(e) {
        a(e, Dt);
        return e
    }
    var Dt = [];
    d3.selection.enter = Tt;
    d3.selection.enter.prototype = Dt;
    Dt.append = vt.append;
    Dt.insert = vt.insert;
    Dt.empty = vt.empty;
    Dt.node = vt.node;
    Dt.select = function (e) {
        var t = [],
            i, n, r, s, a;
        for (var o = -1, l = this.length; ++o < l;) {
            r = (s = this[o]).update;
            t.push(i = []);
            i.parentNode = s.parentNode;
            for (var u = -1, c = s.length; ++u < c;) {
                if (a = s[u]) {
                    i.push(r[u] = n = e.call(s.parentNode, a.__data__, u));
                    n.__data__ = a.__data__
                }
                else {
                    i.push(null)
                }
            }
        }
        return ft(t)
    };

    function St(e, t, i) {
        a(e, $t);
        var n = new o,
            r = d3.dispatch("start", "end"),
            s = Ft;
        e.id = t;
        e.time = i;
        e.tween = function (t, i) {
            if (arguments.length < 2) return n.get(t);
            if (i == null) n.remove(t);
            else n.set(t, i);
            return e
        };
        e.ease = function (t) {
            if (!arguments.length) return s;
            s = typeof t === "function" ? t : d3.ease.apply(d3, arguments);
            return e
        };
        e.each = function (t, i) {
            if (arguments.length < 2) return Rt.call(e, t);
            r.on(t, i);
            return e
        };
        d3.timer(function (a) {
            return Ct(e, function (e, o, l) {
                var u = [],
                    c = e.delay,
                    f = e.duration,
                    h = (e = e.node).__transition__ || (e.__transition__ = {
                        active: 0,
                        count: 0
                    }),
                    d = e.__data__;
                ++h.count;
                c <= a ? p(a) : d3.timer(p, c, i);

                function p(s) {
                    if (h.active > t) return m();
                    h.active = t;
                    n.forEach(function (t, i) {
                        if (i = i.call(e, d, o)) {
                            u.push(i)
                        }
                    });
                    r.start.call(e, d, o);
                    if (!g(s)) d3.timer(g, 0, i);
                    return 1
                }

                function g(i) {
                    if (h.active !== t) return m();
                    var n = (i - c) / f,
                        a = s(n),
                        l = u.length;
                    while (l > 0) {
                        u[--l].call(e, a)
                    }
                    if (n >= 1) {
                        m();
                        zt = t;
                        r.end.call(e, d, o);
                        zt = 0;
                        return 1
                    }
                }

                function m() {
                    if (!--h.count) delete e.__transition__;
                    return 1
                }
            })
        }, 0, i);
        return e
    }
    var Et = {};

    function At(e, t, i) {
        return i != "" && Et
    }

    function It(e, t) {
        var i = Z(e);

        function n(e, n, r) {
            var s = t.call(this, e, n);
            return s == null ? r != "" && Et : r != s && i(r, s)
        }

        function r(e, n, r) {
            return r != t && i(r, t)
        }
        return typeof t === "function" ? n : t == null ? At : (t += "", r)
    }
    var $t = [],
        Pt = 0,
        zt = 0,
        Nt = 0,
        Ht = 250,
        Ot = d3.ease("cubic-in-out"),
        Lt = Nt,
        jt = Ht,
        Ft = Ot;
    $t.call = vt.call;
    d3.transition = function (e) {
        return arguments.length ? zt ? e.transition() : e : Mt.transition()
    };
    d3.transition.prototype = $t;
    $t.select = function (e) {
        var t = [],
            i, n, r;
        if (typeof e !== "function") e = yt(e);
        for (var s = -1, a = this.length; ++s < a;) {
            t.push(i = []);
            for (var o = this[s], l = -1, u = o.length; ++l < u;) {
                if ((r = o[l]) && (n = e.call(r.node, r.node.__data__, l))) {
                    if ("__data__" in r.node) n.__data__ = r.node.__data__;
                    i.push({
                        node: n,
                        delay: r.delay,
                        duration: r.duration
                    })
                }
                else {
                    i.push(null)
                }
            }
        }
        return St(t, this.id, this.time).ease(this.ease())
    };
    $t.selectAll = function (e) {
        var t = [],
            i, n, r;
        if (typeof e !== "function") e = bt(e);
        for (var s = -1, a = this.length; ++s < a;) {
            for (var o = this[s], l = -1, u = o.length; ++l < u;) {
                if (r = o[l]) {
                    n = e.call(r.node, r.node.__data__, l);
                    t.push(i = []);
                    for (var c = -1, f = n.length; ++c < f;) {
                        i.push({
                            node: n[c],
                            delay: r.delay,
                            duration: r.duration
                        })
                    }
                }
            }
        }
        return St(t, this.id, this.time).ease(this.ease())
    };
    $t.attr = function (e, t) {
        return this.attrTween(e, It(e, t))
    };
    $t.attrTween = function (e, t) {
        var i = d3.ns.qualify(e);

        function n(e, n) {
            var r = t.call(this, e, n, this.getAttribute(i));
            return r === Et ? (this.removeAttribute(i), null) : r && function (e) {
                this.setAttribute(i, r(e))
            }
        }

        function r(e, n) {
            var r = t.call(this, e, n, this.getAttributeNS(i.space, i.local));
            return r === Et ? (this.removeAttributeNS(i.space, i.local), null) : r && function (e) {
                this.setAttributeNS(i.space, i.local, r(e))
            }
        }
        return this.tween("attr." + e, i.local ? r : n)
    };
    $t.style = function (e, t, i) {
        if (arguments.length < 3) i = "";
        return this.styleTween(e, It(e, t), i)
    };
    $t.styleTween = function (e, t, i) {
        if (arguments.length < 3) i = "";
        return this.tween("style." + e, function (n, r) {
            var s = t.call(this, n, r, window.getComputedStyle(this, null).getPropertyValue(e));
            return s === Et ? (this.style.removeProperty(e), null) : s && function (t) {
                this.style.setProperty(e, s(t), i)
            }
        })
    };
    $t.text = function (e) {
        return this.tween("text", function (t, i) {
            this.textContent = typeof e === "function" ? e.call(this, t, i) : e
        })
    };
    $t.remove = function () {
        return this.each("end.transition", function () {
            var e;
            if (!this.__transition__ && (e = this.parentNode)) e.removeChild(this)
        })
    };
    $t.delay = function (e) {
        return Ct(this, typeof e === "function" ? function (t, i, n) {
            t.delay = e.call(t = t.node, t.__data__, i, n) | 0
        } : (e = e | 0, function (t) {
            t.delay = e
        }))
    };
    $t.duration = function (e) {
        return Ct(this, typeof e === "function" ? function (t, i, n) {
            t.duration = Math.max(1, e.call(t = t.node, t.__data__, i, n) | 0)
        } : (e = Math.max(1, e | 0), function (t) {
            t.duration = e
        }))
    };

    function Rt(e) {
        var t = zt,
            i = Ft,
            n = Lt,
            r = jt;
        zt = this.id;
        Ft = this.ease();
        Ct(this, function (t, i, n) {
            Lt = t.delay;
            jt = t.duration;
            e.call(t = t.node, t.__data__, i, n)
        });
        zt = t;
        Ft = i;
        Lt = n;
        jt = r;
        return this
    }
    $t.transition = function () {
        return this.select(f)
    };
    var Wt = null,
        Yt, qt;
    d3.timer = function (e, t, i) {
        var n = false,
            r, s = Wt;
        if (arguments.length < 3) {
            if (arguments.length < 2) t = 0;
            else if (!isFinite(t)) return;
            i = Date.now()
        }
        while (s) {
            if (s.callback === e) {
                s.then = i;
                s.delay = t;
                n = true;
                break
            }
            r = s;
            s = s.next
        }
        if (!n) Wt = {
            callback: e,
            then: i,
            delay: t,
            next: Wt
        };
        if (!Yt) {
            qt = clearTimeout(qt);
            Yt = 1;
            Qt(Bt)
        }
    };

    function Bt() {
        var e, t = Date.now(),
            i = Wt;
        while (i) {
            e = t - i.then;
            if (e >= i.delay) i.flush = i.callback(e);
            i = i.next
        }
        var n = Ut() - t;
        if (n > 24) {
            if (isFinite(n)) {
                clearTimeout(qt);
                qt = setTimeout(Bt, n)
            }
            Yt = 0
        }
        else {
            Yt = 1;
            Qt(Bt)
        }
    }
    d3.timer.flush = function () {
        var e, t = Date.now(),
            i = Wt;
        while (i) {
            e = t - i.then;
            if (!i.delay) i.flush = i.callback(e);
            i = i.next
        }
        Ut()
    };

    function Ut() {
        var e = null,
            t = Wt,
            i = Infinity;
        while (t) {
            if (t.flush) {
                t = e ? e.next = t.next : Wt = t.next
            }
            else {
                i = Math.min(i, t.then + t.delay);
                t = (e = t).next
            }
        }
        return i
    }
    var Qt = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (e) {
        setTimeout(e, 17)
    };
    d3.transform = function (e) {
        var t = document.createElementNS(d3.ns.prefix.svg, "g"),
            i = {
                a: 1,
                b: 0,
                c: 0,
                d: 1,
                e: 0,
                f: 0
            };
        return (d3.transform = function (e) {
            t.setAttribute("transform", e);
            var n = t.transform.baseVal.consolidate();
            return new Gt(n ? n.matrix : i)
        })(e)
    };

    function Gt(e) {
        var t = [e.a, e.b],
            i = [e.c, e.d],
            n = Vt(t),
            r = Xt(t, i),
            s = Vt(Kt(i, t, -r)) || 0;
        if (t[0] * i[1] < i[0] * t[1]) {
            t[0] *= -1;
            t[1] *= -1;
            n *= -1;
            r *= -1
        }
        this.rotate = (n ? Math.atan2(t[1], t[0]) : Math.atan2(-i[0], i[1])) * Zt;
        this.translate = [e.e, e.f];
        this.scale = [n, s];
        this.skew = s ? Math.atan2(r, s) * Zt : 0
    }
    Gt.prototype.toString = function () {
        return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")"
    };

    function Xt(e, t) {
        return e[0] * t[0] + e[1] * t[1]
    }

    function Vt(e) {
        var t = Math.sqrt(Xt(e, e));
        if (t) {
            e[0] /= t;
            e[1] /= t
        }
        return t
    }

    function Kt(e, t, i) {
        e[0] += i * t[0];
        e[1] += i * t[1];
        return e
    }
    var Zt = 180 / Math.PI;
    d3.mouse = function (e) {
        return ei(e, X())
    };
    var Jt = /WebKit/.test(navigator.userAgent) ? -1 : 0;

    function ei(e, t) {
        var i = e.ownerSVGElement || e;
        if (i.createSVGPoint) {
            var n = i.createSVGPoint();
            if (Jt < 0 && (window.scrollX || window.scrollY)) {
                i = d3.select(document.body).append("svg").style("position", "absolute").style("top", 0).style("left", 0);
                var r = i[0][0].getScreenCTM();
                Jt = !(r.f || r.e);
                i.remove()
            }
            if (Jt) {
                n.x = t.pageX;
                n.y = t.pageY
            }
            else {
                n.x = t.clientX;
                n.y = t.clientY
            }
            n = n.matrixTransform(e.getScreenCTM().inverse());
            return [n.x, n.y]
        }
        var s = e.getBoundingClientRect();
        return [t.clientX - s.left - e.clientLeft, t.clientY - s.top - e.clientTop]
    }
    d3.touches = function (e, t) {
        if (arguments.length < 2) t = X().touches;
        return t ? n(t).map(function (t) {
            var i = ei(e, t);
            i.identifier = t.identifier;
            return i
        }) : []
    };

    function ti() {}
    d3.scale = {};

    function ii(e) {
        var t = e[0],
            i = e[e.length - 1];
        return t < i ? [t, i] : [i, t]
    }

    function ni(e) {
        return e.rangeExtent ? e.rangeExtent() : ii(e.range())
    }

    function ri(e, t) {
        var i = 0,
            n = e.length - 1,
            r = e[i],
            s = e[n],
            a;
        if (s < r) {
            a = i;
            i = n;
            n = a;
            a = r;
            r = s;
            s = a
        }
        if (a = s - r) {
            t = t(a);
            e[i] = t.floor(r);
            e[n] = t.ceil(s)
        }
        return e
    }

    function si() {
        return Math
    }
    d3.scale.linear = function () {
        return ai([0, 1], [0, 1], d3.interpolate, false)
    };

    function ai(e, t, i, n) {
        var r, s;

        function a() {
            var a = Math.min(e.length, t.length) > 2 ? di : hi,
                l = n ? et : J;
            r = a(e, t, l, i);
            s = a(t, e, l, d3.interpolate);
            return o
        }

        function o(e) {
            return r(e)
        }
        o.invert = function (e) {
            return s(e)
        };
        o.domain = function (t) {
            if (!arguments.length) return e;
            e = t.map(Number);
            return a()
        };
        o.range = function (e) {
            if (!arguments.length) return t;
            t = e;
            return a()
        };
        o.rangeRound = function (e) {
            return o.range(e).interpolate(d3.interpolateRound)
        };
        o.clamp = function (e) {
            if (!arguments.length) return n;
            n = e;
            return a()
        };
        o.interpolate = function (e) {
            if (!arguments.length) return i;
            i = e;
            return a()
        };
        o.ticks = function (t) {
            return ci(e, t)
        };
        o.tickFormat = function (t) {
            return fi(e, t)
        };
        o.nice = function () {
            ri(e, li);
            return a()
        };
        o.copy = function () {
            return ai(e, t, i, n)
        };
        return a()
    }

    function oi(e, t) {
        return d3.rebind(e, t, "range", "rangeRound", "interpolate", "clamp")
    }

    function li(e) {
        e = Math.pow(10, Math.round(Math.log(e) / Math.LN10) - 1);
        return {
            floor: function (t) {
                return Math.floor(t / e) * e
            },
            ceil: function (t) {
                return Math.ceil(t / e) * e
            }
        }
    }

    function ui(e, t) {
        var i = ii(e),
            n = i[1] - i[0],
            r = Math.pow(10, Math.floor(Math.log(n / t) / Math.LN10)),
            s = t / n * r;
        if (s <= .15) r *= 10;
        else if (s <= .35) r *= 5;
        else if (s <= .75) r *= 2;
        i[0] = Math.ceil(i[0] / r) * r;
        i[1] = Math.floor(i[1] / r) * r + r * .5;
        i[2] = r;
        return i
    }

    function ci(e, t) {
        return d3.range.apply(d3, ui(e, t))
    }

    function fi(e, t) {
        return d3.format(",." + Math.max(0, -Math.floor(Math.log(ui(e, t)[2]) / Math.LN10 + .01)) + "f")
    }

    function hi(e, t, i, n) {
        var r = i(e[0], e[1]),
            s = n(t[0], t[1]);
        return function (e) {
            return s(r(e))
        }
    }

    function di(e, t, i, n) {
        var r = [],
            s = [],
            a = 0,
            o = Math.min(e.length, t.length) - 1;
        if (e[o] < e[0]) {
            e = e.slice().reverse();
            t = t.slice().reverse()
        }
        while (++a <= o) {
            r.push(i(e[a - 1], e[a]));
            s.push(n(t[a - 1], t[a]))
        }
        return function (t) {
            var i = d3.bisect(e, t, 1, o) - 1;
            return s[i](r[i](t))
        }
    }
    d3.scale.log = function () {
        return pi(d3.scale.linear(), mi)
    };

    function pi(e, t) {
        var i = t.pow;

        function n(i) {
            return e(t(i))
        }
        n.invert = function (t) {
            return i(e.invert(t))
        };
        n.domain = function (r) {
            if (!arguments.length) return e.domain().map(i);
            t = r[0] < 0 ? vi : mi;
            i = t.pow;
            e.domain(r.map(t));
            return n
        };
        n.nice = function () {
            e.domain(ri(e.domain(), si));
            return n
        };
        n.ticks = function () {
            var n = ii(e.domain()),
                r = [];
            if (n.every(isFinite)) {
                var s = Math.floor(n[0]),
                    a = Math.ceil(n[1]),
                    o = i(n[0]),
                    l = i(n[1]);
                if (t === vi) {
                    r.push(i(s));
                    for (; s++ < a;)
                        for (var u = 9; u > 0; u--) r.push(i(s) * u)
                }
                else {
                    for (; s < a; s++)
                        for (var u = 1; u < 10; u++) r.push(i(s) * u);
                    r.push(i(s))
                }
                for (s = 0; r[s] < o; s++) {}
                for (a = r.length; r[a - 1] > l; a--) {}
                r = r.slice(s, a)
            }
            return r
        };
        n.tickFormat = function (e, r) {
            if (arguments.length < 2) r = gi;
            if (arguments.length < 1) return r;
            var s = Math.max(.1, e / n.ticks().length),
                a = t === vi ? (o = -1e-12, Math.floor) : (o = 1e-12, Math.ceil),
                o;
            return function (e) {
                return e / i(a(t(e) + o)) <= s ? r(e) : ""
            }
        };
        n.copy = function () {
            return pi(e.copy(), t)
        };
        return oi(n, e)
    }
    var gi = d3.format(".0e");

    function mi(e) {
        return Math.log(e < 0 ? 0 : e) / Math.LN10
    }

    function vi(e) {
        return -Math.log(e > 0 ? 0 : -e) / Math.LN10
    }
    mi.pow = function (e) {
        return Math.pow(10, e)
    };
    vi.pow = function (e) {
        return -Math.pow(10, -e)
    };
    d3.scale.pow = function () {
        return yi(d3.scale.linear(), 1)
    };

    function yi(e, t) {
        var i = bi(t),
            n = bi(1 / t);

        function r(t) {
            return e(i(t))
        }
        r.invert = function (t) {
            return n(e.invert(t))
        };
        r.domain = function (t) {
            if (!arguments.length) return e.domain().map(n);
            e.domain(t.map(i));
            return r
        };
        r.ticks = function (e) {
            return ci(r.domain(), e)
        };
        r.tickFormat = function (e) {
            return fi(r.domain(), e)
        };
        r.nice = function () {
            return r.domain(ri(r.domain(), li))
        };
        r.exponent = function (e) {
            if (!arguments.length) return t;
            var s = r.domain();
            i = bi(t = e);
            n = bi(1 / t);
            return r.domain(s)
        };
        r.copy = function () {
            return yi(e.copy(), t)
        };
        return oi(r, e)
    }

    function bi(e) {
        return function (t) {
            return t < 0 ? -Math.pow(-t, e) : Math.pow(t, e)
        }
    }
    d3.scale.sqrt = function () {
        return d3.scale.pow().exponent(.5)
    };
    d3.scale.ordinal = function () {
        return wi([], {
            t: "range",
            x: []
        })
    };

    function wi(e, t) {
        var i, n, r;

        function s(t) {
            return n[((i.get(t) || i.set(t, e.push(t))) - 1) % n.length]
        }

        function a(t, i) {
            return d3.range(e.length).map(function (e) {
                return t + i * e
            })
        }
        s.domain = function (n) {
            if (!arguments.length) return e;
            e = [];
            i = new o;
            var r = -1,
                a = n.length,
                l;
            while (++r < a)
                if (!i.has(l = n[r])) i.set(l, e.push(l));
            return s[t.t](t.x, t.p)
        };
        s.range = function (e) {
            if (!arguments.length) return n;
            n = e;
            r = 0;
            t = {
                t: "range",
                x: e
            };
            return s
        };
        s.rangePoints = function (i, o) {
            if (arguments.length < 2) o = 0;
            var l = i[0],
                u = i[1],
                c = (u - l) / (e.length - 1 + o);
            n = a(e.length < 2 ? (l + u) / 2 : l + c * o / 2, c);
            r = 0;
            t = {
                t: "rangePoints",
                x: i,
                p: o
            };
            return s
        };
        s.rangeBands = function (i, o) {
            if (arguments.length < 2) o = 0;
            var l = i[1] < i[0],
                u = i[l - 0],
                c = i[1 - l],
                f = (c - u) / (e.length + o);
            n = a(u + f * o, f);
            if (l) n.reverse();
            r = f * (1 - o);
            t = {
                t: "rangeBands",
                x: i,
                p: o
            };
            return s
        };
        s.rangeRoundBands = function (i, o) {
            if (arguments.length < 2) o = 0;
            var l = i[1] < i[0],
                u = i[l - 0],
                c = i[1 - l],
                f = Math.floor((c - u) / (e.length + o)),
                h = c - u - (e.length - o) * f;
            n = a(u + Math.round(h / 2), f);
            if (l) n.reverse();
            r = Math.round(f * (1 - o));
            t = {
                t: "rangeRoundBands",
                x: i,
                p: o
            };
            return s
        };
        s.rangeBand = function () {
            return r
        };
        s.rangeExtent = function () {
            return ii(t.x)
        };
        s.copy = function () {
            return wi(e, t)
        };
        return s.domain(e)
    }
    d3.scale.category10 = function () {
        return d3.scale.ordinal().range(_i)
    };
    d3.scale.category20 = function () {
        return d3.scale.ordinal().range(xi)
    };
    d3.scale.category20b = function () {
        return d3.scale.ordinal().range(ki)
    };
    d3.scale.category20c = function () {
        return d3.scale.ordinal().range(Ci)
    };
    var _i = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"];
    var xi = ["#1f77b4", "#aec7e8", "#ff7f0e", "#ffbb78", "#2ca02c", "#98df8a", "#d62728", "#ff9896", "#9467bd", "#c5b0d5", "#8c564b", "#c49c94", "#e377c2", "#f7b6d2", "#7f7f7f", "#c7c7c7", "#bcbd22", "#dbdb8d", "#17becf", "#9edae5"];
    var ki = ["#393b79", "#5254a3", "#6b6ecf", "#9c9ede", "#637939", "#8ca252", "#b5cf6b", "#cedb9c", "#8c6d31", "#bd9e39", "#e7ba52", "#e7cb94", "#843c39", "#ad494a", "#d6616b", "#e7969c", "#7b4173", "#a55194", "#ce6dbd", "#de9ed6"];
    var Ci = ["#3182bd", "#6baed6", "#9ecae1", "#c6dbef", "#e6550d", "#fd8d3c", "#fdae6b", "#fdd0a2", "#31a354", "#74c476", "#a1d99b", "#c7e9c0", "#756bb1", "#9e9ac8", "#bcbddc", "#dadaeb", "#636363", "#969696", "#bdbdbd", "#d9d9d9"];
    d3.scale.quantile = function () {
        return Mi([], [])
    };

    function Mi(e, t) {
        var i;

        function n() {
            var n = 0,
                s = e.length,
                a = t.length;
            i = [];
            while (++n < a) i[n - 1] = d3.quantile(e, n / a);
            return r
        }

        function r(e) {
            if (isNaN(e = +e)) return NaN;
            return t[d3.bisect(i, e)]
        }
        r.domain = function (t) {
            if (!arguments.length) return e;
            e = t.filter(function (e) {
                return !isNaN(e)
            }).sort(d3.ascending);
            return n()
        };
        r.range = function (e) {
            if (!arguments.length) return t;
            t = e;
            return n()
        };
        r.quantiles = function () {
            return i
        };
        r.copy = function () {
            return Mi(e, t)
        };
        return n()
    }
    d3.scale.quantize = function () {
        return Ti(0, 1, [0, 1])
    };

    function Ti(e, t, i) {
        var n, r;

        function s(t) {
            return i[Math.max(0, Math.min(r, Math.floor(n * (t - e))))]
        }

        function a() {
            n = i.length / (t - e);
            r = i.length - 1;
            return s
        }
        s.domain = function (i) {
            if (!arguments.length) return [e, t];
            e = +i[0];
            t = +i[i.length - 1];
            return a()
        };
        s.range = function (e) {
            if (!arguments.length) return i;
            i = e;
            return a()
        };
        s.copy = function () {
            return Ti(e, t, i)
        };
        return a()
    }
    d3.scale.identity = function () {
        return Di([0, 1])
    };

    function Di(e) {
        function t(e) {
            return +e
        }
        t.invert = t;
        t.domain = t.range = function (i) {
            if (!arguments.length) return e;
            e = i.map(t);
            return t
        };
        t.ticks = function (t) {
            return ci(e, t)
        };
        t.tickFormat = function (t) {
            return fi(e, t)
        };
        t.copy = function () {
            return Di(e)
        };
        return t
    }
    d3.svg = {};
    d3.svg.arc = function () {
        var e = Ai,
            t = Ii,
            i = $i,
            n = Pi;

        function r() {
            var r = e.apply(this, arguments),
                s = t.apply(this, arguments),
                a = i.apply(this, arguments) + Si,
                o = n.apply(this, arguments) + Si,
                l = (o < a && (l = a, a = o, o = l), o - a),
                u = l < Math.PI ? "0" : "1",
                c = Math.cos(a),
                f = Math.sin(a),
                h = Math.cos(o),
                d = Math.sin(o);
            return l >= Ei ? r ? "M0," + s + "A" + s + "," + s + " 0 1,1 0," + -s + "A" + s + "," + s + " 0 1,1 0," + s + "M0," + r + "A" + r + "," + r + " 0 1,0 0," + -r + "A" + r + "," + r + " 0 1,0 0," + r + "Z" : "M0," + s + "A" + s + "," + s + " 0 1,1 0," + -s + "A" + s + "," + s + " 0 1,1 0," + s + "Z" : r ? "M" + s * c + "," + s * f + "A" + s + "," + s + " 0 " + u + ",1 " + s * h + "," + s * d + "L" + r * h + "," + r * d + "A" + r + "," + r + " 0 " + u + ",0 " + r * c + "," + r * f + "Z" : "M" + s * c + "," + s * f + "A" + s + "," + s + " 0 " + u + ",1 " + s * h + "," + s * d + "L0,0" + "Z"
        }
        r.innerRadius = function (t) {
            if (!arguments.length) return e;
            e = d(t);
            return r
        };
        r.outerRadius = function (e) {
            if (!arguments.length) return t;
            t = d(e);
            return r
        };
        r.startAngle = function (e) {
            if (!arguments.length) return i;
            i = d(e);
            return r
        };
        r.endAngle = function (e) {
            if (!arguments.length) return n;
            n = d(e);
            return r
        };
        r.centroid = function () {
            var r = (e.apply(this, arguments) + t.apply(this, arguments)) / 2,
                s = (i.apply(this, arguments) + n.apply(this, arguments)) / 2 + Si;
            return [Math.cos(s) * r, Math.sin(s) * r]
        };
        return r
    };
    var Si = -Math.PI / 2,
        Ei = 2 * Math.PI - 1e-6;

    function Ai(e) {
        return e.innerRadius
    }

    function Ii(e) {
        return e.outerRadius
    }

    function $i(e) {
        return e.startAngle
    }

    function Pi(e) {
        return e.endAngle
    }

    function zi(e) {
        var t = Ni,
            i = Hi,
            n = h,
            r = Oi,
            s = ji,
            a = .7;

        function o(r) {
            var o = [],
                l = [],
                u = -1,
                c = r.length,
                f, h = d(t),
                p = d(i);

            function g() {
                o.push("M", s(e(l), a))
            }
            while (++u < c) {
                if (n.call(this, f = r[u], u)) {
                    l.push([+h.call(this, f, u), +p.call(this, f, u)])
                }
                else if (l.length) {
                    g();
                    l = []
                }
            }
            if (l.length) g();
            return o.length ? o.join("") : null
        }
        o.x = function (e) {
            if (!arguments.length) return t;
            t = e;
            return o
        };
        o.y = function (e) {
            if (!arguments.length) return i;
            i = e;
            return o
        };
        o.defined = function (e) {
            if (!arguments.length) return n;
            n = e;
            return o
        };
        o.interpolate = function (e) {
            if (!arguments.length) return r;
            if (!Li.has(e += "")) e = Oi;
            s = Li.get(r = e);
            return o
        };
        o.tension = function (e) {
            if (!arguments.length) return a;
            a = e;
            return o
        };
        return o
    }
    d3.svg.line = function () {
        return zi(c)
    };

    function Ni(e) {
        return e[0]
    }

    function Hi(e) {
        return e[1]
    }
    var Oi = "linear";
    var Li = d3.map({
        linear: ji,
        "step-before": Fi,
        "step-after": Ri,
        basis: Qi,
        "basis-open": Gi,
        "basis-closed": Xi,
        bundle: Vi,
        cardinal: qi,
        "cardinal-open": Wi,
        "cardinal-closed": Yi,
        monotone: an
    });

    function ji(e) {
        var t = 0,
            i = e.length,
            n = e[0],
            r = [n[0], ",", n[1]];
        while (++t < i) r.push("L", (n = e[t])[0], ",", n[1]);
        return r.join("")
    }

    function Fi(e) {
        var t = 0,
            i = e.length,
            n = e[0],
            r = [n[0], ",", n[1]];
        while (++t < i) r.push("V", (n = e[t])[1], "H", n[0]);
        return r.join("")
    }

    function Ri(e) {
        var t = 0,
            i = e.length,
            n = e[0],
            r = [n[0], ",", n[1]];
        while (++t < i) r.push("H", (n = e[t])[0], "V", n[1]);
        return r.join("")
    }

    function Wi(e, t) {
        return e.length < 4 ? ji(e) : e[1] + Bi(e.slice(1, e.length - 1), Ui(e, t))
    }

    function Yi(e, t) {
        return e.length < 3 ? ji(e) : e[0] + Bi((e.push(e[0]), e), Ui([e[e.length - 2]].concat(e, [e[1]]), t))
    }

    function qi(e, t, i) {
        return e.length < 3 ? ji(e) : e[0] + Bi(e, Ui(e, t))
    }

    function Bi(e, t) {
        if (t.length < 1 || e.length != t.length && e.length != t.length + 2) {
            return ji(e)
        }
        var i = e.length != t.length,
            n = "",
            r = e[0],
            s = e[1],
            a = t[0],
            o = a,
            l = 1;
        if (i) {
            n += "Q" + (s[0] - a[0] * 2 / 3) + "," + (s[1] - a[1] * 2 / 3) + "," + s[0] + "," + s[1];
            r = e[1];
            l = 2
        }
        if (t.length > 1) {
            o = t[1];
            s = e[l];
            l++;
            n += "C" + (r[0] + a[0]) + "," + (r[1] + a[1]) + "," + (s[0] - o[0]) + "," + (s[1] - o[1]) + "," + s[0] + "," + s[1];
            for (var u = 2; u < t.length; u++, l++) {
                s = e[l];
                o = t[u];
                n += "S" + (s[0] - o[0]) + "," + (s[1] - o[1]) + "," + s[0] + "," + s[1]
            }
        }
        if (i) {
            var c = e[l];
            n += "Q" + (s[0] + o[0] * 2 / 3) + "," + (s[1] + o[1] * 2 / 3) + "," + c[0] + "," + c[1]
        }
        return n
    }

    function Ui(e, t) {
        var i = [],
            n = (1 - t) / 2,
            r, s = e[0],
            a = e[1],
            o = 1,
            l = e.length;
        while (++o < l) {
            r = s;
            s = a;
            a = e[o];
            i.push([n * (a[0] - r[0]), n * (a[1] - r[1])])
        }
        return i
    }

    function Qi(e) {
        if (e.length < 3) return ji(e);
        var t = 1,
            i = e.length,
            n = e[0],
            r = n[0],
            s = n[1],
            a = [r, r, r, (n = e[1])[0]],
            o = [s, s, s, n[1]],
            l = [r, ",", s];
        tn(l, a, o);
        while (++t < i) {
            n = e[t];
            a.shift();
            a.push(n[0]);
            o.shift();
            o.push(n[1]);
            tn(l, a, o)
        }
        t = -1;
        while (++t < 2) {
            a.shift();
            a.push(n[0]);
            o.shift();
            o.push(n[1]);
            tn(l, a, o)
        }
        return l.join("")
    }

    function Gi(e) {
        if (e.length < 4) return ji(e);
        var t = [],
            i = -1,
            n = e.length,
            r, s = [0],
            a = [0];
        while (++i < 3) {
            r = e[i];
            s.push(r[0]);
            a.push(r[1])
        }
        t.push(Ki(en, s) + "," + Ki(en, a));
        --i;
        while (++i < n) {
            r = e[i];
            s.shift();
            s.push(r[0]);
            a.shift();
            a.push(r[1]);
            tn(t, s, a)
        }
        return t.join("")
    }

    function Xi(e) {
        var t, i = -1,
            n = e.length,
            r = n + 4,
            s, a = [],
            o = [];
        while (++i < 4) {
            s = e[i % n];
            a.push(s[0]);
            o.push(s[1])
        }
        t = [Ki(en, a), ",", Ki(en, o)];
        --i;
        while (++i < r) {
            s = e[i % n];
            a.shift();
            a.push(s[0]);
            o.shift();
            o.push(s[1]);
            tn(t, a, o)
        }
        return t.join("")
    }

    function Vi(e, t) {
        var i = e.length - 1;
        if (i) {
            var n = e[0][0],
                r = e[0][1],
                s = e[i][0] - n,
                a = e[i][1] - r,
                o = -1,
                l, u;
            while (++o <= i) {
                l = e[o];
                u = o / i;
                l[0] = t * l[0] + (1 - t) * (n + u * s);
                l[1] = t * l[1] + (1 - t) * (r + u * a)
            }
        }
        return Qi(e)
    }

    function Ki(e, t) {
        return e[0] * t[0] + e[1] * t[1] + e[2] * t[2] + e[3] * t[3]
    }
    var Zi = [0, 2 / 3, 1 / 3, 0],
        Ji = [0, 1 / 3, 2 / 3, 0],
        en = [0, 1 / 6, 2 / 3, 1 / 6];

    function tn(e, t, i) {
        e.push("C", Ki(Zi, t), ",", Ki(Zi, i), ",", Ki(Ji, t), ",", Ki(Ji, i), ",", Ki(en, t), ",", Ki(en, i))
    }

    function nn(e, t) {
        return (t[1] - e[1]) / (t[0] - e[0])
    }

    function rn(e) {
        var t = 0,
            i = e.length - 1,
            n = [],
            r = e[0],
            s = e[1],
            a = n[0] = nn(r, s);
        while (++t < i) {
            n[t] = a + (a = nn(r = s, s = e[t + 1]))
        }
        n[t] = a;
        return n
    }

    function sn(e) {
        var t = [],
            i, n, r, s, a = rn(e),
            o = -1,
            l = e.length - 1;
        while (++o < l) {
            i = nn(e[o], e[o + 1]);
            if (Math.abs(i) < 1e-6) {
                a[o] = a[o + 1] = 0
            }
            else {
                n = a[o] / i;
                r = a[o + 1] / i;
                s = n * n + r * r;
                if (s > 9) {
                    s = i * 3 / Math.sqrt(s);
                    a[o] = s * n;
                    a[o + 1] = s * r
                }
            }
        }
        o = -1;
        while (++o <= l) {
            s = (e[Math.min(l, o + 1)][0] - e[Math.max(0, o - 1)][0]) / (6 * (1 + a[o] * a[o]));
            t.push([s || 0, a[o] * s || 0])
        }
        return t
    }

    function an(e) {
        return e.length < 3 ? ji(e) : e[0] + Bi(e, sn(e))
    }
    d3.svg.line.radial = function () {
        var e = zi(on);
        e.radius = e.x, delete e.x;
        e.angle = e.y, delete e.y;
        return e
    };

    function on(e) {
        var t, i = -1,
            n = e.length,
            r, s;
        while (++i < n) {
            t = e[i];
            r = t[0];
            s = t[1] + Si;
            t[0] = r * Math.cos(s);
            t[1] = r * Math.sin(s)
        }
        return e
    }

    function ln(e) {
        var t = Ni,
            i = Ni,
            n = 0,
            r = Hi,
            s = h,
            a = Oi,
            o = ji,
            l = ji,
            u = "L",
            c = .7;

        function f(a) {
            var f = [],
                h = [],
                p = [],
                g = -1,
                m = a.length,
                v, y = d(t),
                b = d(n),
                w = t === i ? function () {
                    return x
                } : d(i),
                _ = n === r ? function () {
                    return k
                } : d(r),
                x, k;

            function C() {
                f.push("M", o(e(p), c), u, l(e(h.reverse()), c), "Z")
            }
            while (++g < m) {
                if (s.call(this, v = a[g], g)) {
                    h.push([x = +y.call(this, v, g), k = +b.call(this, v, g)]);
                    p.push([+w.call(this, v, g), +_.call(this, v, g)])
                }
                else if (h.length) {
                    C();
                    h = [];
                    p = []
                }
            }
            if (h.length) C();
            return f.length ? f.join("") : null
        }
        f.x = function (e) {
            if (!arguments.length) return i;
            t = i = e;
            return f
        };
        f.x0 = function (e) {
            if (!arguments.length) return t;
            t = e;
            return f
        };
        f.x1 = function (e) {
            if (!arguments.length) return i;
            i = e;
            return f
        };
        f.y = function (e) {
            if (!arguments.length) return r;
            n = r = e;
            return f
        };
        f.y0 = function (e) {
            if (!arguments.length) return n;
            n = e;
            return f
        };
        f.y1 = function (e) {
            if (!arguments.length) return r;
            r = e;
            return f
        };
        f.defined = function (e) {
            if (!arguments.length) return s;
            s = e;
            return f
        };
        f.interpolate = function (e) {
            if (!arguments.length) return a;
            if (!Li.has(e += "")) e = Oi;
            o = Li.get(a = e);
            l = o.reverse || o;
            u = /-closed$/.test(e) ? "M" : "L";
            return f
        };
        f.tension = function (e) {
            if (!arguments.length) return c;
            c = e;
            return f
        };
        return f
    }
    Fi.reverse = Ri;
    Ri.reverse = Fi;
    d3.svg.area = function () {
        return ln(Object)
    };
    d3.svg.area.radial = function () {
        var e = ln(on);
        e.radius = e.x, delete e.x;
        e.innerRadius = e.x0, delete e.x0;
        e.outerRadius = e.x1, delete e.x1;
        e.angle = e.y, delete e.y;
        e.startAngle = e.y0, delete e.y0;
        e.endAngle = e.y1, delete e.y1;
        return e
    };
    d3.svg.chord = function () {
        var e = un,
            t = cn,
            i = fn,
            n = $i,
            r = Pi;

        function s(i, n) {
            var r = a(this, e, i, n),
                s = a(this, t, i, n);
            return "M" + r.p0 + l(r.r, r.p1, r.a1 - r.a0) + (o(r, s) ? u(r.r, r.p1, r.r, r.p0) : u(r.r, r.p1, s.r, s.p0) + l(s.r, s.p1, s.a1 - s.a0) + u(s.r, s.p1, r.r, r.p0)) + "Z"
        }

        function a(e, t, s, a) {
            var o = t.call(e, s, a),
                l = i.call(e, o, a),
                u = n.call(e, o, a) + Si,
                c = r.call(e, o, a) + Si;
            return {
                r: l,
                a0: u,
                a1: c,
                p0: [l * Math.cos(u), l * Math.sin(u)],
                p1: [l * Math.cos(c), l * Math.sin(c)]
            }
        }

        function o(e, t) {
            return e.a0 == t.a0 && e.a1 == t.a1
        }

        function l(e, t, i) {
            return "A" + e + "," + e + " 0 " + +(i > Math.PI) + ",1 " + t
        }

        function u(e, t, i, n) {
            return "Q 0,0 " + n
        }
        s.radius = function (e) {
            if (!arguments.length) return i;
            i = d(e);
            return s
        };
        s.source = function (t) {
            if (!arguments.length) return e;
            e = d(t);
            return s
        };
        s.target = function (e) {
            if (!arguments.length) return t;
            t = d(e);
            return s
        };
        s.startAngle = function (e) {
            if (!arguments.length) return n;
            n = d(e);
            return s
        };
        s.endAngle = function (e) {
            if (!arguments.length) return r;
            r = d(e);
            return s
        };
        return s
    };

    function un(e) {
        return e.source
    }

    function cn(e) {
        return e.target
    }

    function fn(e) {
        return e.radius
    }

    function hn(e) {
        return e.startAngle
    }

    function dn(e) {
        return e.endAngle
    }
    d3.svg.diagonal = function () {
        var e = un,
            t = cn,
            i = pn;

        function n(n, r) {
            var s = e.call(this, n, r),
                a = t.call(this, n, r),
                o = (s.y + a.y) / 2,
                l = [s, {
                    x: s.x,
                    y: o
                }, {
                    x: a.x,
                    y: o
                }, a];
            l = l.map(i);
            return "M" + l[0] + "C" + l[1] + " " + l[2] + " " + l[3]
        }
        n.source = function (t) {
            if (!arguments.length) return e;
            e = d(t);
            return n
        };
        n.target = function (e) {
            if (!arguments.length) return t;
            t = d(e);
            return n
        };
        n.projection = function (e) {
            if (!arguments.length) return i;
            i = e;
            return n
        };
        return n
    };

    function pn(e) {
        return [e.x, e.y]
    }
    d3.svg.diagonal.radial = function () {
        var e = d3.svg.diagonal(),
            t = pn,
            i = e.projection;
        e.projection = function (e) {
            return arguments.length ? i(gn(t = e)) : t
        };
        return e
    };

    function gn(e) {
        return function () {
            var t = e.apply(this, arguments),
                i = t[0],
                n = t[1] + Si;
            return [i * Math.cos(n), i * Math.sin(n)]
        }
    }
    d3.svg.mouse = d3.mouse;
    d3.svg.touches = d3.touches;
    d3.svg.symbol = function () {
        var e = vn,
            t = mn;

        function i(i, n) {
            return (bn.get(e.call(this, i, n)) || yn)(t.call(this, i, n))
        }
        i.type = function (t) {
            if (!arguments.length) return e;
            e = d(t);
            return i
        };
        i.size = function (e) {
            if (!arguments.length) return t;
            t = d(e);
            return i
        };
        return i
    };

    function mn() {
        return 64
    }

    function vn() {
        return "circle"
    }

    function yn(e) {
        var t = Math.sqrt(e / Math.PI);
        return "M0," + t + "A" + t + "," + t + " 0 1,1 0," + -t + "A" + t + "," + t + " 0 1,1 0," + t + "Z"
    }
    var bn = d3.map({
        circle: yn,
        cross: function (e) {
            var t = Math.sqrt(e / 5) / 2;
            return "M" + -3 * t + "," + -t + "H" + -t + "V" + -3 * t + "H" + t + "V" + -t + "H" + 3 * t + "V" + t + "H" + t + "V" + 3 * t + "H" + -t + "V" + t + "H" + -3 * t + "Z"
        },
        diamond: function (e) {
            var t = Math.sqrt(e / (2 * _n)),
                i = t * _n;
            return "M0," + -t + "L" + i + ",0" + " 0," + t + " " + -i + ",0" + "Z"
        },
        square: function (e) {
            var t = Math.sqrt(e) / 2;
            return "M" + -t + "," + -t + "L" + t + "," + -t + " " + t + "," + t + " " + -t + "," + t + "Z"
        },
        "triangle-down": function (e) {
            var t = Math.sqrt(e / wn),
                i = t * wn / 2;
            return "M0," + i + "L" + t + "," + -i + " " + -t + "," + -i + "Z"
        },
        "triangle-up": function (e) {
            var t = Math.sqrt(e / wn),
                i = t * wn / 2;
            return "M0," + -i + "L" + t + "," + i + " " + -t + "," + i + "Z"
        }
    });
    d3.svg.symbolTypes = bn.keys();
    var wn = Math.sqrt(3),
        _n = Math.tan(30 * Math.PI / 180);
    d3.svg.axis = function () {
        var e = d3.scale.linear(),
            t = "bottom",
            i = 6,
            n = 6,
            r = 6,
            s = 3,
            a = [10],
            o = null,
            l, u = 0;

        function c(c) {
            c.each(function () {
                var c = d3.select(this);
                var f = o == null ? e.ticks ? e.ticks.apply(e, a) : e.domain() : o,
                    h = l == null ? e.tickFormat ? e.tickFormat.apply(e, a) : String : l;
                var d = Cn(e, f, u),
                    p = c.selectAll(".minor").data(d, String),
                    g = p.enter().insert("line", "g").attr("class", "tick minor").style("opacity", 1e-6),
                    m = d3.transition(p.exit()).style("opacity", 1e-6).remove(),
                    v = d3.transition(p).style("opacity", 1);
                var y = c.selectAll("g").data(f, String),
                    b = y.enter().insert("g", "path").style("opacity", 1e-6),
                    w = d3.transition(y.exit()).style("opacity", 1e-6).remove(),
                    _ = d3.transition(y).style("opacity", 1),
                    x;
                var k = ni(e),
                    C = c.selectAll(".domain").data([0]),
                    M = C.enter().append("path").attr("class", "domain"),
                    T = d3.transition(C);
                var D = e.copy(),
                    S = this.__chart__ || D;
                this.__chart__ = D;
                b.append("line").attr("class", "tick");
                b.append("text");
                var E = b.select("line"),
                    A = _.select("line"),
                    I = y.select("text").text(h),
                    $ = b.select("text"),
                    P = _.select("text");
                switch (t) {
                    case "bottom":
                        {
                            x = xn;g.attr("y2", n);v.attr("x2", 0).attr("y2", n);E.attr("y2", i);$.attr("y", Math.max(i, 0) + s);A.attr("x2", 0).attr("y2", i);P.attr("x", 0).attr("y", Math.max(i, 0) + s);I.attr("dy", ".71em").attr("text-anchor", "middle");T.attr("d", "M" + k[0] + "," + r + "V0H" + k[1] + "V" + r);
                            break
                        }
                    case "top":
                        {
                            x = xn;g.attr("y2", -n);v.attr("x2", 0).attr("y2", -n);E.attr("y2", -i);$.attr("y", -(Math.max(i, 0) + s));A.attr("x2", 0).attr("y2", -i);P.attr("x", 0).attr("y", -(Math.max(i, 0) + s));I.attr("dy", "0em").attr("text-anchor", "middle");T.attr("d", "M" + k[0] + "," + -r + "V0H" + k[1] + "V" + -r);
                            break
                        }
                    case "left":
                        {
                            x = kn;g.attr("x2", -n);v.attr("x2", -n).attr("y2", 0);E.attr("x2", -i);$.attr("x", -(Math.max(i, 0) + s));A.attr("x2", -i).attr("y2", 0);P.attr("x", -(Math.max(i, 0) + s)).attr("y", 0);I.attr("dy", ".32em").attr("text-anchor", "end");T.attr("d", "M" + -r + "," + k[0] + "H0V" + k[1] + "H" + -r);
                            break
                        }
                    case "right":
                        {
                            x = kn;g.attr("x2", n);v.attr("x2", n).attr("y2", 0);E.attr("x2", i);$.attr("x", Math.max(i, 0) + s);A.attr("x2", i).attr("y2", 0);P.attr("x", Math.max(i, 0) + s).attr("y", 0);I.attr("dy", ".32em").attr("text-anchor", "start");T.attr("d", "M" + r + "," + k[0] + "H0V" + k[1] + "H" + r);
                            break
                        }
                }
                if (e.ticks) {
                    b.call(x, S);
                    _.call(x, D);
                    w.call(x, D);
                    g.call(x, S);
                    v.call(x, D);
                    m.call(x, D)
                }
                else {
                    var z = D.rangeBand() / 2,
                        N = function (e) {
                            return D(e) + z
                        };
                    b.call(x, N);
                    _.call(x, N)
                }
            })
        }
        c.scale = function (t) {
            if (!arguments.length) return e;
            e = t;
            return c
        };
        c.orient = function (e) {
            if (!arguments.length) return t;
            t = e;
            return c
        };
        c.ticks = function () {
            if (!arguments.length) return a;
            a = arguments;
            return c
        };
        c.tickValues = function (e) {
            if (!arguments.length) return o;
            o = e;
            return c
        };
        c.tickFormat = function (e) {
            if (!arguments.length) return l;
            l = e;
            return c
        };
        c.tickSize = function (e, t, s) {
            if (!arguments.length) return i;
            var a = arguments.length - 1;
            i = +e;
            n = a > 1 ? +t : i;
            r = a > 0 ? +arguments[a] : i;
            return c
        };
        c.tickPadding = function (e) {
            if (!arguments.length) return s;
            s = +e;
            return c
        };
        c.tickSubdivide = function (e) {
            if (!arguments.length) return u;
            u = +e;
            return c
        };
        return c
    };

    function xn(e, t) {
        e.attr("transform", function (e) {
            return "translate(" + t(e) + ",0)"
        })
    }

    function kn(e, t) {
        e.attr("transform", function (e) {
            return "translate(0," + t(e) + ")"
        })
    }

    function Cn(e, t, i) {
        r = [];
        if (i && t.length > 1) {
            var n = ii(e.domain()),
                r, s = -1,
                a = t.length,
                o = (t[1] - t[0]) / ++i,
                l, u;
            while (++s < a) {
                for (l = i; --l > 0;) {
                    if ((u = +t[s] - l * o) >= n[0]) {
                        r.push(u)
                    }
                }
            }
            for (--s, l = 0; ++l < i && (u = +t[s] + l * o) < n[1];) {
                r.push(u)
            }
        }
        return r
    }
    d3.svg.brush = function () {
        var e = V(a, "brushstart", "brush", "brushend"),
            t = null,
            i = null,
            n = Tn[0],
            r = [
                [0, 0],
                [0, 0]
            ],
            s;

        function a(e) {
            e.each(function () {
                var e = d3.select(this),
                    r = e.selectAll(".background").data([0]),
                    s = e.selectAll(".extent").data([0]),
                    f = e.selectAll(".resize").data(n, String),
                    h;
                e.style("pointer-events", "all").on("mousedown.brush", c).on("touchstart.brush", c);
                r.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair");
                s.enter().append("rect").attr("class", "extent").style("cursor", "move");
                f.enter().append("g").attr("class", function (e) {
                    return "resize " + e
                }).style("cursor", function (e) {
                    return Mn[e]
                }).append("rect").attr("x", function (e) {
                    return /[ew]$/.test(e) ? -3 : null
                }).attr("y", function (e) {
                    return /^[ns]/.test(e) ? -3 : null
                }).attr("width", 6).attr("height", 6).style("visibility", "hidden");
                f.style("display", a.empty() ? "none" : null);
                f.exit().remove();
                if (t) {
                    h = ni(t);
                    r.attr("x", h[0]).attr("width", h[1] - h[0]);
                    l(e)
                }
                if (i) {
                    h = ni(i);
                    r.attr("y", h[0]).attr("height", h[1] - h[0]);
                    u(e)
                }
                o(e)
            })
        }

        function o(e) {
            e.selectAll(".resize").attr("transform", function (e) {
                return "translate(" + r[+/e$/.test(e)][0] + "," + r[+/^s/.test(e)][1] + ")"
            })
        }

        function l(e) {
            e.select(".extent").attr("x", r[0][0]);
            e.selectAll(".extent,.n>rect,.s>rect").attr("width", r[1][0] - r[0][0])
        }

        function u(e) {
            e.select(".extent").attr("y", r[0][1]);
            e.selectAll(".extent,.e>rect,.w>rect").attr("height", r[1][1] - r[0][1])
        }

        function c() {
            var n = this,
                c = d3.select(d3.event.target),
                f = e.of(n, arguments),
                h = d3.select(n),
                d = c.datum(),
                p = !/^(n|s)$/.test(d) && t,
                g = !/^(e|w)$/.test(d) && i,
                m = c.classed("extent"),
                v, y = k(),
                b;
            var w = d3.select(window).on("mousemove.brush", T).on("mouseup.brush", S).on("touchmove.brush", T).on("touchend.brush", S).on("keydown.brush", C).on("keyup.brush", M);
            if (m) {
                y[0] = r[0][0] - y[0];
                y[1] = r[0][1] - y[1]
            }
            else if (d) {
                var _ = +/w$/.test(d),
                    x = +/^n/.test(d);
                b = [r[1 - _][0] - y[0], r[1 - x][1] - y[1]];
                y[0] = r[_][0];
                y[1] = r[x][1]
            }
            else if (d3.event.altKey) v = y.slice();
            h.style("pointer-events", "none").selectAll(".resize").style("display", null);
            d3.select("body").style("cursor", c.style("cursor"));
            f({
                type: "brushstart"
            });
            T();
            G();

            function k() {
                var e = d3.event.changedTouches;
                return e ? d3.touches(n, e)[0] : d3.mouse(n)
            }

            function C() {
                if (d3.event.keyCode == 32) {
                    if (!m) {
                        v = null;
                        y[0] -= r[1][0];
                        y[1] -= r[1][1];
                        m = 2
                    }
                    G()
                }
            }

            function M() {
                if (d3.event.keyCode == 32 && m == 2) {
                    y[0] += r[1][0];
                    y[1] += r[1][1];
                    m = 0;
                    G()
                }
            }

            function T() {
                var e = k(),
                    n = false;
                if (b) {
                    e[0] += b[0];
                    e[1] += b[1]
                }
                if (!m) {
                    if (d3.event.altKey) {
                        if (!v) v = [(r[0][0] + r[1][0]) / 2, (r[0][1] + r[1][1]) / 2];
                        y[0] = r[+(e[0] < v[0])][0];
                        y[1] = r[+(e[1] < v[1])][1]
                    }
                    else v = null
                }
                if (p && D(e, t, 0)) {
                    l(h);
                    n = true
                }
                if (g && D(e, i, 1)) {
                    u(h);
                    n = true
                }
                if (n) {
                    o(h);
                    f({
                        type: "brush",
                        mode: m ? "move" : "resize"
                    })
                }
            }

            function D(e, t, i) {
                var n = ni(t),
                    a = n[0],
                    o = n[1],
                    l = y[i],
                    u = r[1][i] - r[0][i],
                    c, f;
                if (m) {
                    a -= l;
                    o -= u + l
                }
                c = Math.max(a, Math.min(o, e[i]));
                if (m) {
                    f = (c += l) + u
                }
                else {
                    if (v) l = Math.max(a, Math.min(o, 2 * v[i] - c));
                    if (l < c) {
                        f = c;
                        c = l
                    }
                    else {
                        f = l
                    }
                }
                if (r[0][i] !== c || r[1][i] !== f) {
                    s = null;
                    r[0][i] = c;
                    r[1][i] = f;
                    return true
                }
            }

            function S() {
                T();
                h.style("pointer-events", "all").selectAll(".resize").style("display", a.empty() ? "none" : null);
                d3.select("body").style("cursor", null);
                w.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null);
                f({
                    type: "brushend"
                });
                G()
            }
        }
        a.x = function (e) {
            if (!arguments.length) return t;
            t = e;
            n = Tn[!t << 1 | !i];
            return a
        };
        a.y = function (e) {
            if (!arguments.length) return i;
            i = e;
            n = Tn[!t << 1 | !i];
            return a
        };
        a.extent = function (e) {
            var n, o, l, u, c;
            if (!arguments.length) {
                e = s || r;
                if (t) {
                    n = e[0][0], o = e[1][0];
                    if (!s) {
                        n = r[0][0], o = r[1][0];
                        if (t.invert) n = t.invert(n), o = t.invert(o);
                        if (o < n) c = n, n = o, o = c
                    }
                }
                if (i) {
                    l = e[0][1], u = e[1][1];
                    if (!s) {
                        l = r[0][1], u = r[1][1];
                        if (i.invert) l = i.invert(l), u = i.invert(u);
                        if (u < l) c = l, l = u, u = c
                    }
                }
                return t && i ? [
                    [n, l],
                    [o, u]
                ] : t ? [n, o] : i && [l, u]
            }
            s = [
                [0, 0],
                [0, 0]
            ];
            if (t) {
                n = e[0], o = e[1];
                if (i) n = n[0], o = o[0];
                s[0][0] = n, s[1][0] = o;
                if (t.invert) n = t(n), o = t(o);
                if (o < n) c = n, n = o, o = c;
                r[0][0] = n | 0, r[1][0] = o | 0
            }
            if (i) {
                l = e[0], u = e[1];
                if (t) l = l[1], u = u[1];
                s[0][1] = l, s[1][1] = u;
                if (i.invert) l = i(l), u = i(u);
                if (u < l) c = l, l = u, u = c;
                r[0][1] = l | 0, r[1][1] = u | 0
            }
            return a
        };
        a.clear = function () {
            s = null;
            r[0][0] = r[0][1] = r[1][0] = r[1][1] = 0;
            return a
        };
        a.empty = function () {
            return t && r[0][0] === r[1][0] || i && r[0][1] === r[1][1]
        };
        return d3.rebind(a, e, "on")
    };
    var Mn = {
        n: "ns-resize",
        e: "ew-resize",
        s: "ns-resize",
        w: "ew-resize",
        nw: "nwse-resize",
        ne: "nesw-resize",
        se: "nwse-resize",
        sw: "nesw-resize"
    };
    var Tn = [
        ["n", "e", "s", "w", "nw", "ne", "se", "sw"],
        ["e", "w"],
        ["n", "s"],
        []
    ];
    d3.behavior = {};
    d3.behavior.drag = function () {
        var e = V(i, "drag", "dragstart", "dragend"),
            t = null;

        function i() {
            this.on("mousedown.drag", n).on("touchstart.drag", n)
        }

        function n() {
            var i = this,
                n = e.of(i, arguments),
                r = d3.event.target,
                s, a = u(),
                o = 0;
            var l = d3.select(window).on("mousemove.drag", c).on("touchmove.drag", c).on("mouseup.drag", f, true).on("touchend.drag", f, true);
            if (t) {
                s = t.apply(i, arguments);
                s = [s.x - a[0], s.y - a[1]]
            }
            else {
                s = [0, 0]
            }
            G();
            n({
                type: "dragstart"
            });

            function u() {
                var e = i.parentNode,
                    t = d3.event.changedTouches;
                return t ? d3.touches(e, t)[0] : d3.mouse(e)
            }

            function c() {
                if (!i.parentNode) return f();
                var e = u(),
                    t = e[0] - a[0],
                    r = e[1] - a[1];
                o |= t | r;
                a = e;
                G();
                n({
                    type: "drag",
                    x: e[0] + s[0],
                    y: e[1] + s[1],
                    dx: t,
                    dy: r
                })
            }

            function f() {
                n({
                    type: "dragend"
                });
                if (o) {
                    G();
                    if (d3.event.target === r) l.on("click.drag", h, true)
                }
                l.on("mousemove.drag", null).on("touchmove.drag", null).on("mouseup.drag", null).on("touchend.drag", null)
            }

            function h() {
                G();
                l.on("click.drag", null)
            }
        }
        i.origin = function (e) {
            if (!arguments.length) return t;
            t = e;
            return i
        };
        return d3.rebind(i, e, "on")
    };
    d3.behavior.zoom = function () {
        var e = [0, 0],
            t, i = 1,
            n, r = Sn,
            s = V(f, "zoom"),
            a, o, l, u, c;

        function f() {
            this.on("mousedown.zoom", v).on("mousewheel.zoom", y).on("mousemove.zoom", b).on("DOMMouseScroll.zoom", y).on("dblclick.zoom", w).on("touchstart.zoom", _).on("touchmove.zoom", x).on("touchend.zoom", _)
        }
        f.translate = function (t) {
            if (!arguments.length) return e;
            e = t.map(Number);
            return f
        };
        f.scale = function (e) {
            if (!arguments.length) return i;
            i = +e;
            return f
        };
        f.scaleExtent = function (e) {
            if (!arguments.length) return r;
            r = e == null ? Sn : e.map(Number);
            return f
        };
        f.x = function (e) {
            if (!arguments.length) return o;
            o = e;
            a = e.copy();
            return f
        };
        f.y = function (e) {
            if (!arguments.length) return u;
            u = e;
            l = e.copy();
            return f
        };

        function h(t) {
            return [(t[0] - e[0]) / i, (t[1] - e[1]) / i]
        }

        function d(t) {
            return [t[0] * i + e[0], t[1] * i + e[1]]
        }

        function p(e) {
            i = Math.max(r[0], Math.min(r[1], e))
        }

        function g(t, i) {
            i = d(i);
            e[0] += t[0] - i[0];
            e[1] += t[1] - i[1]
        }

        function m(t) {
            if (o) o.domain(a.range().map(function (t) {
                return (t - e[0]) / i
            }).map(a.invert));
            if (u) u.domain(l.range().map(function (t) {
                return (t - e[1]) / i
            }).map(l.invert));
            d3.event.preventDefault();
            t({
                type: "zoom",
                scale: i,
                translate: e
            })
        }

        function v() {
            var e = this,
                t = s.of(e, arguments),
                i = d3.event.target,
                n = 0,
                r = d3.select(window).on("mousemove.zoom", o).on("mouseup.zoom", l),
                a = h(d3.mouse(e));
            window.focus();
            G();

            function o() {
                n = 1;
                g(d3.mouse(e), a);
                m(t)
            }

            function l() {
                if (n) G();
                r.on("mousemove.zoom", null).on("mouseup.zoom", null);
                if (n && d3.event.target === i) r.on("click.zoom", u, true)
            }

            function u() {
                G();
                r.on("click.zoom", null)
            }
        }

        function y() {
            if (!t) t = h(d3.mouse(this));
            p(Math.pow(2, En() * .002) * i);
            g(d3.mouse(this), t);
            m(s.of(this, arguments))
        }

        function b() {
            t = null
        }

        function w() {
            var e = d3.mouse(this),
                t = h(e);
            p(d3.event.shiftKey ? i / 2 : i * 2);
            g(e, t);
            m(s.of(this, arguments))
        }

        function _() {
            var e = d3.touches(this),
                r = Date.now();
            n = i;
            t = {};
            e.forEach(function (e) {
                t[e.identifier] = h(e)
            });
            G();
            if (e.length === 1 && r - c < 500) {
                var a = e[0],
                    o = h(e[0]);
                p(i * 2);
                g(a, o);
                m(s.of(this, arguments))
            }
            c = r
        }

        function x() {
            var e = d3.touches(this),
                i = e[0],
                r = t[i.identifier];
            if (a = e[1]) {
                var a, o = t[a.identifier];
                i = [(i[0] + a[0]) / 2, (i[1] + a[1]) / 2];
                r = [(r[0] + o[0]) / 2, (r[1] + o[1]) / 2];
                p(d3.event.scale * n)
            }
            g(i, r);
            m(s.of(this, arguments))
        }
        return d3.rebind(f, s, "on")
    };
    var Dn, Sn = [0, Infinity];

    function En() {
        if (!Dn) {
            Dn = d3.select("body").append("div").style("visibility", "hidden").style("top", 0).style("height", 0).style("width", 0).style("overflow-y", "scroll").append("div").style("height", "2000px").node().parentNode
        }
        var e = d3.event,
            t;
        try {
            Dn.scrollTop = 1e3;
            Dn.dispatchEvent(e);
            t = 1e3 - Dn.scrollTop
        }
        catch (error) {
            t = e.wheelDelta || -e.detail * 5
        }
        return t
    }
    d3.layout = {};
    d3.layout.bundle = function () {
        return function (e) {
            var t = [],
                i = -1,
                n = e.length;
            while (++i < n) t.push(An(e[i]));
            return t
        }
    };

    function An(e) {
        var t = e.source,
            i = e.target,
            n = $n(t, i),
            r = [t];
        while (t !== n) {
            t = t.parent;
            r.push(t)
        }
        var s = r.length;
        while (i !== n) {
            r.splice(s, 0, i);
            i = i.parent
        }
        return r
    }

    function In(e) {
        var t = [],
            i = e.parent;
        while (i != null) {
            t.push(e);
            e = i;
            i = i.parent
        }
        t.push(e);
        return t
    }

    function $n(e, t) {
        if (e === t) return e;
        var i = In(e),
            n = In(t),
            r = i.pop(),
            s = n.pop(),
            a = null;
        while (r === s) {
            a = r;
            r = i.pop();
            s = n.pop()
        }
        return a
    }
    d3.layout.chord = function () {
        var e = {},
            t, i, n, r, s = 0,
            a, o, l;

        function u() {
            var e = {},
                u = [],
                f = d3.range(r),
                h = [],
                d, p, g, m, v;
            t = [];
            i = [];
            d = 0, m = -1;
            while (++m < r) {
                p = 0, v = -1;
                while (++v < r) {
                    p += n[m][v]
                }
                u.push(p);
                h.push(d3.range(r));
                d += p
            }
            if (a) {
                f.sort(function (e, t) {
                    return a(u[e], u[t])
                })
            }
            if (o) {
                h.forEach(function (e, t) {
                    e.sort(function (e, i) {
                        return o(n[t][e], n[t][i])
                    })
                })
            }
            d = (2 * Math.PI - s * r) / d;
            p = 0, m = -1;
            while (++m < r) {
                g = p, v = -1;
                while (++v < r) {
                    var y = f[m],
                        b = h[y][v],
                        w = n[y][b],
                        _ = p,
                        x = p += w * d;
                    e[y + "-" + b] = {
                        index: y,
                        subindex: b,
                        startAngle: _,
                        endAngle: x,
                        value: w
                    }
                }
                i[y] = {
                    index: y,
                    startAngle: g,
                    endAngle: p,
                    value: (p - g) / d
                };
                p += s
            }
            m = -1;
            while (++m < r) {
                v = m - 1;
                while (++v < r) {
                    var k = e[m + "-" + v],
                        C = e[v + "-" + m];
                    if (k.value || C.value) {
                        t.push(k.value < C.value ? {
                            source: C,
                            target: k
                        } : {
                            source: k,
                            target: C
                        })
                    }
                }
            }
            if (l) c()
        }

        function c() {
            t.sort(function (e, t) {
                return l((e.source.value + e.target.value) / 2, (t.source.value + t.target.value) / 2)
            })
        }
        e.matrix = function (s) {
            if (!arguments.length) return n;
            r = (n = s) && n.length;
            t = i = null;
            return e
        };
        e.padding = function (n) {
            if (!arguments.length) return s;
            s = n;
            t = i = null;
            return e
        };
        e.sortGroups = function (n) {
            if (!arguments.length) return a;
            a = n;
            t = i = null;
            return e
        };
        e.sortSubgroups = function (i) {
            if (!arguments.length) return o;
            o = i;
            t = null;
            return e
        };
        e.sortChords = function (i) {
            if (!arguments.length) return l;
            l = i;
            if (t) c();
            return e
        };
        e.chords = function () {
            if (!t) u();
            return t
        };
        e.groups = function () {
            if (!i) u();
            return i
        };
        return e
    };
    d3.layout.force = function () {
        var e = {},
            t = d3.dispatch("start", "tick", "end"),
            i = [1, 1],
            n, r, s = .9,
            a = Fn,
            o = Rn,
            l = -30,
            u = .1,
            f = .8,
            h, p = [],
            g = [],
            m, v, y;

        function b(e) {
            return function (t, i, n, r, s) {
                if (t.point !== e) {
                    var a = t.cx - e.x,
                        o = t.cy - e.y,
                        l = 1 / Math.sqrt(a * a + o * o);
                    if ((r - i) * l < f) {
                        var u = t.charge * l * l;
                        e.px -= a * u;
                        e.py -= o * u;
                        return true
                    }
                    if (t.point && isFinite(l)) {
                        var u = t.pointCharge * l * l;
                        e.px -= a * u;
                        e.py -= o * u
                    }
                }
                return !t.charge
            }
        }
        e.tick = function () {
            if ((r *= .99) < .005) {
                t.end({
                    type: "end",
                    alpha: r = 0
                });
                return true
            }
            var e = p.length,
                n = g.length,
                a, o, c, f, h, d, w, _, x;
            for (o = 0; o < n; ++o) {
                c = g[o];
                f = c.source;
                h = c.target;
                _ = h.x - f.x;
                x = h.y - f.y;
                if (d = _ * _ + x * x) {
                    d = r * v[o] * ((d = Math.sqrt(d)) - m[o]) / d;
                    _ *= d;
                    x *= d;
                    h.x -= _ * (w = f.weight / (h.weight + f.weight));
                    h.y -= x * w;
                    f.x += _ * (w = 1 - w);
                    f.y += x * w
                }
            }
            if (w = r * u) {
                _ = i[0] / 2;
                x = i[1] / 2;
                o = -1;
                if (w)
                    while (++o < e) {
                        c = p[o];
                        c.x += (_ - c.x) * w;
                        c.y += (x - c.y) * w
                    }
            }
            if (l) {
                jn(a = d3.geom.quadtree(p), r, y);
                o = -1;
                while (++o < e) {
                    if (!(c = p[o]).fixed) {
                        a.visit(b(c))
                    }
                }
            }
            o = -1;
            while (++o < e) {
                c = p[o];
                if (c.fixed) {
                    c.x = c.px;
                    c.y = c.py
                }
                else {
                    c.x -= (c.px - (c.px = c.x)) * s;
                    c.y -= (c.py - (c.py = c.y)) * s
                }
            }
            t.tick({
                type: "tick",
                alpha: r
            })
        };
        e.nodes = function (t) {
            if (!arguments.length) return p;
            p = t;
            return e
        };
        e.links = function (t) {
            if (!arguments.length) return g;
            g = t;
            return e
        };
        e.size = function (t) {
            if (!arguments.length) return i;
            i = t;
            return e
        };
        e.linkDistance = function (t) {
            if (!arguments.length) return a;
            a = d(t);
            return e
        };
        e.distance = e.linkDistance;
        e.linkStrength = function (t) {
            if (!arguments.length) return o;
            o = d(t);
            return e
        };
        e.friction = function (t) {
            if (!arguments.length) return s;
            s = t;
            return e
        };
        e.charge = function (t) {
            if (!arguments.length) return l;
            l = typeof t === "function" ? t : +t;
            return e
        };
        e.gravity = function (t) {
            if (!arguments.length) return u;
            u = t;
            return e
        };
        e.theta = function (t) {
            if (!arguments.length) return f;
            f = t;
            return e
        };
        e.alpha = function (i) {
            if (!arguments.length) return r;
            if (r) {
                if (i > 0) r = i;
                else r = 0
            }
            else if (i > 0) {
                t.start({
                    type: "start",
                    alpha: r = i
                });
                d3.timer(e.tick)
            }
            return e
        };
        e.start = function () {
            var t, n, r = p.length,
                s = g.length,
                u = i[0],
                c = i[1],
                f, h;
            for (t = 0; t < r; ++t) {
                (h = p[t]).index = t;
                h.weight = 0
            }
            m = [];
            v = [];
            for (t = 0; t < s; ++t) {
                h = g[t];
                if (typeof h.source == "number") h.source = p[h.source];
                if (typeof h.target == "number") h.target = p[h.target];
                m[t] = a.call(this, h, t);
                v[t] = o.call(this, h, t);
                ++h.source.weight;
                ++h.target.weight
            }
            for (t = 0; t < r; ++t) {
                h = p[t];
                if (isNaN(h.x)) h.x = d("x", u);
                if (isNaN(h.y)) h.y = d("y", c);
                if (isNaN(h.px)) h.px = h.x;
                if (isNaN(h.py)) h.py = h.y
            }
            y = [];
            if (typeof l === "function") {
                for (t = 0; t < r; ++t) {
                    y[t] = +l.call(this, p[t], t)
                }
            }
            else {
                for (t = 0; t < r; ++t) {
                    y[t] = l
                }
            }

            function d(e, i) {
                var n = b(t),
                    r = -1,
                    s = n.length,
                    a;
                while (++r < s)
                    if (!isNaN(a = n[r][e])) return a;
                return Math.random() * i
            }

            function b() {
                if (!f) {
                    f = [];
                    for (n = 0; n < r; ++n) {
                        f[n] = []
                    }
                    for (n = 0; n < s; ++n) {
                        var e = g[n];
                        f[e.source.index].push(e.target);
                        f[e.target.index].push(e.source)
                    }
                }
                return f[t]
            }
            return e.resume()
        };
        e.resume = function () {
            return e.alpha(.1)
        };
        e.stop = function () {
            return e.alpha(0)
        };
        e.drag = function () {
            if (!n) n = d3.behavior.drag().origin(c).on("dragstart", w).on("drag", Ln).on("dragend", On);
            this.on("mouseover.force", Nn).on("mouseout.force", Hn).call(n)
        };

        function w(t) {
            Nn(zn = t);
            Pn = e
        }
        return d3.rebind(e, t, "on")
    };
    var Pn, zn;

    function Nn(e) {
        e.fixed |= 2
    }

    function Hn(e) {
        if (e !== zn) e.fixed &= 1
    }

    function On() {
        zn.fixed &= 1;
        Pn = zn = null
    }

    function Ln() {
        zn.px = d3.event.x;
        zn.py = d3.event.y;
        Pn.resume()
    }

    function jn(e, t, i) {
        var n = 0,
            r = 0;
        e.charge = 0;
        if (!e.leaf) {
            var s = e.nodes,
                a = s.length,
                o = -1,
                l;
            while (++o < a) {
                l = s[o];
                if (l == null) continue;
                jn(l, t, i);
                e.charge += l.charge;
                n += l.charge * l.cx;
                r += l.charge * l.cy
            }
        }
        if (e.point) {
            if (!e.leaf) {
                e.point.x += Math.random() - .5;
                e.point.y += Math.random() - .5
            }
            var u = t * i[e.point.index];
            e.charge += e.pointCharge = u;
            n += u * e.point.x;
            r += u * e.point.y
        }
        e.cx = n / e.charge;
        e.cy = r / e.charge
    }

    function Fn(e) {
        return 20
    }

    function Rn(e) {
        return 1
    }
    d3.layout.partition = function () {
        var e = d3.layout.hierarchy(),
            t = [1, 1];

        function i(e, t, n, r) {
            var s = e.children;
            e.x = t;
            e.y = e.depth * r;
            e.dx = n;
            e.dy = r;
            if (s && (o = s.length)) {
                var a = -1,
                    o, l, u;
                n = e.value ? n / e.value : 0;
                while (++a < o) {
                    i(l = s[a], t, u = l.value * n, r);
                    t += u
                }
            }
        }

        function n(e) {
            var t = e.children,
                i = 0;
            if (t && (s = t.length)) {
                var r = -1,
                    s;
                while (++r < s) i = Math.max(i, n(t[r]))
            }
            return 1 + i
        }

        function r(r, s) {
            var a = e.call(this, r, s);
            i(a[0], 0, t[0], t[1] / n(a[0]));
            return a
        }
        r.size = function (e) {
            if (!arguments.length) return t;
            t = e;
            return r
        };
        return ir(r, e)
    };
    d3.layout.pie = function () {
        var e = Number,
            t = Wn,
            i = 0,
            n = 2 * Math.PI;

        function r(s, a) {
            var o = s.map(function (t, i) {
                return +e.call(r, t, i)
            });
            var l = +(typeof i === "function" ? i.apply(this, arguments) : i);
            var u = ((typeof n === "function" ? n.apply(this, arguments) : n) - i) / d3.sum(o);
            var c = d3.range(s.length);
            if (t != null) c.sort(t === Wn ? function (e, t) {
                return o[t] - o[e]
            } : function (e, i) {
                return t(s[e], s[i])
            });
            var f = [];
            c.forEach(function (e) {
                var t;
                f[e] = {
                    data: s[e],
                    value: t = o[e],
                    startAngle: l,
                    endAngle: l += t * u
                }
            });
            return f
        }
        r.value = function (t) {
            if (!arguments.length) return e;
            e = t;
            return r
        };
        r.sort = function (e) {
            if (!arguments.length) return t;
            t = e;
            return r
        };
        r.startAngle = function (e) {
            if (!arguments.length) return i;
            i = e;
            return r
        };
        r.endAngle = function (e) {
            if (!arguments.length) return n;
            n = e;
            return r
        };
        return r
    };
    var Wn = {};
    d3.layout.stack = function () {
        var e = c,
            t = Gn,
            i = Xn,
            n = Bn,
            r = Yn,
            s = qn;

        function a(o, l) {
            var u = o.map(function (t, i) {
                return e.call(a, t, i)
            });
            var c = u.map(function (e, t) {
                return e.map(function (e, t) {
                    return [r.call(a, e, t), s.call(a, e, t)]
                })
            });
            var f = t.call(a, c, l);
            u = d3.permute(u, f);
            c = d3.permute(c, f);
            var h = i.call(a, c, l);
            var d = u.length,
                p = u[0].length,
                g, m, v;
            for (m = 0; m < p; ++m) {
                n.call(a, u[0][m], v = h[m], c[0][m][1]);
                for (g = 1; g < d; ++g) {
                    n.call(a, u[g][m], v += c[g - 1][m][1], c[g][m][1])
                }
            }
            return o
        }
        a.values = function (t) {
            if (!arguments.length) return e;
            e = t;
            return a
        };
        a.order = function (e) {
            if (!arguments.length) return t;
            t = typeof e === "function" ? e : Un.get(e) || Gn;
            return a
        };
        a.offset = function (e) {
            if (!arguments.length) return i;
            i = typeof e === "function" ? e : Qn.get(e) || Xn;
            return a
        };
        a.x = function (e) {
            if (!arguments.length) return r;
            r = e;
            return a
        };
        a.y = function (e) {
            if (!arguments.length) return s;
            s = e;
            return a
        };
        a.out = function (e) {
            if (!arguments.length) return n;
            n = e;
            return a
        };
        return a
    };

    function Yn(e) {
        return e.x
    }

    function qn(e) {
        return e.y
    }

    function Bn(e, t, i) {
        e.y0 = t;
        e.y = i
    }
    var Un = d3.map({
        "inside-out": function (e) {
            var t = e.length,
                i, n, r = e.map(Vn),
                s = e.map(Kn),
                a = d3.range(t).sort(function (e, t) {
                    return r[e] - r[t]
                }),
                o = 0,
                l = 0,
                u = [],
                c = [];
            for (i = 0; i < t; ++i) {
                n = a[i];
                if (o < l) {
                    o += s[n];
                    u.push(n)
                }
                else {
                    l += s[n];
                    c.push(n)
                }
            }
            return c.reverse().concat(u)
        },
        reverse: function (e) {
            return d3.range(e.length).reverse()
        },
        default: Gn
    });
    var Qn = d3.map({
        silhouette: function (e) {
            var t = e.length,
                i = e[0].length,
                n = [],
                r = 0,
                s, a, o, l = [];
            for (a = 0; a < i; ++a) {
                for (s = 0, o = 0; s < t; s++) o += e[s][a][1];
                if (o > r) r = o;
                n.push(o)
            }
            for (a = 0; a < i; ++a) {
                l[a] = (r - n[a]) / 2
            }
            return l
        },
        wiggle: function (e) {
            var t = e.length,
                i = e[0],
                n = i.length,
                r = 0,
                s, a, o, l, u, c, f, h, d, p = [];
            p[0] = h = d = 0;
            for (a = 1; a < n; ++a) {
                for (s = 0, l = 0; s < t; ++s) l += e[s][a][1];
                for (s = 0, u = 0, f = i[a][0] - i[a - 1][0]; s < t; ++s) {
                    for (o = 0, c = (e[s][a][1] - e[s][a - 1][1]) / (2 * f); o < s; ++o) {
                        c += (e[o][a][1] - e[o][a - 1][1]) / f
                    }
                    u += c * e[s][a][1]
                }
                p[a] = h -= l ? u / l * f : 0;
                if (h < d) d = h
            }
            for (a = 0; a < n; ++a) p[a] -= d;
            return p
        },
        expand: function (e) {
            var t = e.length,
                i = e[0].length,
                n = 1 / t,
                r, s, a, o = [];
            for (s = 0; s < i; ++s) {
                for (r = 0, a = 0; r < t; r++) a += e[r][s][1];
                if (a)
                    for (r = 0; r < t; r++) e[r][s][1] /= a;
                else
                    for (r = 0; r < t; r++) e[r][s][1] = n
            }
            for (s = 0; s < i; ++s) o[s] = 0;
            return o
        },
        zero: Xn
    });

    function Gn(e) {
        return d3.range(e.length)
    }

    function Xn(e) {
        var t = -1,
            i = e[0].length,
            n = [];
        while (++t < i) n[t] = 0;
        return n
    }

    function Vn(e) {
        var t = 1,
            i = 0,
            n = e[0][1],
            r, s = e.length;
        for (; t < s; ++t) {
            if ((r = e[t][1]) > n) {
                i = t;
                n = r
            }
        }
        return i
    }

    function Kn(e) {
        return e.reduce(Zn, 0)
    }

    function Zn(e, t) {
        return e + t[1]
    }
    d3.layout.histogram = function () {
        var e = true,
            t = Number,
            i = tr,
            n = Jn;

        function r(r, s) {
            var a = [],
                o = r.map(t, this),
                l = i.call(this, o, s),
                u = n.call(this, l, o, s),
                c, s = -1,
                f = o.length,
                h = u.length - 1,
                d = e ? 1 : 1 / f,
                p;
            while (++s < h) {
                c = a[s] = [];
                c.dx = u[s + 1] - (c.x = u[s]);
                c.y = 0
            }
            if (h > 0) {
                s = -1;
                while (++s < f) {
                    p = o[s];
                    if (p >= l[0] && p <= l[1]) {
                        c = a[d3.bisect(u, p, 1, h) - 1];
                        c.y += d;
                        c.push(r[s])
                    }
                }
            }
            return a
        }
        r.value = function (e) {
            if (!arguments.length) return t;
            t = e;
            return r
        };
        r.range = function (e) {
            if (!arguments.length) return i;
            i = d(e);
            return r
        };
        r.bins = function (e) {
            if (!arguments.length) return n;
            n = typeof e === "number" ? function (t) {
                return er(t, e)
            } : d(e);
            return r
        };
        r.frequency = function (t) {
            if (!arguments.length) return e;
            e = !!t;
            return r
        };
        return r
    };

    function Jn(e, t) {
        return er(e, Math.ceil(Math.log(t.length) / Math.LN2 + 1))
    }

    function er(e, t) {
        var i = -1,
            n = +e[0],
            r = (e[1] - n) / t,
            s = [];
        while (++i <= t) s[i] = r * i + n;
        return s
    }

    function tr(e) {
        return [d3.min(e), d3.max(e)]
    }
    d3.layout.hierarchy = function () {
        var e = sr,
            t = nr,
            i = rr;

        function n(r, a, o) {
            var l = t.call(s, r, a),
                u = or ? r : {
                    data: r
                };
            u.depth = a;
            o.push(u);
            if (l && (f = l.length)) {
                var c = -1,
                    f, h = u.children = [],
                    d = 0,
                    p = a + 1,
                    g;
                while (++c < f) {
                    g = n(l[c], p, o);
                    g.parent = u;
                    h.push(g);
                    d += g.value
                }
                if (e) h.sort(e);
                if (i) u.value = d
            }
            else if (i) {
                u.value = +i.call(s, r, a) || 0
            }
            return u
        }

        function r(e, t) {
            var n = e.children,
                a = 0;
            if (n && (l = n.length)) {
                var o = -1,
                    l, u = t + 1;
                while (++o < l) a += r(n[o], u)
            }
            else if (i) {
                a = +i.call(s, or ? e : e.data, t) || 0
            }
            if (i) e.value = a;
            return a
        }

        function s(e) {
            var t = [];
            n(e, 0, t);
            return t
        }
        s.sort = function (t) {
            if (!arguments.length) return e;
            e = t;
            return s
        };
        s.children = function (e) {
            if (!arguments.length) return t;
            t = e;
            return s
        };
        s.value = function (e) {
            if (!arguments.length) return i;
            i = e;
            return s
        };
        s.revalue = function (e) {
            r(e, 0);
            return e
        };
        return s
    };

    function ir(e, t) {
        d3.rebind(e, t, "sort", "children", "value");
        e.links = ar;
        e.nodes = function (t) {
            or = true;
            return (e.nodes = e)(t)
        };
        return e
    }

    function nr(e) {
        return e.children
    }

    function rr(e) {
        return e.value
    }

    function sr(e, t) {
        return t.value - e.value
    }

    function ar(e) {
        return d3.merge(e.map(function (e) {
            return (e.children || []).map(function (t) {
                return {
                    source: e,
                    target: t
                }
            })
        }))
    }
    var or = false;
    d3.layout.pack = function () {
        var e = d3.layout.hierarchy().sort(lr),
            t = [1, 1];

        function i(i, n) {
            var r = e.call(this, i, n),
                s = r[0];
            s.x = 0;
            s.y = 0;
            gr(s);
            var a = t[0],
                o = t[1],
                l = 1 / Math.max(2 * s.r / a, 2 * s.r / o);
            mr(s, a / 2, o / 2, l);
            return r
        }
        i.size = function (e) {
            if (!arguments.length) return t;
            t = e;
            return i
        };
        return ir(i, e)
    };

    function lr(e, t) {
        return e.value - t.value
    }

    function ur(e, t) {
        var i = e._pack_next;
        e._pack_next = t;
        t._pack_prev = e;
        t._pack_next = i;
        i._pack_prev = t
    }

    function cr(e, t) {
        e._pack_next = t;
        t._pack_prev = e
    }

    function fr(e, t) {
        var i = t.x - e.x,
            n = t.y - e.y,
            r = e.r + t.r;
        return r * r - i * i - n * n > .001
    }

    function hr(e) {
        var t = Infinity,
            i = -Infinity,
            n = Infinity,
            r = -Infinity,
            s = e.length,
            a, o, l, u, c;

        function f(e) {
            t = Math.min(e.x - e.r, t);
            i = Math.max(e.x + e.r, i);
            n = Math.min(e.y - e.r, n);
            r = Math.max(e.y + e.r, r)
        }
        e.forEach(dr);
        a = e[0];
        a.x = -a.r;
        a.y = 0;
        f(a);
        if (s > 1) {
            o = e[1];
            o.x = o.r;
            o.y = 0;
            f(o);
            if (s > 2) {
                l = e[2];
                vr(a, o, l);
                f(l);
                ur(a, l);
                a._pack_prev = l;
                ur(l, o);
                o = a._pack_next;
                for (var h = 3; h < s; h++) {
                    vr(a, o, l = e[h]);
                    var d = 0,
                        p = 1,
                        g = 1;
                    for (u = o._pack_next; u !== o; u = u._pack_next, p++) {
                        if (fr(u, l)) {
                            d = 1;
                            break
                        }
                    }
                    if (d == 1) {
                        for (c = a._pack_prev; c !== u._pack_prev; c = c._pack_prev, g++) {
                            if (fr(c, l)) {
                                break
                            }
                        }
                    }
                    if (d) {
                        if (p < g || p == g && o.r < a.r) cr(a, o = u);
                        else cr(a = c, o);
                        h--
                    }
                    else {
                        ur(a, l);
                        o = l;
                        f(l)
                    }
                }
            }
        }
        var m = (t + i) / 2,
            v = (n + r) / 2,
            y = 0;
        for (var h = 0; h < s; h++) {
            var b = e[h];
            b.x -= m;
            b.y -= v;
            y = Math.max(y, b.r + Math.sqrt(b.x * b.x + b.y * b.y))
        }
        e.forEach(pr);
        return y
    }

    function dr(e) {
        e._pack_next = e._pack_prev = e
    }

    function pr(e) {
        delete e._pack_next;
        delete e._pack_prev
    }

    function gr(e) {
        var t = e.children;
        if (t && t.length) {
            t.forEach(gr);
            e.r = hr(t)
        }
        else {
            e.r = Math.sqrt(e.value)
        }
    }

    function mr(e, t, i, n) {
        var r = e.children;
        e.x = t += n * e.x;
        e.y = i += n * e.y;
        e.r *= n;
        if (r) {
            var s = -1,
                a = r.length;
            while (++s < a) mr(r[s], t, i, n)
        }
    }

    function vr(e, t, i) {
        var n = e.r + i.r,
            r = t.x - e.x,
            s = t.y - e.y;
        if (n && (r || s)) {
            var a = t.r + i.r,
                o = Math.sqrt(r * r + s * s),
                l = Math.max(-1, Math.min(1, (n * n + o * o - a * a) / (2 * n * o))),
                u = Math.acos(l),
                c = l * (n /= o),
                f = Math.sin(u) * n;
            i.x = e.x + c * r + f * s;
            i.y = e.y + c * s - f * r
        }
        else {
            i.x = e.x + n;
            i.y = e.y
        }
    }
    d3.layout.cluster = function () {
        var e = d3.layout.hierarchy().sort(null).value(null),
            t = xr,
            i = [1, 1];

        function n(n, r) {
            var s = e.call(this, n, r),
                a = s[0],
                o, l = 0,
                u, c;
            Er(a, function (e) {
                var i = e.children;
                if (i && i.length) {
                    e.x = br(i);
                    e.y = yr(i)
                }
                else {
                    e.x = o ? l += t(e, o) : 0;
                    e.y = 0;
                    o = e
                }
            });
            var f = wr(a),
                h = _r(a),
                d = f.x - t(f, h) / 2,
                p = h.x + t(h, f) / 2;
            Er(a, function (e) {
                e.x = (e.x - d) / (p - d) * i[0];
                e.y = (1 - (a.y ? e.y / a.y : 1)) * i[1]
            });
            return s
        }
        n.separation = function (e) {
            if (!arguments.length) return t;
            t = e;
            return n
        };
        n.size = function (e) {
            if (!arguments.length) return i;
            i = e;
            return n
        };
        return ir(n, e)
    };

    function yr(e) {
        return 1 + d3.max(e, function (e) {
            return e.y
        })
    }

    function br(e) {
        return e.reduce(function (e, t) {
            return e + t.x
        }, 0) / e.length
    }

    function wr(e) {
        var t = e.children;
        return t && t.length ? wr(t[0]) : e
    }

    function _r(e) {
        var t = e.children,
            i;
        return t && (i = t.length) ? _r(t[i - 1]) : e
    }
    d3.layout.tree = function () {
        var e = d3.layout.hierarchy().sort(null).value(null),
            t = xr,
            i = [1, 1];

        function n(n, r) {
            var s = e.call(this, n, r),
                a = s[0];

            function o(e, i) {
                var n = e.children,
                    r = e._tree;
                if (n && (s = n.length)) {
                    var s, a = n[0],
                        l, c = a,
                        f, h = -1;
                    while (++h < s) {
                        f = n[h];
                        o(f, l);
                        c = u(f, l, c);
                        l = f
                    }
                    Ar(e);
                    var d = .5 * (a._tree.prelim + f._tree.prelim);
                    if (i) {
                        r.prelim = i._tree.prelim + t(e, i);
                        r.mod = r.prelim - d
                    }
                    else {
                        r.prelim = d
                    }
                }
                else {
                    if (i) {
                        r.prelim = i._tree.prelim + t(e, i)
                    }
                }
            }

            function l(e, t) {
                e.x = e._tree.prelim + t;
                var i = e.children;
                if (i && (r = i.length)) {
                    var n = -1,
                        r;
                    t += e._tree.mod;
                    while (++n < r) {
                        l(i[n], t)
                    }
                }
            }

            function u(e, i, n) {
                if (i) {
                    var r = e,
                        s = e,
                        a = i,
                        o = e.parent.children[0],
                        l = r._tree.mod,
                        u = s._tree.mod,
                        c = a._tree.mod,
                        f = o._tree.mod,
                        h;
                    while (a = Cr(a), r = kr(r), a && r) {
                        o = kr(o);
                        s = Cr(s);
                        s._tree.ancestor = e;
                        h = a._tree.prelim + c - r._tree.prelim - l + t(a, r);
                        if (h > 0) {
                            Ir($r(a, e, n), e, h);
                            l += h;
                            u += h
                        }
                        c += a._tree.mod;
                        l += r._tree.mod;
                        f += o._tree.mod;
                        u += s._tree.mod
                    }
                    if (a && !Cr(s)) {
                        s._tree.thread = a;
                        s._tree.mod += c - u
                    }
                    if (r && !kr(o)) {
                        o._tree.thread = r;
                        o._tree.mod += l - f;
                        n = e
                    }
                }
                return n
            }
            Er(a, function (e, t) {
                e._tree = {
                    ancestor: e,
                    prelim: 0,
                    mod: 0,
                    change: 0,
                    shift: 0,
                    number: t ? t._tree.number + 1 : 0
                }
            });
            o(a);
            l(a, -a._tree.prelim);
            var c = Mr(a, Dr),
                f = Mr(a, Tr),
                h = Mr(a, Sr),
                d = c.x - t(c, f) / 2,
                p = f.x + t(f, c) / 2,
                g = h.depth || 1;
            Er(a, function (e) {
                e.x = (e.x - d) / (p - d) * i[0];
                e.y = e.depth / g * i[1];
                delete e._tree
            });
            return s
        }
        n.separation = function (e) {
            if (!arguments.length) return t;
            t = e;
            return n
        };
        n.size = function (e) {
            if (!arguments.length) return i;
            i = e;
            return n
        };
        return ir(n, e)
    };

    function xr(e, t) {
        return e.parent == t.parent ? 1 : 2
    }

    function kr(e) {
        var t = e.children;
        return t && t.length ? t[0] : e._tree.thread
    }

    function Cr(e) {
        var t = e.children,
            i;
        return t && (i = t.length) ? t[i - 1] : e._tree.thread
    }

    function Mr(e, t) {
        var i = e.children;
        if (i && (r = i.length)) {
            var n, r, s = -1;
            while (++s < r) {
                if (t(n = Mr(i[s], t), e) > 0) {
                    e = n
                }
            }
        }
        return e
    }

    function Tr(e, t) {
        return e.x - t.x
    }

    function Dr(e, t) {
        return t.x - e.x
    }

    function Sr(e, t) {
        return e.depth - t.depth
    }

    function Er(e, t) {
        function i(e, n) {
            var r = e.children;
            if (r && (l = r.length)) {
                var s, a = null,
                    o = -1,
                    l;
                while (++o < l) {
                    s = r[o];
                    i(s, a);
                    a = s
                }
            }
            t(e, n)
        }
        i(e, null)
    }

    function Ar(e) {
        var t = 0,
            i = 0,
            n = e.children,
            r = n.length,
            s;
        while (--r >= 0) {
            s = n[r]._tree;
            s.prelim += t;
            s.mod += t;
            t += s.shift + (i += s.change)
        }
    }

    function Ir(e, t, i) {
        e = e._tree;
        t = t._tree;
        var n = i / (t.number - e.number);
        e.change += n;
        t.change -= n;
        t.shift += i;
        t.prelim += i;
        t.mod += i
    }

    function $r(e, t, i) {
        return e._tree.ancestor.parent == t.parent ? e._tree.ancestor : i
    }
    d3.layout.treemap = function () {
        var e = d3.layout.hierarchy(),
            t = Math.round,
            i = [1, 1],
            n = null,
            r = Pr,
            s = false,
            a, o = .5 * (1 + Math.sqrt(5));

        function l(e, t) {
            var i = -1,
                n = e.length,
                r, s;
            while (++i < n) {
                s = (r = e[i]).value * (t < 0 ? 0 : t);
                r.area = isNaN(s) || s <= 0 ? 0 : s
            }
        }

        function u(e) {
            var t = e.children;
            if (t && t.length) {
                var i = r(e),
                    n = [],
                    s = t.slice(),
                    a, o = Infinity,
                    c, d = Math.min(i.dx, i.dy),
                    p;
                l(s, i.dx * i.dy / e.value);
                n.area = 0;
                while ((p = s.length) > 0) {
                    n.push(a = s[p - 1]);
                    n.area += a.area;
                    if ((c = f(n, d)) <= o) {
                        s.pop();
                        o = c
                    }
                    else {
                        n.area -= n.pop().area;
                        h(n, d, i, false);
                        d = Math.min(i.dx, i.dy);
                        n.length = n.area = 0;
                        o = Infinity
                    }
                }
                if (n.length) {
                    h(n, d, i, true);
                    n.length = n.area = 0
                }
                t.forEach(u)
            }
        }

        function c(e) {
            var t = e.children;
            if (t && t.length) {
                var i = r(e),
                    n = t.slice(),
                    s, a = [];
                l(n, i.dx * i.dy / e.value);
                a.area = 0;
                while (s = n.pop()) {
                    a.push(s);
                    a.area += s.area;
                    if (s.z != null) {
                        h(a, s.z ? i.dx : i.dy, i, !n.length);
                        a.length = a.area = 0
                    }
                }
                t.forEach(c)
            }
        }

        function f(e, t) {
            var i = e.area,
                n, r = 0,
                s = Infinity,
                a = -1,
                l = e.length;
            while (++a < l) {
                if (!(n = e[a].area)) continue;
                if (n < s) s = n;
                if (n > r) r = n
            }
            i *= i;
            t *= t;
            return i ? Math.max(t * r * o / i, i / (t * s * o)) : Infinity
        }

        function h(e, i, n, r) {
            var s = -1,
                a = e.length,
                o = n.x,
                l = n.y,
                u = i ? t(e.area / i) : 0,
                c;
            if (i == n.dx) {
                if (r || u > n.dy) u = n.dy;
                while (++s < a) {
                    c = e[s];
                    c.x = o;
                    c.y = l;
                    c.dy = u;
                    o += c.dx = Math.min(n.x + n.dx - o, u ? t(c.area / u) : 0)
                }
                c.z = true;
                c.dx += n.x + n.dx - o;
                n.y += u;
                n.dy -= u
            }
            else {
                if (r || u > n.dx) u = n.dx;
                while (++s < a) {
                    c = e[s];
                    c.x = o;
                    c.y = l;
                    c.dx = u;
                    l += c.dy = Math.min(n.y + n.dy - l, u ? t(c.area / u) : 0)
                }
                c.z = false;
                c.dy += n.y + n.dy - l;
                n.x += u;
                n.dx -= u
            }
        }

        function d(t) {
            var n = a || e(t),
                r = n[0];
            r.x = 0;
            r.y = 0;
            r.dx = i[0];
            r.dy = i[1];
            if (a) e.revalue(r);
            l([r], r.dx * r.dy / r.value);
            (a ? c : u)(r);
            if (s) a = n;
            return n
        }
        d.size = function (e) {
            if (!arguments.length) return i;
            i = e;
            return d
        };
        d.padding = function (e) {
            if (!arguments.length) return n;

            function t(t) {
                var i = e.call(d, t, t.depth);
                return i == null ? Pr(t) : zr(t, typeof i === "number" ? [i, i, i, i] : i)
            }

            function i(t) {
                return zr(t, e)
            }
            var s;
            r = (n = e) == null ? Pr : (s = typeof e) === "function" ? t : s === "number" ? (e = [e, e, e, e], i) : i;
            return d
        };
        d.round = function (e) {
            if (!arguments.length) return t != Number;
            t = e ? Math.round : Number;
            return d
        };
        d.sticky = function (e) {
            if (!arguments.length) return s;
            s = e;
            a = null;
            return d
        };
        d.ratio = function (e) {
            if (!arguments.length) return o;
            o = e;
            return d
        };
        return ir(d, e)
    };

    function Pr(e) {
        return {
            x: e.x,
            y: e.y,
            dx: e.dx,
            dy: e.dy
        }
    }

    function zr(e, t) {
        var i = e.x + t[3],
            n = e.y + t[0],
            r = e.dx - t[1] - t[3],
            s = e.dy - t[0] - t[2];
        if (r < 0) {
            i += r / 2;
            r = 0
        }
        if (s < 0) {
            n += s / 2;
            s = 0
        }
        return {
            x: i,
            y: n,
            dx: r,
            dy: s
        }
    }
    d3.csv = function (e, t) {
        d3.text(e, "text/csv", function (e) {
            t(e && d3.csv.parse(e))
        })
    };
    d3.csv.parse = function (e) {
        var t;
        return d3.csv.parseRows(e, function (e, i) {
            if (i) {
                var n = {},
                    r = -1,
                    s = t.length;
                while (++r < s) n[t[r]] = e[r];
                return n
            }
            else {
                t = e;
                return null
            }
        })
    };
    d3.csv.parseRows = function (e, t) {
        var i = {},
            n = {},
            r = [],
            s = /\r\n|[,\r\n]/g,
            a = 0,
            o, l;
        s.lastIndex = 0;

        function u() {
            if (s.lastIndex >= e.length) return n;
            if (l) {
                l = false;
                return i
            }
            var t = s.lastIndex;
            if (e.charCodeAt(t) === 34) {
                var r = t;
                while (r++ < e.length) {
                    if (e.charCodeAt(r) === 34) {
                        if (e.charCodeAt(r + 1) !== 34) break;
                        r++
                    }
                }
                s.lastIndex = r + 2;
                var a = e.charCodeAt(r + 1);
                if (a === 13) {
                    l = true;
                    if (e.charCodeAt(r + 2) === 10) s.lastIndex++
                }
                else if (a === 10) {
                    l = true
                }
                return e.substring(t + 1, r).replace(/""/g, '"')
            }
            var o = s.exec(e);
            if (o) {
                l = o[0].charCodeAt(0) !== 44;
                return e.substring(t, o.index)
            }
            s.lastIndex = e.length;
            return e.substring(t)
        }
        while ((o = u()) !== n) {
            var c = [];
            while (o !== i && o !== n) {
                c.push(o);
                o = u()
            }
            if (t && !(c = t(c, a++))) continue;
            r.push(c)
        }
        return r
    };
    d3.csv.format = function (e) {
        return e.map(Nr).join("\n")
    };

    function Nr(e) {
        return e.map(Hr).join(",")
    }

    function Hr(e) {
        return /[",\n]/.test(e) ? '"' + e.replace(/\"/g, '""') + '"' : e
    }
    d3.geo = {};
    var Or = Math.PI / 180;
    d3.geo.azimuthal = function () {
        var e = "orthographic",
            t, i = 200,
            n = [480, 250],
            r, s, a, o;

        function l(t) {
            var s = t[0] * Or - r,
                l = t[1] * Or,
                u = Math.cos(s),
                c = Math.sin(s),
                f = Math.cos(l),
                h = Math.sin(l),
                d = e !== "orthographic" ? o * h + a * f * u : null,
                p, g = e === "stereographic" ? 1 / (1 + d) : e === "gnomonic" ? 1 / d : e === "equidistant" ? (p = Math.acos(d), p ? p / Math.sin(p) : 0) : e === "equalarea" ? Math.sqrt(2 / (1 + d)) : 1,
                m = g * f * c,
                v = g * (o * f * u - a * h);
            return [i * m + n[0], i * v + n[1]]
        }
        l.invert = function (t) {
            var s = (t[0] - n[0]) / i,
                l = (t[1] - n[1]) / i,
                u = Math.sqrt(s * s + l * l),
                c = e === "stereographic" ? 2 * Math.atan(u) : e === "gnomonic" ? Math.atan(u) : e === "equidistant" ? u : e === "equalarea" ? 2 * Math.asin(.5 * u) : Math.asin(u),
                f = Math.sin(c),
                h = Math.cos(c);
            return [(r + Math.atan2(s * f, u * a * h + l * o * f)) / Or, Math.asin(h * o - (u ? l * f * a / u : 0)) / Or]
        };
        l.mode = function (t) {
            if (!arguments.length) return e;
            e = t + "";
            return l
        };
        l.origin = function (e) {
            if (!arguments.length) return t;
            t = e;
            r = t[0] * Or;
            s = t[1] * Or;
            a = Math.cos(s);
            o = Math.sin(s);
            return l
        };
        l.scale = function (e) {
            if (!arguments.length) return i;
            i = +e;
            return l
        };
        l.translate = function (e) {
            if (!arguments.length) return n;
            n = [+e[0], +e[1]];
            return l
        };
        return l.origin([0, 0])
    };
    d3.geo.albers = function () {
        var e = [-98, 38],
            t = [29.5, 45.5],
            i = 1e3,
            n = [480, 250],
            r, s, a, o;

        function l(e) {
            var t = s * (Or * e[0] - r),
                l = Math.sqrt(a - 2 * s * Math.sin(Or * e[1])) / s;
            return [i * l * Math.sin(t) + n[0], i * (l * Math.cos(t) - o) + n[1]]
        }
        l.invert = function (e) {
            var t = (e[0] - n[0]) / i,
                l = (e[1] - n[1]) / i,
                u = o + l,
                c = Math.atan2(t, u),
                f = Math.sqrt(t * t + u * u);
            return [(r + c / s) / Or, Math.asin((a - f * f * s * s) / (2 * s)) / Or]
        };

        function u() {
            var i = Or * t[0],
                n = Or * t[1],
                u = Or * e[1],
                c = Math.sin(i),
                f = Math.cos(i);
            r = Or * e[0];
            s = .5 * (c + Math.sin(n));
            a = f * f + 2 * s * c;
            o = Math.sqrt(a - 2 * s * Math.sin(u)) / s;
            return l
        }
        l.origin = function (t) {
            if (!arguments.length) return e;
            e = [+t[0], +t[1]];
            return u()
        };
        l.parallels = function (e) {
            if (!arguments.length) return t;
            t = [+e[0], +e[1]];
            return u()
        };
        l.scale = function (e) {
            if (!arguments.length) return i;
            i = +e;
            return l
        };
        l.translate = function (e) {
            if (!arguments.length) return n;
            n = [+e[0], +e[1]];
            return l
        };
        return u()
    };
    d3.geo.albersUsa = function () {
        var e = d3.geo.albers();
        var t = d3.geo.albers().origin([-160, 60]).parallels([55, 65]);
        var i = d3.geo.albers().origin([-160, 20]).parallels([8, 18]);
        var n = d3.geo.albers().origin([-60, 10]).parallels([8, 18]);

        function r(r) {
            var s = r[0],
                a = r[1];
            return (a > 50 ? t : s < -140 ? i : a < 21 ? n : e)(r)
        }
        r.scale = function (s) {
            if (!arguments.length) return e.scale();
            e.scale(s);
            t.scale(s * .6);
            i.scale(s);
            n.scale(s * 1.5);
            return r.translate(e.translate())
        };
        r.translate = function (s) {
            if (!arguments.length) return e.translate();
            var a = e.scale() / 1e3,
                o = s[0],
                l = s[1];
            e.translate(s);
            t.translate([o - 400 * a, l + 170 * a]);
            i.translate([o - 190 * a, l + 200 * a]);
            n.translate([o + 580 * a, l + 430 * a]);
            return r
        };
        return r.scale(e.scale())
    };
    d3.geo.bonne = function () {
        var e = 200,
            t = [480, 250],
            i, n, r, s;

        function a(a) {
            var o = a[0] * Or - i,
                l = a[1] * Or - n;
            if (r) {
                var u = s + r - l,
                    c = o * Math.cos(l) / u;
                o = u * Math.sin(c);
                l = u * Math.cos(c) - s
            }
            else {
                o *= Math.cos(l);
                l *= -1
            }
            return [e * o + t[0], e * l + t[1]]
        }
        a.invert = function (n) {
            var a = (n[0] - t[0]) / e,
                o = (n[1] - t[1]) / e;
            if (r) {
                var l = s + o,
                    u = Math.sqrt(a * a + l * l);
                o = s + r - u;
                a = i + u * Math.atan2(a, l) / Math.cos(o)
            }
            else {
                o *= -1;
                a /= Math.cos(o)
            }
            return [a / Or, o / Or]
        };
        a.parallel = function (e) {
            if (!arguments.length) return r / Or;
            s = 1 / Math.tan(r = e * Or);
            return a
        };
        a.origin = function (e) {
            if (!arguments.length) return [i / Or, n / Or];
            i = e[0] * Or;
            n = e[1] * Or;
            return a
        };
        a.scale = function (t) {
            if (!arguments.length) return e;
            e = +t;
            return a
        };
        a.translate = function (e) {
            if (!arguments.length) return t;
            t = [+e[0], +e[1]];
            return a
        };
        return a.origin([0, 0]).parallel(45)
    };
    d3.geo.equirectangular = function () {
        var e = 500,
            t = [480, 250];

        function i(i) {
            var n = i[0] / 360,
                r = -i[1] / 360;
            return [e * n + t[0], e * r + t[1]]
        }
        i.invert = function (i) {
            var n = (i[0] - t[0]) / e,
                r = (i[1] - t[1]) / e;
            return [360 * n, -360 * r]
        };
        i.scale = function (t) {
            if (!arguments.length) return e;
            e = +t;
            return i
        };
        i.translate = function (e) {
            if (!arguments.length) return t;
            t = [+e[0], +e[1]];
            return i
        };
        return i
    };
    d3.geo.mercator = function () {
        var e = 500,
            t = [480, 250];

        function i(i) {
            var n = i[0] / 360,
                r = -(Math.log(Math.tan(Math.PI / 4 + i[1] * Or / 2)) / Or) / 360;
            return [e * n + t[0], e * Math.max(-.5, Math.min(.5, r)) + t[1]]
        }
        i.invert = function (i) {
            var n = (i[0] - t[0]) / e,
                r = (i[1] - t[1]) / e;
            return [360 * n, 2 * Math.atan(Math.exp(-360 * r * Or)) / Or - 90]
        };
        i.scale = function (t) {
            if (!arguments.length) return e;
            e = +t;
            return i
        };
        i.translate = function (e) {
            if (!arguments.length) return t;
            t = [+e[0], +e[1]];
            return i
        };
        return i
    };

    function Lr(e, t) {
        return function (i) {
            return i && e.hasOwnProperty(i.type) ? e[i.type](i) : t
        }
    }
    d3.geo.path = function () {
        var e = 4.5,
            t = jr(e),
            i = d3.geo.albersUsa(),
            n = [];

        function r(i, r) {
            if (typeof e === "function") t = jr(e.apply(this, arguments));
            a(i);
            var s = n.length ? n.join("") : null;
            n = [];
            return s
        }

        function s(e) {
            return i(e).join(",")
        }
        var a = Lr({
            FeatureCollection: function (e) {
                var t = e.features,
                    i = -1,
                    r = t.length;
                while (++i < r) n.push(a(t[i].geometry))
            },
            Feature: function (e) {
                a(e.geometry)
            },
            Point: function (e) {
                n.push("M", s(e.coordinates), t)
            },
            MultiPoint: function (e) {
                var i = e.coordinates,
                    r = -1,
                    a = i.length;
                while (++r < a) n.push("M", s(i[r]), t)
            },
            LineString: function (e) {
                var t = e.coordinates,
                    i = -1,
                    r = t.length;
                n.push("M");
                while (++i < r) n.push(s(t[i]), "L");
                n.pop()
            },
            MultiLineString: function (e) {
                var t = e.coordinates,
                    i = -1,
                    r = t.length,
                    a, o, l;
                while (++i < r) {
                    a = t[i];
                    o = -1;
                    l = a.length;
                    n.push("M");
                    while (++o < l) n.push(s(a[o]), "L");
                    n.pop()
                }
            },
            Polygon: function (e) {
                var t = e.coordinates,
                    i = -1,
                    r = t.length,
                    a, o, l;
                while (++i < r) {
                    a = t[i];
                    o = -1;
                    if ((l = a.length - 1) > 0) {
                        n.push("M");
                        while (++o < l) n.push(s(a[o]), "L");
                        n[n.length - 1] = "Z"
                    }
                }
            },
            MultiPolygon: function (e) {
                var t = e.coordinates,
                    i = -1,
                    r = t.length,
                    a, o, l, u, c, f;
                while (++i < r) {
                    a = t[i];
                    o = -1;
                    l = a.length;
                    while (++o < l) {
                        u = a[o];
                        c = -1;
                        if ((f = u.length - 1) > 0) {
                            n.push("M");
                            while (++c < f) n.push(s(u[c]), "L");
                            n[n.length - 1] = "Z"
                        }
                    }
                }
            },
            GeometryCollection: function (e) {
                var t = e.geometries,
                    i = -1,
                    r = t.length;
                while (++i < r) n.push(a(t[i]))
            }
        });
        var o = r.area = Lr({
            FeatureCollection: function (e) {
                var t = 0,
                    i = e.features,
                    n = -1,
                    r = i.length;
                while (++n < r) t += o(i[n]);
                return t
            },
            Feature: function (e) {
                return o(e.geometry)
            },
            Polygon: function (e) {
                return l(e.coordinates)
            },
            MultiPolygon: function (e) {
                var t = 0,
                    i = e.coordinates,
                    n = -1,
                    r = i.length;
                while (++n < r) t += l(i[n]);
                return t
            },
            GeometryCollection: function (e) {
                var t = 0,
                    i = e.geometries,
                    n = -1,
                    r = i.length;
                while (++n < r) t += o(i[n]);
                return t
            }
        }, 0);

        function l(e) {
            var t = f(e[0]),
                i = 0,
                n = e.length;
            while (++i < n) t -= f(e[i]);
            return t
        }

        function u(e) {
            var t = d3.geom.polygon(e[0].map(i)),
                n = t.area(),
                r = t.centroid(n < 0 ? (n *= -1, 1) : -1),
                s = r[0],
                a = r[1],
                o = n,
                l = 0,
                u = e.length;
            while (++l < u) {
                t = d3.geom.polygon(e[l].map(i));
                n = t.area();
                r = t.centroid(n < 0 ? (n *= -1, 1) : -1);
                s -= r[0];
                a -= r[1];
                o -= n
            }
            return [s, a, 6 * o]
        }
        var c = r.centroid = Lr({
            Feature: function (e) {
                return c(e.geometry)
            },
            Polygon: function (e) {
                var t = u(e.coordinates);
                return [t[0] / t[2], t[1] / t[2]]
            },
            MultiPolygon: function (e) {
                var t = 0,
                    i = e.coordinates,
                    n, r = 0,
                    s = 0,
                    a = 0,
                    o = -1,
                    l = i.length;
                while (++o < l) {
                    n = u(i[o]);
                    r += n[0];
                    s += n[1];
                    a += n[2]
                }
                return [r / a, s / a]
            }
        });

        function f(e) {
            return Math.abs(d3.geom.polygon(e.map(i)).area())
        }
        r.projection = function (e) {
            i = e;
            return r
        };
        r.pointRadius = function (i) {
            if (typeof i === "function") e = i;
            else {
                e = +i;
                t = jr(e)
            }
            return r
        };
        return r
    };

    function jr(e) {
        return "m0," + e + "a" + e + "," + e + " 0 1,1 0," + -2 * e + "a" + e + "," + e + " 0 1,1 0," + +2 * e + "z"
    }
    d3.geo.bounds = function (e) {
        var t = Infinity,
            i = Infinity,
            n = -Infinity,
            r = -Infinity;
        Fr(e, function (e, s) {
            if (e < t) t = e;
            if (e > n) n = e;
            if (s < i) i = s;
            if (s > r) r = s
        });
        return [
            [t, i],
            [n, r]
        ]
    };

    function Fr(e, t) {
        if (Rr.hasOwnProperty(e.type)) Rr[e.type](e, t)
    }
    var Rr = {
        Feature: Wr,
        FeatureCollection: Yr,
        GeometryCollection: qr,
        LineString: Br,
        MultiLineString: Ur,
        MultiPoint: Br,
        MultiPolygon: Qr,
        Point: Gr,
        Polygon: Xr
    };

    function Wr(e, t) {
        Fr(e.geometry, t)
    }

    function Yr(e, t) {
        for (var i = e.features, n = 0, r = i.length; n < r; n++) {
            Fr(i[n].geometry, t)
        }
    }

    function qr(e, t) {
        for (var i = e.geometries, n = 0, r = i.length; n < r; n++) {
            Fr(i[n], t)
        }
    }

    function Br(e, t) {
        for (var i = e.coordinates, n = 0, r = i.length; n < r; n++) {
            t.apply(null, i[n])
        }
    }

    function Ur(e, t) {
        for (var i = e.coordinates, n = 0, r = i.length; n < r; n++) {
            for (var s = i[n], a = 0, o = s.length; a < o; a++) {
                t.apply(null, s[a])
            }
        }
    }

    function Qr(e, t) {
        for (var i = e.coordinates, n = 0, r = i.length; n < r; n++) {
            for (var s = i[n][0], a = 0, o = s.length; a < o; a++) {
                t.apply(null, s[a])
            }
        }
    }

    function Gr(e, t) {
        t.apply(null, e.coordinates)
    }

    function Xr(e, t) {
        for (var i = e.coordinates[0], n = 0, r = i.length; n < r; n++) {
            t.apply(null, i[n])
        }
    }
    d3.geo.circle = function () {
        var e = [0, 0],
            t = 90 - .01,
            i = t * Or,
            n = d3.geo.greatArc().source(e).target(c);

        function r() {}

        function s(e) {
            return n.distance(e) < i
        }
        r.clip = function (t) {
            if (typeof e === "function") n.source(e.apply(this, arguments));
            return a(t) || null
        };
        var a = Lr({
            FeatureCollection: function (e) {
                var t = e.features.map(a).filter(c);
                return t && (e = Object.create(e), e.features = t, e)
            },
            Feature: function (e) {
                var t = a(e.geometry);
                return t && (e = Object.create(e), e.geometry = t, e)
            },
            Point: function (e) {
                return s(e.coordinates) && e
            },
            MultiPoint: function (e) {
                var t = e.coordinates.filter(s);
                return t.length && {
                    type: e.type,
                    coordinates: t
                }
            },
            LineString: function (e) {
                var t = o(e.coordinates);
                return t.length && (e = Object.create(e), e.coordinates = t, e)
            },
            MultiLineString: function (e) {
                var t = e.coordinates.map(o).filter(function (e) {
                    return e.length
                });
                return t.length && (e = Object.create(e), e.coordinates = t, e)
            },
            Polygon: function (e) {
                var t = e.coordinates.map(o);
                return t[0].length && (e = Object.create(e), e.coordinates = t, e)
            },
            MultiPolygon: function (e) {
                var t = e.coordinates.map(function (e) {
                    return e.map(o)
                }).filter(function (e) {
                    return e[0].length
                });
                return t.length && (e = Object.create(e), e.coordinates = t, e)
            },
            GeometryCollection: function (e) {
                var t = e.geometries.map(a).filter(c);
                return t.length && (e = Object.create(e), e.geometries = t, e)
            }
        });

        function o(e) {
            var t = -1,
                r = e.length,
                s = [],
                a, o, u, c, f;
            while (++t < r) {
                f = n.distance(u = e[t]);
                if (f < i) {
                    if (o) s.push(Jr(o, u)((c - i) / (c - f)));
                    s.push(u);
                    a = o = null
                }
                else {
                    o = u;
                    if (!a && s.length) {
                        s.push(Jr(s[s.length - 1], o)((i - c) / (f - c)));
                        a = o
                    }
                }
                c = f
            }
            a = e[0];
            o = s[0];
            if (o && u[0] === a[0] && u[1] === a[1] && !(u[0] === o[0] && u[1] === o[1])) {
                s.push(o)
            }
            return l(s)
        }

        function l(e) {
            var t = 0,
                i = e.length,
                r, s, a = i ? [e[0]] : e,
                o, l = n.source();
            while (++t < i) {
                o = n.source(e[t - 1])(e[t]).coordinates;
                for (r = 0, s = o.length; ++r < s;) a.push(o[r])
            }
            n.source(l);
            return a
        }
        r.origin = function (t) {
            if (!arguments.length) return e;
            e = t;
            if (typeof e !== "function") n.source(e);
            return r
        };
        r.angle = function (e) {
            if (!arguments.length) return t;
            i = (t = +e) * Or;
            return r
        };
        return d3.rebind(r, n, "precision")
    };
    d3.geo.greatArc = function () {
        var e = Vr,
            t, i = Kr,
            n, r = 6 * Or,
            s = Zr();

        function a() {
            var e = a.distance.apply(this, arguments),
                i = 0,
                o = r / e,
                l = [t];
            while ((i += o) < 1) l.push(s(i));
            l.push(n);
            return {
                type: "LineString",
                coordinates: l
            }
        }
        a.distance = function () {
            if (typeof e === "function") s.source(t = e.apply(this, arguments));
            if (typeof i === "function") s.target(n = i.apply(this, arguments));
            return s.distance()
        };
        a.source = function (i) {
            if (!arguments.length) return e;
            e = i;
            if (typeof e !== "function") s.source(t = e);
            return a
        };
        a.target = function (e) {
            if (!arguments.length) return i;
            i = e;
            if (typeof i !== "function") s.target(n = i);
            return a
        };
        a.precision = function (e) {
            if (!arguments.length) return r / Or;
            r = e * Or;
            return a
        };
        return a
    };

    function Vr(e) {
        return e.source
    }

    function Kr(e) {
        return e.target
    }

    function Zr() {
        var e, t, i, n, r, s, a, o, l, u, c, f, h, d;

        function p(e) {
            var t = Math.sin(e *= h) * d,
                i = Math.sin(h - e) * d,
                a = i * r + t * c,
                o = i * s + t * f,
                l = i * n + t * u;
            return [Math.atan2(o, a) / Or, Math.atan2(l, Math.sqrt(a * a + o * o)) / Or]
        }
        p.distance = function () {
            if (h == null) d = 1 / Math.sin(h = Math.acos(Math.max(-1, Math.min(1, n * u + i * l * Math.cos(a - e)))));
            return h
        };
        p.source = function (a) {
            var o = Math.cos(e = a[0] * Or),
                l = Math.sin(e);
            i = Math.cos(t = a[1] * Or);
            n = Math.sin(t);
            r = i * o;
            s = i * l;
            h = null;
            return p
        };
        p.target = function (e) {
            var t = Math.cos(a = e[0] * Or),
                i = Math.sin(a);
            l = Math.cos(o = e[1] * Or);
            u = Math.sin(o);
            c = l * t;
            f = l * i;
            h = null;
            return p
        };
        return p
    }

    function Jr(e, t) {
        var i = Zr().source(e).target(t);
        i.distance();
        return i
    }
    d3.geo.greatCircle = d3.geo.circle;
    d3.geom = {};
    d3.geom.contour = function (e, t) {
        var i = t || is(e),
            n = [],
            r = i[0],
            s = i[1],
            a = 0,
            o = 0,
            l = NaN,
            u = NaN,
            c = 0;
        do {
            c = 0;
            if (e(r - 1, s - 1)) c += 1;
            if (e(r, s - 1)) c += 2;
            if (e(r - 1, s)) c += 4;
            if (e(r, s)) c += 8;
            if (c === 6) {
                a = u === -1 ? -1 : 1;
                o = 0
            }
            else if (c === 9) {
                a = 0;
                o = l === 1 ? -1 : 1
            }
            else {
                a = es[c];
                o = ts[c]
            }
            if (a != l && o != u) {
                n.push([r, s]);
                l = a;
                u = o
            }
            r += a;
            s += o
        } while (i[0] != r || i[1] != s);
        return n
    };
    var es = [1, 0, 1, 1, -1, 0, -1, 1, 0, 0, 0, 0, -1, 0, -1, NaN],
        ts = [0, -1, 0, 0, 0, -1, 0, 0, 1, -1, 1, 1, 0, -1, 0, NaN];

    function is(e) {
        var t = 0,
            i = 0;
        while (true) {
            if (e(t, i)) {
                return [t, i]
            }
            if (t === 0) {
                t = i + 1;
                i = 0
            }
            else {
                t = t - 1;
                i = i + 1
            }
        }
    }
    d3.geom.hull = function (e) {
        if (e.length < 3) return [];
        var t = e.length,
            i = t - 1,
            n = [],
            r = [],
            s, a, o = 0,
            l, u, c, f, h, d, p, g;
        for (s = 1; s < t; ++s) {
            if (e[s][1] < e[o][1]) {
                o = s
            }
            else if (e[s][1] == e[o][1]) {
                o = e[s][0] < e[o][0] ? s : o
            }
        }
        for (s = 0; s < t; ++s) {
            if (s === o) continue;
            u = e[s][1] - e[o][1];
            l = e[s][0] - e[o][0];
            n.push({
                angle: Math.atan2(u, l),
                index: s
            })
        }
        n.sort(function (e, t) {
            return e.angle - t.angle
        });
        p = n[0].angle;
        d = n[0].index;
        h = 0;
        for (s = 1; s < i; ++s) {
            a = n[s].index;
            if (p == n[s].angle) {
                l = e[d][0] - e[o][0];
                u = e[d][1] - e[o][1];
                c = e[a][0] - e[o][0];
                f = e[a][1] - e[o][1];
                if (l * l + u * u >= c * c + f * f) {
                    n[s].index = -1
                }
                else {
                    n[h].index = -1;
                    p = n[s].angle;
                    h = s;
                    d = a
                }
            }
            else {
                p = n[s].angle;
                h = s;
                d = a
            }
        }
        r.push(o);
        for (s = 0, a = 0; s < 2; ++a) {
            if (n[a].index !== -1) {
                r.push(n[a].index);
                s++
            }
        }
        g = r.length;
        for (; a < i; ++a) {
            if (n[a].index === -1) continue;
            while (!ns(r[g - 2], r[g - 1], n[a].index, e)) {
                --g
            }
            r[g++] = n[a].index
        }
        var m = [];
        for (s = 0; s < g; ++s) {
            m.push(e[r[s]])
        }
        return m
    };

    function ns(e, t, i, n) {
        var r, s, a, o, l, u, c;
        r = n[e];
        s = r[0];
        a = r[1];
        r = n[t];
        o = r[0];
        l = r[1];
        r = n[i];
        u = r[0];
        c = r[1];
        return (c - a) * (o - s) - (l - a) * (u - s) > 0
    }
    d3.geom.polygon = function (e) {
        e.area = function () {
            var t = 0,
                i = e.length,
                n = e[i - 1][0] * e[0][1],
                r = e[i - 1][1] * e[0][0];
            while (++t < i) {
                n += e[t - 1][0] * e[t][1];
                r += e[t - 1][1] * e[t][0]
            }
            return (r - n) * .5
        };
        e.centroid = function (t) {
            var i = -1,
                n = e.length,
                r = 0,
                s = 0,
                a, o = e[n - 1],
                l;
            if (!arguments.length) t = -1 / (6 * e.area());
            while (++i < n) {
                a = o;
                o = e[i];
                l = a[0] * o[1] - o[0] * a[1];
                r += (a[0] + o[0]) * l;
                s += (a[1] + o[1]) * l
            }
            return [r * t, s * t]
        };
        e.clip = function (t) {
            var i, n = -1,
                r = e.length,
                s, a, o = e[r - 1],
                l, u, c;
            while (++n < r) {
                i = t.slice();
                t.length = 0;
                l = e[n];
                u = i[(a = i.length) - 1];
                s = -1;
                while (++s < a) {
                    c = i[s];
                    if (rs(c, o, l)) {
                        if (!rs(u, o, l)) {
                            t.push(ss(u, c, o, l))
                        }
                        t.push(c)
                    }
                    else if (rs(u, o, l)) {
                        t.push(ss(u, c, o, l))
                    }
                    u = c
                }
                o = l
            }
            return t
        };
        return e
    };

    function rs(e, t, i) {
        return (i[0] - t[0]) * (e[1] - t[1]) < (i[1] - t[1]) * (e[0] - t[0])
    }

    function ss(e, t, i, n) {
        var r = e[0],
            s = t[0],
            a = i[0],
            o = n[0],
            l = e[1],
            u = t[1],
            c = i[1],
            f = n[1],
            h = r - a,
            d = s - r,
            p = o - a,
            g = l - c,
            m = u - l,
            v = f - c,
            y = (p * g - v * h) / (v * d - p * m);
        return [r + y * d, l + y * m]
    }
    d3.geom.voronoi = function (e) {
        var t = e.map(function () {
            return []
        });
        os(e, function (e) {
            var i, n, r, s, a, o;
            if (e.a === 1 && e.b >= 0) {
                i = e.ep.r;
                n = e.ep.l
            }
            else {
                i = e.ep.l;
                n = e.ep.r
            }
            if (e.a === 1) {
                a = i ? i.y : -1e6;
                r = e.c - e.b * a;
                o = n ? n.y : 1e6;
                s = e.c - e.b * o
            }
            else {
                r = i ? i.x : -1e6;
                a = e.c - e.a * r;
                s = n ? n.x : 1e6;
                o = e.c - e.a * s
            }
            var l = [r, a],
                u = [s, o];
            t[e.region.l.index].push(l, u);
            t[e.region.r.index].push(l, u)
        });
        return t.map(function (t, i) {
            var n = e[i][0],
                r = e[i][1];
            t.forEach(function (e) {
                e.angle = Math.atan2(e[0] - n, e[1] - r)
            });
            return t.sort(function (e, t) {
                return e.angle - t.angle
            }).filter(function (e, i) {
                return !i || e.angle - t[i - 1].angle > 1e-10
            })
        })
    };
    var as = {
        l: "r",
        r: "l"
    };

    function os(e, t) {
        var i = {
            list: e.map(function (e, t) {
                return {
                    index: t,
                    x: e[0],
                    y: e[1]
                }
            }).sort(function (e, t) {
                return e.y < t.y ? -1 : e.y > t.y ? 1 : e.x < t.x ? -1 : e.x > t.x ? 1 : 0
            }),
            bottomSite: null
        };
        var n = {
            list: [],
            leftEnd: null,
            rightEnd: null,
            init: function () {
                n.leftEnd = n.createHalfEdge(null, "l");
                n.rightEnd = n.createHalfEdge(null, "l");
                n.leftEnd.r = n.rightEnd;
                n.rightEnd.l = n.leftEnd;
                n.list.unshift(n.leftEnd, n.rightEnd)
            },
            createHalfEdge: function (e, t) {
                return {
                    edge: e,
                    side: t,
                    vertex: null,
                    l: null,
                    r: null
                }
            },
            insert: function (e, t) {
                t.l = e;
                t.r = e.r;
                e.r.l = t;
                e.r = t
            },
            leftBound: function (e) {
                var t = n.leftEnd;
                do {
                    t = t.r
                } while (t != n.rightEnd && r.rightOf(t, e));
                t = t.l;
                return t
            },
            del: function (e) {
                e.l.r = e.r;
                e.r.l = e.l;
                e.edge = null
            },
            right: function (e) {
                return e.r
            },
            left: function (e) {
                return e.l
            },
            leftRegion: function (e) {
                return e.edge == null ? i.bottomSite : e.edge.region[e.side]
            },
            rightRegion: function (e) {
                return e.edge == null ? i.bottomSite : e.edge.region[as[e.side]]
            }
        };
        var r = {
            bisect: function (e, t) {
                var i = {
                    region: {
                        l: e,
                        r: t
                    },
                    ep: {
                        l: null,
                        r: null
                    }
                };
                var n = t.x - e.x,
                    r = t.y - e.y,
                    s = n > 0 ? n : -n,
                    a = r > 0 ? r : -r;
                i.c = e.x * n + e.y * r + (n * n + r * r) * .5;
                if (s > a) {
                    i.a = 1;
                    i.b = r / n;
                    i.c /= n
                }
                else {
                    i.b = 1;
                    i.a = n / r;
                    i.c /= r
                }
                return i
            },
            intersect: function (e, t) {
                var i = e.edge,
                    n = t.edge;
                if (!i || !n || i.region.r == n.region.r) {
                    return null
                }
                var r = i.a * n.b - i.b * n.a;
                if (Math.abs(r) < 1e-10) {
                    return null
                }
                var s = (i.c * n.b - n.c * i.b) / r,
                    a = (n.c * i.a - i.c * n.a) / r,
                    o = i.region.r,
                    l = n.region.r,
                    u, c;
                if (o.y < l.y || o.y == l.y && o.x < l.x) {
                    u = e;
                    c = i
                }
                else {
                    u = t;
                    c = n
                }
                var f = s >= c.region.r.x;
                if (f && u.side === "l" || !f && u.side === "r") {
                    return null
                }
                return {
                    x: s,
                    y: a
                }
            },
            rightOf: function (e, t) {
                var i = e.edge,
                    n = i.region.r,
                    r = t.x > n.x;
                if (r && e.side === "l") {
                    return 1
                }
                if (!r && e.side === "r") {
                    return 0
                }
                if (i.a === 1) {
                    var s = t.y - n.y,
                        a = t.x - n.x,
                        o = 0,
                        l = 0;
                    if (!r && i.b < 0 || r && i.b >= 0) {
                        l = o = s >= i.b * a
                    }
                    else {
                        l = t.x + t.y * i.b > i.c;
                        if (i.b < 0) {
                            l = !l
                        }
                        if (!l) {
                            o = 1
                        }
                    }
                    if (!o) {
                        var u = n.x - i.region.l.x;
                        l = i.b * (a * a - s * s) < u * s * (1 + 2 * a / u + i.b * i.b);
                        if (i.b < 0) {
                            l = !l
                        }
                    }
                }
                else {
                    var c = i.c - i.a * t.x,
                        f = t.y - c,
                        h = t.x - n.x,
                        d = c - n.y;
                    l = f * f > h * h + d * d
                }
                return e.side === "l" ? l : !l
            },
            endPoint: function (e, i, n) {
                e.ep[i] = n;
                if (!e.ep[as[i]]) return;
                t(e)
            },
            distance: function (e, t) {
                var i = e.x - t.x,
                    n = e.y - t.y;
                return Math.sqrt(i * i + n * n)
            }
        };
        var s = {
            list: [],
            insert: function (e, t, i) {
                e.vertex = t;
                e.ystar = t.y + i;
                for (var n = 0, r = s.list, a = r.length; n < a; n++) {
                    var o = r[n];
                    if (e.ystar > o.ystar || e.ystar == o.ystar && t.x > o.vertex.x) {
                        continue
                    }
                    else {
                        break
                    }
                }
                r.splice(n, 0, e)
            },
            del: function (e) {
                for (var t = 0, i = s.list, n = i.length; t < n && i[t] != e; ++t) {}
                i.splice(t, 1)
            },
            empty: function () {
                return s.list.length === 0
            },
            nextEvent: function (e) {
                for (var t = 0, i = s.list, n = i.length; t < n; ++t) {
                    if (i[t] == e) return i[t + 1]
                }
                return null
            },
            min: function () {
                var e = s.list[0];
                return {
                    x: e.vertex.x,
                    y: e.ystar
                }
            },
            extractMin: function () {
                return s.list.shift()
            }
        };
        n.init();
        i.bottomSite = i.list.shift();
        var a = i.list.shift(),
            o;
        var l, u, c, f, h;
        var d, p, g, m, v;
        var y, b;
        while (true) {
            if (!s.empty()) {
                o = s.min()
            }
            if (a && (s.empty() || a.y < o.y || a.y == o.y && a.x < o.x)) {
                l = n.leftBound(a);
                u = n.right(l);
                d = n.rightRegion(l);
                y = r.bisect(d, a);
                h = n.createHalfEdge(y, "l");
                n.insert(l, h);
                m = r.intersect(l, h);
                if (m) {
                    s.del(l);
                    s.insert(l, m, r.distance(m, a))
                }
                l = h;
                h = n.createHalfEdge(y, "r");
                n.insert(l, h);
                m = r.intersect(h, u);
                if (m) {
                    s.insert(h, m, r.distance(m, a))
                }
                a = i.list.shift()
            }
            else if (!s.empty()) {
                l = s.extractMin();
                c = n.left(l);
                u = n.right(l);
                f = n.right(u);
                d = n.leftRegion(l);
                p = n.rightRegion(u);
                v = l.vertex;
                r.endPoint(l.edge, l.side, v);
                r.endPoint(u.edge, u.side, v);
                n.del(l);
                s.del(u);
                n.del(u);
                b = "l";
                if (d.y > p.y) {
                    g = d;
                    d = p;
                    p = g;
                    b = "r"
                }
                y = r.bisect(d, p);
                h = n.createHalfEdge(y, b);
                n.insert(c, h);
                r.endPoint(y, as[b], v);
                m = r.intersect(c, h);
                if (m) {
                    s.del(c);
                    s.insert(c, m, r.distance(m, d))
                }
                m = r.intersect(h, f);
                if (m) {
                    s.insert(h, m, r.distance(m, d))
                }
            }
            else {
                break
            }
        }
        for (l = n.right(n.leftEnd); l != n.rightEnd; l = n.right(l)) {
            t(l.edge)
        }
    }
    d3.geom.delaunay = function (e) {
        var t = e.map(function () {
                return []
            }),
            i = [];
        os(e, function (i) {
            t[i.region.l.index].push(e[i.region.r.index])
        });
        t.forEach(function (t, n) {
            var r = e[n],
                s = r[0],
                a = r[1];
            t.forEach(function (e) {
                e.angle = Math.atan2(e[0] - s, e[1] - a)
            });
            t.sort(function (e, t) {
                return e.angle - t.angle
            });
            for (var o = 0, l = t.length - 1; o < l; o++) {
                i.push([r, t[o], t[o + 1]])
            }
        });
        return i
    };
    d3.geom.quadtree = function (e, t, i, n, r) {
        var s, a = -1,
            o = e.length;
        if (o && isNaN(e[0].x)) e = e.map(cs);
        if (arguments.length < 5) {
            if (arguments.length === 3) {
                r = n = i;
                i = t
            }
            else {
                t = i = Infinity;
                n = r = -Infinity;
                while (++a < o) {
                    s = e[a];
                    if (s.x < t) t = s.x;
                    if (s.y < i) i = s.y;
                    if (s.x > n) n = s.x;
                    if (s.y > r) r = s.y
                }
                var l = n - t,
                    u = r - i;
                if (l > u) r = i + l;
                else n = t + u
            }
        }

        function c(e, t, i, n, r, s) {
            if (isNaN(t.x) || isNaN(t.y)) return;
            if (e.leaf) {
                var a = e.point;
                if (a) {
                    if (Math.abs(a.x - t.x) + Math.abs(a.y - t.y) < .01) {
                        f(e, t, i, n, r, s)
                    }
                    else {
                        e.point = null;
                        f(e, a, i, n, r, s);
                        f(e, t, i, n, r, s)
                    }
                }
                else {
                    e.point = t
                }
            }
            else {
                f(e, t, i, n, r, s)
            }
        }

        function f(e, t, i, n, r, s) {
            var a = (i + r) * .5,
                o = (n + s) * .5,
                l = t.x >= a,
                u = t.y >= o,
                f = (u << 1) + l;
            e.leaf = false;
            e = e.nodes[f] || (e.nodes[f] = ls());
            if (l) i = a;
            else r = a;
            if (u) n = o;
            else s = o;
            c(e, t, i, n, r, s)
        }
        var h = ls();
        h.add = function (e) {
            c(h, e, t, i, n, r)
        };
        h.visit = function (e) {
            us(e, h, t, i, n, r)
        };
        e.forEach(h.add);
        return h
    };

    function ls() {
        return {
            leaf: true,
            nodes: [],
            point: null
        }
    }

    function us(e, t, i, n, r, s) {
        if (!e(t, i, n, r, s)) {
            var a = (i + r) * .5,
                o = (n + s) * .5,
                l = t.nodes;
            if (l[0]) us(e, l[0], i, n, a, o);
            if (l[1]) us(e, l[1], a, n, r, o);
            if (l[2]) us(e, l[2], i, o, a, s);
            if (l[3]) us(e, l[3], a, o, r, s)
        }
    }

    function cs(e) {
        return {
            x: e[0],
            y: e[1]
        }
    }
    d3.time = {};
    var fs = Date;

    function hs() {
        this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0])
    }
    hs.prototype = {
        getDate: function () {
            return this._.getUTCDate()
        },
        getDay: function () {
            return this._.getUTCDay()
        },
        getFullYear: function () {
            return this._.getUTCFullYear()
        },
        getHours: function () {
            return this._.getUTCHours()
        },
        getMilliseconds: function () {
            return this._.getUTCMilliseconds()
        },
        getMinutes: function () {
            return this._.getUTCMinutes()
        },
        getMonth: function () {
            return this._.getUTCMonth()
        },
        getSeconds: function () {
            return this._.getUTCSeconds()
        },
        getTime: function () {
            return this._.getTime()
        },
        getTimezoneOffset: function () {
            return 0
        },
        valueOf: function () {
            return this._.valueOf()
        },
        setDate: function () {
            ds.setUTCDate.apply(this._, arguments)
        },
        setDay: function () {
            ds.setUTCDay.apply(this._, arguments)
        },
        setFullYear: function () {
            ds.setUTCFullYear.apply(this._, arguments)
        },
        setHours: function () {
            ds.setUTCHours.apply(this._, arguments)
        },
        setMilliseconds: function () {
            ds.setUTCMilliseconds.apply(this._, arguments)
        },
        setMinutes: function () {
            ds.setUTCMinutes.apply(this._, arguments)
        },
        setMonth: function () {
            ds.setUTCMonth.apply(this._, arguments)
        },
        setSeconds: function () {
            ds.setUTCSeconds.apply(this._, arguments)
        },
        setTime: function () {
            ds.setTime.apply(this._, arguments)
        }
    };
    var ds = Date.prototype;
    d3.time.format = function (e) {
        var t = e.length;

        function i(i) {
            var n = [],
                r = -1,
                s = 0,
                a, o;
            while (++r < t) {
                if (e.charCodeAt(r) == 37) {
                    n.push(e.substring(s, r), (o = bs[a = e.charAt(++r)]) ? o(i) : a);
                    s = r + 1
                }
            }
            n.push(e.substring(s, r));
            return n.join("")
        }
        i.parse = function (t) {
            var i = {
                    y: 1900,
                    m: 0,
                    d: 1,
                    H: 0,
                    M: 0,
                    S: 0,
                    L: 0
                },
                n = ps(i, e, t, 0);
            if (n != t.length) return null;
            if ("p" in i) i.H = i.H % 12 + i.p * 12;
            var r = new fs;
            r.setFullYear(i.y, i.m, i.d);
            r.setHours(i.H, i.M, i.S, i.L);
            return r
        };
        i.toString = function () {
            return e
        };
        return i
    };

    function ps(e, t, i, n) {
        var r, s, a = 0,
            o = t.length,
            l = i.length;
        while (a < o) {
            if (n >= l) return -1;
            r = t.charCodeAt(a++);
            if (r == 37) {
                s = ws[t.charAt(a++)];
                if (!s || (n = s(e, i, n)) < 0) return -1
            }
            else if (r != i.charCodeAt(n++)) {
                return -1
            }
        }
        return n
    }
    var gs = d3.format("02d"),
        ms = d3.format("03d"),
        vs = d3.format("04d"),
        ys = d3.format("2d");
    var bs = {
        a: function (e) {
            return Ms[e.getDay()].substring(0, 3)
        },
        A: function (e) {
            return Ms[e.getDay()]
        },
        b: function (e) {
            return Is[e.getMonth()].substring(0, 3)
        },
        B: function (e) {
            return Is[e.getMonth()]
        },
        c: d3.time.format("%a %b %e %H:%M:%S %Y"),
        d: function (e) {
            return gs(e.getDate())
        },
        e: function (e) {
            return ys(e.getDate())
        },
        H: function (e) {
            return gs(e.getHours())
        },
        I: function (e) {
            return gs(e.getHours() % 12 || 12)
        },
        j: function (e) {
            return ms(1 + d3.time.dayOfYear(e))
        },
        L: function (e) {
            return ms(e.getMilliseconds())
        },
        m: function (e) {
            return gs(e.getMonth() + 1)
        },
        M: function (e) {
            return gs(e.getMinutes())
        },
        p: function (e) {
            return e.getHours() >= 12 ? "PM" : "AM"
        },
        S: function (e) {
            return gs(e.getSeconds())
        },
        U: function (e) {
            return gs(d3.time.sundayOfYear(e))
        },
        w: function (e) {
            return e.getDay()
        },
        W: function (e) {
            return gs(d3.time.mondayOfYear(e))
        },
        x: d3.time.format("%m/%d/%y"),
        X: d3.time.format("%H:%M:%S"),
        y: function (e) {
            return gs(e.getFullYear() % 100)
        },
        Y: function (e) {
            return vs(e.getFullYear() % 1e4)
        },
        Z: Qs,
        "%": function (e) {
            return "%"
        }
    };
    var ws = {
        a: _s,
        A: xs,
        b: Ts,
        B: Ss,
        c: $s,
        d: js,
        e: js,
        H: Fs,
        I: Fs,
        L: Ys,
        m: Ls,
        M: Rs,
        p: Bs,
        S: Ws,
        x: Ps,
        X: zs,
        y: Hs,
        Y: Ns
    };

    function _s(e, t, i) {
        return ks.test(t.substring(i, i += 3)) ? i : -1
    }

    function xs(e, t, i) {
        Cs.lastIndex = 0;
        var n = Cs.exec(t.substring(i, i + 10));
        return n ? i += n[0].length : -1
    }
    var ks = /^(?:sun|mon|tue|wed|thu|fri|sat)/i,
        Cs = /^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/i,
        Ms = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

    function Ts(e, t, i) {
        var n = Ds.get(t.substring(i, i += 3).toLowerCase());
        return n == null ? -1 : (e.m = n, i)
    }
    var Ds = d3.map({
        jan: 0,
        feb: 1,
        mar: 2,
        apr: 3,
        may: 4,
        jun: 5,
        jul: 6,
        aug: 7,
        sep: 8,
        oct: 9,
        nov: 10,
        dec: 11
    });

    function Ss(e, t, i) {
        Es.lastIndex = 0;
        var n = Es.exec(t.substring(i, i + 12));
        return n ? (e.m = As.get(n[0].toLowerCase()), i += n[0].length) : -1
    }
    var Es = /^(?:January|February|March|April|May|June|July|August|September|October|November|December)/gi;
    var As = d3.map({
        january: 0,
        february: 1,
        march: 2,
        april: 3,
        may: 4,
        june: 5,
        july: 6,
        august: 7,
        september: 8,
        october: 9,
        november: 10,
        december: 11
    });
    var Is = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

    function $s(e, t, i) {
        return ps(e, bs.c.toString(), t, i)
    }

    function Ps(e, t, i) {
        return ps(e, bs.x.toString(), t, i)
    }

    function zs(e, t, i) {
        return ps(e, bs.X.toString(), t, i)
    }

    function Ns(e, t, i) {
        qs.lastIndex = 0;
        var n = qs.exec(t.substring(i, i + 4));
        return n ? (e.y = +n[0], i += n[0].length) : -1
    }

    function Hs(e, t, i) {
        qs.lastIndex = 0;
        var n = qs.exec(t.substring(i, i + 2));
        return n ? (e.y = Os() + +n[0], i += n[0].length) : -1
    }

    function Os() {
        return ~~((new Date).getFullYear() / 1e3) * 1e3
    }

    function Ls(e, t, i) {
        qs.lastIndex = 0;
        var n = qs.exec(t.substring(i, i + 2));
        return n ? (e.m = n[0] - 1, i += n[0].length) : -1
    }

    function js(e, t, i) {
        qs.lastIndex = 0;
        var n = qs.exec(t.substring(i, i + 2));
        return n ? (e.d = +n[0], i += n[0].length) : -1
    }

    function Fs(e, t, i) {
        qs.lastIndex = 0;
        var n = qs.exec(t.substring(i, i + 2));
        return n ? (e.H = +n[0], i += n[0].length) : -1
    }

    function Rs(e, t, i) {
        qs.lastIndex = 0;
        var n = qs.exec(t.substring(i, i + 2));
        return n ? (e.M = +n[0], i += n[0].length) : -1
    }

    function Ws(e, t, i) {
        qs.lastIndex = 0;
        var n = qs.exec(t.substring(i, i + 2));
        return n ? (e.S = +n[0], i += n[0].length) : -1
    }

    function Ys(e, t, i) {
        qs.lastIndex = 0;
        var n = qs.exec(t.substring(i, i + 3));
        return n ? (e.L = +n[0], i += n[0].length) : -1
    }
    var qs = /\s*\d+/;

    function Bs(e, t, i) {
        var n = Us.get(t.substring(i, i += 2).toLowerCase());
        return n == null ? -1 : (e.p = n, i)
    }
    var Us = d3.map({
        am: 0,
        pm: 1
    });

    function Qs(e) {
        var t = e.getTimezoneOffset(),
            i = t > 0 ? "-" : "+",
            n = ~~(Math.abs(t) / 60),
            r = Math.abs(t) % 60;
        return i + gs(n) + gs(r)
    }
    d3.time.format.utc = function (e) {
        var t = d3.time.format(e);

        function i(e) {
            try {
                fs = hs;
                var i = new fs;
                i._ = e;
                return t(i)
            }
            finally {
                fs = Date
            }
        }
        i.parse = function (e) {
            try {
                fs = hs;
                var i = t.parse(e);
                return i && i._
            }
            finally {
                fs = Date
            }
        };
        i.toString = t.toString;
        return i
    };
    var Gs = d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");
    d3.time.format.iso = Date.prototype.toISOString ? Xs : Gs;

    function Xs(e) {
        return e.toISOString()
    }
    Xs.parse = function (e) {
        var t = new Date(e);
        return isNaN(t) ? null : t
    };
    Xs.toString = Gs.toString;

    function Vs(e, t, i) {
        function n(t) {
            var i = e(t),
                n = s(i, 1);
            return t - i < n - t ? i : n
        }

        function r(i) {
            t(i = e(new fs(i - 1)), 1);
            return i
        }

        function s(e, i) {
            t(e = new fs(+e), i);
            return e
        }

        function a(e, n, s) {
            var a = r(e),
                o = [];
            if (s > 1) {
                while (a < n) {
                    if (!(i(a) % s)) o.push(new Date(+a));
                    t(a, 1)
                }
            }
            else {
                while (a < n) o.push(new Date(+a)), t(a, 1)
            }
            return o
        }

        function o(e, t, i) {
            try {
                fs = hs;
                var n = new hs;
                n._ = e;
                return a(n, t, i)
            }
            finally {
                fs = Date
            }
        }
        e.floor = e;
        e.round = n;
        e.ceil = r;
        e.offset = s;
        e.range = a;
        var l = e.utc = Ks(e);
        l.floor = l;
        l.round = Ks(n);
        l.ceil = Ks(r);
        l.offset = Ks(s);
        l.range = o;
        return e
    }

    function Ks(e) {
        return function (t, i) {
            try {
                fs = hs;
                var n = new hs;
                n._ = t;
                return e(n, i)._
            }
            finally {
                fs = Date
            }
        }
    }
    d3.time.second = Vs(function (e) {
        return new fs(Math.floor(e / 1e3) * 1e3)
    }, function (e, t) {
        e.setTime(e.getTime() + Math.floor(t) * 1e3)
    }, function (e) {
        return e.getSeconds()
    });
    d3.time.seconds = d3.time.second.range;
    d3.time.seconds.utc = d3.time.second.utc.range;
    d3.time.minute = Vs(function (e) {
        return new fs(Math.floor(e / 6e4) * 6e4)
    }, function (e, t) {
        e.setTime(e.getTime() + Math.floor(t) * 6e4)
    }, function (e) {
        return e.getMinutes()
    });
    d3.time.minutes = d3.time.minute.range;
    d3.time.minutes.utc = d3.time.minute.utc.range;
    d3.time.hour = Vs(function (e) {
        var t = e.getTimezoneOffset() / 60;
        return new fs((Math.floor(e / 36e5 - t) + t) * 36e5)
    }, function (e, t) {
        e.setTime(e.getTime() + Math.floor(t) * 36e5)
    }, function (e) {
        return e.getHours()
    });
    d3.time.hours = d3.time.hour.range;
    d3.time.hours.utc = d3.time.hour.utc.range;
    d3.time.day = Vs(function (e) {
        return new fs(e.getFullYear(), e.getMonth(), e.getDate())
    }, function (e, t) {
        e.setDate(e.getDate() + t)
    }, function (e) {
        return e.getDate() - 1
    });
    d3.time.days = d3.time.day.range;
    d3.time.days.utc = d3.time.day.utc.range;
    d3.time.dayOfYear = function (e) {
        var t = d3.time.year(e);
        return Math.floor((e - t) / 864e5 - (e.getTimezoneOffset() - t.getTimezoneOffset()) / 1440)
    };
    Ms.forEach(function (e, t) {
        e = e.toLowerCase();
        t = 7 - t;
        var i = d3.time[e] = Vs(function (e) {
            (e = d3.time.day(e)).setDate(e.getDate() - (e.getDay() + t) % 7);
            return e
        }, function (e, t) {
            e.setDate(e.getDate() + Math.floor(t) * 7)
        }, function (e) {
            var i = d3.time.year(e).getDay();
            return Math.floor((d3.time.dayOfYear(e) + (i + t) % 7) / 7) - (i !== t)
        });
        d3.time[e + "s"] = i.range;
        d3.time[e + "s"].utc = i.utc.range;
        d3.time[e + "OfYear"] = function (e) {
            var i = d3.time.year(e).getDay();
            return Math.floor((d3.time.dayOfYear(e) + (i + t) % 7) / 7)
        }
    });
    d3.time.week = d3.time.sunday;
    d3.time.weeks = d3.time.sunday.range;
    d3.time.weeks.utc = d3.time.sunday.utc.range;
    d3.time.weekOfYear = d3.time.sundayOfYear;
    d3.time.month = Vs(function (e) {
        return new fs(e.getFullYear(), e.getMonth(), 1)
    }, function (e, t) {
        e.setMonth(e.getMonth() + t)
    }, function (e) {
        return e.getMonth()
    });
    d3.time.months = d3.time.month.range;
    d3.time.months.utc = d3.time.month.utc.range;
    d3.time.year = Vs(function (e) {
        return new fs(e.getFullYear(), 0, 1)
    }, function (e, t) {
        e.setFullYear(e.getFullYear() + t)
    }, function (e) {
        return e.getFullYear()
    });
    d3.time.years = d3.time.year.range;
    d3.time.years.utc = d3.time.year.utc.range;

    function Zs(e, t, i) {
        function n(t) {
            return e(t)
        }
        n.invert = function (t) {
            return ea(e.invert(t))
        };
        n.domain = function (t) {
            if (!arguments.length) return e.domain().map(ea);
            e.domain(t);
            return n
        };
        n.nice = function (e) {
            var t = Js(n.domain());
            return n.domain([e.floor(t[0]), e.ceil(t[1])])
        };
        n.ticks = function (i, r) {
            var s = Js(n.domain());
            if (typeof i !== "function") {
                var a = s[1] - s[0],
                    o = a / i,
                    l = d3.bisect(ra, o);
                if (l == ra.length) return t.year(s, i);
                if (!l) return e.ticks(i).map(ea);
                if (Math.log(o / ra[l - 1]) < Math.log(ra[l] / o)) --l;
                i = t[l];
                r = i[1];
                i = i[0].range
            }
            return i(s[0], new Date(+s[1] + 1), r)
        };
        n.tickFormat = function () {
            return i
        };
        n.copy = function () {
            return Zs(e.copy(), t, i)
        };
        return d3.rebind(n, e, "range", "rangeRound", "interpolate", "clamp")
    }

    function Js(e) {
        var t = e[0],
            i = e[e.length - 1];
        return t < i ? [t, i] : [i, t]
    }

    function ea(e) {
        return new Date(e)
    }

    function ta(e) {
        return function (t) {
            var i = e.length - 1,
                n = e[i];
            while (!n[1](t)) n = e[--i];
            return n[0](t)
        }
    }

    function ia(e) {
        var t = new Date(e, 0, 1);
        t.setFullYear(e);
        return t
    }

    function na(e) {
        var t = e.getFullYear(),
            i = ia(t),
            n = ia(t + 1);
        return t + (e - i) / (n - i)
    }
    var ra = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6];
    var sa = [
        [d3.time.second, 1],
        [d3.time.second, 5],
        [d3.time.second, 15],
        [d3.time.second, 30],
        [d3.time.minute, 1],
        [d3.time.minute, 5],
        [d3.time.minute, 15],
        [d3.time.minute, 30],
        [d3.time.hour, 1],
        [d3.time.hour, 3],
        [d3.time.hour, 6],
        [d3.time.hour, 12],
        [d3.time.day, 1],
        [d3.time.day, 2],
        [d3.time.week, 1],
        [d3.time.month, 1],
        [d3.time.month, 3],
        [d3.time.year, 1]
    ];
    var aa = [
        [d3.time.format("%Y"), function (e) {
            return true
        }],
        [d3.time.format("%B"), function (e) {
            return e.getMonth()
        }],
        [d3.time.format("%b %d"), function (e) {
            return e.getDate() != 1
        }],
        [d3.time.format("%a %d"), function (e) {
            return e.getDay() && e.getDate() != 1
        }],
        [d3.time.format("%I %p"), function (e) {
            return e.getHours()
        }],
        [d3.time.format("%I:%M"), function (e) {
            return e.getMinutes()
        }],
        [d3.time.format(":%S"), function (e) {
            return e.getSeconds()
        }],
        [d3.time.format(".%L"), function (e) {
            return e.getMilliseconds()
        }]
    ];
    var oa = d3.scale.linear(),
        la = ta(aa);
    sa.year = function (e, t) {
        return oa.domain(e.map(na)).ticks(t).map(ia)
    };
    d3.time.scale = function () {
        return Zs(d3.scale.linear(), sa, la)
    };
    var ua = sa.map(function (e) {
        return [e[0].utc, e[1]]
    });
    var ca = [
        [d3.time.format.utc("%Y"), function (e) {
            return true
        }],
        [d3.time.format.utc("%B"), function (e) {
            return e.getUTCMonth()
        }],
        [d3.time.format.utc("%b %d"), function (e) {
            return e.getUTCDate() != 1
        }],
        [d3.time.format.utc("%a %d"), function (e) {
            return e.getUTCDay() && e.getUTCDate() != 1
        }],
        [d3.time.format.utc("%I %p"), function (e) {
            return e.getUTCHours()
        }],
        [d3.time.format.utc("%I:%M"), function (e) {
            return e.getUTCMinutes()
        }],
        [d3.time.format.utc(":%S"), function (e) {
            return e.getUTCSeconds()
        }],
        [d3.time.format.utc(".%L"), function (e) {
            return e.getUTCMilliseconds()
        }]
    ];
    var fa = ta(ca);

    function ha(e) {
        var t = new Date(Date.UTC(e, 0, 1));
        t.setUTCFullYear(e);
        return t
    }

    function da(e) {
        var t = e.getUTCFullYear(),
            i = ha(t),
            n = ha(t + 1);
        return t + (e - i) / (n - i)
    }
    ua.year = function (e, t) {
        return oa.domain(e.map(da)).ticks(t).map(ha)
    };
    d3.time.scale.utc = function () {
        return Zs(d3.scale.linear(), ua, fa)
    }
})(); + function (e) {
    "use strict";
    var t = function (i, n) {
        this.$element = e(i);
        this.options = e.extend({}, t.DEFAULTS, n);
        this.transitioning = null;
        if (this.options.parent) this.$parent = e(this.options.parent);
        if (this.options.toggle) this.toggle()
    };
    t.DEFAULTS = {
        toggle: true
    };
    t.prototype.dimension = function () {
        var e = this.$element.hasClass("width");
        return e ? "width" : "height"
    };
    t.prototype.show = function () {
        if (this.transitioning || this.$element.hasClass("in")) return;
        var t = e.Event("show.bs.collapse");
        this.$element.trigger(t);
        if (t.isDefaultPrevented()) return;
        var i = this.$parent && this.$parent.find("> .panel > .in");
        if (i && i.length) {
            var n = i.data("bs.collapse");
            if (n && n.transitioning) return;
            i.collapse("hide");
            n || i.data("bs.collapse", null)
        }
        var r = this.dimension();
        this.$element.removeClass("collapse").addClass("collapsing")[r](0);
        this.transitioning = 1;
        var s = function () {
            this.$element.removeClass("collapsing").addClass("in")[r]("auto");
            this.transitioning = 0;
            this.$element.trigger("shown.bs.collapse")
        };
        if (!e.support.transition) return s.call(this);
        var a = e.camelCase(["scroll", r].join("-"));
        this.$element.one(e.support.transition.end, e.proxy(s, this)).emulateTransitionEnd(350)[r](this.$element[0][a])
    };
    t.prototype.hide = function () {
        if (this.transitioning || !this.$element.hasClass("in")) return;
        var t = e.Event("hide.bs.collapse");
        this.$element.trigger(t);
        if (t.isDefaultPrevented()) return;
        var i = this.dimension();
        this.$element[i](this.$element[i]())[0].offsetHeight;
        this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");
        this.transitioning = 1;
        var n = function () {
            this.transitioning = 0;
            this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
        };
        if (!e.support.transition) return n.call(this);
        this.$element[i](0).one(e.support.transition.end, e.proxy(n, this)).emulateTransitionEnd(350)
    };
    t.prototype.toggle = function () {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    };
    var i = e.fn.collapse;
    e.fn.collapse = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.collapse");
            var s = e.extend({}, t.DEFAULTS, n.data(), typeof i == "object" && i);
            if (!r) n.data("bs.collapse", r = new t(this, s));
            if (typeof i == "string") r[i]()
        })
    };
    e.fn.collapse.Constructor = t;
    e.fn.collapse.noConflict = function () {
        e.fn.collapse = i;
        return this
    };
    e(document).on("click.bs.collapse.data-api", "[data-toggle=collapse]", function (t) {
        var i = e(this),
            n;
        var r = i.attr("data-target") || t.preventDefault() || (n = i.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "");
        var s = e(r);
        var a = s.data("bs.collapse");
        var o = a ? "toggle" : i.data();
        var l = i.attr("data-parent");
        var u = l && e(l);
        if (!a || !a.transitioning) {
            if (u) u.find('[data-toggle=collapse][data-parent="' + l + '"]').not(i).addClass("collapsed");
            i[s.hasClass("in") ? "addClass" : "removeClass"]("collapsed")
        }
        s.collapse(o)
    })
}(window.jQuery); + function (e) {
    "use strict";
    var t = function (t, i) {
        this.$element = e(t);
        this.$indicators = this.$element.find(".carousel-indicators");
        this.options = i;
        this.paused = this.sliding = this.interval = this.$active = this.$items = null;
        this.options.pause == "hover" && this.$element.on("mouseenter", e.proxy(this.pause, this)).on("mouseleave", e.proxy(this.cycle, this))
    };
    t.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: true
    };
    t.prototype.cycle = function (t) {
        t || (this.paused = false);
        this.interval && clearInterval(this.interval);
        this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval));
        return this
    };
    t.prototype.getActiveIndex = function () {
        this.$active = this.$element.find(".item.active");
        this.$items = this.$active.parent().children();
        return this.$items.index(this.$active)
    };
    t.prototype.to = function (t) {
        var i = this;
        var n = this.getActiveIndex();
        if (t > this.$items.length - 1 || t < 0) return;
        if (this.sliding) return this.$element.one("slid", function () {
            i.to(t)
        });
        if (n == t) return this.pause().cycle();
        return this.slide(t > n ? "next" : "prev", e(this.$items[t]))
    };
    t.prototype.pause = function (t) {
        t || (this.paused = true);
        if (this.$element.find(".next, .prev").length && e.support.transition.end) {
            this.$element.trigger(e.support.transition.end);
            this.cycle(true)
        }
        this.interval = clearInterval(this.interval);
        return this
    };
    t.prototype.next = function () {
        if (this.sliding) return;
        return this.slide("next")
    };
    t.prototype.prev = function () {
        if (this.sliding) return;
        return this.slide("prev")
    };
    t.prototype.slide = function (t, i) {
        var n = this.$element.find(".item.active");
        var r = i || n[t]();
        var s = this.interval;
        var a = t == "next" ? "left" : "right";
        var o = t == "next" ? "first" : "last";
        var l = this;
        if (!r.length) {
            if (!this.options.wrap) return;
            r = this.$element.find(".item")[o]()
        }
        this.sliding = true;
        s && this.pause();
        var u = e.Event("slide.bs.carousel", {
            relatedTarget: r[0],
            direction: a
        });
        if (r.hasClass("active")) return;
        if (this.$indicators.length) {
            this.$indicators.find(".active").removeClass("active");
            this.$element.one("slid", function () {
                var t = e(l.$indicators.children()[l.getActiveIndex()]);
                t && t.addClass("active")
            })
        }
        if (e.support.transition && this.$element.hasClass("slide")) {
            this.$element.trigger(u);
            if (u.isDefaultPrevented()) return;
            r.addClass(t);
            r[0].offsetWidth;
            n.addClass(a);
            r.addClass(a);
            n.one(e.support.transition.end, function () {
                r.removeClass([t, a].join(" ")).addClass("active");
                n.removeClass(["active", a].join(" "));
                l.sliding = false;
                setTimeout(function () {
                    l.$element.trigger("slid")
                }, 0)
            }).emulateTransitionEnd(600)
        }
        else {
            this.$element.trigger(u);
            if (u.isDefaultPrevented()) return;
            n.removeClass("active");
            r.addClass("active");
            this.sliding = false;
            this.$element.trigger("slid")
        }
        s && this.cycle();
        return this
    };
    var i = e.fn.carousel;
    e.fn.carousel = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.carousel");
            var s = e.extend({}, t.DEFAULTS, n.data(), typeof i == "object" && i);
            var a = typeof i == "string" ? i : s.slide;
            if (!r) n.data("bs.carousel", r = new t(this, s));
            if (typeof i == "number") r.to(i);
            else if (a) r[a]();
            else if (s.interval) r.pause().cycle()
        })
    };
    e.fn.carousel.Constructor = t;
    e.fn.carousel.noConflict = function () {
        e.fn.carousel = i;
        return this
    };
    e(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function (t) {
        var i = e(this),
            n;
        var r = e(i.attr("data-target") || (n = i.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, ""));
        var s = e.extend({}, r.data(), i.data());
        var a = i.attr("data-slide-to");
        if (a) s.interval = false;
        r.carousel(s);
        if (a = i.attr("data-slide-to")) {
            r.data("bs.carousel").to(a)
        }
        t.preventDefault()
    });
    e(window).on("load", function () {
        e('[data-ride="carousel"]').each(function () {
            var t = e(this);
            t.carousel(t.data())
        })
    })
}(window.jQuery); + function (e) {
    "use strict";

    function t() {
        var e = document.createElement("bootstrap");
        var t = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (var i in t) {
            if (e.style[i] !== undefined) {
                return {
                    end: t[i]
                }
            }
        }
    }
    e.fn.emulateTransitionEnd = function (t) {
        var i = false,
            n = this;
        e(this).one(e.support.transition.end, function () {
            i = true
        });
        var r = function () {
            if (!i) e(n).trigger(e.support.transition.end)
        };
        setTimeout(r, t);
        return this
    };
    e(function () {
        e.support.transition = t()
    })
}(window.jQuery); + function (e) {
    "use strict";
    var t = function (e, t) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null;
        this.init("tooltip", e, t)
    };
    t.DEFAULTS = {
        animation: true,
        placement: "top",
        selector: false,
        template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: false,
        container: false
    };
    t.prototype.init = function (t, i, n) {
        this.enabled = true;
        this.type = t;
        this.$element = e(i);
        this.options = this.getOptions(n);
        var r = this.options.trigger.split(" ");
        for (var s = r.length; s--;) {
            var a = r[s];
            if (a == "click") {
                this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this))
            }
            else if (a != "manual") {
                var o = a == "hover" ? "mouseenter" : "focusin";
                var l = a == "hover" ? "mouseleave" : "focusout";
                this.$element.on(o + "." + this.type, this.options.selector, e.proxy(this.enter, this));
                this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = e.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    };
    t.prototype.getDefaults = function () {
        return t.DEFAULTS
    };
    t.prototype.getOptions = function (t) {
        t = e.extend({}, this.getDefaults(), this.$element.data(), t);
        if (t.delay && typeof t.delay == "number") {
            t.delay = {
                show: t.delay,
                hide: t.delay
            }
        }
        return t
    };
    t.prototype.getDelegateOptions = function () {
        var t = {};
        var i = this.getDefaults();
        this._options && e.each(this._options, function (e, n) {
            if (i[e] != n) t[e] = n
        });
        return t
    };
    t.prototype.enter = function (t) {
        var i = t instanceof this.constructor ? t : e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        clearTimeout(i.timeout);
        i.hoverState = "in";
        if (!i.options.delay || !i.options.delay.show) return i.show();
        i.timeout = setTimeout(function () {
            if (i.hoverState == "in") i.show()
        }, i.options.delay.show)
    };
    t.prototype.leave = function (t) {
        var i = t instanceof this.constructor ? t : e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        clearTimeout(i.timeout);
        i.hoverState = "out";
        if (!i.options.delay || !i.options.delay.hide) return i.hide();
        i.timeout = setTimeout(function () {
            if (i.hoverState == "out") i.hide()
        }, i.options.delay.hide)
    };
    t.prototype.show = function () {
        var t = e.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(t);
            if (t.isDefaultPrevented()) return;
            var i = this;
            var n = this.tip();
            this.setContent();
            if (this.options.animation) n.addClass("fade");
            var r = typeof this.options.placement == "function" ? this.options.placement.call(this, n[0], this.$element[0]) : this.options.placement;
            var s = /\s?auto?\s?/i;
            var a = s.test(r);
            if (a) r = r.replace(s, "") || "top";
            n.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(r);
            this.options.container ? n.appendTo(this.options.container) : n.insertAfter(this.$element);
            var o = this.getPosition();
            var l = n[0].offsetWidth;
            var u = n[0].offsetHeight;
            if (a) {
                var c = this.$element.parent();
                var f = r;
                var h = document.documentElement.scrollTop || document.body.scrollTop;
                var d = this.options.container == "body" ? window.innerWidth : c.outerWidth();
                var p = this.options.container == "body" ? window.innerHeight : c.outerHeight();
                var g = this.options.container == "body" ? 0 : c.offset().left;
                r = r == "bottom" && o.top + o.height + u - h > p ? "top" : r == "top" && o.top - h - u < 0 ? "bottom" : r == "right" && o.right + l > d ? "left" : r == "left" && o.left - l < g ? "right" : r;
                n.removeClass(f).addClass(r)
            }
            var m = this.getCalculatedOffset(r, o, l, u);
            this.applyPlacement(m, r);
            this.hoverState = null;
            var v = function () {
                i.$element.trigger("shown.bs." + i.type)
            };
            e.support.transition && this.$tip.hasClass("fade") ? n.one(e.support.transition.end, v).emulateTransitionEnd(150) : v()
        }
    };
    t.prototype.applyPlacement = function (t, i) {
        var n;
        var r = this.tip();
        var s = r[0].offsetWidth;
        var a = r[0].offsetHeight;
        var o = parseInt(r.css("margin-top"), 10);
        var l = parseInt(r.css("margin-left"), 10);
        if (isNaN(o)) o = 0;
        if (isNaN(l)) l = 0;
        t.top = t.top + o;
        t.left = t.left + l;
        e.offset.setOffset(r[0], e.extend({
            using: function (e) {
                r.css({
                    top: Math.round(e.top),
                    left: Math.round(e.left)
                })
            }
        }, t), 0);
        r.addClass("in");
        var u = r[0].offsetWidth;
        var c = r[0].offsetHeight;
        if (i == "top" && c != a) {
            n = true;
            t.top = t.top + a - c
        }
        if (/bottom|top/.test(i)) {
            var f = 0;
            if (t.left < 0) {
                f = t.left * -2;
                t.left = 0;
                r.offset(t);
                u = r[0].offsetWidth;
                c = r[0].offsetHeight
            }
            this.replaceArrow(f - s + u, u, "left")
        }
        else {
            this.replaceArrow(c - a, c, "top")
        }
        if (n) r.offset(t)
    };
    t.prototype.replaceArrow = function (e, t, i) {
        this.arrow().css(i, e ? 50 * (1 - e / t) + "%" : "")
    };
    t.prototype.setContent = function () {
        var e = this.tip();
        var t = this.getTitle();
        e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t);
        e.removeClass("fade in top bottom left right")
    };
    t.prototype.hide = function () {
        var t = this;
        var i = this.tip();
        var n = e.Event("hide.bs." + this.type);

        function r() {
            if (t.hoverState != "in") i.detach();
            t.$element.trigger("hidden.bs." + t.type)
        }
        this.$element.trigger(n);
        if (n.isDefaultPrevented()) return;
        i.removeClass("in");
        e.support.transition && this.$tip.hasClass("fade") ? i.one(e.support.transition.end, r).emulateTransitionEnd(150) : r();
        this.hoverState = null;
        return this
    };
    t.prototype.fixTitle = function () {
        var e = this.$element;
        if (e.attr("title") || typeof e.attr("data-original-title") != "string") {
            e.attr("data-original-title", e.attr("title") || "").attr("title", "")
        }
    };
    t.prototype.hasContent = function () {
        return this.getTitle()
    };
    t.prototype.getPosition = function () {
        var t = this.$element[0];
        return e.extend({}, typeof t.getBoundingClientRect == "function" ? t.getBoundingClientRect() : {
            width: t.offsetWidth,
            height: t.offsetHeight
        }, this.$element.offset())
    };
    t.prototype.getCalculatedOffset = function (e, t, i, n) {
        return e == "bottom" ? {
            top: t.top + t.height,
            left: t.left + t.width / 2 - i / 2
        } : e == "top" ? {
            top: t.top - n,
            left: t.left + t.width / 2 - i / 2
        } : e == "left" ? {
            top: t.top + t.height / 2 - n / 2,
            left: t.left - i
        } : {
            top: t.top + t.height / 2 - n / 2,
            left: t.left + t.width
        }
    };
    t.prototype.getTitle = function () {
        var e;
        var t = this.$element;
        var i = this.options;
        e = t.attr("data-original-title") || (typeof i.title == "function" ? i.title.call(t[0]) : i.title);
        return e
    };
    t.prototype.tip = function () {
        return this.$tip = this.$tip || e(this.options.template)
    };
    t.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    };
    t.prototype.validate = function () {
        if (!this.$element[0].parentNode) {
            this.hide();
            this.$element = null;
            this.options = null
        }
    };
    t.prototype.enable = function () {
        this.enabled = true
    };
    t.prototype.disable = function () {
        this.enabled = false
    };
    t.prototype.toggleEnabled = function () {
        this.enabled = !this.enabled
    };
    t.prototype.toggle = function (t) {
        var i = t ? e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type) : this;
        i.tip().hasClass("in") ? i.leave(i) : i.enter(i)
    };
    t.prototype.destroy = function () {
        clearTimeout(this.timeout);
        this.hide().$element.off("." + this.type).removeData("bs." + this.type)
    };
    var i = e.fn.tooltip;
    e.fn.tooltip = function (i) {
        return this.each(function () {
            var n = e(this);
            var r = n.data("bs.tooltip");
            var s = typeof i == "object" && i;
            if (!r && i == "destroy") return;
            if (!r) n.data("bs.tooltip", r = new t(this, s));
            if (typeof i == "string") r[i]()
        })
    };
    e.fn.tooltip.Constructor = t;
    e.fn.tooltip.noConflict = function () {
        e.fn.tooltip = i;
        return this
    }
}(jQuery);
(function (e) {
    var t = false;
    var i = false;
    var n = false;
    var r = 5e3;
    var s = 2e3;
    var o = 0;
    var l = e;

    function u() {
        var e = document.getElementsByTagName("script");
        var t = e[e.length - 1].src.split("?")[0];
        return t.split("/").length > 0 ? t.split("/").slice(0, -1).join("/") + "/" : ""
    }
    var c = u();
    var f = ["ms", "moz", "webkit", "o"];
    var h = window.requestAnimationFrame || false;
    var d = window.cancelAnimationFrame || false;
    if (!h) {
        for (var p in f) {
            var g = f[p];
            if (!h) h = window[g + "RequestAnimationFrame"];
            if (!d) d = window[g + "CancelAnimationFrame"] || window[g + "CancelRequestAnimationFrame"]
        }
    }
    var m = window.MutationObserver || window.WebKitMutationObserver || false;
    var v = {
        zindex: "auto",
        cursoropacitymin: 0,
        cursoropacitymax: 1,
        cursorcolor: "#424242",
        cursorwidth: "5px",
        cursorborder: "1px solid #fff",
        cursorborderradius: "5px",
        scrollspeed: 60,
        mousescrollstep: 8 * 3,
        touchbehavior: false,
        hwacceleration: true,
        usetransition: true,
        boxzoom: false,
        dblclickzoom: true,
        gesturezoom: true,
        grabcursorenabled: true,
        autohidemode: true,
        background: "",
        iframeautoresize: true,
        cursorminheight: 32,
        preservenativescrolling: true,
        railoffset: false,
        bouncescroll: true,
        spacebarenabled: true,
        railpadding: {
            top: 0,
            right: 0,
            left: 0,
            bottom: 0
        },
        disableoutline: true,
        horizrailenabled: true,
        railalign: "right",
        railvalign: "bottom",
        enabletranslate3d: true,
        enablemousewheel: true,
        enablekeyboard: true,
        smoothscroll: true,
        sensitiverail: true,
        enablemouselockapi: true,
        cursorfixedheight: false,
        directionlockdeadzone: 6,
        hidecursordelay: 400,
        nativeparentscrolling: true,
        enablescrollonselection: true,
        overflowx: true,
        overflowy: true,
        cursordragspeed: .3,
        rtlmode: false,
        cursordragontouch: false,
        oneaxismousemode: "auto"
    };
    var y = false;
    var b = function () {
        if (y) return y;
        var e = document.createElement("DIV");
        var t = {};
        t.haspointerlock = "pointerLockElement" in document || "mozPointerLockElement" in document || "webkitPointerLockElement" in document;
        t.isopera = "opera" in window;
        t.isopera12 = t.isopera && "getUserMedia" in navigator;
        t.isoperamini = Object.prototype.toString.call(window.operamini) === "[object OperaMini]";
        t.isie = "all" in document && "attachEvent" in e && !t.isopera;
        t.isieold = t.isie && !("msInterpolationMode" in e.style);
        t.isie7 = t.isie && !t.isieold && (!("documentMode" in document) || document.documentMode == 7);
        t.isie8 = t.isie && "documentMode" in document && document.documentMode == 8;
        t.isie9 = t.isie && "performance" in window && document.documentMode >= 9;
        t.isie10 = t.isie && "performance" in window && document.documentMode >= 10;
        t.isie9mobile = /iemobile.9/i.test(navigator.userAgent);
        if (t.isie9mobile) t.isie9 = false;
        t.isie7mobile = !t.isie9mobile && t.isie7 && /iemobile/i.test(navigator.userAgent);
        t.ismozilla = "MozAppearance" in e.style;
        t.iswebkit = "WebkitAppearance" in e.style;
        t.ischrome = "chrome" in window;
        t.ischrome22 = t.ischrome && t.haspointerlock;
        t.ischrome26 = t.ischrome && "transition" in e.style;
        t.cantouch = "ontouchstart" in document.documentElement || "ontouchstart" in window;
        t.hasmstouch = window.navigator.msPointerEnabled || false;
        t.ismac = /^mac$/i.test(navigator.platform);
        t.isios = t.cantouch && /iphone|ipad|ipod/i.test(navigator.platform);
        t.isios4 = t.isios && !("seal" in Object);
        t.isandroid = /android/i.test(navigator.userAgent);
        t.trstyle = false;
        t.hastransform = false;
        t.hastranslate3d = false;
        t.transitionstyle = false;
        t.hastransition = false;
        t.transitionend = false;
        var i = ["transform", "msTransform", "webkitTransform", "MozTransform", "OTransform"];
        for (var n = 0; n < i.length; n++) {
            if (typeof e.style[i[n]] != "undefined") {
                t.trstyle = i[n];
                break
            }
        }
        t.hastransform = t.trstyle != false;
        if (t.hastransform) {
            e.style[t.trstyle] = "translate3d(1px,2px,3px)";
            t.hastranslate3d = /translate3d/.test(e.style[t.trstyle])
        }
        t.transitionstyle = false;
        t.prefixstyle = "";
        t.transitionend = false;
        var i = ["transition", "webkitTransition", "MozTransition", "OTransition", "OTransition", "msTransition", "KhtmlTransition"];
        var r = ["", "-webkit-", "-moz-", "-o-", "-o", "-ms-", "-khtml-"];
        var s = ["transitionend", "webkitTransitionEnd", "transitionend", "otransitionend", "oTransitionEnd", "msTransitionEnd", "KhtmlTransitionEnd"];
        for (var n = 0; n < i.length; n++) {
            if (i[n] in e.style) {
                t.transitionstyle = i[n];
                t.prefixstyle = r[n];
                t.transitionend = s[n];
                break
            }
        }
        if (t.ischrome26) {
            t.prefixstyle = r[1]
        }
        t.hastransition = t.transitionstyle;

        function a() {
            var i = ["-moz-grab", "-webkit-grab", "grab"];
            if (t.ischrome && !t.ischrome22 || t.isie) i = [];
            for (var n = 0; n < i.length; n++) {
                var r = i[n];
                e.style["cursor"] = r;
                if (e.style["cursor"] == r) return r
            }
            return "url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"
        }
        t.cursorgrabvalue = a();
        t.hasmousecapture = "setCapture" in e;
        t.hasMutationObserver = m !== false;
        e = null;
        y = t;
        return t
    };
    var w = function (e, n) {
        var a = this;
        this.version = "3.5.0 BETA5";
        this.name = "nicescroll";
        this.me = n;
        this.opt = {
            doc: l("body"),
            win: false
        };
        l.extend(this.opt, v);
        this.opt.snapbackspeed = 80;
        if (e || false) {
            for (var u in a.opt) {
                if (typeof e[u] != "undefined") a.opt[u] = e[u]
            }
        }
        this.doc = a.opt.doc;
        this.iddoc = this.doc && this.doc[0] ? this.doc[0].id || "" : "";
        this.ispage = /BODY|HTML/.test(a.opt.win ? a.opt.win[0].nodeName : this.doc[0].nodeName);
        this.haswrapper = a.opt.win !== false;
        this.win = a.opt.win || (this.ispage ? l(window) : this.doc);
        this.docscroll = this.ispage && !this.haswrapper ? l(window) : this.win;
        this.body = l("body");
        this.viewport = false;
        this.isfixed = false;
        this.iframe = false;
        this.isiframe = this.doc[0].nodeName == "IFRAME" && this.win[0].nodeName == "IFRAME";
        this.istextarea = this.win[0].nodeName == "TEXTAREA";
        this.forcescreen = false;
        this.canshowonmouseevent = a.opt.autohidemode != "scroll";
        this.onmousedown = false;
        this.onmouseup = false;
        this.onmousemove = false;
        this.onmousewheel = false;
        this.onkeypress = false;
        this.ongesturezoom = false;
        this.onclick = false;
        this.onscrollstart = false;
        this.onscrollend = false;
        this.onscrollcancel = false;
        this.onzoomin = false;
        this.onzoomout = false;
        this.view = false;
        this.page = false;
        this.scroll = {
            x: 0,
            y: 0
        };
        this.scrollratio = {
            x: 0,
            y: 0
        };
        this.cursorheight = 20;
        this.scrollvaluemax = 0;
        this.checkrtlmode = false;
        this.scrollrunning = false;
        this.scrollmom = false;
        this.observer = false;
        this.observerremover = false;
        do {
            this.id = "ascrail" + s++
        } while (document.getElementById(this.id));
        this.rail = false;
        this.cursor = false;
        this.cursorfreezed = false;
        this.selectiondrag = false;
        this.zoom = false;
        this.zoomactive = false;
        this.hasfocus = false;
        this.hasmousefocus = false;
        this.visibility = true;
        this.locked = false;
        this.hidden = false;
        this.cursoractive = true;
        this.overflowx = a.opt.overflowx;
        this.overflowy = a.opt.overflowy;
        this.nativescrollingarea = false;
        this.checkarea = 0;
        this.events = [];
        this.saved = {};
        this.delaylist = {};
        this.synclist = {};
        this.lastdeltax = 0;
        this.lastdeltay = 0;
        this.detected = b();
        var f = l.extend({}, this.detected);
        this.canhwscroll = f.hastransform && a.opt.hwacceleration;
        this.ishwscroll = this.canhwscroll && a.haswrapper;
        this.istouchcapable = false;
        if (f.cantouch && f.ischrome && !f.isios && !f.isandroid) {
            this.istouchcapable = true;
            f.cantouch = false
        }
        if (f.cantouch && f.ismozilla && !f.isios && !f.isandroid) {
            this.istouchcapable = true;
            f.cantouch = false
        }
        if (!a.opt.enablemouselockapi) {
            f.hasmousecapture = false;
            f.haspointerlock = false
        }
        this.delayed = function (e, t, i, n) {
            var r = a.delaylist[e];
            var s = (new Date).getTime();
            if (!n && r && r.tt) return false;
            if (r && r.tt) clearTimeout(r.tt);
            if (r && r.last + i > s && !r.tt) {
                a.delaylist[e] = {
                    last: s + i,
                    tt: setTimeout(function () {
                        a.delaylist[e].tt = 0;
                        t.call()
                    }, i)
                }
            }
            else if (!r || !r.tt) {
                a.delaylist[e] = {
                    last: s,
                    tt: 0
                };
                setTimeout(function () {
                    t.call()
                }, 0)
            }
        };
        this.debounced = function (e, t, i) {
            var n = a.delaylist[e];
            var r = (new Date).getTime();
            a.delaylist[e] = t;
            if (!n) {
                setTimeout(function () {
                    var t = a.delaylist[e];
                    a.delaylist[e] = false;
                    t.call()
                }, i)
            }
        };
        this.synched = function (e, t) {
            function i() {
                if (a.onsync) return;
                h(function () {
                    a.onsync = false;
                    for (e in a.synclist) {
                        var t = a.synclist[e];
                        if (t) t.call(a);
                        a.synclist[e] = false
                    }
                });
                a.onsync = true
            }
            a.synclist[e] = t;
            i();
            return e
        };
        this.unsynched = function (e) {
            if (a.synclist[e]) a.synclist[e] = false
        };
        this.css = function (e, t) {
            for (var i in t) {
                a.saved.css.push([e, i, e.css(i)]);
                e.css(i, t[i])
            }
        };
        this.scrollTop = function (e) {
            return typeof e == "undefined" ? a.getScrollTop() : a.setScrollTop(e)
        };
        this.scrollLeft = function (e) {
            return typeof e == "undefined" ? a.getScrollLeft() : a.setScrollLeft(e)
        };
        BezierClass = function (e, t, i, n, r, s, a) {
            this.st = e;
            this.ed = t;
            this.spd = i;
            this.p1 = n || 0;
            this.p2 = r || 1;
            this.p3 = s || 0;
            this.p4 = a || 1;
            this.ts = (new Date).getTime();
            this.df = this.ed - this.st
        };
        BezierClass.prototype = {
            B2: function (e) {
                return 3 * e * e * (1 - e)
            },
            B3: function (e) {
                return 3 * e * (1 - e) * (1 - e)
            },
            B4: function (e) {
                return (1 - e) * (1 - e) * (1 - e)
            },
            getNow: function () {
                var e = (new Date).getTime();
                var t = 1 - (e - this.ts) / this.spd;
                var i = this.B2(t) + this.B3(t) + this.B4(t);
                return t < 0 ? this.ed : this.st + Math.round(this.df * i)
            },
            update: function (e, t) {
                this.st = this.getNow();
                this.ed = e;
                this.spd = t;
                this.ts = (new Date).getTime();
                this.df = this.ed - this.st;
                return this
            }
        };
        if (this.ishwscroll) {
            this.doc.translate = {
                x: 0,
                y: 0,
                tx: "0px",
                ty: "0px"
            };
            if (f.hastranslate3d && f.isios) this.doc.css("-webkit-backface-visibility", "hidden");

            function p() {
                var e = a.doc.css(f.trstyle);
                if (e && e.substr(0, 6) == "matrix") {
                    return e.replace(/^.*\((.*)\)$/g, "$1").replace(/px/g, "").split(/, +/)
                }
                return false
            }
            this.getScrollTop = function (e) {
                if (!e) {
                    var t = p();
                    if (t) return t.length == 16 ? -t[13] : -t[5];
                    if (a.timerscroll && a.timerscroll.bz) return a.timerscroll.bz.getNow()
                }
                return a.doc.translate.y
            };
            this.getScrollLeft = function (e) {
                if (!e) {
                    var t = p();
                    if (t) return t.length == 16 ? -t[12] : -t[4];
                    if (a.timerscroll && a.timerscroll.bh) return a.timerscroll.bh.getNow()
                }
                return a.doc.translate.x
            };
            if (document.createEvent) {
                this.notifyScrollEvent = function (e) {
                    var t = document.createEvent("UIEvents");
                    t.initUIEvent("scroll", false, true, window, 1);
                    e.dispatchEvent(t)
                }
            }
            else if (document.fireEvent) {
                this.notifyScrollEvent = function (e) {
                    var t = document.createEventObject();
                    e.fireEvent("onscroll");
                    t.cancelBubble = true
                }
            }
            else {
                this.notifyScrollEvent = function (e, t) {}
            }
            if (f.hastranslate3d && a.opt.enabletranslate3d) {
                this.setScrollTop = function (e, t) {
                    a.doc.translate.y = e;
                    a.doc.translate.ty = e * -1 + "px";
                    a.doc.css(f.trstyle, "translate3d(" + a.doc.translate.tx + "," + a.doc.translate.ty + ",0px)");
                    if (!t) a.notifyScrollEvent(a.win[0])
                };
                this.setScrollLeft = function (e, t) {
                    a.doc.translate.x = e;
                    a.doc.translate.tx = e * -1 + "px";
                    a.doc.css(f.trstyle, "translate3d(" + a.doc.translate.tx + "," + a.doc.translate.ty + ",0px)");
                    if (!t) a.notifyScrollEvent(a.win[0])
                }
            }
            else {
                this.setScrollTop = function (e, t) {
                    a.doc.translate.y = e;
                    a.doc.translate.ty = e * -1 + "px";
                    a.doc.css(f.trstyle, "translate(" + a.doc.translate.tx + "," + a.doc.translate.ty + ")");
                    if (!t) a.notifyScrollEvent(a.win[0])
                };
                this.setScrollLeft = function (e, t) {
                    a.doc.translate.x = e;
                    a.doc.translate.tx = e * -1 + "px";
                    a.doc.css(f.trstyle, "translate(" + a.doc.translate.tx + "," + a.doc.translate.ty + ")");
                    if (!t) a.notifyScrollEvent(a.win[0])
                }
            }
        }
        else {
            this.getScrollTop = function () {
                return a.docscroll.scrollTop()
            };
            this.setScrollTop = function (e) {
                return a.docscroll.scrollTop(e)
            };
            this.getScrollLeft = function () {
                return a.docscroll.scrollLeft()
            };
            this.setScrollLeft = function (e) {
                return a.docscroll.scrollLeft(e)
            }
        }
        this.getTarget = function (e) {
            if (!e) return false;
            if (e.target) return e.target;
            if (e.srcElement) return e.srcElement;
            return false
        };
        this.hasParent = function (e, t) {
            if (!e) return false;
            var i = e.target || e.srcElement || e || false;
            while (i && i.id != t) {
                i = i.parentNode || false
            }
            return i !== false
        };

        function g() {
            var e = a.win;
            if ("zIndex" in e) return e.zIndex();
            while (e.length > 0) {
                if (e[0].nodeType == 9) return false;
                var t = e.css("zIndex");
                if (!isNaN(t) && t != 0) return parseInt(t);
                e = e.parent()
            }
            return false
        }
        var y = {
            thin: 1,
            medium: 3,
            thick: 5
        };

        function w(e, t, i) {
            var n = e.css(t);
            var r = parseFloat(n);
            if (isNaN(r)) {
                r = y[n] || 0;
                var s = r == 3 ? i ? a.win.outerHeight() - a.win.innerHeight() : a.win.outerWidth() - a.win.innerWidth() : 1;
                if (a.isie8 && r) r += 1;
                return s ? r : 0
            }
            return r
        }
        this.getOffset = function () {
            if (a.isfixed) return {
                top: parseFloat(a.win.css("top")),
                left: parseFloat(a.win.css("left"))
            };
            if (!a.viewport) return a.win.offset();
            var e = a.win.offset();
            var t = a.viewport.offset();
            return {
                top: e.top - t.top + a.viewport.scrollTop(),
                left: e.left - t.left + a.viewport.scrollLeft()
            }
        };
        this.updateScrollBar = function (e) {
            if (a.ishwscroll) {
                a.rail.css({
                    height: a.win.innerHeight()
                });
                if (a.railh) a.railh.css({
                    width: a.win.innerWidth()
                })
            }
            else {
                var t = a.getOffset();
                var i = {
                    top: t.top,
                    left: t.left
                };
                i.top += w(a.win, "border-top-width", true);
                var n = (a.win.outerWidth() - a.win.innerWidth()) / 2;
                i.left += a.rail.align ? a.win.outerWidth() - w(a.win, "border-right-width") - a.rail.width : w(a.win, "border-left-width");
                var r = a.opt.railoffset;
                if (r) {
                    if (r.top) i.top += r.top;
                    if (a.rail.align && r.left) i.left += r.left
                }
                if (!a.locked) a.rail.css({
                    top: i.top,
                    left: i.left,
                    height: e ? e.h : a.win.innerHeight()
                });
                if (a.zoom) {
                    a.zoom.css({
                        top: i.top + 1,
                        left: a.rail.align == 1 ? i.left - 20 : i.left + a.rail.width + 4
                    })
                }
                if (a.railh && !a.locked) {
                    var i = {
                        top: t.top,
                        left: t.left
                    };
                    var s = a.railh.align ? i.top + w(a.win, "border-top-width", true) + a.win.innerHeight() - a.railh.height : i.top + w(a.win, "border-top-width", true);
                    var o = i.left + w(a.win, "border-left-width");
                    a.railh.css({
                        top: s,
                        left: o,
                        width: a.railh.width
                    })
                }
            }
        };
        this.doRailClick = function (e, t, i) {
            var n, r, s, o;
            if (a.locked) return;
            a.cancelEvent(e);
            if (t) {
                n = i ? a.doScrollLeft : a.doScrollTop;
                s = i ? (e.pageX - a.railh.offset().left - a.cursorwidth / 2) * a.scrollratio.x : (e.pageY - a.rail.offset().top - a.cursorheight / 2) * a.scrollratio.y;
                n(s)
            }
            else {
                n = i ? a.doScrollLeftBy : a.doScrollBy;
                s = i ? a.scroll.x : a.scroll.y;
                o = i ? e.pageX - a.railh.offset().left : e.pageY - a.rail.offset().top;
                r = i ? a.view.w : a.view.h;
                s >= o ? n(r) : n(-r)
            }
        };
        a.hasanimationframe = h;
        a.hascancelanimationframe = d;
        if (!a.hasanimationframe) {
            h = function (e) {
                return setTimeout(e, 15 - Math.floor(+new Date / 1e3) % 16)
            };
            d = clearInterval
        }
        else if (!a.hascancelanimationframe) d = function () {
            a.cancelAnimationFrame = true
        };
        this.init = function () {
            a.saved.css = [];
            if (f.isie7mobile) return true;
            if (f.isoperamini) return true;
            if (f.hasmstouch) a.css(a.ispage ? l("html") : a.win, {
                "-ms-touch-action": "none"
            });
            a.zindex = "auto";
            if (!a.ispage && a.opt.zindex == "auto") {
                a.zindex = g() || "auto"
            }
            else {
                a.zindex = a.opt.zindex
            }
            if (!a.ispage && a.zindex != "auto") {
                if (a.zindex > o) o = a.zindex
            }
            if (a.isie && a.zindex == 0 && a.opt.zindex == "auto") {
                a.zindex = "auto"
            }
            if (!a.ispage || !f.cantouch && !f.isieold && !f.isie9mobile) {
                var e = a.docscroll;
                if (a.ispage) e = a.haswrapper ? a.win : a.doc;
                if (!f.isie9mobile) a.css(e, {
                    "overflow-y": "hidden"
                });
                if (a.ispage && f.isie7) {
                    if (a.doc[0].nodeName == "BODY") a.css(l("html"), {
                        "overflow-y": "hidden"
                    });
                    else if (a.doc[0].nodeName == "HTML") a.css(l("body"), {
                        "overflow-y": "hidden"
                    })
                }
                if (f.isios && !a.ispage && !a.haswrapper) a.css(l("body"), {
                    "-webkit-overflow-scrolling": "touch"
                });
                var n = l(document.createElement("div"));
                n.css({
                    position: "relative",
                    top: 0,
                    float: "right",
                    width: a.opt.cursorwidth,
                    height: "0px",
                    "background-color": a.opt.cursorcolor,
                    border: a.opt.cursorborder,
                    "background-clip": "padding-box",
                    "-webkit-border-radius": a.opt.cursorborderradius,
                    "-moz-border-radius": a.opt.cursorborderradius,
                    "border-radius": a.opt.cursorborderradius
                });
                n.hborder = parseFloat(n.outerHeight() - n.innerHeight());
                a.cursor = n;
                var s = l(document.createElement("div"));
                s.attr("id", a.id);
                s.addClass("nicescroll-rails");
                var u, h, d = ["left", "right"];
                for (var p in d) {
                    h = d[p];
                    u = a.opt.railpadding[h];
                    u ? s.css("padding-" + h, u + "px") : a.opt.railpadding[h] = 0
                }
                s.append(n);
                s.width = Math.max(parseFloat(a.opt.cursorwidth), n.outerWidth()) + a.opt.railpadding["left"] + a.opt.railpadding["right"];
                s.css({
                    width: s.width + "px",
                    zIndex: a.zindex,
                    background: a.opt.background,
                    cursor: "default"
                });
                s.visibility = true;
                s.scrollable = true;
                s.align = a.opt.railalign == "left" ? 0 : 1;
                a.rail = s;
                a.rail.drag = false;
                var v = false;
                if (a.opt.boxzoom && !a.ispage && !f.isieold) {
                    v = document.createElement("div");
                    a.bind(v, "click", a.doZoom);
                    a.zoom = l(v);
                    a.zoom.css({
                        cursor: "pointer",
                        "z-index": a.zindex,
                        backgroundImage: "url(" + c + "zoomico.png)",
                        height: 18,
                        width: 18,
                        backgroundPosition: "0px 0px"
                    });
                    if (a.opt.dblclickzoom) a.bind(a.win, "dblclick", a.doZoom);
                    if (f.cantouch && a.opt.gesturezoom) {
                        a.ongesturezoom = function (e) {
                            if (e.scale > 1.5) a.doZoomIn(e);
                            if (e.scale < .8) a.doZoomOut(e);
                            return a.cancelEvent(e)
                        };
                        a.bind(a.win, "gestureend", a.ongesturezoom)
                    }
                }
                a.railh = false;
                if (a.opt.horizrailenabled) {
                    a.css(e, {
                        "overflow-x": "hidden"
                    });
                    var n = l(document.createElement("div"));
                    n.css({
                        position: "relative",
                        top: 0,
                        height: a.opt.cursorwidth,
                        width: "0px",
                        "background-color": a.opt.cursorcolor,
                        border: a.opt.cursorborder,
                        "background-clip": "padding-box",
                        "-webkit-border-radius": a.opt.cursorborderradius,
                        "-moz-border-radius": a.opt.cursorborderradius,
                        "border-radius": a.opt.cursorborderradius
                    });
                    n.wborder = parseFloat(n.outerWidth() - n.innerWidth());
                    a.cursorh = n;
                    var y = l(document.createElement("div"));
                    y.attr("id", a.id + "-hr");
                    y.addClass("nicescroll-rails");
                    y.height = Math.max(parseFloat(a.opt.cursorwidth), n.outerHeight());
                    y.css({
                        height: y.height + "px",
                        zIndex: a.zindex,
                        background: a.opt.background
                    });
                    y.append(n);
                    y.visibility = true;
                    y.scrollable = true;
                    y.align = a.opt.railvalign == "top" ? 0 : 1;
                    a.railh = y;
                    a.railh.drag = false
                }
                if (a.ispage) {
                    s.css({
                        position: "fixed",
                        top: "0px",
                        height: "100%"
                    });
                    s.align ? s.css({
                        right: "0px"
                    }) : s.css({
                        left: "0px"
                    });
                    a.body.append(s);
                    if (a.railh) {
                        y.css({
                            position: "fixed",
                            left: "0px",
                            width: "100%"
                        });
                        y.align ? y.css({
                            bottom: "0px"
                        }) : y.css({
                            top: "0px"
                        });
                        a.body.append(y)
                    }
                }
                else {
                    if (a.ishwscroll) {
                        if (a.win.css("position") == "static") a.css(a.win, {
                            position: "relative"
                        });
                        var b = a.win[0].nodeName == "HTML" ? a.body : a.win;
                        if (a.zoom) {
                            a.zoom.css({
                                position: "absolute",
                                top: 1,
                                right: 0,
                                "margin-right": s.width + 4
                            });
                            b.append(a.zoom)
                        }
                        s.css({
                            position: "absolute",
                            top: 0
                        });
                        s.align ? s.css({
                            right: 0
                        }) : s.css({
                            left: 0
                        });
                        b.append(s);
                        if (y) {
                            y.css({
                                position: "absolute",
                                left: 0,
                                bottom: 0
                            });
                            y.align ? y.css({
                                bottom: 0
                            }) : y.css({
                                top: 0
                            });
                            b.append(y)
                        }
                    }
                    else {
                        a.isfixed = a.win.css("position") == "fixed";
                        var w = a.isfixed ? "fixed" : "absolute";
                        if (!a.isfixed) a.viewport = a.getViewport(a.win[0]);
                        if (a.viewport) {
                            a.body = a.viewport;
                            if (/relative|absolute/.test(a.viewport.css("position")) == false) a.css(a.viewport, {
                                position: "relative"
                            })
                        }
                        s.css({
                            position: w
                        });
                        if (a.zoom) a.zoom.css({
                            position: w
                        });
                        a.updateScrollBar();
                        a.body.append(s);
                        if (a.zoom) a.body.append(a.zoom);
                        if (a.railh) {
                            y.css({
                                position: w
                            });
                            a.body.append(y)
                        }
                    }
                    if (f.isios) a.css(a.win, {
                        "-webkit-tap-highlight-color": "rgba(0,0,0,0)",
                        "-webkit-touch-callout": "none"
                    });
                    if (f.isie && a.opt.disableoutline) a.win.attr("hideFocus", "true");
                    if (f.iswebkit && a.opt.disableoutline) a.win.css({
                        outline: "none"
                    })
                }
                if (a.opt.autohidemode === false) {
                    a.autohidedom = false;
                    a.rail.css({
                        opacity: a.opt.cursoropacitymax
                    });
                    if (a.railh) a.railh.css({
                        opacity: a.opt.cursoropacitymax
                    })
                }
                else if (a.opt.autohidemode === true) {
                    a.autohidedom = l().add(a.rail);
                    if (f.isie8) a.autohidedom = a.autohidedom.add(a.cursor);
                    if (a.railh) a.autohidedom = a.autohidedom.add(a.railh);
                    if (a.railh && f.isie8) a.autohidedom = a.autohidedom.add(a.cursorh)
                }
                else if (a.opt.autohidemode == "scroll") {
                    a.autohidedom = l().add(a.rail);
                    if (a.railh) a.autohidedom = a.autohidedom.add(a.railh)
                }
                else if (a.opt.autohidemode == "cursor") {
                    a.autohidedom = l().add(a.cursor);
                    if (a.railh) a.autohidedom = a.autohidedom.add(a.cursorh)
                }
                else if (a.opt.autohidemode == "hidden") {
                    a.autohidedom = false;
                    a.hide();
                    a.locked = false
                }
                if (f.isie9mobile) {
                    a.scrollmom = new _(a);
                    a.onmangotouch = function (e) {
                        var t = a.getScrollTop();
                        var i = a.getScrollLeft();
                        if (t == a.scrollmom.lastscrolly && i == a.scrollmom.lastscrollx) return true;
                        var n = t - a.mangotouch.sy;
                        var r = i - a.mangotouch.sx;
                        var s = Math.round(Math.sqrt(Math.pow(r, 2) + Math.pow(n, 2)));
                        if (s == 0) return;
                        var o = n < 0 ? -1 : 1;
                        var l = r < 0 ? -1 : 1;
                        var u = +new Date;
                        if (a.mangotouch.lazy) clearTimeout(a.mangotouch.lazy);
                        if (u - a.mangotouch.tm > 80 || a.mangotouch.dry != o || a.mangotouch.drx != l) {
                            a.scrollmom.stop();
                            a.scrollmom.reset(i, t);
                            a.mangotouch.sy = t;
                            a.mangotouch.ly = t;
                            a.mangotouch.sx = i;
                            a.mangotouch.lx = i;
                            a.mangotouch.dry = o;
                            a.mangotouch.drx = l;
                            a.mangotouch.tm = u
                        }
                        else {
                            a.scrollmom.stop();
                            a.scrollmom.update(a.mangotouch.sx - r, a.mangotouch.sy - n);
                            var c = u - a.mangotouch.tm;
                            a.mangotouch.tm = u;
                            var f = Math.max(Math.abs(a.mangotouch.ly - t), Math.abs(a.mangotouch.lx - i));
                            a.mangotouch.ly = t;
                            a.mangotouch.lx = i;
                            if (f > 2) {
                                a.mangotouch.lazy = setTimeout(function () {
                                    a.mangotouch.lazy = false;
                                    a.mangotouch.dry = 0;
                                    a.mangotouch.drx = 0;
                                    a.mangotouch.tm = 0;
                                    a.scrollmom.doMomentum(30)
                                }, 100)
                            }
                        }
                    };
                    var x = a.getScrollTop();
                    var k = a.getScrollLeft();
                    a.mangotouch = {
                        sy: x,
                        ly: x,
                        dry: 0,
                        sx: k,
                        lx: k,
                        drx: 0,
                        lazy: false,
                        tm: 0
                    };
                    a.bind(a.docscroll, "scroll", a.onmangotouch)
                }
                else {
                    if (f.cantouch || a.istouchcapable || a.opt.touchbehavior || f.hasmstouch) {
                        a.scrollmom = new _(a);
                        a.ontouchstart = function (e) {
                            if (e.pointerType && e.pointerType != 2) return false;
                            if (!a.locked) {
                                if (f.hasmstouch) {
                                    var t = e.target ? e.target : false;
                                    while (t) {
                                        var i = l(t).getNiceScroll();
                                        if (i.length > 0 && i[0].me == a.me) break;
                                        if (i.length > 0) return false;
                                        if (t.nodeName == "DIV" && t.id == a.id) break;
                                        t = t.parentNode ? t.parentNode : false
                                    }
                                }
                                a.cancelScroll();
                                var t = a.getTarget(e);
                                if (t) {
                                    var n = /INPUT/i.test(t.nodeName) && /range/i.test(t.type);
                                    if (n) return a.stopPropagation(e)
                                }
                                if (!("clientX" in e) && "changedTouches" in e) {
                                    e.clientX = e.changedTouches[0].clientX;
                                    e.clientY = e.changedTouches[0].clientY
                                }
                                if (a.forcescreen) {
                                    var r = e;
                                    var e = {
                                        original: e.original ? e.original : e
                                    };
                                    e.clientX = r.screenX;
                                    e.clientY = r.screenY
                                }
                                a.rail.drag = {
                                    x: e.clientX,
                                    y: e.clientY,
                                    sx: a.scroll.x,
                                    sy: a.scroll.y,
                                    st: a.getScrollTop(),
                                    sl: a.getScrollLeft(),
                                    pt: 2,
                                    dl: false
                                };
                                if (a.ispage || !a.opt.directionlockdeadzone) {
                                    a.rail.drag.dl = "f"
                                }
                                else {
                                    var s = {
                                        w: l(window).width(),
                                        h: l(window).height()
                                    };
                                    var o = {
                                        w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),
                                        h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)
                                    };
                                    var u = Math.max(0, o.h - s.h);
                                    var c = Math.max(0, o.w - s.w);
                                    if (!a.rail.scrollable && a.railh.scrollable) a.rail.drag.ck = u > 0 ? "v" : false;
                                    else if (a.rail.scrollable && !a.railh.scrollable) a.rail.drag.ck = c > 0 ? "h" : false;
                                    else a.rail.drag.ck = false;
                                    if (!a.rail.drag.ck) a.rail.drag.dl = "f"
                                }
                                if (a.opt.touchbehavior && a.isiframe && f.isie) {
                                    var h = a.win.position();
                                    a.rail.drag.x += h.left;
                                    a.rail.drag.y += h.top
                                }
                                a.hasmoving = false;
                                a.lastmouseup = false;
                                a.scrollmom.reset(e.clientX, e.clientY);
                                if (!f.cantouch && !this.istouchcapable && !f.hasmstouch) {
                                    var d = t ? /INPUT|SELECT|TEXTAREA/i.test(t.nodeName) : false;
                                    if (!d) {
                                        if (!a.ispage && f.hasmousecapture) t.setCapture();
                                        return a.opt.touchbehavior ? a.cancelEvent(e) : a.stopPropagation(e)
                                    }
                                    if (/SUBMIT|CANCEL|BUTTON/i.test(l(t).attr("type"))) {
                                        pc = {
                                            tg: t,
                                            click: false
                                        };
                                        a.preventclick = pc
                                    }
                                }
                            }
                        };
                        a.ontouchend = function (e) {
                            if (e.pointerType && e.pointerType != 2) return false;
                            if (a.rail.drag && a.rail.drag.pt == 2) {
                                a.scrollmom.doMomentum();
                                a.rail.drag = false;
                                if (a.hasmoving) {
                                    a.hasmoving = false;
                                    a.lastmouseup = true;
                                    a.hideCursor();
                                    if (f.hasmousecapture) document.releaseCapture();
                                    if (!f.cantouch) return a.cancelEvent(e)
                                }
                            }
                        };
                        var C = a.opt.touchbehavior && a.isiframe && !f.hasmousecapture;
                        a.ontouchmove = function (e, t) {
                            if (e.pointerType && e.pointerType != 2) return false;
                            if (a.rail.drag && a.rail.drag.pt == 2) {
                                if (f.cantouch && typeof e.original == "undefined") return true;
                                a.hasmoving = true;
                                if (a.preventclick && !a.preventclick.click) {
                                    a.preventclick.click = a.preventclick.tg.onclick || false;
                                    a.preventclick.tg.onclick = a.onpreventclick
                                }
                                var i = l.extend({
                                    original: e
                                }, e);
                                e = i;
                                if ("changedTouches" in e) {
                                    e.clientX = e.changedTouches[0].clientX;
                                    e.clientY = e.changedTouches[0].clientY
                                }
                                if (a.forcescreen) {
                                    var n = e;
                                    var e = {
                                        original: e.original ? e.original : e
                                    };
                                    e.clientX = n.screenX;
                                    e.clientY = n.screenY
                                }
                                var r = ofy = 0;
                                if (C && !t) {
                                    var s = a.win.position();
                                    r = -s.left;
                                    ofy = -s.top
                                }
                                var o = e.clientY + ofy;
                                var u = o - a.rail.drag.y;
                                var c = e.clientX + r;
                                var h = c - a.rail.drag.x;
                                var d = a.rail.drag.st - u;
                                if (a.ishwscroll && a.opt.bouncescroll) {
                                    if (d < 0) {
                                        d = Math.round(d / 2)
                                    }
                                    else if (d > a.page.maxh) {
                                        d = a.page.maxh + Math.round((d - a.page.maxh) / 2)
                                    }
                                }
                                else {
                                    if (d < 0) {
                                        d = 0;
                                        o = 0
                                    }
                                    if (d > a.page.maxh) {
                                        d = a.page.maxh;
                                        o = 0
                                    }
                                }
                                if (a.railh && a.railh.scrollable) {
                                    var p = a.rail.drag.sl - h;
                                    if (a.ishwscroll && a.opt.bouncescroll) {
                                        if (p < 0) {
                                            p = Math.round(p / 2)
                                        }
                                        else if (p > a.page.maxw) {
                                            p = a.page.maxw + Math.round((p - a.page.maxw) / 2)
                                        }
                                    }
                                    else {
                                        if (p < 0) {
                                            p = 0;
                                            c = 0
                                        }
                                        if (p > a.page.maxw) {
                                            p = a.page.maxw;
                                            c = 0
                                        }
                                    }
                                }
                                var g = false;
                                if (a.rail.drag.dl) {
                                    g = true;
                                    if (a.rail.drag.dl == "v") p = a.rail.drag.sl;
                                    else if (a.rail.drag.dl == "h") d = a.rail.drag.st
                                }
                                else {
                                    var m = Math.abs(u);
                                    var v = Math.abs(h);
                                    var y = a.opt.directionlockdeadzone;
                                    if (a.rail.drag.ck == "v") {
                                        if (m > y && v <= m * .3) {
                                            a.rail.drag = false;
                                            return true
                                        }
                                        else if (v > y) {
                                            a.rail.drag.dl = "f";
                                            l("body").scrollTop(l("body").scrollTop())
                                        }
                                    }
                                    else if (a.rail.drag.ck == "h") {
                                        if (v > y && m <= v * .3) {
                                            a.rail.drag = false;
                                            return true
                                        }
                                        else if (m > y) {
                                            a.rail.drag.dl = "f";
                                            l("body").scrollLeft(l("body").scrollLeft())
                                        }
                                    }
                                }
                                a.synched("touchmove", function () {
                                    if (a.rail.drag && a.rail.drag.pt == 2) {
                                        if (a.prepareTransition) a.prepareTransition(0);
                                        if (a.rail.scrollable) a.setScrollTop(d);
                                        a.scrollmom.update(c, o);
                                        if (a.railh && a.railh.scrollable) {
                                            a.setScrollLeft(p);
                                            a.showCursor(d, p)
                                        }
                                        else {
                                            a.showCursor(d)
                                        }
                                        if (f.isie10) document.selection.clear()
                                    }
                                });
                                if (f.ischrome && a.istouchcapable) g = false;
                                if (g) return a.cancelEvent(e)
                            }
                        }
                    }
                    a.onmousedown = function (e, t) {
                        if (a.rail.drag && a.rail.drag.pt != 1) return;
                        if (a.locked) return a.cancelEvent(e);
                        a.cancelScroll();
                        a.rail.drag = {
                            x: e.clientX,
                            y: e.clientY,
                            sx: a.scroll.x,
                            sy: a.scroll.y,
                            pt: 1,
                            hr: !!t
                        };
                        var i = a.getTarget(e);
                        if (!a.ispage && f.hasmousecapture) i.setCapture();
                        if (a.isiframe && !f.hasmousecapture) {
                            a.saved["csspointerevents"] = a.doc.css("pointer-events");
                            a.css(a.doc, {
                                "pointer-events": "none"
                            })
                        }
                        return a.cancelEvent(e)
                    };
                    a.onmouseup = function (e) {
                        if (a.rail.drag) {
                            if (f.hasmousecapture) document.releaseCapture();
                            if (a.isiframe && !f.hasmousecapture) a.doc.css("pointer-events", a.saved["csspointerevents"]);
                            if (a.rail.drag.pt != 1) return;
                            a.rail.drag = false;
                            return a.cancelEvent(e)
                        }
                    };
                    a.onmousemove = function (e) {
                        if (a.rail.drag) {
                            if (a.rail.drag.pt != 1) return;
                            if (f.ischrome && e.which == 0) return a.onmouseup(e);
                            a.cursorfreezed = true;
                            if (a.rail.drag.hr) {
                                a.scroll.x = a.rail.drag.sx + (e.clientX - a.rail.drag.x);
                                if (a.scroll.x < 0) a.scroll.x = 0;
                                var t = a.scrollvaluemaxw;
                                if (a.scroll.x > t) a.scroll.x = t
                            }
                            else {
                                a.scroll.y = a.rail.drag.sy + (e.clientY - a.rail.drag.y);
                                if (a.scroll.y < 0) a.scroll.y = 0;
                                var i = a.scrollvaluemax;
                                if (a.scroll.y > i) a.scroll.y = i
                            }
                            a.synched("mousemove", function () {
                                if (a.rail.drag && a.rail.drag.pt == 1) {
                                    a.showCursor();
                                    if (a.rail.drag.hr) a.doScrollLeft(Math.round(a.scroll.x * a.scrollratio.x), a.opt.cursordragspeed);
                                    else a.doScrollTop(Math.round(a.scroll.y * a.scrollratio.y), a.opt.cursordragspeed)
                                }
                            });
                            return a.cancelEvent(e)
                        }
                    };
                    if (f.cantouch || a.opt.touchbehavior) {
                        a.onpreventclick = function (e) {
                            if (a.preventclick) {
                                a.preventclick.tg.onclick = a.preventclick.click;
                                a.preventclick = false;
                                return a.cancelEvent(e)
                            }
                        };
                        a.bind(a.win, "mousedown", a.ontouchstart);
                        a.onclick = f.isios ? false : function (e) {
                            if (a.lastmouseup) {
                                a.lastmouseup = false;
                                return a.cancelEvent(e)
                            }
                            else {
                                return true
                            }
                        };
                        if (a.opt.grabcursorenabled && f.cursorgrabvalue) {
                            a.css(a.ispage ? a.doc : a.win, {
                                cursor: f.cursorgrabvalue
                            });
                            a.css(a.rail, {
                                cursor: f.cursorgrabvalue
                            })
                        }
                    }
                    else {
                        function M(e) {
                            if (!a.selectiondrag) return;
                            if (e) {
                                var t = a.win.outerHeight();
                                var i = e.pageY - a.selectiondrag.top;
                                if (i > 0 && i < t) i = 0;
                                if (i >= t) i -= t;
                                a.selectiondrag.df = i
                            }
                            if (a.selectiondrag.df == 0) return;
                            var n = -Math.floor(a.selectiondrag.df / 6) * 2;
                            a.doScrollBy(n);
                            a.debounced("doselectionscroll", function () {
                                M()
                            }, 50)
                        }
                        if ("getSelection" in document) {
                            a.hasTextSelected = function () {
                                return document.getSelection().rangeCount > 0
                            }
                        }
                        else if ("selection" in document) {
                            a.hasTextSelected = function () {
                                return document.selection.type != "None"
                            }
                        }
                        else {
                            a.hasTextSelected = function () {
                                return false
                            }
                        }
                        a.onselectionstart = function (e) {
                            if (a.ispage) return;
                            a.selectiondrag = a.win.offset()
                        };
                        a.onselectionend = function (e) {
                            a.selectiondrag = false
                        };
                        a.onselectiondrag = function (e) {
                            if (!a.selectiondrag) return;
                            if (a.hasTextSelected()) a.debounced("selectionscroll", function () {
                                M(e)
                            }, 250)
                        }
                    }
                    if (f.hasmstouch) {
                        a.css(a.rail, {
                            "-ms-touch-action": "none"
                        });
                        a.css(a.cursor, {
                            "-ms-touch-action": "none"
                        });
                        a.bind(a.win, "MSPointerDown", a.ontouchstart);
                        a.bind(document, "MSPointerUp", a.ontouchend);
                        a.bind(document, "MSPointerMove", a.ontouchmove);
                        a.bind(a.cursor, "MSGestureHold", function (e) {
                            e.preventDefault()
                        });
                        a.bind(a.cursor, "contextmenu", function (e) {
                            e.preventDefault()
                        })
                    }
                    if (this.istouchcapable) {
                        a.bind(a.win, "touchstart", a.ontouchstart);
                        a.bind(document, "touchend", a.ontouchend);
                        a.bind(document, "touchcancel", a.ontouchend);
                        a.bind(document, "touchmove", a.ontouchmove)
                    }
                    a.bind(a.cursor, "mousedown", a.onmousedown);
                    a.bind(a.cursor, "mouseup", a.onmouseup);
                    if (a.railh) {
                        a.bind(a.cursorh, "mousedown", function (e) {
                            a.onmousedown(e, true)
                        });
                        a.bind(a.cursorh, "mouseup", function (e) {
                            if (a.rail.drag && a.rail.drag.pt == 2) return;
                            a.rail.drag = false;
                            a.hasmoving = false;
                            a.hideCursor();
                            if (f.hasmousecapture) document.releaseCapture();
                            return a.cancelEvent(e)
                        })
                    }
                    if (a.opt.cursordragontouch || !f.cantouch && !a.opt.touchbehavior) {
                        a.rail.css({
                            cursor: "default"
                        });
                        a.railh && a.railh.css({
                            cursor: "default"
                        });
                        a.jqbind(a.rail, "mouseenter", function () {
                            if (a.canshowonmouseevent) a.showCursor();
                            a.rail.active = true
                        });
                        a.jqbind(a.rail, "mouseleave", function () {
                            a.rail.active = false;
                            if (!a.rail.drag) a.hideCursor()
                        });
                        if (a.opt.sensitiverail) {
                            a.bind(a.rail, "click", function (e) {
                                a.doRailClick(e, false, false)
                            });
                            a.bind(a.rail, "dblclick", function (e) {
                                a.doRailClick(e, true, false)
                            });
                            a.bind(a.cursor, "click", function (e) {
                                a.cancelEvent(e)
                            });
                            a.bind(a.cursor, "dblclick", function (e) {
                                a.cancelEvent(e)
                            })
                        }
                        if (a.railh) {
                            a.jqbind(a.railh, "mouseenter", function () {
                                if (a.canshowonmouseevent) a.showCursor();
                                a.rail.active = true
                            });
                            a.jqbind(a.railh, "mouseleave", function () {
                                a.rail.active = false;
                                if (!a.rail.drag) a.hideCursor()
                            });
                            if (a.opt.sensitiverail) {
                                a.bind(a.railh, "click", function (e) {
                                    a.doRailClick(e, false, true)
                                });
                                a.bind(a.railh, "dblclick", function (e) {
                                    a.doRailClick(e, true, true)
                                });
                                a.bind(a.cursorh, "click", function (e) {
                                    a.cancelEvent(e)
                                });
                                a.bind(a.cursorh, "dblclick", function (e) {
                                    a.cancelEvent(e)
                                })
                            }
                        }
                    }
                    if (!f.cantouch && !a.opt.touchbehavior) {
                        a.bind(f.hasmousecapture ? a.win : document, "mouseup", a.onmouseup);
                        a.bind(document, "mousemove", a.onmousemove);
                        if (a.onclick) a.bind(document, "click", a.onclick);
                        if (!a.ispage && a.opt.enablescrollonselection) {
                            a.bind(a.win[0], "mousedown", a.onselectionstart);
                            a.bind(document, "mouseup", a.onselectionend);
                            a.bind(a.cursor, "mouseup", a.onselectionend);
                            if (a.cursorh) a.bind(a.cursorh, "mouseup", a.onselectionend);
                            a.bind(document, "mousemove", a.onselectiondrag)
                        }
                        if (a.zoom) {
                            a.jqbind(a.zoom, "mouseenter", function () {
                                if (a.canshowonmouseevent) a.showCursor();
                                a.rail.active = true
                            });
                            a.jqbind(a.zoom, "mouseleave", function () {
                                a.rail.active = false;
                                if (!a.rail.drag) a.hideCursor()
                            })
                        }
                    }
                    else {
                        a.bind(f.hasmousecapture ? a.win : document, "mouseup", a.ontouchend);
                        a.bind(document, "mousemove", a.ontouchmove);
                        if (a.onclick) a.bind(document, "click", a.onclick);
                        if (a.opt.cursordragontouch) {
                            a.bind(a.cursor, "mousedown", a.onmousedown);
                            a.bind(a.cursor, "mousemove", a.onmousemove);
                            a.cursorh && a.bind(a.cursorh, "mousedown", a.onmousedown);
                            a.cursorh && a.bind(a.cursorh, "mousemove", a.onmousemove)
                        }
                    }
                    if (a.opt.enablemousewheel) {
                        if (!a.isiframe) a.bind(f.isie && a.ispage ? document : a.win, "mousewheel", a.onmousewheel);
                        a.bind(a.rail, "mousewheel", a.onmousewheel);
                        if (a.railh) a.bind(a.railh, "mousewheel", a.onmousewheelhr)
                    }
                    if (!a.ispage && !f.cantouch && !/HTML|BODY/.test(a.win[0].nodeName)) {
                        if (!a.win.attr("tabindex")) a.win.attr({
                            tabindex: r++
                        });
                        a.jqbind(a.win, "focus", function (e) {
                            t = a.getTarget(e).id || true;
                            a.hasfocus = true;
                            if (a.canshowonmouseevent) a.noticeCursor()
                        });
                        a.jqbind(a.win, "blur", function (e) {
                            t = false;
                            a.hasfocus = false
                        });
                        a.jqbind(a.win, "mouseenter", function (e) {
                            i = a.getTarget(e).id || true;
                            a.hasmousefocus = true;
                            if (a.canshowonmouseevent) a.noticeCursor()
                        });
                        a.jqbind(a.win, "mouseleave", function () {
                            i = false;
                            a.hasmousefocus = false
                        })
                    }
                }
                a.onkeypress = function (e) {
                    if (a.locked && a.page.maxh == 0) return true;
                    e = e ? e : window.e;
                    var n = a.getTarget(e);
                    if (n && /INPUT|TEXTAREA|SELECT|OPTION/.test(n.nodeName)) {
                        var r = n.getAttribute("type") || n.type || false;
                        if (!r || !/submit|button|cancel/i.tp) return true
                    }
                    if (a.hasfocus || a.hasmousefocus && !t || a.ispage && !t && !i) {
                        var s = e.keyCode;
                        if (a.locked && s != 27) return a.cancelEvent(e);
                        var o = e.ctrlKey || false;
                        var l = e.shiftKey || false;
                        var u = false;
                        switch (s) {
                            case 38:
                            case 63233:
                                a.doScrollBy(24 * 3);
                                u = true;
                                break;
                            case 40:
                            case 63235:
                                a.doScrollBy(-24 * 3);
                                u = true;
                                break;
                            case 37:
                            case 63232:
                                if (a.railh) {
                                    o ? a.doScrollLeft(0) : a.doScrollLeftBy(24 * 3);
                                    u = true
                                }
                                break;
                            case 39:
                            case 63234:
                                if (a.railh) {
                                    o ? a.doScrollLeft(a.page.maxw) : a.doScrollLeftBy(-24 * 3);
                                    u = true
                                }
                                break;
                            case 33:
                            case 63276:
                                a.doScrollBy(a.view.h);
                                u = true;
                                break;
                            case 34:
                            case 63277:
                                a.doScrollBy(-a.view.h);
                                u = true;
                                break;
                            case 36:
                            case 63273:
                                a.railh && o ? a.doScrollPos(0, 0) : a.doScrollTo(0);
                                u = true;
                                break;
                            case 35:
                            case 63275:
                                a.railh && o ? a.doScrollPos(a.page.maxw, a.page.maxh) : a.doScrollTo(a.page.maxh);
                                u = true;
                                break;
                            case 32:
                                if (a.opt.spacebarenabled) {
                                    l ? a.doScrollBy(a.view.h) : a.doScrollBy(-a.view.h);
                                    u = true
                                }
                                break;
                            case 27:
                                if (a.zoomactive) {
                                    a.doZoom();
                                    u = true
                                }
                                break
                        }
                        if (u) return a.cancelEvent(e)
                    }
                };
                if (a.opt.enablekeyboard) a.bind(document, f.isopera && !f.isopera12 ? "keypress" : "keydown", a.onkeypress);
                a.bind(window, "resize", a.lazyResize);
                a.bind(window, "orientationchange", a.lazyResize);
                a.bind(window, "load", a.lazyResize);
                if (f.ischrome && !a.ispage && !a.haswrapper) {
                    var T = a.win.attr("style");
                    var D = parseFloat(a.win.css("width")) + 1;
                    a.win.css("width", D);
                    a.synched("chromefix", function () {
                        a.win.attr("style", T)
                    })
                }
                a.onAttributeChange = function (e) {
                    a.lazyResize(250)
                };
                if (!a.ispage && !a.haswrapper) {
                    if (m !== false) {
                        a.observer = new m(function (e) {
                            e.forEach(a.onAttributeChange)
                        });
                        a.observer.observe(a.win[0], {
                            childList: true,
                            characterData: false,
                            attributes: true,
                            subtree: false
                        });
                        a.observerremover = new m(function (e) {
                            e.forEach(function (e) {
                                if (e.removedNodes.length > 0) {
                                    for (var t in e.removedNodes) {
                                        if (e.removedNodes[t] == a.win[0]) return a.remove()
                                    }
                                }
                            })
                        });
                        a.observerremover.observe(a.win[0].parentNode, {
                            childList: true,
                            characterData: false,
                            attributes: false,
                            subtree: false
                        })
                    }
                    else {
                        a.bind(a.win, f.isie && !f.isie9 ? "propertychange" : "DOMAttrModified", a.onAttributeChange);
                        if (f.isie9) a.win[0].attachEvent("onpropertychange", a.onAttributeChange);
                        a.bind(a.win, "DOMNodeRemoved", function (e) {
                            if (e.target == a.win[0]) a.remove()
                        })
                    }
                }
                if (!a.ispage && a.opt.boxzoom) a.bind(window, "resize", a.resizeZoom);
                if (a.istextarea) a.bind(a.win, "mouseup", a.lazyResize);
                a.checkrtlmode = true;
                a.lazyResize(30)
            }
            if (this.doc[0].nodeName == "IFRAME") {
                function S(e) {
                    a.iframexd = false;
                    try {
                        var t = "contentDocument" in this ? this.contentDocument : this.contentWindow.document;
                        var i = t.domain
                    }
                    catch (e) {
                        a.iframexd = true;
                        t = false
                    }
                    if (a.iframexd) {
                        if ("console" in window) console.log("NiceScroll error: policy restriced iframe");
                        return true
                    }
                    a.forcescreen = true;
                    if (a.isiframe) {
                        a.iframe = {
                            doc: l(t),
                            html: a.doc.contents().find("html")[0],
                            body: a.doc.contents().find("body")[0]
                        };
                        a.getContentSize = function () {
                            return {
                                w: Math.max(a.iframe.html.scrollWidth, a.iframe.body.scrollWidth),
                                h: Math.max(a.iframe.html.scrollHeight, a.iframe.body.scrollHeight)
                            }
                        };
                        a.docscroll = l(a.iframe.body)
                    }
                    if (!f.isios && a.opt.iframeautoresize && !a.isiframe) {
                        a.win.scrollTop(0);
                        a.doc.height("");
                        var n = Math.max(t.getElementsByTagName("html")[0].scrollHeight, t.body.scrollHeight);
                        a.doc.height(n)
                    }
                    a.lazyResize(30);
                    if (f.isie7) a.css(l(a.iframe.html), {
                        "overflow-y": "hidden"
                    });
                    a.css(l(a.iframe.body), {
                        "overflow-y": "hidden"
                    });
                    if (f.isios && a.haswrapper) {
                        a.css(l(t.body), {
                            "-webkit-transform": "translate3d(0,0,0)"
                        });
                        console.log(1)
                    }
                    if ("contentWindow" in this) {
                        a.bind(this.contentWindow, "scroll", a.onscroll)
                    }
                    else {
                        a.bind(t, "scroll", a.onscroll)
                    }
                    if (a.opt.enablemousewheel) {
                        a.bind(t, "mousewheel", a.onmousewheel)
                    }
                    if (a.opt.enablekeyboard) a.bind(t, f.isopera ? "keypress" : "keydown", a.onkeypress);
                    if (f.cantouch || a.opt.touchbehavior) {
                        a.bind(t, "mousedown", a.ontouchstart);
                        a.bind(t, "mousemove", function (e) {
                            a.ontouchmove(e, true)
                        });
                        if (a.opt.grabcursorenabled && f.cursorgrabvalue) a.css(l(t.body), {
                            cursor: f.cursorgrabvalue
                        })
                    }
                    a.bind(t, "mouseup", a.ontouchend);
                    if (a.zoom) {
                        if (a.opt.dblclickzoom) a.bind(t, "dblclick", a.doZoom);
                        if (a.ongesturezoom) a.bind(t, "gestureend", a.ongesturezoom)
                    }
                }
                if (this.doc[0].readyState && this.doc[0].readyState == "complete") {
                    setTimeout(function () {
                        S.call(a.doc[0], false)
                    }, 500)
                }
                a.bind(this.doc, "load", S)
            }
        };
        this.showCursor = function (e, t) {
            if (a.cursortimeout) {
                clearTimeout(a.cursortimeout);
                a.cursortimeout = 0
            }
            if (!a.rail) return;
            if (a.autohidedom) {
                a.autohidedom.stop().css({
                    opacity: a.opt.cursoropacitymax
                });
                a.cursoractive = true
            }
            if (!a.rail.drag || a.rail.drag.pt != 1) {
                if (typeof e != "undefined" && e !== false) {
                    a.scroll.y = Math.round(e * 1 / a.scrollratio.y)
                }
                if (typeof t != "undefined") {
                    a.scroll.x = Math.round(t * 1 / a.scrollratio.x)
                }
            }
            a.cursor.css({
                height: a.cursorheight,
                top: a.scroll.y
            });
            if (a.cursorh) {
                !a.rail.align && a.rail.visibility ? a.cursorh.css({
                    width: a.cursorwidth,
                    left: a.scroll.x + a.rail.width
                }) : a.cursorh.css({
                    width: a.cursorwidth,
                    left: a.scroll.x
                });
                a.cursoractive = true
            }
            if (a.zoom) a.zoom.stop().css({
                opacity: a.opt.cursoropacitymax
            })
        };
        this.hideCursor = function (e) {
            if (a.cursortimeout) return;
            if (!a.rail) return;
            if (!a.autohidedom) return;
            a.cursortimeout = setTimeout(function () {
                if (!a.rail.active || !a.showonmouseevent) {
                    a.autohidedom.stop().animate({
                        opacity: a.opt.cursoropacitymin
                    });
                    if (a.zoom) a.zoom.stop().animate({
                        opacity: a.opt.cursoropacitymin
                    });
                    a.cursoractive = false
                }
                a.cursortimeout = 0
            }, e || a.opt.hidecursordelay)
        };
        this.noticeCursor = function (e, t, i) {
            a.showCursor(t, i);
            if (!a.rail.active) a.hideCursor(e)
        };
        this.getContentSize = a.ispage ? function () {
            return {
                w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),
                h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)
            }
        } : a.haswrapper ? function () {
            return {
                w: a.doc.outerWidth() + parseInt(a.win.css("paddingLeft")) + parseInt(a.win.css("paddingRight")),
                h: a.doc.outerHeight() + parseInt(a.win.css("paddingTop")) + parseInt(a.win.css("paddingBottom"))
            }
        } : function () {
            return {
                w: a.docscroll[0].scrollWidth,
                h: a.docscroll[0].scrollHeight
            }
        };
        this.onResize = function (e, t) {
            if (!a.win) return false;
            if (!a.haswrapper && !a.ispage) {
                if (a.win.css("display") == "none") {
                    if (a.visibility) a.hideRail().hideRailHr();
                    return false
                }
                else {
                    if (!a.hidden && !a.visibility) a.showRail().showRailHr()
                }
            }
            var i = a.page.maxh;
            var n = a.page.maxw;
            var r = {
                h: a.view.h,
                w: a.view.w
            };
            a.view = {
                w: a.ispage ? a.win.width() : parseInt(a.win[0].clientWidth),
                h: a.ispage ? a.win.height() : parseInt(a.win[0].clientHeight)
            };
            a.page = t ? t : a.getContentSize();
            a.page.maxh = Math.max(0, a.page.h - a.view.h);
            a.page.maxw = Math.max(0, a.page.w - a.view.w);
            if (a.page.maxh == i && a.page.maxw == n && a.view.w == r.w) {
                if (!a.ispage) {
                    var s = a.win.offset();
                    if (a.lastposition) {
                        var o = a.lastposition;
                        if (o.top == s.top && o.left == s.left) return a
                    }
                    a.lastposition = s
                }
                else {
                    return a
                }
            }
            if (a.page.maxh == 0) {
                a.hideRail();
                a.scrollvaluemax = 0;
                a.scroll.y = 0;
                a.scrollratio.y = 0;
                a.cursorheight = 0;
                a.setScrollTop(0);
                a.rail.scrollable = false
            }
            else {
                a.rail.scrollable = true
            }
            if (a.page.maxw == 0) {
                a.hideRailHr();
                a.scrollvaluemaxw = 0;
                a.scroll.x = 0;
                a.scrollratio.x = 0;
                a.cursorwidth = 0;
                a.setScrollLeft(0);
                a.railh.scrollable = false
            }
            else {
                a.railh.scrollable = true
            }
            a.locked = a.page.maxh == 0 && a.page.maxw == 0;
            if (a.locked) {
                if (!a.ispage) a.updateScrollBar(a.view);
                return false
            }
            if (!a.hidden && !a.visibility) {
                a.showRail().showRailHr()
            }
            else if (!a.hidden && !a.railh.visibility) a.showRailHr();
            if (a.istextarea && a.win.css("resize") && a.win.css("resize") != "none") a.view.h -= 20;
            a.cursorheight = Math.min(a.view.h, Math.round(a.view.h * (a.view.h / a.page.h)));
            a.cursorheight = a.opt.cursorfixedheight ? a.opt.cursorfixedheight : Math.max(a.opt.cursorminheight, a.cursorheight);
            a.cursorwidth = Math.min(a.view.w, Math.round(a.view.w * (a.view.w / a.page.w)));
            a.cursorwidth = a.opt.cursorfixedheight ? a.opt.cursorfixedheight : Math.max(a.opt.cursorminheight, a.cursorwidth);
            a.scrollvaluemax = a.view.h - a.cursorheight - a.cursor.hborder;
            if (a.railh) {
                a.railh.width = a.page.maxh > 0 ? a.view.w - a.rail.width : a.view.w;
                a.scrollvaluemaxw = a.railh.width - a.cursorwidth - a.cursorh.wborder
            }
            if (a.checkrtlmode && a.railh) {
                a.checkrtlmode = false;
                if (a.opt.rtlmode && a.scroll.x == 0) a.setScrollLeft(a.page.maxw)
            }
            if (!a.ispage) a.updateScrollBar(a.view);
            a.scrollratio = {
                x: a.page.maxw / a.scrollvaluemaxw,
                y: a.page.maxh / a.scrollvaluemax
            };
            var l = a.getScrollTop();
            if (l > a.page.maxh) {
                a.doScrollTop(a.page.maxh)
            }
            else {
                a.scroll.y = Math.round(a.getScrollTop() * (1 / a.scrollratio.y));
                a.scroll.x = Math.round(a.getScrollLeft() * (1 / a.scrollratio.x));
                if (a.cursoractive) a.noticeCursor()
            }
            if (a.scroll.y && a.getScrollTop() == 0) a.doScrollTo(Math.floor(a.scroll.y * a.scrollratio.y));
            return a
        };
        this.resize = a.onResize;
        this.lazyResize = function (e) {
            e = isNaN(e) ? 30 : e;
            a.delayed("resize", a.resize, e);
            return a
        };

        function x(e, t, i, n) {
            a._bind(e, t, function (n) {
                var n = n ? n : window.event;
                var r = {
                    original: n,
                    target: n.target || n.srcElement,
                    type: "wheel",
                    deltaMode: n.type == "MozMousePixelScroll" ? 0 : 1,
                    deltaX: 0,
                    deltaZ: 0,
                    preventDefault: function () {
                        n.preventDefault ? n.preventDefault() : n.returnValue = false;
                        return false
                    },
                    stopImmediatePropagation: function () {
                        n.stopImmediatePropagation ? n.stopImmediatePropagation() : n.cancelBubble = true
                    }
                };
                if (t == "mousewheel") {
                    r.deltaY = -1 / 40 * n.wheelDelta;
                    n.wheelDeltaX && (r.deltaX = -1 / 40 * n.wheelDeltaX)
                }
                else {
                    r.deltaY = n.detail
                }
                return i.call(e, r)
            }, n)
        }
        this._bind = function (e, t, i, n) {
            a.events.push({
                e: e,
                n: t,
                f: i,
                b: n,
                q: false
            });
            if (e.addEventListener) {
                e.addEventListener(t, i, n || false)
            }
            else if (e.attachEvent) {
                e.attachEvent("on" + t, i)
            }
            else {
                e["on" + t] = i
            }
        };
        this.jqbind = function (e, t, i) {
            a.events.push({
                e: e,
                n: t,
                f: i,
                q: true
            });
            l(e).bind(t, i)
        };
        this.bind = function (e, t, i, n) {
            var r = "jquery" in e ? e[0] : e;
            if (t == "mousewheel") {
                if ("onwheel" in a.win) {
                    a._bind(r, "wheel", i, n || false)
                }
                else {
                    var s = typeof document.onmousewheel != "undefined" ? "mousewheel" : "DOMMouseScroll";
                    x(r, s, i, n || false);
                    if (s == "DOMMouseScroll") x(r, "MozMousePixelScroll", i, n || false)
                }
            }
            else if (r.addEventListener) {
                if (f.cantouch && /mouseup|mousedown|mousemove/.test(t)) {
                    var o = t == "mousedown" ? "touchstart" : t == "mouseup" ? "touchend" : "touchmove";
                    a._bind(r, o, function (e) {
                        if (e.touches) {
                            if (e.touches.length < 2) {
                                var t = e.touches.length ? e.touches[0] : e;
                                t.original = e;
                                i.call(this, t)
                            }
                        }
                        else if (e.changedTouches) {
                            var t = e.changedTouches[0];
                            t.original = e;
                            i.call(this, t)
                        }
                    }, n || false)
                }
                a._bind(r, t, i, n || false);
                if (f.cantouch && t == "mouseup") a._bind(r, "touchcancel", i, n || false)
            }
            else {
                a._bind(r, t, function (e) {
                    e = e || window.event || false;
                    if (e) {
                        if (e.srcElement) e.target = e.srcElement
                    }
                    if (!("pageY" in e)) {
                        e.pageX = e.clientX + document.documentElement.scrollLeft;
                        e.pageY = e.clientY + document.documentElement.scrollTop
                    }
                    return i.call(r, e) === false || n === false ? a.cancelEvent(e) : true
                })
            }
        };
        this._unbind = function (e, t, i, n) {
            if (e.removeEventListener) {
                e.removeEventListener(t, i, n)
            }
            else if (e.detachEvent) {
                e.detachEvent("on" + t, i)
            }
            else {
                e["on" + t] = false
            }
        };
        this.unbindAll = function () {
            for (var e = 0; e < a.events.length; e++) {
                var t = a.events[e];
                t.q ? t.e.unbind(t.n, t.f) : a._unbind(t.e, t.n, t.f, t.b)
            }
        };
        this.cancelEvent = function (e) {
            var e = e.original ? e.original : e ? e : window.event || false;
            if (!e) return false;
            if (e.preventDefault) e.preventDefault();
            if (e.stopPropagation) e.stopPropagation();
            if (e.preventManipulation) e.preventManipulation();
            e.cancelBubble = true;
            e.cancel = true;
            e.returnValue = false;
            return false
        };
        this.stopPropagation = function (e) {
            var e = e.original ? e.original : e ? e : window.event || false;
            if (!e) return false;
            if (e.stopPropagation) return e.stopPropagation();
            if (e.cancelBubble) e.cancelBubble = true;
            return false
        };
        this.showRail = function () {
            if (a.page.maxh != 0 && (a.ispage || a.win.css("display") != "none")) {
                a.visibility = true;
                a.rail.visibility = true;
                a.rail.css("display", "block")
            }
            return a
        };
        this.showRailHr = function () {
            if (!a.railh) return a;
            if (a.page.maxw != 0 && (a.ispage || a.win.css("display") != "none")) {
                a.railh.visibility = true;
                a.railh.css("display", "block")
            }
            return a
        };
        this.hideRail = function () {
            a.visibility = false;
            a.rail.visibility = false;
            a.rail.css("display", "none");
            return a
        };
        this.hideRailHr = function () {
            if (!a.railh) return a;
            a.railh.visibility = false;
            a.railh.css("display", "none");
            return a
        };
        this.show = function () {
            a.hidden = false;
            a.locked = false;
            return a.showRail().showRailHr()
        };
        this.hide = function () {
            a.hidden = true;
            a.locked = true;
            return a.hideRail().hideRailHr()
        };
        this.toggle = function () {
            return a.hidden ? a.show() : a.hide()
        };
        this.remove = function () {
            a.stop();
            if (a.cursortimeout) clearTimeout(a.cursortimeout);
            a.doZoomOut();
            a.unbindAll();
            if (f.isie9) a.win[0].detachEvent("onpropertychange", a.onAttributeChange);
            if (a.observer !== false) a.observer.disconnect();
            if (a.observerremover !== false) a.observerremover.disconnect();
            a.events = null;
            if (a.cursor) {
                a.cursor.remove()
            }
            if (a.cursorh) {
                a.cursorh.remove()
            }
            if (a.rail) {
                a.rail.remove()
            }
            if (a.railh) {
                a.railh.remove()
            }
            if (a.zoom) {
                a.zoom.remove()
            }
            for (var e = 0; e < a.saved.css.length; e++) {
                var t = a.saved.css[e];
                t[0].css(t[1], typeof t[2] == "undefined" ? "" : t[2])
            }
            a.saved = false;
            a.me.data("__nicescroll", "");
            var i = l.nicescroll;
            i.each(function (e) {
                if (!this) return;
                if (this.id === a.id) {
                    delete i[e];
                    for (var t = ++e; t < i.length; t++, e++) i[e] = i[t];
                    i.length--;
                    if (i.length) delete i[i.length]
                }
            });
            for (var n in a) {
                a[n] = null;
                delete a[n]
            }
            a = null
        };
        this.scrollstart = function (e) {
            this.onscrollstart = e;
            return a
        };
        this.scrollend = function (e) {
            this.onscrollend = e;
            return a
        };
        this.scrollcancel = function (e) {
            this.onscrollcancel = e;
            return a
        };
        this.zoomin = function (e) {
            this.onzoomin = e;
            return a
        };
        this.zoomout = function (e) {
            this.onzoomout = e;
            return a
        };
        this.isScrollable = function (e) {
            var t = e.target ? e.target : e;
            if (t.nodeName == "OPTION") return true;
            while (t && t.nodeType == 1 && !/BODY|HTML/.test(t.nodeName)) {
                var i = l(t);
                var n = i.css("overflowY") || i.css("overflowX") || i.css("overflow") || "";
                if (/scroll|auto/.test(n)) return t.clientHeight != t.scrollHeight;
                t = t.parentNode ? t.parentNode : false
            }
            return false
        };
        this.getViewport = function (e) {
            var t = e && e.parentNode ? e.parentNode : false;
            while (t && t.nodeType == 1 && !/BODY|HTML/.test(t.nodeName)) {
                var i = l(t);
                var n = i.css("overflowY") || i.css("overflowX") || i.css("overflow") || "";
                if (/scroll|auto/.test(n) && t.clientHeight != t.scrollHeight) return i;
                if (i.getNiceScroll().length > 0) return i;
                t = t.parentNode ? t.parentNode : false
            }
            return false
        };

        function k(e, t, i) {
            var n, r;
            var s = 1;
            if (e.deltaMode == 0) {
                n = -Math.floor(e.deltaX * (a.opt.mousescrollstep / (18 * 3)));
                r = -Math.floor(e.deltaY * (a.opt.mousescrollstep / (18 * 3)))
            }
            else if (e.deltaMode == 1) {
                n = -Math.floor(e.deltaX * a.opt.mousescrollstep);
                r = -Math.floor(e.deltaY * a.opt.mousescrollstep)
            }
            if (t && a.opt.oneaxismousemode && n == 0 && r) {
                n = r;
                r = 0
            }
            if (n) {
                if (a.scrollmom) {
                    a.scrollmom.stop()
                }
                a.lastdeltax += n;
                a.debounced("mousewheelx", function () {
                    var e = a.lastdeltax;
                    a.lastdeltax = 0;
                    if (!a.rail.drag) {
                        a.doScrollLeftBy(e)
                    }
                }, 120)
            }
            if (r) {
                if (a.opt.nativeparentscrolling && i && !a.ispage && !a.zoomactive) {
                    if (r < 0) {
                        if (a.getScrollTop() >= a.page.maxh) return true
                    }
                    else {
                        if (a.getScrollTop() <= 0) return true
                    }
                }
                if (a.scrollmom) {
                    a.scrollmom.stop()
                }
                a.lastdeltay += r;
                a.debounced("mousewheely", function () {
                    var e = a.lastdeltay;
                    a.lastdeltay = 0;
                    if (!a.rail.drag) {
                        a.doScrollBy(e)
                    }
                }, 120)
            }
            e.stopImmediatePropagation();
            return e.preventDefault()
        }
        this.onmousewheel = function (e) {
            if (a.locked) {
                a.debounced("checkunlock", a.resize, 250);
                return true
            }
            if (a.rail.drag) return a.cancelEvent(e);
            if (a.opt.oneaxismousemode == "auto" && e.deltaX != 0) a.opt.oneaxismousemode = false;
            if (a.opt.oneaxismousemode && e.deltaX == 0) {
                if (!a.rail.scrollable) {
                    if (a.railh && a.railh.scrollable) {
                        return a.onmousewheelhr(e)
                    }
                    else {
                        return true
                    }
                }
            }
            var t = +new Date;
            var i = false;
            if (a.opt.preservenativescrolling && a.checkarea + 600 < t) {
                a.nativescrollingarea = a.isScrollable(e);
                i = true
            }
            a.checkarea = t;
            if (a.nativescrollingarea) return true;
            var n = k(e, false, i);
            if (n) a.checkarea = 0;
            return n
        };
        this.onmousewheelhr = function (e) {
            if (a.locked || !a.railh.scrollable) return true;
            if (a.rail.drag) return a.cancelEvent(e);
            var t = +new Date;
            var i = false;
            if (a.opt.preservenativescrolling && a.checkarea + 600 < t) {
                a.nativescrollingarea = a.isScrollable(e);
                i = true
            }
            a.checkarea = t;
            if (a.nativescrollingarea) return true;
            if (a.locked) return a.cancelEvent(e);
            return k(e, true, i)
        };
        this.stop = function () {
            a.cancelScroll();
            if (a.scrollmon) a.scrollmon.stop();
            a.cursorfreezed = false;
            a.scroll.y = Math.round(a.getScrollTop() * (1 / a.scrollratio.y));
            a.noticeCursor();
            return a
        };
        this.getTransitionSpeed = function (e) {
            var t = Math.round(a.opt.scrollspeed * 10);
            var i = Math.min(t, Math.round(e / 20 * a.opt.scrollspeed));
            return i > 20 ? i : 0
        };
        if (!a.opt.smoothscroll) {
            this.doScrollLeft = function (e, t) {
                var i = a.getScrollTop();
                a.doScrollPos(e, i, t)
            };
            this.doScrollTop = function (e, t) {
                var i = a.getScrollLeft();
                a.doScrollPos(i, e, t)
            };
            this.doScrollPos = function (e, t, i) {
                var n = e > a.page.maxw ? a.page.maxw : e;
                if (n < 0) n = 0;
                var r = t > a.page.maxh ? a.page.maxh : t;
                if (r < 0) r = 0;
                a.synched("scroll", function () {
                    a.setScrollTop(r);
                    a.setScrollLeft(n)
                })
            };
            this.cancelScroll = function () {}
        }
        else if (a.ishwscroll && f.hastransition && a.opt.usetransition) {
            this.prepareTransition = function (e, t) {
                var i = t ? e > 20 ? e : 0 : a.getTransitionSpeed(e);
                var n = i ? f.prefixstyle + "transform " + i + "ms ease-out" : "";
                if (!a.lasttransitionstyle || a.lasttransitionstyle != n) {
                    a.lasttransitionstyle = n;
                    a.doc.css(f.transitionstyle, n)
                }
                return i
            };
            this.doScrollLeft = function (e, t) {
                var i = a.scrollrunning ? a.newscrolly : a.getScrollTop();
                a.doScrollPos(e, i, t)
            };
            this.doScrollTop = function (e, t) {
                var i = a.scrollrunning ? a.newscrollx : a.getScrollLeft();
                a.doScrollPos(i, e, t)
            };
            this.doScrollPos = function (e, t, i) {
                var n = a.getScrollTop();
                var r = a.getScrollLeft();
                if ((a.newscrolly - n) * (t - n) < 0 || (a.newscrollx - r) * (e - r) < 0) a.cancelScroll();
                if (a.opt.bouncescroll == false) {
                    if (t < 0) t = 0;
                    else if (t > a.page.maxh) t = a.page.maxh;
                    if (e < 0) e = 0;
                    else if (e > a.page.maxw) e = a.page.maxw
                }
                if (a.scrollrunning && e == a.newscrollx && t == a.newscrolly) return false;
                a.newscrolly = t;
                a.newscrollx = e;
                a.newscrollspeed = i || false;
                if (a.timer) return false;
                a.timer = setTimeout(function () {
                    var i = a.getScrollTop();
                    var n = a.getScrollLeft();
                    var r = {};
                    r.x = e - n;
                    r.y = t - i;
                    r.px = n;
                    r.py = i;
                    var s = Math.round(Math.sqrt(Math.pow(r.x, 2) + Math.pow(r.y, 2)));
                    var o = a.newscrollspeed && a.newscrollspeed > 1 ? a.newscrollspeed : a.getTransitionSpeed(s);
                    if (a.newscrollspeed && a.newscrollspeed <= 1) o *= a.newscrollspeed;
                    a.prepareTransition(o, true);
                    if (a.timerscroll && a.timerscroll.tm) clearInterval(a.timerscroll.tm);
                    if (o > 0) {
                        if (!a.scrollrunning && a.onscrollstart) {
                            var l = {
                                type: "scrollstart",
                                current: {
                                    x: n,
                                    y: i
                                },
                                request: {
                                    x: e,
                                    y: t
                                },
                                end: {
                                    x: a.newscrollx,
                                    y: a.newscrolly
                                },
                                speed: o
                            };
                            a.onscrollstart.call(a, l)
                        }
                        if (f.transitionend) {
                            if (!a.scrollendtrapped) {
                                a.scrollendtrapped = true;
                                a.bind(a.doc, f.transitionend, a.onScrollEnd, false)
                            }
                        }
                        else {
                            if (a.scrollendtrapped) clearTimeout(a.scrollendtrapped);
                            a.scrollendtrapped = setTimeout(a.onScrollEnd, o)
                        }
                        var u = i;
                        var c = n;
                        a.timerscroll = {
                            bz: new BezierClass(u, a.newscrolly, o, 0, 0, .58, 1),
                            bh: new BezierClass(c, a.newscrollx, o, 0, 0, .58, 1)
                        };
                        if (!a.cursorfreezed) a.timerscroll.tm = setInterval(function () {
                            a.showCursor(a.getScrollTop(), a.getScrollLeft())
                        }, 60)
                    }
                    a.synched("doScroll-set", function () {
                        a.timer = 0;
                        if (a.scrollendtrapped) a.scrollrunning = true;
                        a.setScrollTop(a.newscrolly);
                        a.setScrollLeft(a.newscrollx);
                        if (!a.scrollendtrapped) a.onScrollEnd()
                    })
                }, 50)
            };
            this.cancelScroll = function () {
                if (!a.scrollendtrapped) return true;
                var e = a.getScrollTop();
                var t = a.getScrollLeft();
                a.scrollrunning = false;
                if (!f.transitionend) clearTimeout(f.transitionend);
                a.scrollendtrapped = false;
                a._unbind(a.doc, f.transitionend, a.onScrollEnd);
                a.prepareTransition(0);
                a.setScrollTop(e);
                if (a.railh) a.setScrollLeft(t);
                if (a.timerscroll && a.timerscroll.tm) clearInterval(a.timerscroll.tm);
                a.timerscroll = false;
                a.cursorfreezed = false;
                a.showCursor(e, t);
                return a
            };
            this.onScrollEnd = function () {
                if (a.scrollendtrapped) a._unbind(a.doc, f.transitionend, a.onScrollEnd);
                a.scrollendtrapped = false;
                a.prepareTransition(0);
                if (a.timerscroll && a.timerscroll.tm) clearInterval(a.timerscroll.tm);
                a.timerscroll = false;
                var e = a.getScrollTop();
                var t = a.getScrollLeft();
                a.setScrollTop(e);
                if (a.railh) a.setScrollLeft(t);
                a.noticeCursor(false, e, t);
                a.cursorfreezed = false;
                if (e < 0) e = 0;
                else if (e > a.page.maxh) e = a.page.maxh;
                if (t < 0) t = 0;
                else if (t > a.page.maxw) t = a.page.maxw;
                if (e != a.newscrolly || t != a.newscrollx) return a.doScrollPos(t, e, a.opt.snapbackspeed);
                if (a.onscrollend && a.scrollrunning) {
                    var i = {
                        type: "scrollend",
                        current: {
                            x: t,
                            y: e
                        },
                        end: {
                            x: a.newscrollx,
                            y: a.newscrolly
                        }
                    };
                    a.onscrollend.call(a, i)
                }
                a.scrollrunning = false
            }
        }
        else {
            this.doScrollLeft = function (e, t) {
                var i = a.scrollrunning ? a.newscrolly : a.getScrollTop();
                a.doScrollPos(e, i, t)
            };
            this.doScrollTop = function (e, t) {
                var i = a.scrollrunning ? a.newscrollx : a.getScrollLeft();
                a.doScrollPos(i, e, t)
            };
            this.doScrollPos = function (e, t, i) {
                var t = typeof t == "undefined" || t === false ? a.getScrollTop(true) : t;
                if (a.timer && a.newscrolly == t && a.newscrollx == e) return true;
                if (a.timer) d(a.timer);
                a.timer = 0;
                var n = a.getScrollTop();
                var r = a.getScrollLeft();
                if ((a.newscrolly - n) * (t - n) < 0 || (a.newscrollx - r) * (e - r) < 0) a.cancelScroll();
                a.newscrolly = t;
                a.newscrollx = e;
                if (!a.bouncescroll || !a.rail.visibility) {
                    if (a.newscrolly < 0) {
                        a.newscrolly = 0
                    }
                    else if (a.newscrolly > a.page.maxh) {
                        a.newscrolly = a.page.maxh
                    }
                }
                if (!a.bouncescroll || !a.railh.visibility) {
                    if (a.newscrollx < 0) {
                        a.newscrollx = 0
                    }
                    else if (a.newscrollx > a.page.maxw) {
                        a.newscrollx = a.page.maxw
                    }
                }
                a.dst = {};
                a.dst.x = e - r;
                a.dst.y = t - n;
                a.dst.px = r;
                a.dst.py = n;
                var s = Math.round(Math.sqrt(Math.pow(a.dst.x, 2) + Math.pow(a.dst.y, 2)));
                a.dst.ax = a.dst.x / s;
                a.dst.ay = a.dst.y / s;
                var o = 0;
                var l = s;
                if (a.dst.x == 0) {
                    o = n;
                    l = t;
                    a.dst.ay = 1;
                    a.dst.py = 0
                }
                else if (a.dst.y == 0) {
                    o = r;
                    l = e;
                    a.dst.ax = 1;
                    a.dst.px = 0
                }
                var u = a.getTransitionSpeed(s);
                if (i && i <= 1) u *= i;
                if (u > 0) {
                    a.bzscroll = a.bzscroll ? a.bzscroll.update(l, u) : new BezierClass(o, l, u, 0, 1, 0, 1)
                }
                else {
                    a.bzscroll = false
                }
                if (a.timer) return;
                if (n == a.page.maxh && t >= a.page.maxh || r == a.page.maxw && e >= a.page.maxw) a.checkContentSize();
                var c = 1;

                function f() {
                    if (a.cancelAnimationFrame) return true;
                    a.scrollrunning = true;
                    c = 1 - c;
                    if (c) return a.timer = h(f) || 1;
                    var e = 0;
                    var t = sy = a.getScrollTop();
                    if (a.dst.ay) {
                        t = a.bzscroll ? a.dst.py + a.bzscroll.getNow() * a.dst.ay : a.newscrolly;
                        var i = t - sy;
                        if (i < 0 && t < a.newscrolly || i > 0 && t > a.newscrolly) t = a.newscrolly;
                        a.setScrollTop(t);
                        if (t == a.newscrolly) e = 1
                    }
                    else {
                        e = 1
                    }
                    var n = sx = a.getScrollLeft();
                    if (a.dst.ax) {
                        n = a.bzscroll ? a.dst.px + a.bzscroll.getNow() * a.dst.ax : a.newscrollx;
                        var i = n - sx;
                        if (i < 0 && n < a.newscrollx || i > 0 && n > a.newscrollx) n = a.newscrollx;
                        a.setScrollLeft(n);
                        if (n == a.newscrollx) e += 1
                    }
                    else {
                        e += 1
                    }
                    if (e == 2) {
                        a.timer = 0;
                        a.cursorfreezed = false;
                        a.bzscroll = false;
                        a.scrollrunning = false;
                        if (t < 0) t = 0;
                        else if (t > a.page.maxh) t = a.page.maxh;
                        if (n < 0) n = 0;
                        else if (n > a.page.maxw) n = a.page.maxw;
                        if (n != a.newscrollx || t != a.newscrolly) a.doScrollPos(n, t);
                        else {
                            if (a.onscrollend) {
                                var r = {
                                    type: "scrollend",
                                    current: {
                                        x: sx,
                                        y: sy
                                    },
                                    end: {
                                        x: a.newscrollx,
                                        y: a.newscrolly
                                    }
                                };
                                a.onscrollend.call(a, r)
                            }
                        }
                    }
                    else {
                        a.timer = h(f) || 1
                    }
                }
                a.cancelAnimationFrame = false;
                a.timer = 1;
                if (a.onscrollstart && !a.scrollrunning) {
                    var p = {
                        type: "scrollstart",
                        current: {
                            x: r,
                            y: n
                        },
                        request: {
                            x: e,
                            y: t
                        },
                        end: {
                            x: a.newscrollx,
                            y: a.newscrolly
                        },
                        speed: u
                    };
                    a.onscrollstart.call(a, p)
                }
                f();
                if (n == a.page.maxh && t >= n || r == a.page.maxw && e >= r) a.checkContentSize();
                a.noticeCursor()
            };
            this.cancelScroll = function () {
                if (a.timer) d(a.timer);
                a.timer = 0;
                a.bzscroll = false;
                a.scrollrunning = false;
                return a
            }
        }
        this.doScrollBy = function (e, t) {
            var i = 0;
            if (t) {
                i = Math.floor((a.scroll.y - e) * a.scrollratio.y)
            }
            else {
                var n = a.timer ? a.newscrolly : a.getScrollTop(true);
                i = n - e
            }
            if (a.bouncescroll) {
                var r = Math.round(a.view.h / 2);
                if (i < -r) i = -r;
                else if (i > a.page.maxh + r) i = a.page.maxh + r
            }
            a.cursorfreezed = false;
            py = a.getScrollTop(true);
            if (i < 0 && py <= 0) return a.noticeCursor();
            else if (i > a.page.maxh && py >= a.page.maxh) {
                a.checkContentSize();
                return a.noticeCursor()
            }
            a.doScrollTop(i)
        };
        this.doScrollLeftBy = function (e, t) {
            var i = 0;
            if (t) {
                i = Math.floor((a.scroll.x - e) * a.scrollratio.x)
            }
            else {
                var n = a.timer ? a.newscrollx : a.getScrollLeft(true);
                i = n - e
            }
            if (a.bouncescroll) {
                var r = Math.round(a.view.w / 2);
                if (i < -r) i = -r;
                else if (i > a.page.maxw + r) i = a.page.maxw + r
            }
            a.cursorfreezed = false;
            px = a.getScrollLeft(true);
            if (i < 0 && px <= 0) return a.noticeCursor();
            else if (i > a.page.maxw && px >= a.page.maxw) return a.noticeCursor();
            a.doScrollLeft(i)
        };
        this.doScrollTo = function (e, t) {
            var i = t ? Math.round(e * a.scrollratio.y) : e;
            if (i < 0) i = 0;
            else if (i > a.page.maxh) i = a.page.maxh;
            a.cursorfreezed = false;
            a.doScrollTop(e)
        };
        this.checkContentSize = function () {
            var e = a.getContentSize();
            if (e.h != a.page.h || e.w != a.page.w) a.resize(false, e)
        };
        a.onscroll = function (e) {
            if (a.rail.drag) return;
            if (!a.cursorfreezed) {
                a.synched("scroll", function () {
                    a.scroll.y = Math.round(a.getScrollTop() * (1 / a.scrollratio.y));
                    if (a.railh) a.scroll.x = Math.round(a.getScrollLeft() * (1 / a.scrollratio.x));
                    a.noticeCursor()
                })
            }
        };
        a.bind(a.docscroll, "scroll", a.onscroll);
        this.doZoomIn = function (e) {
            if (a.zoomactive) return;
            a.zoomactive = true;
            a.zoomrestore = {
                style: {}
            };
            var t = ["position", "top", "left", "zIndex", "backgroundColor", "marginTop", "marginBottom", "marginLeft", "marginRight"];
            var i = a.win[0].style;
            for (var n in t) {
                var r = t[n];
                a.zoomrestore.style[r] = typeof i[r] != "undefined" ? i[r] : ""
            }
            a.zoomrestore.style.width = a.win.css("width");
            a.zoomrestore.style.height = a.win.css("height");
            a.zoomrestore.padding = {
                w: a.win.outerWidth() - a.win.width(),
                h: a.win.outerHeight() - a.win.height()
            };
            if (f.isios4) {
                a.zoomrestore.scrollTop = l(window).scrollTop();
                l(window).scrollTop(0)
            }
            a.win.css({
                position: f.isios4 ? "absolute" : "fixed",
                top: 0,
                left: 0,
                "z-index": o + 100,
                margin: "0px"
            });
            var s = a.win.css("backgroundColor");
            if (s == "" || /transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s)) a.win.css("backgroundColor", "#fff");
            a.rail.css({
                "z-index": o + 101
            });
            a.zoom.css({
                "z-index": o + 102
            });
            a.zoom.css("backgroundPosition", "0px -18px");
            a.resizeZoom();
            if (a.onzoomin) a.onzoomin.call(a);
            return a.cancelEvent(e)
        };
        this.doZoomOut = function (e) {
            if (!a.zoomactive) return;
            a.zoomactive = false;
            a.win.css("margin", "");
            a.win.css(a.zoomrestore.style);
            if (f.isios4) {
                l(window).scrollTop(a.zoomrestore.scrollTop)
            }
            a.rail.css({
                "z-index": a.zindex
            });
            a.zoom.css({
                "z-index": a.zindex
            });
            a.zoomrestore = false;
            a.zoom.css("backgroundPosition", "0px 0px");
            a.onResize();
            if (a.onzoomout) a.onzoomout.call(a);
            return a.cancelEvent(e)
        };
        this.doZoom = function (e) {
            return a.zoomactive ? a.doZoomOut(e) : a.doZoomIn(e)
        };
        this.resizeZoom = function () {
            if (!a.zoomactive) return;
            var e = a.getScrollTop();
            a.win.css({
                width: l(window).width() - a.zoomrestore.padding.w + "px",
                height: l(window).height() - a.zoomrestore.padding.h + "px"
            });
            a.onResize();
            a.setScrollTop(Math.min(a.page.maxh, e))
        };
        this.init();
        l.nicescroll.push(this)
    };
    var _ = function (e) {
        var t = this;
        this.nc = e;
        this.lastx = 0;
        this.lasty = 0;
        this.speedx = 0;
        this.speedy = 0;
        this.lasttime = 0;
        this.steptime = 0;
        this.snapx = false;
        this.snapy = false;
        this.demulx = 0;
        this.demuly = 0;
        this.lastscrollx = -1;
        this.lastscrolly = -1;
        this.chkx = 0;
        this.chky = 0;
        this.timer = 0;
        this.time = function () {
            return +new Date
        };
        this.reset = function (e, i) {
            t.stop();
            var n = t.time();
            t.steptime = 0;
            t.lasttime = n;
            t.speedx = 0;
            t.speedy = 0;
            t.lastx = e;
            t.lasty = i;
            t.lastscrollx = -1;
            t.lastscrolly = -1
        };
        this.update = function (e, i) {
            var n = t.time();
            t.steptime = n - t.lasttime;
            t.lasttime = n;
            var r = i - t.lasty;
            var s = e - t.lastx;
            var a = t.nc.getScrollTop();
            var o = t.nc.getScrollLeft();
            var l = a + r;
            var u = o + s;
            t.snapx = u < 0 || u > t.nc.page.maxw;
            t.snapy = l < 0 || l > t.nc.page.maxh;
            t.speedx = s;
            t.speedy = r;
            t.lastx = e;
            t.lasty = i
        };
        this.stop = function () {
            t.nc.unsynched("domomentum2d");
            if (t.timer) clearTimeout(t.timer);
            t.timer = 0;
            t.lastscrollx = -1;
            t.lastscrolly = -1
        };
        this.doSnapy = function (e, i) {
            var n = false;
            if (i < 0) {
                i = 0;
                n = true
            }
            else if (i > t.nc.page.maxh) {
                i = t.nc.page.maxh;
                n = true
            }
            if (e < 0) {
                e = 0;
                n = true
            }
            else if (e > t.nc.page.maxw) {
                e = t.nc.page.maxw;
                n = true
            }
            if (n) t.nc.doScrollPos(e, i, t.nc.opt.snapbackspeed)
        };
        this.doMomentum = function (e) {
            var i = t.time();
            var n = e ? i + e : t.lasttime;
            var r = t.nc.getScrollLeft();
            var s = t.nc.getScrollTop();
            var a = t.nc.page.maxh;
            var o = t.nc.page.maxw;
            t.speedx = o > 0 ? Math.min(60, t.speedx) : 0;
            t.speedy = a > 0 ? Math.min(60, t.speedy) : 0;
            var l = n && i - n <= 60;
            if (s < 0 || s > a || r < 0 || r > o) l = false;
            var u = t.speedy && l ? t.speedy : false;
            var c = t.speedx && l ? t.speedx : false;
            if (u || c) {
                var f = Math.max(16, t.steptime);
                if (f > 50) {
                    var h = f / 50;
                    t.speedx *= h;
                    t.speedy *= h;
                    f = 50
                }
                t.demulxy = 0;
                t.lastscrollx = t.nc.getScrollLeft();
                t.chkx = t.lastscrollx;
                t.lastscrolly = t.nc.getScrollTop();
                t.chky = t.lastscrolly;
                var d = t.lastscrollx;
                var p = t.lastscrolly;
                var g = function () {
                    var e = t.time() - i > 600 ? .04 : .02;
                    if (t.speedx) {
                        d = Math.floor(t.lastscrollx - t.speedx * (1 - t.demulxy));
                        t.lastscrollx = d;
                        if (d < 0 || d > o) e = .1
                    }
                    if (t.speedy) {
                        p = Math.floor(t.lastscrolly - t.speedy * (1 - t.demulxy));
                        t.lastscrolly = p;
                        if (p < 0 || p > a) e = .1
                    }
                    t.demulxy = Math.min(1, t.demulxy + e);
                    t.nc.synched("domomentum2d", function () {
                        if (t.speedx) {
                            var e = t.nc.getScrollLeft();
                            if (e != t.chkx) t.stop();
                            t.chkx = d;
                            t.nc.setScrollLeft(d)
                        }
                        if (t.speedy) {
                            var i = t.nc.getScrollTop();
                            if (i != t.chky) t.stop();
                            t.chky = p;
                            t.nc.setScrollTop(p)
                        }
                        if (!t.timer) {
                            t.nc.hideCursor();
                            t.doSnapy(d, p)
                        }
                    });
                    if (t.demulxy < 1) {
                        t.timer = setTimeout(g, f)
                    }
                    else {
                        t.stop();
                        t.nc.hideCursor();
                        t.doSnapy(d, p)
                    }
                };
                g()
            }
            else {
                t.doSnapy(t.nc.getScrollLeft(), t.nc.getScrollTop())
            }
        }
    };
    var x = e.fn.scrollTop;
    e.cssHooks["pageYOffset"] = {
        get: function (e, t, i) {
            var n = l.data(e, "__nicescroll") || false;
            return n && n.ishwscroll ? n.getScrollTop() : x.call(e)
        },
        set: function (e, t) {
            var i = l.data(e, "__nicescroll") || false;
            i && i.ishwscroll ? i.setScrollTop(parseInt(t)) : x.call(e, t);
            return this
        }
    };
    e.fn.scrollTop = function (e) {
        if (typeof e == "undefined") {
            var t = this[0] ? l.data(this[0], "__nicescroll") || false : false;
            return t && t.ishwscroll ? t.getScrollTop() : x.call(this)
        }
        else {
            return this.each(function () {
                var t = l.data(this, "__nicescroll") || false;
                t && t.ishwscroll ? t.setScrollTop(parseInt(e)) : x.call(l(this), e)
            })
        }
    };
    var k = e.fn.scrollLeft;
    l.cssHooks.pageXOffset = {
        get: function (e, t, i) {
            var n = l.data(e, "__nicescroll") || false;
            return n && n.ishwscroll ? n.getScrollLeft() : k.call(e)
        },
        set: function (e, t) {
            var i = l.data(e, "__nicescroll") || false;
            i && i.ishwscroll ? i.setScrollLeft(parseInt(t)) : k.call(e, t);
            return this
        }
    };
    e.fn.scrollLeft = function (e) {
        if (typeof e == "undefined") {
            var t = this[0] ? l.data(this[0], "__nicescroll") || false : false;
            return t && t.ishwscroll ? t.getScrollLeft() : k.call(this)
        }
        else {
            return this.each(function () {
                var t = l.data(this, "__nicescroll") || false;
                t && t.ishwscroll ? t.setScrollLeft(parseInt(e)) : k.call(l(this), e)
            })
        }
    };
    var C = function (e) {
        var t = this;
        this.length = 0;
        this.name = "nicescrollarray";
        this.each = function (e) {
            for (var i = 0, n = 0; i < t.length; i++) e.call(t[i], n++);
            return t
        };
        this.push = function (e) {
            t[t.length] = e;
            t.length++
        };
        this.eq = function (e) {
            return t[e]
        };
        if (e) {
            for (a = 0; a < e.length; a++) {
                var i = l.data(e[a], "__nicescroll") || false;
                if (i) {
                    this[this.length] = i;
                    this.length++
                }
            }
        }
        return this
    };

    function M(e, t, i) {
        for (var n = 0; n < t.length; n++) i(e, t[n])
    }
    M(C.prototype, ["show", "hide", "toggle", "onResize", "resize", "remove", "stop", "doScrollPos"], function (e, t) {
        e[t] = function () {
            var e = arguments;
            return this.each(function () {
                this[t].apply(this, e)
            })
        }
    });
    e.fn.getNiceScroll = function (e) {
        if (typeof e == "undefined") {
            return new C(this)
        }
        else {
            var t = this[e] && l.data(this[e], "__nicescroll") || false;
            return t
        }
    };
    e.extend(e.expr[":"], {
        nicescroll: function (e) {
            return l.data(e, "__nicescroll") ? true : false
        }
    });
    l.fn.niceScroll = function (e, t) {
        if (typeof t == "undefined") {
            if (typeof e == "object" && !("jquery" in e)) {
                t = e;
                e = false
            }
        }
        var i = new C;
        if (typeof t == "undefined") t = {};
        if (e || false) {
            t.doc = l(e);
            t.win = l(this)
        }
        var n = !("doc" in t);
        if (!n && !("win" in t)) t.win = l(this);
        this.each(function () {
            var e = l(this).data("__nicescroll") || false;
            if (!e) {
                t.doc = n ? l(this) : t.doc;
                e = new w(t, l(this));
                l(this).data("__nicescroll", e)
            }
            i.push(e)
        });
        return i.length == 1 ? i[0] : i
    };
    window.NiceScroll = {
        getjQuery: function () {
            return e
        }
    };
    if (!l.nicescroll) {
        l.nicescroll = new C;
        l.nicescroll.options = v
    }
})(jQuery);
(function (e) {
    jQuery.fn.extend({
        slimScroll: function (i) {
            var n = {
                width: "auto",
                height: "250px",
                size: "7px",
                color: "#000",
                position: "right",
                distance: "1px",
                start: "top",
                opacity: .4,
                alwaysVisible: false,
                disableFadeOut: false,
                railVisible: false,
                railColor: "#333",
                railOpacity: .2,
                railDraggable: true,
                railClass: "slimScrollRail",
                barClass: "slimScrollBar",
                wrapperClass: "slimScrollDiv",
                allowPageScroll: false,
                wheelStep: 20,
                touchScrollStep: 200,
                borderRadius: "7px",
                railBorderRadius: "7px"
            };
            var r = e.extend(n, i);
            this.each(function () {
                var n, s, a, o, l, u, c, f, h = "<div></div>",
                    d = 30,
                    p = false;
                var g = e(this);
                if (g.parent().hasClass(r.wrapperClass)) {
                    var m = g.scrollTop();
                    w = g.parent().find("." + r.barClass);
                    b = g.parent().find("." + r.railClass);
                    M();
                    if (e.isPlainObject(i)) {
                        if ("height" in i && i.height == "auto") {
                            g.parent().css("height", "auto");
                            g.css("height", "auto");
                            var v = g.parent().parent().height();
                            g.parent().css("height", v);
                            g.css("height", v)
                        }
                        if ("scrollTo" in i) {
                            m = parseInt(r.scrollTo)
                        }
                        else if ("scrollBy" in i) {
                            m += parseInt(r.scrollBy)
                        }
                        else if ("destroy" in i) {
                            w.remove();
                            b.remove();
                            g.unwrap();
                            return
                        }
                        k(m, false, true)
                    }
                    return
                }
                r.height = r.height == "auto" ? g.parent().height() : r.height;
                var y = e(h).addClass(r.wrapperClass).css({
                    position: "relative",
                    overflow: "hidden",
                    width: r.width,
                    height: r.height
                });
                g.css({
                    overflow: "hidden",
                    width: r.width,
                    height: r.height
                });
                var b = e(h).addClass(r.railClass).css({
                    width: r.size,
                    height: "100%",
                    position: "absolute",
                    top: 0,
                    display: r.alwaysVisible && r.railVisible ? "block" : "none",
                    "border-radius": r.railBorderRadius,
                    background: r.railColor,
                    opacity: r.railOpacity,
                    zIndex: 90
                });
                var w = e(h).addClass(r.barClass).css({
                    background: r.color,
                    width: r.size,
                    position: "absolute",
                    top: 0,
                    opacity: r.opacity,
                    display: r.alwaysVisible ? "block" : "none",
                    "border-radius": r.borderRadius,
                    BorderRadius: r.borderRadius,
                    MozBorderRadius: r.borderRadius,
                    WebkitBorderRadius: r.borderRadius,
                    zIndex: 99
                });
                var _ = r.position == "right" ? {
                    right: r.distance
                } : {
                    left: r.distance
                };
                b.css(_);
                w.css(_);
                g.wrap(y);
                g.parent().append(w);
                g.parent().append(b);
                if (r.railDraggable) {
                    w.bind("mousedown", function (i) {
                        var n = e(document);
                        a = true;
                        t = parseFloat(w.css("top"));
                        pageY = i.pageY;
                        n.bind("mousemove.slimscroll", function (e) {
                            currTop = t + e.pageY - pageY;
                            w.css("top", currTop);
                            k(0, w.position().top, false)
                        });
                        n.bind("mouseup.slimscroll", function (e) {
                            a = false;
                            D();
                            n.unbind(".slimscroll")
                        });
                        return false
                    }).bind("selectstart.slimscroll", function (e) {
                        e.stopPropagation();
                        e.preventDefault();
                        return false
                    })
                }
                b.hover(function () {
                    T()
                }, function () {
                    D()
                });
                w.hover(function () {
                    s = true
                }, function () {
                    s = false
                });
                g.hover(function () {
                    n = true;
                    T();
                    D()
                }, function () {
                    n = false;
                    D()
                });
                g.bind("touchstart", function (e, t) {
                    if (e.originalEvent.touches.length) {
                        l = e.originalEvent.touches[0].pageY
                    }
                });
                g.bind("touchmove", function (e) {
                    if (!p) {
                        e.originalEvent.preventDefault()
                    }
                    if (e.originalEvent.touches.length) {
                        var t = (l - e.originalEvent.touches[0].pageY) / r.touchScrollStep;
                        k(t, true);
                        l = e.originalEvent.touches[0].pageY
                    }
                });
                M();
                if (r.start === "bottom") {
                    w.css({
                        top: g.outerHeight() - w.outerHeight()
                    });
                    k(0, true)
                }
                else if (r.start !== "top") {
                    k(e(r.start).position().top, null, true);
                    if (!r.alwaysVisible) {
                        w.hide()
                    }
                }
                C();

                function x(t) {
                    if (!n) {
                        return
                    }
                    var t = t || window.event;
                    var i = 0;
                    if (t.wheelDelta) {
                        i = -t.wheelDelta / 120
                    }
                    if (t.detail) {
                        i = t.detail / 3
                    }
                    var s = t.target || t.srcTarget || t.srcElement;
                    if (e(s).closest("." + r.wrapperClass).is(g.parent())) {
                        k(i, true)
                    }
                    if (t.preventDefault && !p) {
                        t.preventDefault()
                    }
                    if (!p) {
                        t.returnValue = false
                    }
                }

                function k(e, t, i) {
                    p = false;
                    var n = e;
                    var s = g.outerHeight() - w.outerHeight();
                    if (t) {
                        n = parseInt(w.css("top")) + e * parseInt(r.wheelStep) / 100 * w.outerHeight();
                        n = Math.min(Math.max(n, 0), s);
                        n = e > 0 ? Math.ceil(n) : Math.floor(n);
                        w.css({
                            top: n + "px"
                        })
                    }
                    c = parseInt(w.css("top")) / (g.outerHeight() - w.outerHeight());
                    n = c * (g[0].scrollHeight - g.outerHeight());
                    if (i) {
                        n = e;
                        var a = n / g[0].scrollHeight * g.outerHeight();
                        a = Math.min(Math.max(a, 0), s);
                        w.css({
                            top: a + "px"
                        })
                    }
                    g.scrollTop(n);
                    g.trigger("slimscrolling", ~~n);
                    T();
                    D()
                }

                function C() {
                    if (window.addEventListener) {
                        this.addEventListener("DOMMouseScroll", x, false);
                        this.addEventListener("mousewheel", x, false);
                        this.addEventListener("MozMousePixelScroll", x, false)
                    }
                    else {
                        document.attachEvent("onmousewheel", x)
                    }
                }

                function M() {
                    u = Math.max(g.outerHeight() / g[0].scrollHeight * g.outerHeight(), d);
                    w.css({
                        height: u + "px"
                    });
                    var e = u == g.outerHeight() ? "none" : "block";
                    w.css({
                        display: e
                    })
                }

                function T() {
                    M();
                    clearTimeout(o);
                    if (c == ~~c) {
                        p = r.allowPageScroll;
                        if (f != c) {
                            var e = ~~c == 0 ? "top" : "bottom";
                            g.trigger("slimscroll", e)
                        }
                    }
                    else {
                        p = false
                    }
                    f = c;
                    if (u >= g.outerHeight()) {
                        p = true;
                        return
                    }
                    w.stop(true, true).fadeIn("fast");
                    if (r.railVisible) {
                        b.stop(true, true).fadeIn("fast")
                    }
                }

                function D() {
                    if (!r.alwaysVisible) {
                        o = setTimeout(function () {
                            if (!(r.disableFadeOut && n) && !s && !a) {
                                w.fadeOut("slow");
                                b.fadeOut("slow")
                            }
                        }, 1e3)
                    }
                }
            });
            return this
        }
    });
    jQuery.fn.extend({
        slimscroll: jQuery.fn.slimScroll
    })
})(jQuery);
(function (e) {
    e.fn.dcAccordion = function (t) {
        var i = {
            classActive: "active",
            eventType: "click",
            hoverDelay: 300,
            menuClose: true,
            autoClose: true,
            autoExpand: false,
            speed: "slow",
            saveState: true,
            disableLink: true,
            showCount: false
        };
        var t = e.extend(i, t);
        this.each(function (t) {
            var n = this;
            a();
            if (i.autoExpand == true) {
                e("li." + i.classExpand + " > a").addClass(i.classActive)
            }
            h();
            if (i.eventType == "hover") {
                var r = {
                    sensitivity: 2,
                    interval: i.hoverDelay,
                    over: o,
                    timeout: i.hoverDelay,
                    out: l
                };
                e("li a", n).hoverIntent(r);
                var s = {
                    sensitivity: 2,
                    interval: 1e3,
                    over: u,
                    timeout: 1e3,
                    out: c
                };
                e(n).hoverIntent(s);
                if (i.disableLink == true) {
                    e("li a", n).click(function (t) {
                        if (e(this).siblings("ul").length > 0) {
                            t.preventDefault()
                        }
                    })
                }
            }
            else {
                e("li a", n).click(function (t) {
                    $activeLi = e(this).parent("li");
                    $parentsLi = $activeLi.parents("li");
                    $parentsUl = $activeLi.parents("ul");
                    if (i.disableLink == true) {
                        if (e(this).siblings("ul").length > 0) {
                            t.preventDefault()
                        }
                    }
                    if (i.autoClose == true) {
                        f($parentsLi, $parentsUl)
                    }
                    if (e("> ul", $activeLi).is(":visible")) {
                        e("ul", $activeLi).slideUp(i.speed);
                        e("a", $activeLi).removeClass(i.classActive)
                    }
                    else {
                        e(this).siblings("ul").slideToggle(i.speed);
                        e("> a", $activeLi).addClass(i.classActive)
                    }
                })
            }

            function a() {
                $arrow = '<span class="' + i.classArrow + '"></span>';
                var t = i.classParent + "-li";
                e("> ul", n).show();
                e("li", n).each(function () {
                    if (e("> ul", this).length > 0) {
                        e(this).addClass(t);
                        e("> a", this).addClass(i.classParent).append($arrow)
                    }
                });
                e("> ul", n).hide();
                if (i.showCount == true) {
                    e("li." + t, n).each(function () {
                        if (i.disableLink == true) {
                            var t = parseInt(e("ul a:not(." + i.classParent + ")", this).length)
                        }
                        else {
                            var t = parseInt(e("ul a", this).length)
                        }
                        e("> a", this).append(' <span class="' + i.classCount + '">' + t + "</span>")
                    })
                }
            }

            function o() {
                $activeLi = e(this).parent("li");
                $parentsLi = $activeLi.parents("li");
                $parentsUl = $activeLi.parents("ul");
                if (i.autoClose == true) {
                    f($parentsLi, $parentsUl)
                }
                if (e("> ul", $activeLi).is(":visible")) {
                    e("ul", $activeLi).slideUp(i.speed);
                    e("a", $activeLi).removeClass(i.classActive)
                }
                else {
                    e(this).siblings("ul").slideToggle(i.speed);
                    e("> a", $activeLi).addClass(i.classActive)
                }
                if (i.saveState == true) {
                    createCookie(i.cookie, n)
                }
            }

            function l() {}

            function u() {}

            function c() {
                if (i.menuClose == true) {
                    e("ul", n).slideUp(i.speed);
                    e("a", n).removeClass(i.classActive);
                    createCookie(i.cookie, n)
                }
            }

            function f(t, r) {
                e("ul", n).not(r).slideUp(i.speed);
                e("a", n).removeClass(i.classActive);
                e("> a", t).addClass(i.classActive)
            }

            function h() {
                e("ul", n).hide();
                $allActiveLi = e("a." + i.classActive, n);
                $allActiveLi.siblings("ul").show()
            }
        })
    }
})(jQuery);
(function (e) {
    var t, i = "2.5.1",
        n = this,
        r = Math.round,
        s, a = 0,
        o = 1,
        l = 2,
        u = 3,
        c = 4,
        f = 5,
        h = 6,
        d = {},
        p = {
            _isAMomentObject: null,
            _i: null,
            _f: null,
            _l: null,
            _strict: null,
            _isUTC: null,
            _offset: null,
            _pf: null,
            _lang: null
        },
        g = typeof module !== "undefined" && module.exports && typeof require !== "undefined",
        m = /^\/?Date\((\-?\d+)/i,
        v = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,
        y = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,
        b = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,
        w = /(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,
        _ = /\d\d?/,
        x = /\d{1,3}/,
        k = /\d{1,4}/,
        C = /[+\-]?\d{1,6}/,
        M = /\d+/,
        T = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
        D = /Z|[\+\-]\d\d:?\d\d/gi,
        S = /T/i,
        E = /[\+\-]?\d+(\.\d{1,3})?/,
        A = /\d/,
        I = /\d\d/,
        $ = /\d{3}/,
        P = /\d{4}/,
        z = /[+-]?\d{6}/,
        N = /[+-]?\d+/,
        H = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
        O = "YYYY-MM-DDTHH:mm:ssZ",
        L = [
            ["YYYYYY-MM-DD", /[+-]\d{6}-\d{2}-\d{2}/],
            ["YYYY-MM-DD", /\d{4}-\d{2}-\d{2}/],
            ["GGGG-[W]WW-E", /\d{4}-W\d{2}-\d/],
            ["GGGG-[W]WW", /\d{4}-W\d{2}/],
            ["YYYY-DDD", /\d{4}-\d{3}/]
        ],
        j = [
            ["HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d{1,3}/],
            ["HH:mm:ss", /(T| )\d\d:\d\d:\d\d/],
            ["HH:mm", /(T| )\d\d:\d\d/],
            ["HH", /(T| )\d\d/]
        ],
        F = /([\+\-]|\d\d)/gi,
        R = "Date|Hours|Minutes|Seconds|Milliseconds".split("|"),
        W = {
            Milliseconds: 1,
            Seconds: 1e3,
            Minutes: 6e4,
            Hours: 36e5,
            Days: 864e5,
            Months: 2592e6,
            Years: 31536e6
        },
        Y = {
            ms: "millisecond",
            s: "second",
            m: "minute",
            h: "hour",
            d: "day",
            D: "date",
            w: "week",
            W: "isoWeek",
            M: "month",
            y: "year",
            DDD: "dayOfYear",
            e: "weekday",
            E: "isoWeekday",
            gg: "weekYear",
            GG: "isoWeekYear"
        },
        q = {
            dayofyear: "dayOfYear",
            isoweekday: "isoWeekday",
            isoweek: "isoWeek",
            weekyear: "weekYear",
            isoweekyear: "isoWeekYear"
        },
        B = {},
        U = "DDD w W M D d".split(" "),
        Q = "M D H h m s w W".split(" "),
        G = {
            M: function () {
                return this.month() + 1
            },
            MMM: function (e) {
                return this.lang().monthsShort(this, e)
            },
            MMMM: function (e) {
                return this.lang().months(this, e)
            },
            D: function () {
                return this.date()
            },
            DDD: function () {
                return this.dayOfYear()
            },
            d: function () {
                return this.day()
            },
            dd: function (e) {
                return this.lang().weekdaysMin(this, e)
            },
            ddd: function (e) {
                return this.lang().weekdaysShort(this, e)
            },
            dddd: function (e) {
                return this.lang().weekdays(this, e)
            },
            w: function () {
                return this.week()
            },
            W: function () {
                return this.isoWeek()
            },
            YY: function () {
                return st(this.year() % 100, 2)
            },
            YYYY: function () {
                return st(this.year(), 4)
            },
            YYYYY: function () {
                return st(this.year(), 5)
            },
            YYYYYY: function () {
                var e = this.year(),
                    t = e >= 0 ? "+" : "-";
                return t + st(Math.abs(e), 6)
            },
            gg: function () {
                return st(this.weekYear() % 100, 2)
            },
            gggg: function () {
                return st(this.weekYear(), 4)
            },
            ggggg: function () {
                return st(this.weekYear(), 5)
            },
            GG: function () {
                return st(this.isoWeekYear() % 100, 2)
            },
            GGGG: function () {
                return st(this.isoWeekYear(), 4)
            },
            GGGGG: function () {
                return st(this.isoWeekYear(), 5)
            },
            e: function () {
                return this.weekday()
            },
            E: function () {
                return this.isoWeekday()
            },
            a: function () {
                return this.lang().meridiem(this.hours(), this.minutes(), true)
            },
            A: function () {
                return this.lang().meridiem(this.hours(), this.minutes(), false)
            },
            H: function () {
                return this.hours()
            },
            h: function () {
                return this.hours() % 12 || 12
            },
            m: function () {
                return this.minutes()
            },
            s: function () {
                return this.seconds()
            },
            S: function () {
                return dt(this.milliseconds() / 100)
            },
            SS: function () {
                return st(dt(this.milliseconds() / 10), 2)
            },
            SSS: function () {
                return st(this.milliseconds(), 3)
            },
            SSSS: function () {
                return st(this.milliseconds(), 3)
            },
            Z: function () {
                var e = -this.zone(),
                    t = "+";
                if (e < 0) {
                    e = -e;
                    t = "-"
                }
                return t + st(dt(e / 60), 2) + ":" + st(dt(e) % 60, 2)
            },
            ZZ: function () {
                var e = -this.zone(),
                    t = "+";
                if (e < 0) {
                    e = -e;
                    t = "-"
                }
                return t + st(dt(e / 60), 2) + st(dt(e) % 60, 2)
            },
            z: function () {
                return this.zoneAbbr()
            },
            zz: function () {
                return this.zoneName()
            },
            X: function () {
                return this.unix()
            },
            Q: function () {
                return this.quarter()
            }
        },
        X = ["months", "monthsShort", "weekdays", "weekdaysShort", "weekdaysMin"];

    function V() {
        return {
            empty: false,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: false,
            invalidMonth: null,
            invalidFormat: false,
            userInvalidated: false,
            iso: false
        }
    }

    function K(e, t) {
        return function (i) {
            return st(e.call(this, i), t)
        }
    }

    function Z(e, t) {
        return function (i) {
            return this.lang().ordinal(e.call(this, i), t)
        }
    }
    while (U.length) {
        s = U.pop();
        G[s + "o"] = Z(G[s], s)
    }
    while (Q.length) {
        s = Q.pop();
        G[s + s] = K(G[s], 2)
    }
    G.DDDD = K(G.DDD, 3);

    function J() {}

    function et(e) {
        yt(e);
        it(this, e)
    }

    function tt(e) {
        var t = ft(e),
            i = t.year || 0,
            n = t.month || 0,
            r = t.week || 0,
            s = t.day || 0,
            a = t.hour || 0,
            o = t.minute || 0,
            l = t.second || 0,
            u = t.millisecond || 0;
        this._milliseconds = +u + l * 1e3 + o * 6e4 + a * 36e5;
        this._days = +s + r * 7;
        this._months = +n + i * 12;
        this._data = {};
        this._bubble()
    }

    function it(e, t) {
        for (var i in t) {
            if (t.hasOwnProperty(i)) {
                e[i] = t[i]
            }
        }
        if (t.hasOwnProperty("toString")) {
            e.toString = t.toString
        }
        if (t.hasOwnProperty("valueOf")) {
            e.valueOf = t.valueOf
        }
        return e
    }

    function nt(e) {
        var t = {},
            i;
        for (i in e) {
            if (e.hasOwnProperty(i) && p.hasOwnProperty(i)) {
                t[i] = e[i]
            }
        }
        return t
    }

    function rt(e) {
        if (e < 0) {
            return Math.ceil(e)
        }
        else {
            return Math.floor(e)
        }
    }

    function st(e, t, i) {
        var n = "" + Math.abs(e),
            r = e >= 0;
        while (n.length < t) {
            n = "0" + n
        }
        return (r ? i ? "+" : "" : "-") + n
    }

    function at(e, i, n, r) {
        var s = i._milliseconds,
            a = i._days,
            o = i._months,
            l, u;
        if (s) {
            e._d.setTime(+e._d + s * n)
        }
        if (a || o) {
            l = e.minute();
            u = e.hour()
        }
        if (a) {
            e.date(e.date() + a * n)
        }
        if (o) {
            e.month(e.month() + o * n)
        }
        if (s && !r) {
            t.updateOffset(e, a || o)
        }
        if (a || o) {
            e.minute(l);
            e.hour(u)
        }
    }

    function ot(e) {
        return Object.prototype.toString.call(e) === "[object Array]"
    }

    function lt(e) {
        return Object.prototype.toString.call(e) === "[object Date]" || e instanceof Date
    }

    function ut(e, t, i) {
        var n = Math.min(e.length, t.length),
            r = Math.abs(e.length - t.length),
            s = 0,
            a;
        for (a = 0; a < n; a++) {
            if (i && e[a] !== t[a] || !i && dt(e[a]) !== dt(t[a])) {
                s++
            }
        }
        return s + r
    }

    function ct(e) {
        if (e) {
            var t = e.toLowerCase().replace(/(.)s$/, "$1");
            e = Y[e] || q[t] || t
        }
        return e
    }

    function ft(e) {
        var t = {},
            i, n;
        for (n in e) {
            if (e.hasOwnProperty(n)) {
                i = ct(n);
                if (i) {
                    t[i] = e[n]
                }
            }
        }
        return t
    }

    function ht(i) {
        var n, r;
        if (i.indexOf("week") === 0) {
            n = 7;
            r = "day"
        }
        else if (i.indexOf("month") === 0) {
            n = 12;
            r = "month"
        }
        else {
            return
        }
        t[i] = function (s, a) {
            var o, l, u = t.fn._lang[i],
                c = [];
            if (typeof s === "number") {
                a = s;
                s = e
            }
            l = function (e) {
                var i = t().utc().set(r, e);
                return u.call(t.fn._lang, i, s || "")
            };
            if (a != null) {
                return l(a)
            }
            else {
                for (o = 0; o < n; o++) {
                    c.push(l(o))
                }
                return c
            }
        }
    }

    function dt(e) {
        var t = +e,
            i = 0;
        if (t !== 0 && isFinite(t)) {
            if (t >= 0) {
                i = Math.floor(t)
            }
            else {
                i = Math.ceil(t)
            }
        }
        return i
    }

    function pt(e, t) {
        return new Date(Date.UTC(e, t + 1, 0)).getUTCDate()
    }

    function gt(e, i, n) {
        return Ut(t([e, 11, 31 + i - n]), i, n).week
    }

    function mt(e) {
        return vt(e) ? 366 : 365
    }

    function vt(e) {
        return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
    }

    function yt(e) {
        var t;
        if (e._a && e._pf.overflow === -2) {
            t = e._a[o] < 0 || e._a[o] > 11 ? o : e._a[l] < 1 || e._a[l] > pt(e._a[a], e._a[o]) ? l : e._a[u] < 0 || e._a[u] > 23 ? u : e._a[c] < 0 || e._a[c] > 59 ? c : e._a[f] < 0 || e._a[f] > 59 ? f : e._a[h] < 0 || e._a[h] > 999 ? h : -1;
            if (e._pf._overflowDayOfYear && (t < a || t > l)) {
                t = l
            }
            e._pf.overflow = t
        }
    }

    function bt(e) {
        if (e._isValid == null) {
            e._isValid = !isNaN(e._d.getTime()) && e._pf.overflow < 0 && !e._pf.empty && !e._pf.invalidMonth && !e._pf.nullInput && !e._pf.invalidFormat && !e._pf.userInvalidated;
            if (e._strict) {
                e._isValid = e._isValid && e._pf.charsLeftOver === 0 && e._pf.unusedTokens.length === 0
            }
        }
        return e._isValid
    }

    function wt(e) {
        return e ? e.toLowerCase().replace("_", "-") : e
    }

    function _t(e, i) {
        return i._isUTC ? t(e).zone(i._offset || 0) : t(e).local()
    }
    it(J.prototype, {
        set: function (e) {
            var t, i;
            for (i in e) {
                t = e[i];
                if (typeof t === "function") {
                    this[i] = t
                }
                else {
                    this["_" + i] = t
                }
            }
        },
        _months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
        months: function (e) {
            return this._months[e.month()]
        },
        _monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
        monthsShort: function (e) {
            return this._monthsShort[e.month()]
        },
        monthsParse: function (e) {
            var i, n, r;
            if (!this._monthsParse) {
                this._monthsParse = []
            }
            for (i = 0; i < 12; i++) {
                if (!this._monthsParse[i]) {
                    n = t.utc([2e3, i]);
                    r = "^" + this.months(n, "") + "|^" + this.monthsShort(n, "");
                    this._monthsParse[i] = new RegExp(r.replace(".", ""), "i")
                }
                if (this._monthsParse[i].test(e)) {
                    return i
                }
            }
        },
        _weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
        weekdays: function (e) {
            return this._weekdays[e.day()]
        },
        _weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
        weekdaysShort: function (e) {
            return this._weekdaysShort[e.day()]
        },
        _weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
        weekdaysMin: function (e) {
            return this._weekdaysMin[e.day()]
        },
        weekdaysParse: function (e) {
            var i, n, r;
            if (!this._weekdaysParse) {
                this._weekdaysParse = []
            }
            for (i = 0; i < 7; i++) {
                if (!this._weekdaysParse[i]) {
                    n = t([2e3, 1]).day(i);
                    r = "^" + this.weekdays(n, "") + "|^" + this.weekdaysShort(n, "") + "|^" + this.weekdaysMin(n, "");
                    this._weekdaysParse[i] = new RegExp(r.replace(".", ""), "i")
                }
                if (this._weekdaysParse[i].test(e)) {
                    return i
                }
            }
        },
        _longDateFormat: {
            LT: "h:mm A",
            L: "MM/DD/YYYY",
            LL: "MMMM D YYYY",
            LLL: "MMMM D YYYY LT",
            LLLL: "dddd, MMMM D YYYY LT"
        },
        longDateFormat: function (e) {
            var t = this._longDateFormat[e];
            if (!t && this._longDateFormat[e.toUpperCase()]) {
                t = this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (e) {
                    return e.slice(1)
                });
                this._longDateFormat[e] = t
            }
            return t
        },
        isPM: function (e) {
            return (e + "").toLowerCase().charAt(0) === "p"
        },
        _meridiemParse: /[ap]\.?m?\.?/i,
        meridiem: function (e, t, i) {
            if (e > 11) {
                return i ? "pm" : "PM"
            }
            else {
                return i ? "am" : "AM"
            }
        },
        _calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        calendar: function (e, t) {
            var i = this._calendar[e];
            return typeof i === "function" ? i.apply(t) : i
        },
        _relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        relativeTime: function (e, t, i, n) {
            var r = this._relativeTime[i];
            return typeof r === "function" ? r(e, t, i, n) : r.replace(/%d/i, e)
        },
        pastFuture: function (e, t) {
            var i = this._relativeTime[e > 0 ? "future" : "past"];
            return typeof i === "function" ? i(t) : i.replace(/%s/i, t)
        },
        ordinal: function (e) {
            return this._ordinal.replace("%d", e)
        },
        _ordinal: "%d",
        preparse: function (e) {
            return e
        },
        postformat: function (e) {
            return e
        },
        week: function (e) {
            return Ut(e, this._week.dow, this._week.doy).week
        },
        _week: {
            dow: 0,
            doy: 6
        },
        _invalidDate: "Invalid date",
        invalidDate: function () {
            return this._invalidDate
        }
    });

    function xt(e, t) {
        t.abbr = e;
        if (!d[e]) {
            d[e] = new J
        }
        d[e].set(t);
        return d[e]
    }

    function kt(e) {
        delete d[e]
    }

    function Ct(e) {
        var i = 0,
            n, r, s, a, o = function (e) {
                if (!d[e] && g) {
                    try {
                        require("./lang/" + e)
                    }
                    catch (e) {}
                }
                return d[e]
            };
        if (!e) {
            return t.fn._lang
        }
        if (!ot(e)) {
            r = o(e);
            if (r) {
                return r
            }
            e = [e]
        }
        while (i < e.length) {
            a = wt(e[i]).split("-");
            n = a.length;
            s = wt(e[i + 1]);
            s = s ? s.split("-") : null;
            while (n > 0) {
                r = o(a.slice(0, n).join("-"));
                if (r) {
                    return r
                }
                if (s && s.length >= n && ut(a, s, true) >= n - 1) {
                    break
                }
                n--
            }
            i++
        }
        return t.fn._lang
    }

    function Mt(e) {
        if (e.match(/\[[\s\S]/)) {
            return e.replace(/^\[|\]$/g, "")
        }
        return e.replace(/\\/g, "")
    }

    function Tt(e) {
        var t = e.match(b),
            i, n;
        for (i = 0, n = t.length; i < n; i++) {
            if (G[t[i]]) {
                t[i] = G[t[i]]
            }
            else {
                t[i] = Mt(t[i])
            }
        }
        return function (r) {
            var s = "";
            for (i = 0; i < n; i++) {
                s += t[i] instanceof Function ? t[i].call(r, e) : t[i]
            }
            return s
        }
    }

    function Dt(e, t) {
        if (!e.isValid()) {
            return e.lang().invalidDate()
        }
        t = St(t, e.lang());
        if (!B[t]) {
            B[t] = Tt(t)
        }
        return B[t](e)
    }

    function St(e, t) {
        var i = 5;

        function n(e) {
            return t.longDateFormat(e) || e
        }
        w.lastIndex = 0;
        while (i >= 0 && w.test(e)) {
            e = e.replace(w, n);
            w.lastIndex = 0;
            i -= 1
        }
        return e
    }

    function Et(e, t) {
        var i, n = t._strict;
        switch (e) {
            case "DDDD":
                return $;
            case "YYYY":
            case "GGGG":
            case "gggg":
                return n ? P : k;
            case "Y":
            case "G":
            case "g":
                return N;
            case "YYYYYY":
            case "YYYYY":
            case "GGGGG":
            case "ggggg":
                return n ? z : C;
            case "S":
                if (n) {
                    return A
                }
            case "SS":
                if (n) {
                    return I
                }
            case "SSS":
                if (n) {
                    return $
                }
            case "DDD":
                return x;
            case "MMM":
            case "MMMM":
            case "dd":
            case "ddd":
            case "dddd":
                return T;
            case "a":
            case "A":
                return Ct(t._l)._meridiemParse;
            case "X":
                return E;
            case "Z":
            case "ZZ":
                return D;
            case "T":
                return S;
            case "SSSS":
                return M;
            case "MM":
            case "DD":
            case "YY":
            case "GG":
            case "gg":
            case "HH":
            case "hh":
            case "mm":
            case "ss":
            case "ww":
            case "WW":
                return n ? I : _;
            case "M":
            case "D":
            case "d":
            case "H":
            case "h":
            case "m":
            case "s":
            case "w":
            case "W":
            case "e":
            case "E":
                return _;
            default:
                i = new RegExp(Ot(Ht(e.replace("\\", "")), "i"));
                return i
        }
    }

    function At(e) {
        e = e || "";
        var t = e.match(D) || [],
            i = t[t.length - 1] || [],
            n = (i + "").match(F) || ["-", 0, 0],
            r = +(n[1] * 60) + dt(n[2]);
        return n[0] === "+" ? -r : r
    }

    function It(e, t, i) {
        var n, r = i._a;
        switch (e) {
            case "M":
            case "MM":
                if (t != null) {
                    r[o] = dt(t) - 1
                }
                break;
            case "MMM":
            case "MMMM":
                n = Ct(i._l).monthsParse(t);
                if (n != null) {
                    r[o] = n
                }
                else {
                    i._pf.invalidMonth = t
                }
                break;
            case "D":
            case "DD":
                if (t != null) {
                    r[l] = dt(t)
                }
                break;
            case "DDD":
            case "DDDD":
                if (t != null) {
                    i._dayOfYear = dt(t)
                }
                break;
            case "YY":
                r[a] = dt(t) + (dt(t) > 68 ? 1900 : 2e3);
                break;
            case "YYYY":
            case "YYYYY":
            case "YYYYYY":
                r[a] = dt(t);
                break;
            case "a":
            case "A":
                i._isPm = Ct(i._l).isPM(t);
                break;
            case "H":
            case "HH":
            case "h":
            case "hh":
                r[u] = dt(t);
                break;
            case "m":
            case "mm":
                r[c] = dt(t);
                break;
            case "s":
            case "ss":
                r[f] = dt(t);
                break;
            case "S":
            case "SS":
            case "SSS":
            case "SSSS":
                r[h] = dt(("0." + t) * 1e3);
                break;
            case "X":
                i._d = new Date(parseFloat(t) * 1e3);
                break;
            case "Z":
            case "ZZ":
                i._useUTC = true;
                i._tzm = At(t);
                break;
            case "w":
            case "ww":
            case "W":
            case "WW":
            case "d":
            case "dd":
            case "ddd":
            case "dddd":
            case "e":
            case "E":
                e = e.substr(0, 1);
            case "gg":
            case "gggg":
            case "GG":
            case "GGGG":
            case "GGGGG":
                e = e.substr(0, 2);
                if (t) {
                    i._w = i._w || {};
                    i._w[e] = t
                }
                break
        }
    }

    function $t(e) {
        var i, n, r = [],
            s, f, h, d, p, g, m, v;
        if (e._d) {
            return
        }
        s = zt(e);
        if (e._w && e._a[l] == null && e._a[o] == null) {
            h = function (i) {
                var n = parseInt(i, 10);
                return i ? i.length < 3 ? n > 68 ? 1900 + n : 2e3 + n : n : e._a[a] == null ? t().weekYear() : e._a[a]
            };
            d = e._w;
            if (d.GG != null || d.W != null || d.E != null) {
                p = Qt(h(d.GG), d.W || 1, d.E, 4, 1)
            }
            else {
                g = Ct(e._l);
                m = d.d != null ? Yt(d.d, g) : d.e != null ? parseInt(d.e, 10) + g._week.dow : 0;
                v = parseInt(d.w, 10) || 1;
                if (d.d != null && m < g._week.dow) {
                    v++
                }
                p = Qt(h(d.gg), v, m, g._week.doy, g._week.dow)
            }
            e._a[a] = p.year;
            e._dayOfYear = p.dayOfYear
        }
        if (e._dayOfYear) {
            f = e._a[a] == null ? s[a] : e._a[a];
            if (e._dayOfYear > mt(f)) {
                e._pf._overflowDayOfYear = true
            }
            n = Wt(f, 0, e._dayOfYear);
            e._a[o] = n.getUTCMonth();
            e._a[l] = n.getUTCDate()
        }
        for (i = 0; i < 3 && e._a[i] == null; ++i) {
            e._a[i] = r[i] = s[i]
        }
        for (; i < 7; i++) {
            e._a[i] = r[i] = e._a[i] == null ? i === 2 ? 1 : 0 : e._a[i]
        }
        r[u] += dt((e._tzm || 0) / 60);
        r[c] += dt((e._tzm || 0) % 60);
        e._d = (e._useUTC ? Wt : Rt).apply(null, r)
    }

    function Pt(e) {
        var t;
        if (e._d) {
            return
        }
        t = ft(e._i);
        e._a = [t.year, t.month, t.day, t.hour, t.minute, t.second, t.millisecond];
        $t(e)
    }

    function zt(e) {
        var t = new Date;
        if (e._useUTC) {
            return [t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate()]
        }
        else {
            return [t.getFullYear(), t.getMonth(), t.getDate()]
        }
    }

    function Nt(e) {
        e._a = [];
        e._pf.empty = true;
        var t = Ct(e._l),
            i = "" + e._i,
            n, r, s, a, o, l = i.length,
            c = 0;
        s = St(e._f, t).match(b) || [];
        for (n = 0; n < s.length; n++) {
            a = s[n];
            r = (i.match(Et(a, e)) || [])[0];
            if (r) {
                o = i.substr(0, i.indexOf(r));
                if (o.length > 0) {
                    e._pf.unusedInput.push(o)
                }
                i = i.slice(i.indexOf(r) + r.length);
                c += r.length
            }
            if (G[a]) {
                if (r) {
                    e._pf.empty = false
                }
                else {
                    e._pf.unusedTokens.push(a)
                }
                It(a, r, e)
            }
            else if (e._strict && !r) {
                e._pf.unusedTokens.push(a)
            }
        }
        e._pf.charsLeftOver = l - c;
        if (i.length > 0) {
            e._pf.unusedInput.push(i)
        }
        if (e._isPm && e._a[u] < 12) {
            e._a[u] += 12
        }
        if (e._isPm === false && e._a[u] === 12) {
            e._a[u] = 0
        }
        $t(e);
        yt(e)
    }

    function Ht(e) {
        return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (e, t, i, n, r) {
            return t || i || n || r
        })
    }

    function Ot(e) {
        return e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
    }

    function Lt(e) {
        var t, i, n, r, s;
        if (e._f.length === 0) {
            e._pf.invalidFormat = true;
            e._d = new Date(NaN);
            return
        }
        for (r = 0; r < e._f.length; r++) {
            s = 0;
            t = it({}, e);
            t._pf = V();
            t._f = e._f[r];
            Nt(t);
            if (!bt(t)) {
                continue
            }
            s += t._pf.charsLeftOver;
            s += t._pf.unusedTokens.length * 10;
            t._pf.score = s;
            if (n == null || s < n) {
                n = s;
                i = t
            }
        }
        it(e, i || t)
    }

    function jt(e) {
        var t, i, n = e._i,
            r = H.exec(n);
        if (r) {
            e._pf.iso = true;
            for (t = 0, i = L.length; t < i; t++) {
                if (L[t][1].exec(n)) {
                    e._f = L[t][0] + (r[6] || " ");
                    break
                }
            }
            for (t = 0, i = j.length; t < i; t++) {
                if (j[t][1].exec(n)) {
                    e._f += j[t][0];
                    break
                }
            }
            if (n.match(D)) {
                e._f += "Z"
            }
            Nt(e)
        }
        else {
            e._d = new Date(n)
        }
    }

    function Ft(t) {
        var i = t._i,
            n = m.exec(i);
        if (i === e) {
            t._d = new Date
        }
        else if (n) {
            t._d = new Date(+n[1])
        }
        else if (typeof i === "string") {
            jt(t)
        }
        else if (ot(i)) {
            t._a = i.slice(0);
            $t(t)
        }
        else if (lt(i)) {
            t._d = new Date(+i)
        }
        else if (typeof i === "object") {
            Pt(t)
        }
        else {
            t._d = new Date(i)
        }
    }

    function Rt(e, t, i, n, r, s, a) {
        var o = new Date(e, t, i, n, r, s, a);
        if (e < 1970) {
            o.setFullYear(e)
        }
        return o
    }

    function Wt(e) {
        var t = new Date(Date.UTC.apply(null, arguments));
        if (e < 1970) {
            t.setUTCFullYear(e)
        }
        return t
    }

    function Yt(e, t) {
        if (typeof e === "string") {
            if (!isNaN(e)) {
                e = parseInt(e, 10)
            }
            else {
                e = t.weekdaysParse(e);
                if (typeof e !== "number") {
                    return null
                }
            }
        }
        return e
    }

    function qt(e, t, i, n, r) {
        return r.relativeTime(t || 1, !!i, e, n)
    }

    function Bt(e, t, i) {
        var n = r(Math.abs(e) / 1e3),
            s = r(n / 60),
            a = r(s / 60),
            o = r(a / 24),
            l = r(o / 365),
            u = n < 45 && ["s", n] || s === 1 && ["m"] || s < 45 && ["mm", s] || a === 1 && ["h"] || a < 22 && ["hh", a] || o === 1 && ["d"] || o <= 25 && ["dd", o] || o <= 45 && ["M"] || o < 345 && ["MM", r(o / 30)] || l === 1 && ["y"] || ["yy", l];
        u[2] = t;
        u[3] = e > 0;
        u[4] = i;
        return qt.apply({}, u)
    }

    function Ut(e, i, n) {
        var r = n - i,
            s = n - e.day(),
            a;
        if (s > r) {
            s -= 7
        }
        if (s < r - 7) {
            s += 7
        }
        a = t(e).add("d", s);
        return {
            week: Math.ceil(a.dayOfYear() / 7),
            year: a.year()
        }
    }

    function Qt(e, t, i, n, r) {
        var s = Wt(e, 0, 1).getUTCDay(),
            a, o;
        i = i != null ? i : r;
        a = r - s + (s > n ? 7 : 0) - (s < r ? 7 : 0);
        o = 7 * (t - 1) + (i - r) + a + 1;
        return {
            year: o > 0 ? e : e - 1,
            dayOfYear: o > 0 ? o : mt(e - 1) + o
        }
    }

    function Gt(e) {
        var i = e._i,
            n = e._f;
        if (i === null) {
            return t.invalid({
                nullInput: true
            })
        }
        if (typeof i === "string") {
            e._i = i = Ct().preparse(i)
        }
        if (t.isMoment(i)) {
            e = nt(i);
            e._d = new Date(+i._d)
        }
        else if (n) {
            if (ot(n)) {
                Lt(e)
            }
            else {
                Nt(e)
            }
        }
        else {
            Ft(e)
        }
        return new et(e)
    }
    t = function (t, i, n, r) {
        var s;
        if (typeof n === "boolean") {
            r = n;
            n = e
        }
        s = {};
        s._isAMomentObject = true;
        s._i = t;
        s._f = i;
        s._l = n;
        s._strict = r;
        s._isUTC = false;
        s._pf = V();
        return Gt(s)
    };
    t.utc = function (t, i, n, r) {
        var s;
        if (typeof n === "boolean") {
            r = n;
            n = e
        }
        s = {};
        s._isAMomentObject = true;
        s._useUTC = true;
        s._isUTC = true;
        s._l = n;
        s._i = t;
        s._f = i;
        s._strict = r;
        s._pf = V();
        return Gt(s).utc()
    };
    t.unix = function (e) {
        return t(e * 1e3)
    };
    t.duration = function (e, i) {
        var n = e,
            r = null,
            s, a, o;
        if (t.isDuration(e)) {
            n = {
                ms: e._milliseconds,
                d: e._days,
                M: e._months
            }
        }
        else if (typeof e === "number") {
            n = {};
            if (i) {
                n[i] = e
            }
            else {
                n.milliseconds = e
            }
        }
        else if (!!(r = v.exec(e))) {
            s = r[1] === "-" ? -1 : 1;
            n = {
                y: 0,
                d: dt(r[l]) * s,
                h: dt(r[u]) * s,
                m: dt(r[c]) * s,
                s: dt(r[f]) * s,
                ms: dt(r[h]) * s
            }
        }
        else if (!!(r = y.exec(e))) {
            s = r[1] === "-" ? -1 : 1;
            o = function (e) {
                var t = e && parseFloat(e.replace(",", "."));
                return (isNaN(t) ? 0 : t) * s
            };
            n = {
                y: o(r[2]),
                M: o(r[3]),
                d: o(r[4]),
                h: o(r[5]),
                m: o(r[6]),
                s: o(r[7]),
                w: o(r[8])
            }
        }
        a = new tt(n);
        if (t.isDuration(e) && e.hasOwnProperty("_lang")) {
            a._lang = e._lang
        }
        return a
    };
    t.version = i;
    t.defaultFormat = O;
    t.updateOffset = function () {};
    t.lang = function (e, i) {
        var n;
        if (!e) {
            return t.fn._lang._abbr
        }
        if (i) {
            xt(wt(e), i)
        }
        else if (i === null) {
            kt(e);
            e = "en"
        }
        else if (!d[e]) {
            Ct(e)
        }
        n = t.duration.fn._lang = t.fn._lang = Ct(e);
        return n._abbr
    };
    t.langData = function (e) {
        if (e && e._lang && e._lang._abbr) {
            e = e._lang._abbr
        }
        return Ct(e)
    };
    t.isMoment = function (e) {
        return e instanceof et || e != null && e.hasOwnProperty("_isAMomentObject")
    };
    t.isDuration = function (e) {
        return e instanceof tt
    };
    for (s = X.length - 1; s >= 0; --s) {
        ht(X[s])
    }
    t.normalizeUnits = function (e) {
        return ct(e)
    };
    t.invalid = function (e) {
        var i = t.utc(NaN);
        if (e != null) {
            it(i._pf, e)
        }
        else {
            i._pf.userInvalidated = true
        }
        return i
    };
    t.parseZone = function () {
        return t.apply(null, arguments).parseZone()
    };
    it(t.fn = et.prototype, {
        clone: function () {
            return t(this)
        },
        valueOf: function () {
            return +this._d + (this._offset || 0) * 6e4
        },
        unix: function () {
            return Math.floor(+this / 1e3)
        },
        toString: function () {
            return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
        },
        toDate: function () {
            return this._offset ? new Date(+this) : this._d
        },
        toISOString: function () {
            var e = t(this).utc();
            if (0 < e.year() && e.year() <= 9999) {
                return Dt(e, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
            }
            else {
                return Dt(e, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
            }
        },
        toArray: function () {
            var e = this;
            return [e.year(), e.month(), e.date(), e.hours(), e.minutes(), e.seconds(), e.milliseconds()]
        },
        isValid: function () {
            return bt(this)
        },
        isDSTShifted: function () {
            if (this._a) {
                return this.isValid() && ut(this._a, (this._isUTC ? t.utc(this._a) : t(this._a)).toArray()) > 0
            }
            return false
        },
        parsingFlags: function () {
            return it({}, this._pf)
        },
        invalidAt: function () {
            return this._pf.overflow
        },
        utc: function () {
            return this.zone(0)
        },
        local: function () {
            this.zone(0);
            this._isUTC = false;
            return this
        },
        format: function (e) {
            var i = Dt(this, e || t.defaultFormat);
            return this.lang().postformat(i)
        },
        add: function (e, i) {
            var n;
            if (typeof e === "string") {
                n = t.duration(+i, e)
            }
            else {
                n = t.duration(e, i)
            }
            at(this, n, 1);
            return this
        },
        subtract: function (e, i) {
            var n;
            if (typeof e === "string") {
                n = t.duration(+i, e)
            }
            else {
                n = t.duration(e, i)
            }
            at(this, n, -1);
            return this
        },
        diff: function (e, i, n) {
            var r = _t(e, this),
                s = (this.zone() - r.zone()) * 6e4,
                a, o;
            i = ct(i);
            if (i === "year" || i === "month") {
                a = (this.daysInMonth() + r.daysInMonth()) * 432e5;
                o = (this.year() - r.year()) * 12 + (this.month() - r.month());
                o += (this - t(this).startOf("month") - (r - t(r).startOf("month"))) / a;
                o -= (this.zone() - t(this).startOf("month").zone() - (r.zone() - t(r).startOf("month").zone())) * 6e4 / a;
                if (i === "year") {
                    o = o / 12
                }
            }
            else {
                a = this - r;
                o = i === "second" ? a / 1e3 : i === "minute" ? a / 6e4 : i === "hour" ? a / 36e5 : i === "day" ? (a - s) / 864e5 : i === "week" ? (a - s) / 6048e5 : a
            }
            return n ? o : rt(o)
        },
        from: function (e, i) {
            return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!i)
        },
        fromNow: function (e) {
            return this.from(t(), e)
        },
        calendar: function () {
            var e = _t(t(), this).startOf("day"),
                i = this.diff(e, "days", true),
                n = i < -6 ? "sameElse" : i < -1 ? "lastWeek" : i < 0 ? "lastDay" : i < 1 ? "sameDay" : i < 2 ? "nextDay" : i < 7 ? "nextWeek" : "sameElse";
            return this.format(this.lang().calendar(n, this))
        },
        isLeapYear: function () {
            return vt(this.year())
        },
        isDST: function () {
            return this.zone() < this.clone().month(0).zone() || this.zone() < this.clone().month(5).zone()
        },
        day: function (e) {
            var t = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
            if (e != null) {
                e = Yt(e, this.lang());
                return this.add({
                    d: e - t
                })
            }
            else {
                return t
            }
        },
        month: function (e) {
            var i = this._isUTC ? "UTC" : "",
                n;
            if (e != null) {
                if (typeof e === "string") {
                    e = this.lang().monthsParse(e);
                    if (typeof e !== "number") {
                        return this
                    }
                }
                n = Math.min(this.date(), pt(this.year(), e));
                this._d["set" + i + "Month"](e, n);
                t.updateOffset(this, true);
                return this
            }
            else {
                return this._d["get" + i + "Month"]()
            }
        },
        startOf: function (e) {
            e = ct(e);
            switch (e) {
                case "year":
                    this.month(0);
                case "month":
                    this.date(1);
                case "week":
                case "isoWeek":
                case "day":
                    this.hours(0);
                case "hour":
                    this.minutes(0);
                case "minute":
                    this.seconds(0);
                case "second":
                    this.milliseconds(0)
            }
            if (e === "week") {
                this.weekday(0)
            }
            else if (e === "isoWeek") {
                this.isoWeekday(1)
            }
            return this
        },
        endOf: function (e) {
            e = ct(e);
            return this.startOf(e).add(e === "isoWeek" ? "week" : e, 1).subtract("ms", 1)
        },
        isAfter: function (e, i) {
            i = typeof i !== "undefined" ? i : "millisecond";
            return +this.clone().startOf(i) > +t(e).startOf(i)
        },
        isBefore: function (e, i) {
            i = typeof i !== "undefined" ? i : "millisecond";
            return +this.clone().startOf(i) < +t(e).startOf(i)
        },
        isSame: function (e, t) {
            t = t || "ms";
            return +this.clone().startOf(t) === +_t(e, this).startOf(t)
        },
        min: function (e) {
            e = t.apply(null, arguments);
            return e < this ? this : e
        },
        max: function (e) {
            e = t.apply(null, arguments);
            return e > this ? this : e
        },
        zone: function (e, i) {
            i = i == null ? true : false;
            var n = this._offset || 0;
            if (e != null) {
                if (typeof e === "string") {
                    e = At(e)
                }
                if (Math.abs(e) < 16) {
                    e = e * 60
                }
                this._offset = e;
                this._isUTC = true;
                if (n !== e && i) {
                    at(this, t.duration(n - e, "m"), 1, true)
                }
            }
            else {
                return this._isUTC ? n : this._d.getTimezoneOffset()
            }
            return this
        },
        zoneAbbr: function () {
            return this._isUTC ? "UTC" : ""
        },
        zoneName: function () {
            return this._isUTC ? "Coordinated Universal Time" : ""
        },
        parseZone: function () {
            if (this._tzm) {
                this.zone(this._tzm)
            }
            else if (typeof this._i === "string") {
                this.zone(this._i)
            }
            return this
        },
        hasAlignedHourOffset: function (e) {
            if (!e) {
                e = 0
            }
            else {
                e = t(e).zone()
            }
            return (this.zone() - e) % 60 === 0
        },
        daysInMonth: function () {
            return pt(this.year(), this.month())
        },
        dayOfYear: function (e) {
            var i = r((t(this).startOf("day") - t(this).startOf("year")) / 864e5) + 1;
            return e == null ? i : this.add("d", e - i)
        },
        quarter: function () {
            return Math.ceil((this.month() + 1) / 3)
        },
        weekYear: function (e) {
            var t = Ut(this, this.lang()._week.dow, this.lang()._week.doy).year;
            return e == null ? t : this.add("y", e - t)
        },
        isoWeekYear: function (e) {
            var t = Ut(this, 1, 4).year;
            return e == null ? t : this.add("y", e - t)
        },
        week: function (e) {
            var t = this.lang().week(this);
            return e == null ? t : this.add("d", (e - t) * 7)
        },
        isoWeek: function (e) {
            var t = Ut(this, 1, 4).week;
            return e == null ? t : this.add("d", (e - t) * 7)
        },
        weekday: function (e) {
            var t = (this.day() + 7 - this.lang()._week.dow) % 7;
            return e == null ? t : this.add("d", e - t)
        },
        isoWeekday: function (e) {
            return e == null ? this.day() || 7 : this.day(this.day() % 7 ? e : e - 7)
        },
        isoWeeksInYear: function () {
            return gt(this.year(), 1, 4)
        },
        weeksInYear: function () {
            var e = this._lang._week;
            return gt(this.year(), e.dow, e.doy)
        },
        get: function (e) {
            e = ct(e);
            return this[e]()
        },
        set: function (e, t) {
            e = ct(e);
            if (typeof this[e] === "function") {
                this[e](t)
            }
            return this
        },
        lang: function (t) {
            if (t === e) {
                return this._lang
            }
            else {
                this._lang = Ct(t);
                return this
            }
        }
    });

    function Xt(e, i) {
        var n = i === "date" || i === "month" || i === "year";
        t.fn[e] = t.fn[e + "s"] = function (e, r) {
            var s = this._isUTC ? "UTC" : "";
            if (r == null) {
                r = n
            }
            if (e != null) {
                this._d["set" + s + i](e);
                t.updateOffset(this, r);
                return this
            }
            else {
                return this._d["get" + s + i]()
            }
        }
    }
    for (s = 0; s < R.length; s++) {
        Xt(R[s].toLowerCase().replace(/s$/, ""), R[s])
    }
    Xt("year", "FullYear");
    t.fn.days = t.fn.day;
    t.fn.months = t.fn.month;
    t.fn.weeks = t.fn.week;
    t.fn.isoWeeks = t.fn.isoWeek;
    t.fn.toJSON = t.fn.toISOString;
    it(t.duration.fn = tt.prototype, {
        _bubble: function () {
            var e = this._milliseconds,
                t = this._days,
                i = this._months,
                n = this._data,
                r, s, a, o;
            n.milliseconds = e % 1e3;
            r = rt(e / 1e3);
            n.seconds = r % 60;
            s = rt(r / 60);
            n.minutes = s % 60;
            a = rt(s / 60);
            n.hours = a % 24;
            t += rt(a / 24);
            n.days = t % 30;
            i += rt(t / 30);
            n.months = i % 12;
            o = rt(i / 12);
            n.years = o
        },
        weeks: function () {
            return rt(this.days() / 7)
        },
        valueOf: function () {
            return this._milliseconds + this._days * 864e5 + this._months % 12 * 2592e6 + dt(this._months / 12) * 31536e6
        },
        humanize: function (e) {
            var t = +this,
                i = Bt(t, !e, this.lang());
            if (e) {
                i = this.lang().pastFuture(t, i)
            }
            return this.lang().postformat(i)
        },
        add: function (e, i) {
            var n = t.duration(e, i);
            this._milliseconds += n._milliseconds;
            this._days += n._days;
            this._months += n._months;
            this._bubble();
            return this
        },
        subtract: function (e, i) {
            var n = t.duration(e, i);
            this._milliseconds -= n._milliseconds;
            this._days -= n._days;
            this._months -= n._months;
            this._bubble();
            return this
        },
        get: function (e) {
            e = ct(e);
            return this[e.toLowerCase() + "s"]()
        },
        as: function (e) {
            e = ct(e);
            return this["as" + e.charAt(0).toUpperCase() + e.slice(1) + "s"]()
        },
        lang: t.fn.lang,
        toIsoString: function () {
            var e = Math.abs(this.years()),
                t = Math.abs(this.months()),
                i = Math.abs(this.days()),
                n = Math.abs(this.hours()),
                r = Math.abs(this.minutes()),
                s = Math.abs(this.seconds() + this.milliseconds() / 1e3);
            if (!this.asSeconds()) {
                return "P0D"
            }
            return (this.asSeconds() < 0 ? "-" : "") + "P" + (e ? e + "Y" : "") + (t ? t + "M" : "") + (i ? i + "D" : "") + (n || r || s ? "T" : "") + (n ? n + "H" : "") + (r ? r + "M" : "") + (s ? s + "S" : "")
        }
    });

    function Vt(e) {
        t.duration.fn[e] = function () {
            return this._data[e]
        }
    }

    function Kt(e, i) {
        t.duration.fn["as" + e] = function () {
            return +this / i
        }
    }
    for (s in W) {
        if (W.hasOwnProperty(s)) {
            Kt(s, W[s]);
            Vt(s.toLowerCase())
        }
    }
    Kt("Weeks", 6048e5);
    t.duration.fn.asMonths = function () {
        return (+this - this.years() * 31536e6) / 2592e6 + this.years() * 12
    };
    t.lang("en", {
        ordinal: function (e) {
            var t = e % 10,
                i = dt(e % 100 / 10) === 1 ? "th" : t === 1 ? "st" : t === 2 ? "nd" : t === 3 ? "rd" : "th";
            return e + i
        }
    });

    function Zt(e) {
        var i = false,
            r = t;
        if (typeof ender !== "undefined") {
            return
        }
        if (e) {
            n.moment = function () {
                if (!i && console && console.warn) {
                    i = true;
                    console.warn("Accessing Moment through the global scope is " + "deprecated, and will be removed in an upcoming " + "release.")
                }
                return r.apply(null, arguments)
            };
            it(n.moment, r)
        }
        else {
            n["moment"] = t
        }
    }
    if (g) {
        module.exports = t;
        Zt(true)
    }
    else if (typeof define === "function" && define.amd) {
        define("moment", function (i, n, r) {
            if (r.config && r.config() && r.config().noGlobal !== true) {
                Zt(r.config().noGlobal === e)
            }
            return t
        })
    }
    else {
        Zt()
    }
}).call(this);
t = function (e) {
    return e
};
Util = function () {
    var e = this;
    e.chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    e.startingChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    e.generateId = function (t) {
        t = t ? t : 32;
        var i = "";
        var n = e.startingChars;
        for (var r = 0; r < t; r += 1) {
            if (r > 0) n = e.chars;
            if (_.contains([7, 11, 15, 19], r)) i += "-";
            var s = Math.floor(Math.random() * n.length);
            i += n.substring(s, s + 1)
        }
        return i
    };
    e.getHost = function (e) {
        if (!_.isString(e)) return;
        var t = URI.parse(e);
        return t.hostname ? t.hostname.replace("www.", "") : e
    };
    e.truncate = function (e, t) {
        return e.length > t ? e.substring(0, t - 3) + "..." : e
    };
    e.traverseTree = function (e, t, i) {
        function n(e) {
            if (i) {
                t(e)
            }
            var r = e.children;
            if (r && (o = r.length)) {
                var s, a = -1,
                    o;
                while (++a < o) {
                    s = r[a];
                    n(s)
                }
            }
            if (!i) {
                t(e)
            }
        }
        n(e, null)
    }
};
RegExp.escape = function (e) {
    return e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
};
ItemMan = function () {
    var e = this;
    var t = false;
    var i = {};
    var n = {};

    function r() {}
    e.get = function (e) {
        return e ? i[e] : i
    };
    e.query = function (e, t) {
        var n = _.where(i, e);
        if (!t) {
            return n[0]
        }
        else {
            return n
        }
    };
    e.set = function (t) {
        if (t.id) {
            i[t.id] = t
        }
        else {
            throw "Any item should have an ID"
        }
        if (!t.parent && t.id != "Root") {
            throw "Any item should have a parent"
        }
        e.save(t);
        e.applyFilters(t);
        e.trigger("changed", t.id);
        return t
    };
    e.save = function (i) {
        var n = i ? i.type == "SuspendedTab" || i.type == "SuspendedGroup" : true;
        if (t && n) {
            var r = e.get("Suspended").data();
            chrome.storage.local.set({
                root: r
            })
        }
    };
    e.load = function (e) {
        chrome.storage.local.get("root", function (i) {
            e(i["root"]);
            t = true
        })
    };
    e.remove = function (t) {
        var n = i[t];
        if (!n) return;
        e.save(n);
        delete i[t];
        e.applyFilters();
        e.trigger("changed", t);
        return n.parent
    };
    e.addFilter = function (t, i) {
        if (t || i) {
            n[t] = i;
            e.applyFilters()
        }
    };
    e.removeFilter = function (e) {
        if (n[e]) delete n[e]
    };
    e.applyFilters = function (e) {
        e = e || _.values(i);
        if (!_.isArray(e)) e = [e];
        _.values(n).forEach(function (t) {
            t(e)
        })
    };
    r()
};
_.extend(ItemMan.prototype, Backbone.Events);
ActionMan = function () {
    var e = this;
    e._instances = {};

    function t(t) {
        e._instances["Open"] = new ActionOpen;
        e._instances["Close"] = new ActionClose;
        e._instances["Suspend"] = new ActionSuspend;
        e._instances["Restore"] = new ActionRestore;
        e._instances["Delete"] = new ActionDelete;
        e._instances["Search"] = new ActionSearch;
        e._activeNames = [];
        setTimeout(function () {
            var t = $gui.getCurrentView().getSelection();
            t.on("changed", e.update)
        }, 100)
    }
    e.update = function () {
        var t = $app.view.getSelection().get();
        _.values(e._instances).forEach(function (e) {
            e.evaluate(t)
        })
    };
    e.get = function (t) {
        return e._instances[t]
    };
    e.getActive = function () {
        return _.filter(e._instances, function (e, t) {
            return e.isEnabled()
        })
    };
    e.set = function (t, i) {
        return e._instances[t] = i
    };
    e.fire = function (t) {
        var i = e._instances[t];
        if (i != null) {
            var n = Array.prototype.slice.call(arguments, 1);
            i.apply.apply(e, n);
            $app.view.getSelection().clear()
        }
    };
    e.fireDefault = function () {
        var t = e._instances["default"];
        if (t) {
            t.apply(arguments)
        }
        return !!t
    };
    e.setDefaultAction = function (t) {
        return e._instances["default"] = e._instances[t]
    };
    t()
};
Gui = function () {
    var e = this;
    var t;

    function i() {
        t = {
            treeContainer: $("#tree-container"),
            header: $("header.header")
        };
        e._view = new TreeView({
            elementName: "tree-container"
        });
        e.toolbar = new Toolbar({
            elementName: "toolbar"
        });
        e.tips = new Tips({
            elementName: "toolTipWrapper"
        });
        e.navigation = new Navigation({
            elementName: "navigationControl"
        });
        e.ItemsStatistics = new ItemsStatistics;
        e.actionsMenu = new ActionsMenu;
        $(window).resize(function () {
            n()
        });
        n();
        $("#container").on("click", e._view.contextMenu.hide)
    }
    e.getCurrentView = function () {
        return e._view
    };

    function n() {
        var i = $(window).height() - t.header.height();
        t.treeContainer.height(i);
        if (e._view && _.isFunction(e._view.setSize)) {
            e._view.setSize(null, i)
        }
    }
    $app.on("loaded", function () {
        if ($app.getPreference("introShowed") !== true) {
            $app.setPreference("introShowed", true);
            $("#modalInfo").modal("show")
        }
    });
    i()
};
Action = function (e) {
    var t = this;

    function i(e) {
        e = e || {};
        t._label = t.name;
        t._icon = "/res/image/icon/Action.png";
        t.rightsContext = _.extend({
            noUser: true,
            userLogged: true,
            guestLogged: false,
            read: true,
            write: false,
            adminOnly: false
        }, e.rightsContext)
    }
    t.apply = function () {
        if (t.deny) return;
        if (t.execute) {
            t.execute.apply(t, arguments)
        }
    };
    t.execute = function () {};
    t.evaluate = function (e) {
        if (_.isEmpty(e)) return t.disable();
        var i = e[0].availableActions;
        if (_.contains(_.keys(i), t.name)) {
            t.enable();
            t.setLabel(i[t.name]);
            return true
        }
        else t.disable()
    };
    t.canUndo = function () {
        return !!t.undo
    };
    t.isEnabled = function () {
        return !t.deny
    };
    t.setIcon = function (e) {};
    t.setLabel = function (e, i) {
        t._label = e
    };
    t.getLabel = function () {
        return t._label
    };
    t.hide = function () {
        t.deny = true;
        t.trigger("hide")
    };
    t.show = function () {
        t.deny = false;
        t.trigger("show")
    };
    t.disable = function () {
        if (t.deny) return;
        t.deny = true;
        t.trigger("disable")
    };
    t.enable = function () {
        if (!t.deny) return;
        t.deny = false;
        t.trigger("enable")
    };
    i(e)
};
_.extend(Action.prototype, Backbone.Events);
Selection = function e() {
    var t = this;
    var i = [];
    $item.on("changed", function (e) {
        if (!$item.get(e)) t.remove(t.get(e))
    });
    t.add = function (e) {
        if (!e || e.className != "Item") return;
        var n = e.select();
        if (!_.isArray(n)) n = _.compact([n]);
        if (_.isEmpty(n)) return;
        if (!_.isEmpty(i) && n[0].type != i[0].type) t.clear();
        if (_.isEmpty(_.difference(n, i))) return;
        i = _.union(i, n);
        t.trigger("changed", e)
    };
    t.get = function (e) {
        return e ? _.findWhere(i, {
            id: e
        }) : i
    };
    t.getCount = function () {
        return i.length
    };
    t.remove = function (e) {
        if (e && e.selected) {
            var n = e.deselect();
            i = _.without(i, n);
            t.trigger("changed", e)
        }
    };
    t.clear = function () {
        if (i.length != 0) {
            i.forEach(function (e) {
                e.deselect()
            });
            i = [];
            t.trigger("changed")
        }
    }
};
_.extend(Selection.prototype, Backbone.Events);
ActionRename = function () {
    var e = this;
    e.name = "Rename";
    Action.call(this);
    e.execute = function (e) {
        alert("Action is not implemented")
    };
    e.undo = function () {}
};
ActionRename.prototype = Object.create(Action.prototype);
ActionClose = function () {
    var e = this;
    e.name = "Close";
    Action.call(this);
    e.execute = function () {
        var e = $app.view;
        var t = e.getSelection();
        var i = t.get();
        t.clear();
        i.forEach(function (e) {
            e.close()
        });
        e.update()
    };
    e.undo = function () {}
};
ActionClose.prototype = Object.create(Action.prototype);
ActionRestore = function () {
    var e = this;
    e.name = "Restore";
    Action.call(this);
    e.execute = function (e) {
        var t = $app.view;
        t.freeze();
        var i = t.getSelection();
        var n = i.get();
        i.clear();
        var r = n.length;

        function s(e) {
            if (--r > 0) return;
            t.unfreeze();
            t.update()
        }
        n.forEach(function (e) {
            e.restore(s)
        })
    };
    e.undo = function () {}
};
ActionRestore.prototype = Object.create(Action.prototype);
ActionDelete = function () {
    var e = this;
    e.name = "Delete";
    Action.call(this);
    e.execute = function (e) {
        var t = $app.view;
        var i = t.getSelection();
        var n = i.get();
        i.clear();
        n.forEach(function (e) {
            e.destruct()
        });
        t.update()
    };
    e.undo = function () {}
};
ActionDelete.prototype = Object.create(Action.prototype);
ActionOpen = function () {
    var e = this;
    e.name = "Open";
    Action.call(this);
    e.execute = function () {
        var e = $app.view;
        var t = e.getSelection();
        var i = t.get();
        i.forEach(function (e) {
            e.open()
        });
        e.update()
    };
    var t = e.evaluate.bind();
    e.evaluate = function (i) {
        if (i.length > 1) e.disable();
        else t(i)
    };
    e.undo = function () {}
};
ActionOpen.prototype = Object.create(Action.prototype);
ActionSuspend = function () {
    var e = this;
    e.name = "Suspend";
    Action.call(this);
    e.execute = function (e) {
        var t = $app.view;
        t.freeze();
        var i = t.getSelection();
        var n = i.get();
        i.clear();
        n.forEach(function (e) {
            e.suspend()
        });
        t.unfreeze();
        t.update()
    };
    e.undo = function () {}
};
ActionSuspend.prototype = Object.create(Action.prototype);
ActionSearch = function () {
    var e = this;
    e.name = "Search";
    Action.call(this);
    e.execute = function (e) {
        if (!_.isString(e)) return;
        var i = function (i) {
            t(i, e)
        };
        $item.addFilter("Search", i);
        if (e == "") $item.removeFilter("Search");
        $app.view.update()
    };
    e.evaluate = function (e) {};
    e.undo = function () {};

    function t(e, t) {
        var n = new RegExp(RegExp.escape(t), "i");
        e.forEach(function (e) {
            e.visibleCalculated = false
        });
        var r = _.where(e, {
            items: undefined
        });
        r.forEach(function (e) {
            e.visible = !!(e.name.match(n) || e.url.match(n));
            e.visibleCalculated = true
        });
        r.forEach(function (e) {
            if (e.parent) {
                i(e.parent)
            }
        });
        e.forEach(function (e) {
            delete e.visibleCalculated
        })
    }

    function i(e) {
        if (e.items) {
            var t = _.where(e.items, {
                visibleCalculated: false
            });
            if (t && t.length > 0) {
                return
            }
            else {
                var n = _.where(e.items, {
                    visible: true
                });
                e.visible = n && n.length > 0;
                e.visibleCalculated = true;
                if (e.parent) {
                    i(e.parent)
                }
            }
        }
    }
};
ActionSearch.prototype = Object.create(Action.prototype);
var Item = function (e) {
    var t = this;

    function i(e) {
        t.className = "Item";
        t.type = t.className;
        e = e || {};
        t.id = $util.generateId();
        t.name = e.name != undefined ? e.name : "Item";
        t.icon = e.icon != undefined ? e.icon : "/res/image/svg/Default.svg";
        if (e.parent != undefined && e.parent.className == "Item") t.parent = e.parent;
        t.visible = e.visible != undefined ? e.visible : true;
        t.availableActions = {};
        t.selected = false;
        t.origin = e.origin
    }
    t.update = function (e) {
        $item.applyFilters(t)
    };
    t.fade = function () {};
    t.select = function () {
        t.selected = true;
        return t
    };
    t.deselect = function () {
        t.selected = false;
        return t
    };
    t.data = function () {
        return {
            name: t.name,
            icon: t.icon,
            type: t.type
        }
    };
    t.destruct = function () {
        var e = t.parent;
        if (e) {
            e.remove(t)
        }
        $item.remove(t.id);
        return e
    };
    i(e)
};
Tab = function (e) {
    Item.call(this, e);
    var t = this;

    function i(e) {
        t.type = "Tab";
        e = e || {};
        t.id = $util.generateId();
        t.browserId = e.id;
        t.active = e.active;
        t.url = e.url;
        t.name = e.title;
        a(e.favIconUrl);
        t.availableActions = {
            Open: "Open",
            Close: "Close",
            Suspend: "Suspend"
        };
        t.defaultAction = "Open";
        if (t.name == "MindTabs") {
            delete t.availableActions.Suspend
        }
        t.parent = $item.query({
            browserId: e.windowId
        });
        t.parent.addChild(t);
        $item.set(t)
    }
    var n = t.update.bind();
    t.update = function (e) {
        n(e);
        if (e.active != undefined) t.active = e.active;
        if (e.url != undefined) t.url = e.url;
        if (e.favIconUrl != undefined) a(e.favIconUrl);
        t.name = e.title || t.name;
        t.parent.update();
        return t
    };
    var r = t.select.bind();
    t.select = function () {
        if (t.name != "MindTabs") return r()
    };
    t.open = function () {
        chrome.tabs.update(t.browserId, {
            active: true
        });
        if (!t.parent.focused) {
            t.parent.open()
        }
    };
    t.move = function (e, i) {
        var n = {};
        if (e.type == "Window") {
            n.windowId = e.id
        }
        chrome.tabs.move(t.browserId, n)
    };
    t.suspend = function () {
        var e = t.data();
        e.origin = t.id;
        var i = new SuspendedTab(e);
        t.close();
        t.destruct();
        return i
    };
    t.close = function () {
        chrome.tabs.remove(t.browserId)
    };
    var s = t.data.bind({});
    t.data = function () {
        var e = s();
        e.url = t.url;
        if (t.name != "MindTabs") return e
    };

    function a(e) {
        if (!e || e.match(/chrome:/)) {
            t.icon = "/res/image/svg/Default.svg"
        }
        else {
            t.icon = e
        }
    }
    i(e)
};
Bookmark = function (e) {
    Item.call(this, e);
    var t = this;

    function i(e) {
        t.availableActions = {
            Open: "Open",
            Rename: "Rename",
            Delete: "Delete"
        };
        t.id = $util.generateId();
        t.bookmarkId = e.id;
        t.name = e.title;
        t.isGroup = !!e.children;
        if (t.isGroup) {
            t.icon = "/res/image/svg/Folder.svg";
            t._items = [];
            t.expanded = false;
            t.modifiedAt = e.dateGroupModified;
            if (e.id == 0) {
                t.name = "Bookmarks";
                t.icon = "/res/image/icon/Bookmark.png"
            }
        }
        else {
            t.url = e.url
        }
        t.createdAt = e.dateAdded;
        t.parent = $item.query({
            bookmarkId: e.parentId
        }) || $item.get("Root");
        t.parent._items.push(t);
        $item.set(t)
    }
    t.open = function () {
        if (t.isGroup) {
            t.expanded = true
        }
        else {
            chrome.tabs.create({
                url: t.url
            })
        }
    };
    t.toggle = function () {
        t.expanded = !t.expanded
    };
    t.close = function () {
        if (t.isGroup) {
            t.expanded = false
        }
    };
    i(e)
};
Object.defineProperty(Bookmark.prototype, "items", {
    get: function () {
        if (this.expanded) {
            return this._items
        }
    }
});
Object.defineProperty(Bookmark.prototype, "itemsVisible", {
    get: function () {
        if (this.expanded) {
            return this._items
        }
    },
    set: function (e) {
        var t = this;
        e.forEach(function (e) {
            t.addChild(e, true)
        });
        this.update();
        return this._items
    }
});
Group = function (e) {
    Item.call(this, e);
    var t = this;

    function i(e) {
        t.type = "Group";
        e = e || {};
        t.isGroup = true;
        t._items = [];
        t.expanded = e.expanded != undefined ? e.expanded : true
    }
    t.update = function () {};
    t.addChild = function (e, i, n) {
        if (!_.contains(t._items, e)) {
            if (i == undefined) i = t._items.length;
            var r = e.parent;
            if (n) {
                t.expanded = true
            }
            if (r && r != t) r.remove(e);
            t._items.splice(i, 0, e);
            e.parent = t;
            t.update();
            return e
        }
    };
    t.groupByHost = function () {
        var e = _.groupBy(t.leaves, function (e) {
            return $util.getHost(e.url)
        });
        for (var i in e) {
            var n = e[i];
            if (i == "undefined") return;
            if (n.length !== 1) {
                var r = $util.getHost(n[0].url);
                n = _.reject(n, function (e) {
                    return e.type == "AutoGroup"
                });
                t._items = _.difference(t._items, n);
                var s = AutoGroup.generateId(r, t.id);
                var a = $item.get(s);
                if (!a) {
                    a = new AutoGroup({
                        url: r,
                        parent: t
                    })
                }
                else {
                    t.addChild(a)
                }
                n.forEach(function (e) {
                    a.addChild(e)
                })
            }
        }
    };
    t.reposition = function (e, i) {
        if (_.contains(t._items, e)) {
            t._items = _.without(t._items, e);
            t._items.splice(i, 0, e)
        }
    };
    t.open = function () {
        t.expanded = true;
        t.update()
    };
    t.toggle = function () {
        t.expanded = !t.expanded;
        t.update()
    };
    t.data = function () {
        var e = [];
        t._items.forEach(function (t) {
            var i = t.data();
            if (!i) return;
            if (!_.isArray(i)) i = [i];
            e = _.union(e, i)
        });
        return {
            name: t.name,
            items: e,
            expanded: t.expanded,
            type: t.type
        }
    };
    t.remove = function (e) {
        if (e && _.contains(t._items, e)) {
            t._items = _.without(t._items, e);
            e.parent = null;
            return true
        }
    };
    var n = t.destruct.bind();
    t.destruct = function () {
        if (t._items) {
            t._items.forEach(function (e) {
                e.destruct()
            })
        }
        n()
    };
    i(e)
};
Object.defineProperty(Group.prototype, "items", {
    get: function () {
        return this._items
    }
});
Object.defineProperty(Group.prototype, "leaves", {
    get: function () {
        var e = _.map(this._items, function (e) {
            return e.isGroup ? e._items : e
        });
        return _.flatten(e)
    }
});
Object.defineProperty(Group.prototype, "itemsVisible", {
    get: function () {
        if (this.expanded) {
            return _.where(this._items, {
                visible: true
            })
        }
    }
});
AutoGroup = function (e) {
    Group.call(this, e);
    var t = this;

    function i(e) {
        t.type = "AutoGroup";
        var i = t.parent = e.parent || $item.get("Root");
        t.url = t.name = e.url;
        t.id = AutoGroup.generateId(e.url, i.id);
        t.parent.addChild(t, null, true);
        $item.set(t)
    }
    t.update = function () {
        t._items.forEach(function (e) {
            if ($util.getHost(e.url) != t.url) {
                t.parent.addChild(e)
            }
        });
        if (t.parent) t.parent.update()
    };
    var n = t.addChild.bind({});
    t.addChild = function (e, i) {
        if ($util.getHost(e.url) == t.url) {
            n(e, i)
        }
    };
    t.groupByHost = function () {};
    var r = t.select.bind(t);
    t.select = function () {
        r();
        var e = _.map(t._items, function (e) {
            return e.select()
        });
        return e
    };
    var s = t.deselect.bind();
    t.deselect = function () {
        s();
        var e = _.map(t._items, function (e) {
            return e.deselect()
        });
        return e
    };
    t.data = function () {
        return _.map(t._items, function (e) {
            return e.data()
        })
    };
    var a = t.remove.bind({});
    t.remove = function (e) {
        if (a(e)) {
            if (t._items.length == 1) {
                t.parent.addChild(t._items[0]);
                t.destruct()
            }
        }
    };
    i(e)
};
AutoGroup.prototype = Object.create(Group.prototype);
Object.defineProperty(AutoGroup.prototype, "selected", {
    get: function () {
        return _.reduce(this._items, function (e, t) {
            return e && t.selected
        }, true)
    }
});
Object.defineProperty(AutoGroup.prototype, "suspended", {
    get: function () {
        return this.parent.suspended
    }
});
Object.defineProperty(AutoGroup.prototype, "defaultAction", {
    get: function () {
        return this._items[0].defaultAction
    }
});
Object.defineProperty(AutoGroup.prototype, "icon", {
    get: function () {
        if (!_.isEmpty(this._items)) return this._items[0].icon
    }
});
AutoGroup.generateId = function (e, t) {
    return e.replace(".", "_") + "-" + t
};
SuspendedTab = function (e) {
    Item.call(this, e);
    var t = this;

    function i(e) {
        t.type = "SuspendedTab";
        t.suspended = true;
        e = e || {};
        t.availableActions = {
            Restore: "Restore",
            Delete: "Delete"
        };
        t.defaultAction = "Restore";
        t.url = e.url;
        t.parent = e.parent || $item.get("Suspended");
        t.parent.addChild(t, null, true);
        $item.set(t)
    }
    var n = t.data.bind({});
    t.data = function () {
        var e = n();
        e.url = t.url;
        return e
    };
    t.restore = function (e, i) {
        t.destruct();
        var n = {
            active: false,
            url: t.url
        };
        if (i) n.windowId = i.browserId;
        chrome.tabs.create(n, function (i) {
            var n = $item.query({
                browserId: i.id
            });
            n.origin = t.id;
            e(n)
        });
        $item.save()
    };
    i(e)
};
SuspendedGroup = function (e) {
    Group.call(this, e);
    var t = this;

    function i(e) {
        t.type = "SuspendedGroup";
        t.suspended = true;
        e = e || {};
        t.availableActions = {
            Restore: "Restore",
            Delete: "Delete"
        };
        t.defaultAction = "Restore";
        t.icon = "/res/image/svg/Window.svg";
        if (!e.name) {
            t.name = (new moment).format("ddd, MMM Do, HH:mm")
        }
        t.parent = $item.get("Suspended");
        t.parent.addChild(t, null, true);
        r(e.items);
        $item.set(t)
    }
    t.update = function () {
        t.groupByHost();
        $item.save()
    };
    t.restore = function (e) {
        var i = _.map(t.leaves, function (e) {
            return e.url
        });
        var n = {
            url: i,
            left: 0
        };

        function r(i) {
            var n = $item.query({
                browserId: i.id
            });
            if (!n) {
                setTimeout(function () {
                    r(i)
                }, 100);
                return
            }
            n.origin = t.id;
            e(n)
        }
        t.destruct();
        chrome.windows.create(n, r)
    };
    var n = t.remove.bind();
    t.remove = function (e) {
        if (n(e)) {
            if (t._items.length == 0) {
                t.destruct()
            }
        }
    };

    function r(e) {
        e.forEach(function (e) {
            e.parent = t;
            new SuspendedTab(e)
        })
    }
    i(e)
};
SuspendedGroup.prototype = Object.create(Group.prototype);
SuspendedRoot = function (e) {
    if (SuspendedRoot.prototype._instance) {
        return SuspendedRoot.prototype._instance
    }
    SuspendedRoot.prototype._instance = this;
    Group.call(this, e);
    var t = this;

    function i(e) {
        t.type = "SuspendedRoot";
        t.suspended = true;
        e = e || {};
        t.availableActions = {};
        t.id = "Suspended";
        t.name = "Suspended";
        t.icon = "/res/image/svg/Suspend.svg";
        t.parent = $item.get("Root");
        t.parent.addChild(t);
        $item.set(t);
        n(e.items)
    }
    t.update = function () {
        t.groupByHost();
        $item.save()
    };
    t.select = function () {};

    function n(e) {
        if (e) {
            e.forEach(function (e) {
                if (e.type == "SuspendedTab") {
                    new SuspendedTab(e)
                }
                else if (e.type == "SuspendedGroup") {
                    new SuspendedGroup(e)
                }
            })
        }
    }
    i(e)
};
SuspendedRoot.prototype = Object.create(Group.prototype);
Window = function (e) {
    Group.call(this, e);
    var t = this;

    function i(e) {
        t.type = "Window";
        t.availableActions = {
            Open: "Open",
            Close: "Close",
            Suspend: "Suspend"
        };
        t.defaultAction = "Open";
        t.id = $util.generateId();
        t.browserId = e.id;
        n();
        t.windowType = e.type;
        t.focused = e.focused;
        t.icon = "/res/image/svg/Window.svg";
        t.parent = e.parent || $item.get("Root");
        t.parent.addChild(t);
        $item.set(t);
        r(e.tabs)
    }
    t.update = function (e) {
        e = e || {};
        t.focused = e.focused;
        n();
        t.groupByHost();
        return t
    };
    t.open = function () {
        chrome.windows.update(t.browserId, {
            focused: true
        })
    };
    t.suspend = function () {
        var e = $item.query({
            name: "MindTabs"
        });
        var i = $item.query({
            type: "Window",
            windowType: "normal"
        }, true);
        var n = !(_.contains(t._items, e) && i.length == 1);
        if (!n && t.leaves.length == 1) return;
        var r = _.without(t.leaves, e);
        var s = t.data();
        s.origin = t.id;
        var a = new SuspendedGroup(s);
        if (!n) {
            r.forEach(function (e) {
                e.close()
            })
        }
        else {
            t.close()
        }
        return a
    };
    t.close = function () {
        var e = $item.query({
            type: "Window",
            windowType: "normal"
        }, true);
        if (e.length > 1 || confirm("You are closing last window. Do you want to quit Chrome?")) {
            chrome.windows.remove(t.browserId)
        }
    };

    function n() {
        t.name = "Window: ";
        var e = _.findWhere(t.leaves, {
            active: true
        });
        if (e) {
            t.name += e.name
        }
    }

    function r(e) {
        _.each(e, function (e) {
            var i = $item.query({
                browserId: e.id
            });
            if (i) {
                t.addChild(i)
            }
            else {
                new Tab(e)
            }
        })
    }
    i(e)
};
Window.prototype = Object.create(Group.prototype);
Root = function (e) {
    if (Root.prototype._instance) {
        return Root.prototype._instance
    }
    Root.prototype._instance = this;
    Group.call(this);
    var t = this;
    var i = {};

    function n(e) {
        t.type = t.id = "Root";
        t.availableActions = {
            Close: "Close"
        };
        t.name = "Chrome";
        t.icon = "/res/image/svg/Chrome.svg";
        t.iconRound = true;
        $item.set(t);
        s();
        a()
    }
    t.update = function () {
        if (i.windows && i.suspendedItems) {
            $app.view.update(t)
        }
    };
    var r = t.addChild.bind();
    t.addChild = function (e) {
        if (r(e)) {
            var i = $item.get("Suspended");
            if (i && e != i) {
                t._items = _.without(t._items, i);
                t._items.push(i)
            }
            return e
        }
    };
    t.close = function () {
        t._items.forEach(function (e) {
            if (e.type == "Window") {
                e.close()
            }
        })
    };

    function s() {
        chrome.windows.getAll({
            populate: true
        }, function (e) {
            _.each(e, function (e) {
                new Window(e)
            });
            i.windows = true;
            t.update()
        })
    }

    function a() {
        $item.load(function (e) {
            new SuspendedRoot(e);
            i.suspendedItems = true;
            t.update()
        })
    }

    function o() {
        chrome.bookmarks.getTree(function (e) {
            function i(e) {
                e.type = "Bookmark";
                $item.set(e)
            }
            $util.traverseTree(e[0], i, true);
            var n = $item.query({
                bookmarkId: "0"
            });
            t.addChild(n)
        })
    }
    n(e)
};
Root.prototype = Object.create(Group.prototype);
Toolbar = function (e) {
    var t = this;

    function i() {
        t.p = e || {};
        t.elementName = e.elementName;
        m();
        n()
    }

    function n() {
        r();
        $("#factoryReset").click(function () {
            if (confirm("You're about total reset. All saved data and settings will be deleted. Proceed?")) {
                chrome.storage.local.clear();
                location.reload()
            }
        });
        $(".searchControl").keyup(_.debounce(function () {
            $act.fire("Search", $(this).val())
        }, 500))
    }
    
    function m() {
        $("#themeSwitch").click(function () {
            if ($("html").attr("data-theme") == "dark") {
                $("html").attr("data-theme","light");
            } else {
                $("html").attr("data-theme","dark");
            }
        });
    }

    function r() {
        $(".sidebar-toggle-box .mdi-menu").click(function (e) {
            $(".leftside-navigation").niceScroll({
                cursorcolor: "#1FB5AD",
                cursorborder: "0px solid #fff",
                cursorborderradius: "0px",
                cursorwidth: "3px"
            });
            $(".brand").toggleClass("hide-left-bar");
            $("#sidebar").toggleClass("hide-left-bar");
            if ($("#sidebar").hasClass("hide-left-bar")) {
                $(".leftside-navigation").getNiceScroll().hide()
            }
            $(".leftside-navigation").getNiceScroll().show();
            $("#main-content").toggleClass("merge-left");
            e.stopPropagation();
            if ($("#container").hasClass("open-right-panel")) {
                $("#container").removeClass("open-right-panel")
            }
            if ($(".right-sidebar").hasClass("open-right-bar")) {
                $(".right-sidebar").removeClass("open-right-bar")
            }
            if ($(".header").hasClass("merge-header")) {
                $(".header").removeClass("merge-header")
            }
            var t = $(".brand").hasClass("hide-left-bar");
            $app.setPreference("leftMenuMinimized", t)
        })
    }
    $app.on("loaded", function () {
        if ($app.getPreference("leftMenuMinimized") === true) {
            $(".sidebar-toggle-box .mdi-menu").trigger("click")
        }
    });
    i()
};
Navigation = function (e) {
    var t = this;
    var i = e.elementName;

    function n(e) {
        $("." + i).click(function () {
            $app.view.pan($(this).attr("data-direction"))
        });
        $(".transformScale").click(function () {
            $app.view.transformScale($(this).attr("data-direction"))
        });
        $(document).keydown(r)
    }

    function r(e) {
        if (e.target.tagName.toLowerCase() == "input") {
            return
        }
        var t = null,
            i = null;
        switch (e.keyCode) {
            case 37:
                t = "left";
                break;
            case 38:
                t = "up";
                break;
            case 39:
                t = "right";
                break;
            case 40:
                t = "down";
                break
        }
        if (t) {
            $app.view.pan(t);
            return false
        }
        switch (e.keyCode) {
            case 189:
                i = "zoom-out";
                break;
            case 187:
                i = "zoom-in";
                break;
            case 109:
                i = "zoom-out";
                break;
            case 107:
                i = "zoom-in";
                break
        }
        if (i) {
            $app.view.transformScale(i);
            return false
        }
    }
    n(e)
};
ContextMenu = function (e) {
    var t = this;
    var i = ["Close", "Delete", "Open", "Restore", "Suspend"];

    function n(e) {
        t.p = e;
        t.elementName = e.elementName;
        $.contextMenu({
            selector: "." + t.elementName,
            build: r
        })
    }
    t.show = function (e) {
        $("#" + e.id).contextMenu(d3.event)
    };
    t.hide = function () {
        $("#context-menu-layer").trigger("mousedown")
    };

    function r(e) {
        var t = $act.getActive();
        var n = {};
        t.forEach(function (e) {
            var t = e.name;
            if (!_.contains(i, t)) return;
            n[t] = {
                name: t,
                callback: s
            }
        });
        return {
            items: n
        }
    }

    function s(e) {
        $act.fire(e)
    }
    n(e)
};
Tips = function (e) {
    var t = this;
    t.p = e || {};
    t.elementName = e.elementName;
    t.$tipsWrapper = $("." + t.elementName);
    $("#tipsCarousel").carousel({
        interval: false
    });
    $(document).on("mouseleave", "#tipsCarousel", function () {
        $(this).carousel("pause")
    });
    $app.on("loaded", function () {
        if ($app.getPreference("hideTips") == true) {
            return
        }
        if ($app.getPreference("minimizeTips") !== true) {
            var e = $(".toolTipWrapper .mdi-arrow-expand-up");
            var i = e.parents(".panel").children(".panel-body");
            e.removeClass("mdi-arrow-expand-up").addClass("mdi-arrow-expand-down");
            i.slideDown(0, function () {
                t.$tipsWrapper.fadeIn()
            })
        }
        else {
            t.$tipsWrapper.fadeIn()
        }
    });
    t.$tipsWrapper.find("*[class*='mdi-arrow-expand-']").click(function (e) {
        e.stopPropagation();
        e.preventDefault();
        var t = $(this);
        if (!t.hasClass("panel-toggler")) {
            return
        }
        $app.setPreference("minimizeTips", !$app.getPreference("minimizeTips"))
    });
    t.$tipsWrapper.find(".mdi-bell-off-outline.panel-toggler").click(function (e) {
        e.stopPropagation();
        e.preventDefault();
        $app.setPreference("hideTips", true)
    })
};
ItemsStatistics = function () {
    function e() {
        var e = $("header .notify-row.top-menu .badge");
        var t = e.eq(0);
        var i = e.eq(1);
        var n = e.eq(2);
        $item.on("changed", function () {
            var e = $item.query({
                type: "Window"
            }, true);
            var r = $item.query({
                type: "Tab"
            }, true);
            var s = $item.query({
                type: "SuspendedTab"
            }, true);
            t.text(e.length);
            i.text(r.length);
            n.text(s.length)
        })
    }
    e()
};
ActionsMenu = function (e) {
    var t = this;
    var i = ["Close", "Delete", "Open", "Restore", "Suspend"];

    function n() {
        i.forEach(function (e) {
            var t = $act.get(e);
            t.on("enable", r);
            t.on("disable", s);
            $("#btn" + e).click(a);
            t.disable()
        })
    }

    function r() {
        var e = this;
        $("#btn" + e.name).removeClass("disabled");
        $("#btn" + e.name + " .actionName").html(e.getLabel())
    }

    function s() {
        var e = this;
        $("#btn" + e.name).addClass("disabled")
    }

    function a() {
        var e = $(this);
        $act.fire(e.attr("data-action"))
    }
    n()
};
$(document).ready(function () {
    $(function () {
        $("#nav-accordion").dcAccordion({
            eventType: "click",
            autoClose: true,
            saveState: true,
            disableLink: true,
            speed: "slow",
            showCount: false,
            autoExpand: true,
        })
    });
    var script = function () {
        $(".toggle-right-box .mdi-menu").click(function (e) {
            $("#container").toggleClass("open-right-panel");
            $(".right-sidebar").toggleClass("open-right-bar");
            $(".header").toggleClass("merge-header");
            e.stopPropagation()
        });
        $(".header,#main-content,#sidebar").click(function () {
            if ($("#container").hasClass("open-right-panel")) {
                $("#container").removeClass("open-right-panel")
            }
            if ($(".right-sidebar").hasClass("open-right-bar")) {
                $(".right-sidebar").removeClass("open-right-bar")
            }
            if ($(".header").hasClass("merge-header")) {
                $(".header").removeClass("merge-header")
            }
        });
        $(function () {
            $(".leftside-navigation").niceScroll({
                cursorcolor: "#1FB5AD",
                cursorborder: "0px solid #fff",
                cursorborderradius: "0px",
                cursorwidth: "3px"
            });
            $(".leftside-navigation").getNiceScroll().resize();
            if ($("#sidebar").hasClass("hide-left-bar")) {
                $(".leftside-navigation").getNiceScroll().hide()
            }
            $(".leftside-navigation").getNiceScroll().show();
            $(".right-stat-bar").niceScroll({
                cursorcolor: "#1FB5AD",
                cursorborder: "0px solid #fff",
                cursorborderradius: "0px",
                cursorwidth: "3px"
            })
        });
        jQuery("*[class*='mdi-arrow-expand-']").click(function () {
            var e = $(this);
            if (!e.hasClass("panel-toggler")) {
                return
            }
            var t = e.parents(".panel").children(".panel-body");
            if (e.hasClass("mdi-arrow-expand-down")) {
                e.removeClass("mdi-arrow-expand-down").addClass("mdi-arrow-expand-up");
                t.slideUp(200)
            }
            else {
                e.removeClass("mdi-arrow-expand-up").addClass("mdi-arrow-expand-down");
                t.slideDown(200)
            }
        });
        $(".panel .tools .mdi-bell-off-outline").click(function () {
            $(this).parents(".panel").remove()
        });
        $(".tooltips").tooltip();
        $(".popovers").popover();
        $(function () {
            var sparkLine = function () {
                $(".sparkline").each(function () {
                    var $data = $(this).data();
                    $data.type == "pie" && $data.sliceColors && ($data.sliceColors = eval($data.sliceColors));
                    $data.type == "bar" && $data.stackedBarColor && ($data.stackedBarColor = eval($data.stackedBarColor));
                    $data.valueSpots = {
                        "0:": $data.spotColor
                    };
                    $(this).sparkline($data.data || "html", $data);
                    if ($(this).data("compositeData")) {
                        $spdata = $(this).data("compositeConfig");
                        $spdata.composite = true;
                        $spdata.minSpotColor = false;
                        $spdata.maxSpotColor = false;
                        $spdata.valueSpots = {
                            "0:": $spdata.spotColor
                        };
                        $(this).sparkline($(this).data("compositeData"), $spdata)
                    }
                })
            };
            var sparkResize;
            $(window).resize(function (e) {
                clearTimeout(sparkResize);
                sparkResize = setTimeout(function () {
                    sparkLine(true)
                }, 500)
            });
            sparkLine(false)
        });
        $(function () {
            $(".widget-head").click(function (e) {
                var t = $(this).children(".widget-collapse").children("i");
                $(this).next(".widget-container").slideToggle("slow");
                if ($(t).hasClass("ico-minus")) {
                    $(t).removeClass("ico-minus");
                    $(t).addClass("ico-plus")
                }
                else {
                    $(t).removeClass("ico-plus");
                    $(t).addClass("ico-minus")
                }
                e.preventDefault()
            })
        })
    }()
});
DragNDrop = function (e, t) {
    var i = this;
    var n;
    var r = null;
    var s = null;
    var e = e;
    var t = t;
    var a = 200;
    var o = 20;
    var l;
    var u;
    var c = false;
    var f;
    var h;

    function d() {
        n = d3.layout.tree().children(function (e) {
            return e.items
        });
        i.listener = d3.behavior.drag().on("dragstart", p).on("drag", g).on("dragend", m)
    }
    i.overCircle = function (e) {
        r = e;
        b()
    };
    i.outCircle = function (e) {
        r = null;
        b()
    };

    function p(e) {
        if (e.type == "Root" || e.isGroup) {
            return
        }
        if (d3.event.sourceEvent.which != 1) {
            return
        }
        c = true;
        l = n.nodes(e);
        d3.event.sourceEvent.stopPropagation()
    }

    function g(e) {
        if (e.type == "Root" || e.isGroup) {
            return
        }
        if (c) {
            f = this;
            v(e, f)
        }
        var t = d3.mouse($("svg").get(0));
        if (t[0] < o) {
            h = true;
            w(this, "left")
        }
        else if (t[0] > $("svg").width() - o) {
            h = true;
            w(this, "right")
        }
        else if (t[1] < o) {
            h = true;
            w(this, "up")
        }
        else if (t[1] > $("svg").height() - o) {
            h = true;
            w(this, "down")
        }
        else {
            try {
                clearTimeout(h)
            }
            catch (e) {}
        }
        e.x0 += d3.event.dy;
        e.y0 += d3.event.dx;
        var i = d3.select(this);
        i.attr("transform", "translate(" + e.y0 + "," + e.x0 + ")");
        b()
    }

    function m(e) {
        if (e.type == "Root" || e.isGroup) {
            return
        }
        f = this;
        if (r) {
            var t = s.parent.items.indexOf(s);
            if (t > -1) {
                s.parent.items.splice(t, 1)
            }
            if (typeof r.items !== "undefined" || typeof r._items !== "undefined") {
                if (typeof r.items !== "undefined") {
                    r.items.push(s)
                }
                else {
                    r._items.push(s)
                }
            }
            else {
                r.items = [];
                r.items.push(s)
            }
            y()
        }
        else {
            y()
        }
    }

    function v(t, i) {
        s = t;
        d3.selectAll(".ghostCircle").classed("show", true);
        d3.select(i).select(".ghostCircle").attr("pointer-events", "none").classed("show", false);
        d3.select(i).classed("activeDrag", true);
        e.selectAll("g.node").sort(function (e, t) {
            if (e.id != s.id) return 1;
            else return -1
        });
        if (l.length > 1) {
            u = n.links(l);
            var r = e.selectAll("path.link").data(u, function (e) {
                return e.target.id
            }).remove();
            var a = e.selectAll("g.node").data(l, function (e) {
                return e.id
            }).filter(function (e, t) {
                if (e.id == s.id) {
                    return false
                }
                return true
            }).remove()
        }
        var o = n.links(n.nodes(s.parent));
        e.selectAll("path.link").filter(function (e, t) {
            if (e.target.id == s.id) {
                return true
            }
            return false
        }).remove();
        c = null
    }

    function y() {
        r = null;
        d3.selectAll(".ghostCircle").classed("show", false);
        d3.select(f).classed("activeDrag", false);
        d3.select(f).select(".ghostCircle").attr("pointer-events", "");
        b();
        if (s !== null) {
            $app.view.update();
            s = null
        }
    }

    function b() {
        var t = [];
        if (s !== null && r !== null) {
            t = [{
                source: {
                    x: r.y0,
                    y: r.x0
                },
                target: {
                    x: s.y0,
                    y: s.x0
                }
            }]
        }
        var i = e.selectAll(".templink").data(t);
        i.enter().append("path").attr("class", "templink").attr("d", d3.svg.diagonal()).attr("pointer-events", "none");
        i.attr("d", d3.svg.diagonal());
        i.exit().remove()
    }

    function w(i, n) {
        var r = a;
        if (h) {
            clearTimeout(h);
            translateCoords = d3.transform(e.attr("transform"));
            if (n == "left" || n == "right") {
                translateX = n == "left" ? translateCoords.translate[0] + r : translateCoords.translate[0] - r;
                translateY = translateCoords.translate[1]
            }
            else if (n == "up" || n == "down") {
                translateX = translateCoords.translate[0];
                translateY = n == "up" ? translateCoords.translate[1] + r : translateCoords.translate[1] - r
            }
            scaleX = translateCoords.scale[0];
            scaleY = translateCoords.scale[1];
            scale = t.scale();
            e.transition().attr("transform", "translate(" + translateX + "," + translateY + ")scale(" + scale + ")");
            d3.select(i).select("g.node").attr("transform", "translate(" + translateX + "," + translateY + ")");
            t.scale(t.scale());
            t.translate([translateX, translateY]);
            h = setTimeout(function () {
                w(i, r, n)
            }, 50)
        }
    }
    d()
};
TreeView = function (e) {
    var t = this;
    var i = e.elementName;
    t._frozen = false;
    var n = 0;
    var r = 30;
    var s = 0;
    var a = 750;
    var o = 250;
    var l = 60;
    var u = 200;
    var c;
    var f = new Selection;
    var h = null;
    var d = $("#" + i).width();
    var p = $("#" + i).height();
    var g = 80;
    var m, v, y, b;
    var w = d3.layout.tree().children(function (e) {
        return e.itemsVisible
    }).size([p, d]);
    var x = d3.svg.diagonal().projection(function (e) {
        return [e.y, e.x]
    });
    var k = {};
    t.contextMenu = new ContextMenu({
        elementName: "node"
    });

    function C(e) {
        d3.select("#" + i).on("click", D).on("contextmenu", S);
        m = d3.behavior.zoom().scaleExtent([.1, 3]).on("zoom", H).translate([g, p / 2]).scale(1);
        t.svg = v = d3.select("#" + i).append("svg").attr("width", d).attr("height", p).attr("class", "overlay").call(m).on("dblclick.zoom", null).on("mousewheel.zoom", null);
        y = v.append("g");
        f.on("changed", t.update)
    }
    t.setSize = function (e, i) {
        if (e) d = e;
        if (i) p = i;
        t.svg.attr("height", p);
        t.svg.attr("width", d)
    };
    t.update = function (e) {
        if (!e) e = c;
        if (!e || t._frozen) return;
        if (!c && e.id == "Root") {
            c = e;
            var i = true
        }
        var n = [1];
        var r = function (e, t) {
            t.children = t.itemsVisible;
            var i = t.itemsVisible;
            if (i && i.length > 0) {
                if (n.length <= e + 1) n.push(0);
                n[e + 1] += i.length;
                i.forEach(function (t) {
                    r(e + 1, t)
                })
            }
        };
        r(0, c);
        var s = d3.max(n) * l;
        w = w.size([s, d]);
        var u = w.nodes(c);
        u.forEach(function (e) {
            e.y = e.depth * o
        });
        var f = y.selectAll("g.node").data(u, function (e) {
            return e.id
        });
        var h = f.enter().append("g").attr("id", function (e) {
            return e.id
        }).attr("class", "node").classed("active", function (e) {
            return e.active
        }).classed("collapsed", function (e) {
            return e.expanded == false
        }).classed("suspended", function (e) {
            return e.suspended
        }).classed("selected", function (e) {
            return e.selected
        }).attr("transform", function (e) {
            var t = A(e);
            return "translate(" + t.y + "," + t.x + ")"
        }).on("dblclick", M).on("click", T).on("mouseover", function (e) {
            var t = e;
            while (true) {
                var i = p(t);
                if (!i) break;
                i.pathSvg.classed("active", true);
                t = i.data.source
            }
        }).on("mouseout", function () {
            d3.selectAll("path.link.active").classed("active", false)
        }).on("contextmenu", E);

        function p(e) {
            var t = null;
            d3.selectAll("path.link").each(function (i) {
                if (i.target.id == e.id) {
                    t = {
                        data: i,
                        pathSvg: d3.select(this)
                    }
                }
            });
            return t
        }
        h.append("circle").attr("class", "nodeCircle").attr("r", 15);
        h.append("svg:image").attr("xlink:href", function (e) {
            return e.icon
        }).attr("x", function (e) {
            return e.iconRound ? -15 : -8
        }).attr("y", function (e) {
            return e.iconRound ? -15 : -8
        }).attr("width", function (e) {
            return e.iconRound ? 30 : 16
        }).attr("height", function (e) {
            return e.iconRound ? 30 : 16
        });
        h.append("text").attr("x", P).attr("dy", ".35em").attr("dx", ".70em").attr("class", "nodeText").attr("text-anchor", z).text(function (e) {
            return I(e.name)
        }).style("fill-opacity", 0);
        h.append("circle").attr("class", "ghostCircle").attr("r", 30).attr("opacity", .2).style("fill", "red").attr("pointer-events", "mouseover");
        f.classed("faded", function (e) {
            return e.visible == false
        }).classed("active", function (e) {
            return e.active
        }).classed("collapsed", function (e) {
            return e.expanded == false
        }).classed("selected", function (e) {
            return e.selected
        }).classed("suspended", function (e) {
            return e.suspended
        });
        f.select("image").attr("xlink:href", function (e) {
            return e.selected ? "/res/image/svg/Selected.svg" : e.icon
        }).attr("x", function (e) {
            return g(e)
        }).attr("y", function (e) {
            return g(e)
        }).attr("width", function (e) {
            return m(e)
        }).attr("height", function (e) {
            return m(e)
        });

        function g(e) {
            return e && !e.selected && e.id == "Root" ? -15 : -8
        }

        function m(e) {
            return e && !e.selected && e.id == "Root" ? 30 : 16
        }
        f.select("text").attr("x", P).attr("text-anchor", z);
        var v = f.transition().duration(a).attr("transform", function (e) {
            k[e.id] = {
                x: e.x,
                y: e.y
            };
            return "translate(" + e.y + "," + e.x + ")"
        });
        v.select("text").text(function (e) {
            return I(e.name)
        }).style("fill-opacity", 1);
        v.select("circle").attr("r", 15);
        v.select("image").style("opacity", 1);
        var b = f.exit().transition().duration(a).attr("transform", function (t) {
            if (t.parent && _.contains(t.parent.items, t)) {
                return "translate(" + e.y + "," + e.x + ")"
            }
            else {
                return "translate(" + t.y + "," + t.x + ")"
            }
        }).remove();
        b.select("circle").attr("r", 0);
        b.select("text").style("fill-opacity", 0);
        b.select("image").style("opacity", 0);
        var C = w.links(u);
        var D = y.selectAll("path.link").data(C, function (e) {
            return e.target.id
        }).classed("suspended", function (e) {
            return e.target.suspended
        });
        D.enter().insert("path", "g").attr("class", "link").classed("suspended", function (e) {
            return e.target.suspended
        }).attr("d", function (t) {
            var i = {
                x: k[e.id].x,
                y: k[e.id].y
            };
            return x({
                source: i,
                target: i
            })
        });
        D.transition().duration(a).attr("d", x);
        D.exit().transition().duration(a).attr("d", S).remove();

        function S(t) {
            if (_.contains(t.source.items, t.target)) {
                var i = {
                    x: e.x,
                    y: e.y
                };
                return x({
                    source: i,
                    target: i
                })
            }
            else {
                return x({
                    source: {
                        x: t.source.x,
                        y: t.source.y
                    },
                    target: {
                        x: t.target.x,
                        y: t.target.y
                    }
                })
            }
        }
        if (i) {
            t.pan("center")
        }
    };
    t.freeze = function () {
        t._frozen = true
    };
    t.unfreeze = function () {
        t._frozen = false
    };

    function M(e) {
        f.clear();
        L(e);
        if (e.defaultAction) $act.fire(e.defaultAction)
    }

    function T(e) {
        t.contextMenu.hide();
        d3.event.stopPropagation();
        if (!$act.fireDefault()) {
            if (e.isGroup) {
                e.toggle();
                t.update(e);
                t.pan([0, k[e.id].x - e.x])
            }
            else {
                L(e)
            }
        }
    }

    function D(e) {
        t.contextMenu.hide();
        f.clear()
    }

    function S(e) {
        t.contextMenu.hide();
        d3.event.preventDefault();
        d3.event.stopPropagation();
        f.clear()
    }

    function E(e) {
        t.contextMenu.hide();
        d3.event.preventDefault();
        d3.event.stopPropagation();
        if (!e.selected) {
            f.clear();
            L(e)
        }
        if (!_.isEmpty(f.get())) t.contextMenu.show(e)
    }

    function A(e, t) {
        if (!k["Root"]) return k["Root"] = {
            x: 0,
            y: g
        };
        if (!e) return console.log("Specify item to init coords");
        if (!t) t = e.parent;
        if (!k[e.id] && e.origin) {
            return k[e.id] = k[e.origin]
        }
        if (k[t.id]) {
            k[e.id] = {
                x: k[t.id].x,
                y: k[t.id].y
            }
        }
        else if (t.type != "Root") A(e, t.parent);
        return k[e.id]
    }

    function I(e) {
        return $util.truncate(e, r)
    }

    function P(e) {
        return !_.isEmpty(e.itemsVisible) || e._items ? -30 : 10
    }

    function z(e) {
        return !_.isEmpty(e.itemsVisible) || e._items ? "end" : "start"
    }

    function N() {
        w.sort(function (e, t) {
            return t.name.toLowerCase() < e.name.toLowerCase() ? 1 : -1
        })
    }

    function H(e) {
        t.contextMenu.hide();
        var i = "translate(" + m.translate() + ")scale(" + m.scale() + ")";
        if (e) {
            y.transition().duration(a).attr("transform", i)
        }
        else {
            y.attr("transform", i)
        }
    }
    t.pan = function (e) {
        var t = m.translate();
        if (_.isString(e)) {
            var i = e;
            switch (i) {
                case "down":
                    t[1] -= u;
                    break;
                case "up":
                    t[1] += u;
                    break;
                case "right":
                    t[0] -= u;
                    break;
                case "left":
                    t[0] += u;
                    break;
                case "center":
                    t = [g, p / 2 - w.size()[0] / 2];
                    break
            }
        }
        else {
            var n = e;
            t[0] += n[0];
            t[1] += n[1]
        }
        m.translate(t);
        H(true)
    };
    t.transformScale = function (e) {
        var t = m.scale();
        switch (e) {
            case "zoom-in":
                t += .1;
                break;
            case "zoom-out":
                t -= .1;
                break
        }
        m.scale(t);
        H(true)
    };

    function O(e) {
        scale = m.scale();
        var t = -e.x;
        var i = -e.y;
        t = t * scale + d / 2;
        i = i * scale + p / 2;
        d3.select("g").transition().duration(a).attr("transform", "translate(" + t + "," + i + ")scale(" + scale + ")");
        m.scale(scale);
        m.translate([t, i])
    }

    function L(e) {
        if (e) {
            if (e.selected) {
                f.remove(e)
            }
            else {
                f.add(e)
            }
        }
    }
    t.getSelection = function () {
        return f
    };
    C(e)
};
var App = function () {
    var e = this;
    $stopMove = false;

    function t() {
        c();
        $app = e;
        $util = new Util;
        $act = new ActionMan;
        $item = new ItemMan;
        $gui = new Gui;
        e.view = $gui.getCurrentView();
        $root = new Root;
        chrome.tabs.onCreated.addListener(i);
        chrome.tabs.onUpdated.addListener(n);
        chrome.tabs.onMoved.addListener(r);
        chrome.tabs.onActivated.addListener(s);
        chrome.tabs.onAttached.addListener(a);
        chrome.tabs.onRemoved.addListener(o);
        chrome.windows.onRemoved.addListener(u);
        chrome.windows.onCreated.addListener(l)
    }
    e.getPreference = function (t) {
        return e._preferences[t]
    };
    e.setPreference = function (t, i) {
        e._preferences[t] = i;
        e.save()
    };
    e.save = function () {
        chrome.storage.local.set({
            preferences: e._preferences
        })
    };

    function i(t) {
        if (!$item.query({
                browserId: t.windowId
            })) {
            return
        }
        var i = new Tab(t);
        e.view.update(i.parent)
    }

    function n(t, i, n) {
        var r = $item.query({
            browserId: t
        });
        r.update(n);
        e.view.update(r)
    }

    function r(t, i) {
        var n = $item.query({
            browserId: i.windowId
        });
        var r = $item.query({
            browserId: t
        });
        n.reposition(r, i.toIndex);
        e.view.update(r)
    }

    function s(t) {
        var i = $item.query({
            browserId: t.windowId
        });
        if (!i) {
            setTimeout(function () {
                chrome.windows.get(t.windowId, function (e) {
                    if (e) s(t)
                })
            }, 100);
            return
        }
        var n = _.where(i.leaves, {
            active: true
        })[0];
        if (n) n.update({
            active: false
        });
        var r = $item.query({
            browserId: t.tabId
        });
        r.update({
            active: true
        });
        e.view.update(r)
    }

    function a(t, i) {
        var n = $item.query({
            browserId: t
        });
        var r;
        if (i.newWindowId) r = $item.query({
            browserId: i.newWindowId
        });
        else r = n.parent;
        if (r) {
            r.addChild(n, i.newPosition);
            e.view.update(n)
        }
    }

    function o(t, i) {
        if (i.isWindowClosing) {}
        else {
            var n = $item.query({
                browserId: t
            });
            if (n) {
                var r = n.destruct();
                e.view.update(r)
            }
        }
    }

    function l(t) {
        chrome.windows.get(t.id, {
            populate: true
        }, function (t) {
            var i = new Window(t);
            $item.get("Root").addChild(i);
            e.view.update(i)
        })
    }

    function u(t) {
        var i = $item.query({
            browserId: t
        });
        if (i) {
            i.destruct();
            e.view.update(i)
        }
    }

    function c() {
        chrome.storage.local.get("preferences", function (t) {
            e._preferences = t["preferences"] || {};
            e.trigger("loaded")
        })
    }
    t()
};
_.extend(App.prototype, Backbone.Events);
$(document).ready(function () {
    new App
});
(function () {
    var e = document.createElement("script");
    e.type = "text/javascript";
    e.async = true;
    e.src = "https://ssl.google-analytics.com/ga.js";
    var t = document.getElementsByTagName("script")[0];
    t.parentNode.insertBefore(e, t)
})();
var _gaq = _gaq || [];
_gaq.push(["_setAccount", "UA-36129102-3"]);
_gaq.push(["_trackPageview"]);
(function () {
    var e = document.createElement("script");
    e.type = "text/javascript";
    e.async = true;
    e.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
    e.src = "https://ssl.google-analytics.com/ga.js";
    var t = document.getElementsByTagName("script")[0];
    t.parentNode.insertBefore(e, t)
})();

$("html").attr("data-theme","dark");